ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = element_blank(),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(plot.margin = margin(1,1,1.5,1.2, "cm"),
panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Eng', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Prd', color = "#BFBFBF", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 25)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Eng', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Prd', color = "#BFBFBF", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Eng', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Prd', color = "#BFBFBF", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#BFBFBF", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = c(0, 6, 12, 18, 24)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(attrition_dat, aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trend for Engineering is quite different \nrelative to attrition patterns for other departments.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Finance' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Finance', color = "#808080", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'People' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'People', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("Engineering" = "#0070C0",
"Product" = "#BFBFBF",
"Finance" = "#BFBFBF",
"People" = "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, margin = margin(t = 0, r = 0, b = 20, l = 0), colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(attrition_dat, aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trend for Engineering is quite different \nrelative to attrition patterns for other departments.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Finance' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Finance', color = "#808080", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'People' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'People', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("Engineering" = "#0070C0",
"Product" = "#BFBFBF",
"Finance" = "#BFBFBF",
"People" = "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, margin = margin(t = 0, r = 0, b = 20, l = 0), colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept == 'Engineering'), aes(x = month, y = rate, group = dept)) +
ggplot2::labs(title = 'Engineering attrition has increased over the last 24 months, \nlargely due to an exponential spike in the last year.', x = 'Month', y = 'Attrition Rate') +
ggplot2::geom_line(color = '#0070C0', size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::theme(legend.position = "none",
panel.background = element_blank(),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
ggplot2::ggplot(subset(attrition_dat, dept == 'Engineering'), aes(x = month, y = rate, group = dept)) +
ggplot2::labs(title = 'Engineering attrition has increased over the last 24 months, \nlargely due to an exponential spike in the last year.', x = 'Month', y = 'Attrition Rate') +
ggplot2::geom_line(color = '#0070C0', size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 25), breaks = seq(0, 24, by = 3)) +
ggplot2::theme(legend.position = "none",
panel.background = element_blank(),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
knitr::include_graphics("/Users/craig.starbuck/Library/Mobile Documents/com~apple~CloudDocs/Documents/People Analytics Book/GitHub/peopleanalytics_book/graphics/line_graph_multi.png")
### Data Prep ###
# Set seed for reproducibility
set.seed(1234)
# Create data
months = 1:24
eng_rt = 5 - runif(1, 2.7, 2.9) + 2.41*months - .41*months^2 + .02*months^3
fin_rt = runif(1, 5, 8) - 6.97 + 15*months - .53*months^2
ppl_rt = 3 - runif(1, 5, 8) - 6.97 + 12*months - .4*months^2
prd_rt = runif(1, 5, 8) - 6.97 + 13*months - .53*months^2
# Combine dimensions and metrics within df
attrition_dat <- data.frame(month = rep(months, 4),
dept = c(rep('Engineering', length(months)),
rep('Finance', length(months)),
rep('People', length(months)),
rep('Product', length(months))),
rate = c(eng_rt,
fin_rt,
ppl_rt,
prd_rt))
### Single Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept == 'Engineering'), aes(x = month, y = rate, group = dept)) +
ggplot2::labs(title = 'Engineering attrition has increased over the last 24 months, \nlargely due to an exponential spike in the last year.', x = 'Month', y = 'Attrition Rate') +
ggplot2::geom_line(color = '#0070C0', size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 25), breaks = seq(0, 24, by = 3)) +
ggplot2::theme(legend.position = "none",
panel.background = element_blank(),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
attrition_dat$dept <- factor(attrition_dat$dept, c("Finance", "People", "Product", "Engineering"))
# Order factor for subsequent layering of lines in graph (last value takes the top position)
attrition_dat$dept <- factor(attrition_dat$dept, c("Finance", "People", "Product", "Engineering"))
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Data Prep ###
# Set seed for reproducibility
set.seed(1234)
# Create data
months = 1:24
eng_rt = 5 - runif(1, 2.7, 2.9) + 2.41*months - .41*months^2 + .02*months^3
fin_rt = runif(1, 5, 8) - 6.97 + 15*months - .53*months^2
ppl_rt = 3 - runif(1, 5, 8) - 6.97 + 12*months - .4*months^2
prd_rt = runif(1, 5, 8) - 6.97 + 13*months - .53*months^2
# Combine dimensions and metrics within df
attrition_dat <- data.frame(month = rep(months, 4),
dept = c(rep('Engineering', length(months)),
rep('Finance', length(months)),
rep('People', length(months)),
rep('Product', length(months))),
rate = c(eng_rt,
fin_rt,
ppl_rt,
prd_rt))
# Order factor for subsequent layering of lines in graph (last value takes the top position)
attrition_dat$dept <- factor(attrition_dat$dept, c("Finance", "People", "Product", "Engineering"))
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Data Prep ###
# Set seed for reproducibility
set.seed(1234)
# Create data
months = 1:24
eng_rt = 5 - runif(1, 2.7, 2.9) + 2.41*months - .41*months^2 + .02*months^3
fin_rt = runif(1, 5, 8) - 6.97 + 15*months - .53*months^2
ppl_rt = 3 - runif(1, 5, 8) - 6.97 + 12*months - .4*months^2
prd_rt = runif(1, 5, 8) - 6.97 + 13*months - .53*months^2
# Combine dimensions and metrics within df
attrition_dat <- data.frame(month = rep(months, 4),
dept = c(rep('Engineering', length(months)),
rep('Finance', length(months)),
rep('People', length(months)),
rep('Product', length(months))),
rate = c(eng_rt,
fin_rt,
ppl_rt,
prd_rt))
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Data Prep ###
# Set seed for reproducibility
set.seed(1234)
# Create data
months = 1:24
eng_rt = 5 - runif(1, 2.7, 2.9) + 2.41*months - .41*months^2 + .02*months^3
fin_rt = runif(1, 5, 8) - 6.97 + 15*months - .53*months^2
ppl_rt = 3 - runif(1, 5, 8) - 6.97 + 12*months - .4*months^2
prd_rt = runif(1, 5, 8) - 6.97 + 13*months - .53*months^2
# Combine dimensions and metrics within df
attrition_dat <- data.frame(month = rep(months, 4),
dept = c(rep('Engineering', length(months)),
rep('Finance', length(months)),
rep('People', length(months)),
rep('Product', length(months))),
rate = c(eng_rt,
fin_rt,
ppl_rt,
prd_rt))
# Ordered factor for subsequent layering of lines in graph (last value takes the top position)
attrition_dat$dept <- factor(attrition_dat$dept, c("Product", "Finance", "People", "Engineering"))
### Single Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept == 'Engineering'), aes(x = month, y = rate, group = dept)) +
ggplot2::labs(title = 'Engineering attrition has increased over the last 24 months, \nlargely due to an exponential spike in the last year.', x = 'Month', y = 'Attrition Rate') +
ggplot2::geom_line(color = '#0070C0', size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 25), breaks = seq(0, 24, by = 3)) +
ggplot2::theme(legend.position = "none",
panel.background = element_blank(),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("#0070C0", "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("Engineering" = "#0070C0",
"Product" = "#BFBFBF")
ggplot2::theme(panel.background = element_blank(),
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("Engineering" = "#0070C0",
"Product" = "#BFBFBF") +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Two Series Line Graphs ###
ggplot2::ggplot(subset(attrition_dat, dept %in% c('Engineering', 'Product')), aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trends for Engineering and Product \nare negatively correlated over the last year.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("Engineering" = "#0070C0",
"Product" = "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
### Multiple Series Line Graphs ###
ggplot2::ggplot(attrition_dat, aes(x = month, y = rate, color = dept)) +
ggplot2::labs(title = 'The attrition trend for Engineering is quite different \nrelative to attrition patterns for other departments.',
x = 'Month',
y = 'Attrition Rate',
col = 'Department') +
ggplot2::geom_line(size = 1) +
ggplot2::scale_x_continuous(limits = c(0, 27), breaks = seq(0, 24, by = 3)) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Engineering' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Engineering', color = "#0070C0", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Product' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Product', color = "#808080", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'Finance' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'Finance', color = "#808080", size = 4, hjust = 0) +
ggplot2::annotate(geom = "text", x = max(attrition_dat$month) + .5, y = attrition_dat[attrition_dat$dept == 'People' & attrition_dat$month == max(attrition_dat$month), 'rate'], label = 'People', color = "#808080", size = 4, hjust = 0) +
ggplot2::scale_color_manual(values = c("Engineering" = "#0070C0",
"Product" = "#BFBFBF",
"Finance" = "#BFBFBF",
"People" = "#BFBFBF")) +
ggplot2::theme(panel.background = element_blank(),
legend.position = "none",
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), colour = "#404040"),
axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), colour = "#404040"),
plot.title = element_text(hjust = 0, margin = margin(t = 0, r = 0, b = 20, l = 0), colour = "#404040"),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank())
knitr::include_graphics("/Users/craig.starbuck/Library/Mobile Documents/com~apple~CloudDocs/Documents/People Analytics Book/GitHub/peopleanalytics_book/graphics/line_graph_multi.png")
knitr::include_graphics("/Users/craig.starbuck/Library/Mobile Documents/com~apple~CloudDocs/Documents/People Analytics Book/GitHub/peopleanalytics_book/graphics/line_graph_double.png")
