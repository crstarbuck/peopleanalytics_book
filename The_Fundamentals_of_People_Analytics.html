<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>The Fundamentals of People Analytics: With Applications in R</title>
  <meta name="description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="The Fundamentals of People Analytics: With Applications in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="github-repo" content="crstarbuck/peopleanalytics-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The Fundamentals of People Analytics: With Applications in R" />
  
  <meta name="twitter:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  

<meta name="author" content="Craig Starbuck" />


<meta name="date" content="2022-09-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<link href="libs/tabwid-1.0.0/scrool.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">The Fundamentals of People Analytics</h1>
<h2 class="subtitle"><em>With Applications in R</em></h2>
<p class="author"><em>Craig Starbuck</em></p>
<p class="date"><em>2022-09-06</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#dedication" id="toc-dedication">Dedication</a></li>
<li><a href="#foreword" id="toc-foreword">Foreword</a></li>
<li><a href="#preface" id="toc-preface">Preface</a></li>
<li><a href="#getting-started" id="toc-getting-started"><span class="toc-section-number">1</span> Getting Started</a>
<ul>
<li><a href="#guiding-principles" id="toc-guiding-principles"><span class="toc-section-number">1.1</span> Guiding Principles</a>
<ul>
<li><a href="#pro-employee-thinking" id="toc-pro-employee-thinking"><span class="toc-section-number">1.1.1</span> Pro-Employee Thinking</a></li>
<li><a href="#quality" id="toc-quality"><span class="toc-section-number">1.1.2</span> Quality</a></li>
<li><a href="#prioritization" id="toc-prioritization"><span class="toc-section-number">1.1.3</span> Prioritization</a></li>
</ul></li>
<li><a href="#tooling" id="toc-tooling"><span class="toc-section-number">1.2</span> Tooling</a></li>
<li><a href="#data-sets" id="toc-data-sets"><span class="toc-section-number">1.3</span> Data Sets</a>
<ul>
<li><a href="#employees" id="toc-employees"><span class="toc-section-number">1.3.1</span> Employees</a></li>
<li><a href="#turnover-trends" id="toc-turnover-trends"><span class="toc-section-number">1.3.2</span> Turnover Trends</a></li>
<li><a href="#survey-responses" id="toc-survey-responses"><span class="toc-section-number">1.3.3</span> Survey Responses</a></li>
</ul></li>
<li><a href="#d-framework" id="toc-d-framework"><span class="toc-section-number">1.4</span> 4D Framework</a></li>
</ul></li>
<li><a href="#r-intro" id="toc-r-intro"><span class="toc-section-number">2</span> Introduction to R</a>
<ul>
<li><a href="#getting-started-1" id="toc-getting-started-1"><span class="toc-section-number">2.1</span> Getting Started</a></li>
<li><a href="#vectors" id="toc-vectors"><span class="toc-section-number">2.2</span> Vectors</a></li>
<li><a href="#matrices" id="toc-matrices"><span class="toc-section-number">2.3</span> Matrices</a></li>
<li><a href="#factors" id="toc-factors"><span class="toc-section-number">2.4</span> Factors</a></li>
<li><a href="#data-frames" id="toc-data-frames"><span class="toc-section-number">2.5</span> Data Frames</a></li>
<li><a href="#lists" id="toc-lists"><span class="toc-section-number">2.6</span> Lists</a></li>
<li><a href="#loops" id="toc-loops"><span class="toc-section-number">2.7</span> Loops</a></li>
<li><a href="#user-defined-functions-udfs" id="toc-user-defined-functions-udfs"><span class="toc-section-number">2.8</span> User-Defined Functions (UDFs)</a></li>
<li><a href="#graphics" id="toc-graphics"><span class="toc-section-number">2.9</span> Graphics</a></li>
<li><a href="#review-questions" id="toc-review-questions"><span class="toc-section-number">2.10</span> Review Questions</a></li>
</ul></li>
<li><a href="#sql-intro" id="toc-sql-intro"><span class="toc-section-number">3</span> Introduction to SQL</a>
<ul>
<li><a href="#basics" id="toc-basics"><span class="toc-section-number">3.1</span> Basics</a></li>
<li><a href="#aggregate-functions" id="toc-aggregate-functions"><span class="toc-section-number">3.2</span> Aggregate Functions</a></li>
<li><a href="#joins" id="toc-joins"><span class="toc-section-number">3.3</span> Joins</a></li>
<li><a href="#subqueries" id="toc-subqueries"><span class="toc-section-number">3.4</span> Subqueries</a></li>
<li><a href="#virtual-tables" id="toc-virtual-tables"><span class="toc-section-number">3.5</span> Virtual Tables</a></li>
<li><a href="#window-functions" id="toc-window-functions"><span class="toc-section-number">3.6</span> Window Functions</a></li>
<li><a href="#common-table-expressions-ctes" id="toc-common-table-expressions-ctes"><span class="toc-section-number">3.7</span> Common Table Expressions (CTEs)</a></li>
<li><a href="#review-questions-1" id="toc-review-questions-1"><span class="toc-section-number">3.8</span> Review Questions</a></li>
</ul></li>
<li><a href="#measure-sampl" id="toc-measure-sampl"><span class="toc-section-number">4</span> Measurement &amp; Sampling</a>
<ul>
<li><a href="#variable-types" id="toc-variable-types"><span class="toc-section-number">4.1</span> Variable Types</a>
<ul>
<li><a href="#independent-variables-iv" id="toc-independent-variables-iv"><span class="toc-section-number">4.1.1</span> Independent Variables (IV)</a></li>
<li><a href="#dependent-variables-dv" id="toc-dependent-variables-dv"><span class="toc-section-number">4.1.2</span> Dependent Variables (DV)</a></li>
<li><a href="#control-variables-cv" id="toc-control-variables-cv"><span class="toc-section-number">4.1.3</span> Control Variables (CV)</a></li>
<li><a href="#moderating-variables" id="toc-moderating-variables"><span class="toc-section-number">4.1.4</span> Moderating Variables</a></li>
<li><a href="#mediating-variables" id="toc-mediating-variables"><span class="toc-section-number">4.1.5</span> Mediating Variables</a></li>
<li><a href="#endogenous-vs.-exogenous-variables" id="toc-endogenous-vs.-exogenous-variables"><span class="toc-section-number">4.1.6</span> Endogenous vs. Exogenous Variables</a></li>
</ul></li>
<li><a href="#measurement-scales" id="toc-measurement-scales"><span class="toc-section-number">4.2</span> Measurement Scales</a>
<ul>
<li><a href="#discrete-variables" id="toc-discrete-variables"><span class="toc-section-number">4.2.1</span> Discrete Variables</a></li>
<li><a href="#continuous-variables" id="toc-continuous-variables"><span class="toc-section-number">4.2.2</span> Continuous Variables</a></li>
</ul></li>
<li><a href="#sampling" id="toc-sampling"><span class="toc-section-number">4.3</span> Sampling</a>
<ul>
<li><a href="#sampling-nonsampling-error" id="toc-sampling-nonsampling-error"><span class="toc-section-number">4.3.1</span> Sampling &amp; Nonsampling Error</a></li>
</ul></li>
<li><a href="#review-questions-2" id="toc-review-questions-2"><span class="toc-section-number">4.4</span> Review Questions</a></li>
</ul></li>
<li><a href="#research" id="toc-research"><span class="toc-section-number">5</span> Research Fundamentals</a>
<ul>
<li><a href="#research-questions" id="toc-research-questions"><span class="toc-section-number">5.1</span> Research Questions</a></li>
<li><a href="#research-hypotheses" id="toc-research-hypotheses"><span class="toc-section-number">5.2</span> Research Hypotheses</a></li>
<li><a href="#internal-vs.-external-validity" id="toc-internal-vs.-external-validity"><span class="toc-section-number">5.3</span> Internal vs. External Validity</a></li>
<li><a href="#research-methods" id="toc-research-methods"><span class="toc-section-number">5.4</span> Research Methods</a></li>
<li><a href="#research-designs" id="toc-research-designs"><span class="toc-section-number">5.5</span> Research Designs</a></li>
<li><a href="#review-questions-3" id="toc-review-questions-3"><span class="toc-section-number">5.6</span> Review Questions</a></li>
</ul></li>
<li><a href="#data-mgmt-prep" id="toc-data-mgmt-prep"><span class="toc-section-number">6</span> Data Management &amp; Preparation</a>
<ul>
<li><a href="#data-management" id="toc-data-management"><span class="toc-section-number">6.1</span> Data Management</a></li>
<li><a href="#data-screening-cleaning" id="toc-data-screening-cleaning"><span class="toc-section-number">6.2</span> Data Screening &amp; Cleaning</a></li>
<li><a href="#one-hot-encoding" id="toc-one-hot-encoding"><span class="toc-section-number">6.3</span> One-Hot Encoding</a></li>
<li><a href="#feature-engineering" id="toc-feature-engineering"><span class="toc-section-number">6.4</span> Feature Engineering</a></li>
<li><a href="#review-questions-4" id="toc-review-questions-4"><span class="toc-section-number">6.5</span> Review Questions</a></li>
</ul></li>
<li><a href="#desc-stats" id="toc-desc-stats"><span class="toc-section-number">7</span> Descriptive Statistics</a>
<ul>
<li><a href="#univariate-analysis" id="toc-univariate-analysis"><span class="toc-section-number">7.1</span> Univariate Analysis</a>
<ul>
<li><a href="#measures-of-central-tendency" id="toc-measures-of-central-tendency"><span class="toc-section-number">7.1.1</span> Measures of Central Tendency</a></li>
<li><a href="#measures-of-spread" id="toc-measures-of-spread"><span class="toc-section-number">7.1.2</span> Measures of Spread</a></li>
</ul></li>
<li><a href="#bivariate-analysis" id="toc-bivariate-analysis"><span class="toc-section-number">7.2</span> Bivariate Analysis</a>
<ul>
<li><a href="#covariance" id="toc-covariance"><span class="toc-section-number">7.2.1</span> Covariance</a></li>
<li><a href="#correlation" id="toc-correlation"><span class="toc-section-number">7.2.2</span> Correlation</a></li>
</ul></li>
<li><a href="#review-questions-5" id="toc-review-questions-5"><span class="toc-section-number">7.3</span> Review Questions</a></li>
</ul></li>
<li><a href="#inf-stats" id="toc-inf-stats"><span class="toc-section-number">8</span> Statistical Inference</a>
<ul>
<li><a href="#introduction-to-probability" id="toc-introduction-to-probability"><span class="toc-section-number">8.1</span> Introduction to Probability</a>
<ul>
<li><a href="#probability-distributions" id="toc-probability-distributions"><span class="toc-section-number">8.1.1</span> Probability Distributions</a></li>
<li><a href="#conditional-probability" id="toc-conditional-probability"><span class="toc-section-number">8.1.2</span> Conditional Probability</a></li>
</ul></li>
<li><a href="#central-limit-theorem" id="toc-central-limit-theorem"><span class="toc-section-number">8.2</span> Central Limit Theorem</a></li>
<li><a href="#confidence-intervals" id="toc-confidence-intervals"><span class="toc-section-number">8.3</span> Confidence Intervals</a>
<ul>
<li><a href="#hypothesis-testing" id="toc-hypothesis-testing"><span class="toc-section-number">8.3.1</span> Hypothesis Testing</a></li>
<li><a href="#alpha" id="toc-alpha"><span class="toc-section-number">8.3.2</span> Alpha</a></li>
<li><a href="#type-i-ii-errors" id="toc-type-i-ii-errors"><span class="toc-section-number">8.3.3</span> Type I &amp; II Errors</a></li>
<li><a href="#p-values" id="toc-p-values"><span class="toc-section-number">8.3.4</span> <span class="math inline">\(p\)</span>-Values</a></li>
<li><a href="#bonferroni-correction" id="toc-bonferroni-correction"><span class="toc-section-number">8.3.5</span> Bonferroni Correction</a></li>
<li><a href="#statistical-power" id="toc-statistical-power"><span class="toc-section-number">8.3.6</span> Statistical Power</a></li>
</ul></li>
<li><a href="#review-questions-6" id="toc-review-questions-6"><span class="toc-section-number">8.4</span> Review Questions</a></li>
</ul></li>
<li><a href="#aod" id="toc-aod"><span class="toc-section-number">9</span> Analysis of Differences</a>
<ul>
<li><a href="#parametric-vs.-nonparametric-tests" id="toc-parametric-vs.-nonparametric-tests"><span class="toc-section-number">9.1</span> Parametric vs. Nonparametric Tests</a></li>
<li><a href="#differences-in-discrete-data" id="toc-differences-in-discrete-data"><span class="toc-section-number">9.2</span> Differences in Discrete Data</a></li>
<li><a href="#differences-in-continuous-data" id="toc-differences-in-continuous-data"><span class="toc-section-number">9.3</span> Differences in Continuous Data</a></li>
<li><a href="#review-questions-7" id="toc-review-questions-7"><span class="toc-section-number">9.4</span> Review Questions</a></li>
</ul></li>
<li><a href="#lm" id="toc-lm"><span class="toc-section-number">10</span> Linear Regression</a>
<ul>
<li><a href="#sample-size" id="toc-sample-size"><span class="toc-section-number">10.1</span> Sample Size</a></li>
<li><a href="#simple-linear-regression" id="toc-simple-linear-regression"><span class="toc-section-number">10.2</span> Simple Linear Regression</a></li>
<li><a href="#multiple-linear-regression" id="toc-multiple-linear-regression"><span class="toc-section-number">10.3</span> Multiple Linear Regression</a></li>
<li><a href="#moderation" id="toc-moderation"><span class="toc-section-number">10.4</span> Moderation</a></li>
<li><a href="#mediation" id="toc-mediation"><span class="toc-section-number">10.5</span> Mediation</a></li>
<li><a href="#review-questions-8" id="toc-review-questions-8"><span class="toc-section-number">10.6</span> Review Questions</a></li>
</ul></li>
<li><a href="#lme" id="toc-lme"><span class="toc-section-number">11</span> Linear Model Extensions</a>
<ul>
<li><a href="#model-comparisons" id="toc-model-comparisons"><span class="toc-section-number">11.1</span> Model Comparisons</a></li>
<li><a href="#hierarchical-regression" id="toc-hierarchical-regression"><span class="toc-section-number">11.2</span> Hierarchical Regression</a></li>
<li><a href="#multilevel-models" id="toc-multilevel-models"><span class="toc-section-number">11.3</span> Multilevel Models</a></li>
<li><a href="#polynomial-regression" id="toc-polynomial-regression"><span class="toc-section-number">11.4</span> Polynomial Regression</a></li>
<li><a href="#review-questions-9" id="toc-review-questions-9"><span class="toc-section-number">11.5</span> Review Questions</a></li>
</ul></li>
<li><a href="#log" id="toc-log"><span class="toc-section-number">12</span> Logistic Regression</a>
<ul>
<li><a href="#binomial-logistic-regression" id="toc-binomial-logistic-regression"><span class="toc-section-number">12.1</span> Binomial Logistic Regression</a></li>
<li><a href="#multinomial-logistic-regression" id="toc-multinomial-logistic-regression"><span class="toc-section-number">12.2</span> Multinomial Logistic Regression</a></li>
<li><a href="#ordinal-logistic-regression" id="toc-ordinal-logistic-regression"><span class="toc-section-number">12.3</span> Ordinal Logistic Regression</a></li>
<li><a href="#review-questions-10" id="toc-review-questions-10"><span class="toc-section-number">12.4</span> Review Questions</a></li>
</ul></li>
<li><a href="#pred-mod" id="toc-pred-mod"><span class="toc-section-number">13</span> Predictive Modeling</a>
<ul>
<li><a href="#cross-validation" id="toc-cross-validation"><span class="toc-section-number">13.1</span> Cross-Validation</a></li>
<li><a href="#model-performance" id="toc-model-performance"><span class="toc-section-number">13.2</span> Model Performance</a></li>
<li><a href="#bias-variance-tradeoff" id="toc-bias-variance-tradeoff"><span class="toc-section-number">13.3</span> Bias-Variance Tradeoff</a></li>
<li><a href="#tree-based-algorithms" id="toc-tree-based-algorithms"><span class="toc-section-number">13.4</span> Tree-Based Algorithms</a></li>
<li><a href="#predictive-modeling" id="toc-predictive-modeling"><span class="toc-section-number">13.5</span> Predictive Modeling</a></li>
<li><a href="#review-questions-11" id="toc-review-questions-11"><span class="toc-section-number">13.6</span> Review Questions</a></li>
</ul></li>
<li><a href="#unsup-lrn" id="toc-unsup-lrn"><span class="toc-section-number">14</span> Unsupervised Learning</a>
<ul>
<li><a href="#factor-analysis" id="toc-factor-analysis"><span class="toc-section-number">14.1</span> Factor Analysis</a>
<ul>
<li><a href="#exploratory-factor-analysis-efa" id="toc-exploratory-factor-analysis-efa"><span class="toc-section-number">14.1.1</span> Exploratory Factor Analysis (EFA)</a></li>
<li><a href="#confirmatory-factor-analysis-cfa" id="toc-confirmatory-factor-analysis-cfa"><span class="toc-section-number">14.1.2</span> Confirmatory Factor Analysis (CFA)</a></li>
</ul></li>
<li><a href="#clustering" id="toc-clustering"><span class="toc-section-number">14.2</span> Clustering</a>
<ul>
<li><a href="#k-means-clustering" id="toc-k-means-clustering"><span class="toc-section-number">14.2.1</span> <span class="math inline">\(K\)</span>-Means Clustering</a></li>
<li><a href="#hierarchical-clustering" id="toc-hierarchical-clustering"><span class="toc-section-number">14.2.2</span> Hierarchical Clustering</a></li>
</ul></li>
<li><a href="#review-questions-12" id="toc-review-questions-12"><span class="toc-section-number">14.3</span> Review Questions</a></li>
</ul></li>
<li><a href="#data-viz" id="toc-data-viz"><span class="toc-section-number">15</span> Data Visualization</a>
<ul>
<li><a href="#best-practices" id="toc-best-practices"><span class="toc-section-number">15.1</span> Best Practices</a>
<ul>
<li><a href="#color-palette" id="toc-color-palette"><span class="toc-section-number">15.1.1</span> Color Palette</a></li>
<li><a href="#chart-borders" id="toc-chart-borders"><span class="toc-section-number">15.1.2</span> Chart Borders</a></li>
<li><a href="#zero-baseline" id="toc-zero-baseline"><span class="toc-section-number">15.1.3</span> Zero Baseline</a></li>
<li><a href="#intuitive-layout" id="toc-intuitive-layout"><span class="toc-section-number">15.1.4</span> Intuitive Layout</a></li>
<li><a href="#preattentive-attributes" id="toc-preattentive-attributes"><span class="toc-section-number">15.1.5</span> Preattentive Attributes</a></li>
</ul></li>
<li><a href="#step-by-step-visual-upgrade" id="toc-step-by-step-visual-upgrade"><span class="toc-section-number">15.2</span> Step-by-Step Visual Upgrade</a>
<ul>
<li><a href="#step-1-build-bar-chart-with-defaults" id="toc-step-1-build-bar-chart-with-defaults"><span class="toc-section-number">15.2.1</span> Step 1: Build Bar Chart with Defaults</a></li>
<li><a href="#step-2-remove-legend" id="toc-step-2-remove-legend"><span class="toc-section-number">15.2.2</span> Step 2: Remove Legend</a></li>
<li><a href="#step-3-assign-colors-strategically" id="toc-step-3-assign-colors-strategically"><span class="toc-section-number">15.2.3</span> Step 3: Assign Colors Strategically</a></li>
<li><a href="#step-4-add-axis-titles-and-margins" id="toc-step-4-add-axis-titles-and-margins"><span class="toc-section-number">15.2.4</span> Step 4: Add Axis Titles and Margins</a></li>
<li><a href="#step-5-add-left-justified-title" id="toc-step-5-add-left-justified-title"><span class="toc-section-number">15.2.5</span> Step 5: Add Left-Justified Title</a></li>
<li><a href="#step-6-remove-background" id="toc-step-6-remove-background"><span class="toc-section-number">15.2.6</span> Step 6: Remove Background</a></li>
<li><a href="#step-7-remove-axis-ticks" id="toc-step-7-remove-axis-ticks"><span class="toc-section-number">15.2.7</span> Step 7: Remove Axis Ticks</a></li>
<li><a href="#step-8-mute-titles" id="toc-step-8-mute-titles"><span class="toc-section-number">15.2.8</span> Step 8: Mute Titles</a></li>
<li><a href="#step-9-flip-axes" id="toc-step-9-flip-axes"><span class="toc-section-number">15.2.9</span> Step 9: Flip Axes</a></li>
<li><a href="#step-10-sort-data" id="toc-step-10-sort-data"><span class="toc-section-number">15.2.10</span> Step 10: Sort Data</a></li>
</ul></li>
<li><a href="#visualization-types" id="toc-visualization-types"><span class="toc-section-number">15.3</span> Visualization Types</a>
<ul>
<li><a href="#tables" id="toc-tables"><span class="toc-section-number">15.3.1</span> Tables</a></li>
<li><a href="#heatmaps" id="toc-heatmaps"><span class="toc-section-number">15.3.2</span> Heatmaps</a></li>
<li><a href="#scatterplots" id="toc-scatterplots"><span class="toc-section-number">15.3.3</span> Scatterplots</a></li>
<li><a href="#line-graphs" id="toc-line-graphs"><span class="toc-section-number">15.3.4</span> Line Graphs</a></li>
<li><a href="#slopegraphs" id="toc-slopegraphs"><span class="toc-section-number">15.3.5</span> Slopegraphs</a></li>
<li><a href="#bar-charts" id="toc-bar-charts"><span class="toc-section-number">15.3.6</span> Bar Charts</a></li>
<li><a href="#combination-charts" id="toc-combination-charts"><span class="toc-section-number">15.3.7</span> Combination Charts</a></li>
<li><a href="#waterfall-charts" id="toc-waterfall-charts"><span class="toc-section-number">15.3.8</span> Waterfall Charts</a></li>
<li><a href="#waffle-charts" id="toc-waffle-charts"><span class="toc-section-number">15.3.9</span> Waffle Charts</a></li>
<li><a href="#sankey-diagrams" id="toc-sankey-diagrams"><span class="toc-section-number">15.3.10</span> Sankey Diagrams</a></li>
<li><a href="#pie-charts" id="toc-pie-charts"><span class="toc-section-number">15.3.11</span> Pie Charts</a></li>
<li><a href="#d-visuals" id="toc-d-visuals"><span class="toc-section-number">15.3.12</span> 3D Visuals</a></li>
</ul></li>
<li><a href="#elegant-data-visualization" id="toc-elegant-data-visualization"><span class="toc-section-number">15.4</span> Elegant Data Visualization</a></li>
<li><a href="#review-questions-13" id="toc-review-questions-13"><span class="toc-section-number">15.5</span> Review Questions</a></li>
</ul></li>
<li><a href="#storytelling" id="toc-storytelling"><span class="toc-section-number">16</span> Data Storytelling</a>
<ul>
<li><a href="#know-your-audience" id="toc-know-your-audience"><span class="toc-section-number">16.1</span> Know Your Audience</a></li>
<li><a href="#production-status" id="toc-production-status"><span class="toc-section-number">16.2</span> Production Status</a></li>
<li><a href="#structural-elements" id="toc-structural-elements"><span class="toc-section-number">16.3</span> Structural Elements</a>
<ul>
<li><a href="#tldr" id="toc-tldr"><span class="toc-section-number">16.3.1</span> TL;DR</a></li>
<li><a href="#purpose" id="toc-purpose"><span class="toc-section-number">16.3.2</span> Purpose</a></li>
<li><a href="#methodology" id="toc-methodology"><span class="toc-section-number">16.3.3</span> Methodology</a></li>
<li><a href="#results" id="toc-results"><span class="toc-section-number">16.3.4</span> Results</a></li>
<li><a href="#limitations" id="toc-limitations"><span class="toc-section-number">16.3.5</span> Limitations</a></li>
<li><a href="#next-steps" id="toc-next-steps"><span class="toc-section-number">16.3.6</span> Next Steps</a></li>
<li><a href="#appendix" id="toc-appendix"><span class="toc-section-number">16.3.7</span> Appendix</a></li>
</ul></li>
<li><a href="#qa" id="toc-qa"><span class="toc-section-number">16.4</span> Q&amp;A</a></li>
<li><a href="#review-questions-14" id="toc-review-questions-14"><span class="toc-section-number">16.5</span> Review Questions</a></li>
</ul></li>
<li><a href="#bibli" id="toc-bibli"><span class="toc-section-number">17</span> Bibliography</a></li>
<li><a href="#appendix" id="toc-appendix"><span class="toc-section-number">18</span> Appendix</a>
<ul>
<li><a href="#d-framework-1" id="toc-d-framework-1"><span class="toc-section-number">18.1</span> 4D Framework</a>
<ul>
<li><a href="#discover" id="toc-discover"><span class="toc-section-number">18.1.1</span> Discover</a></li>
<li><a href="#design" id="toc-design"><span class="toc-section-number">18.1.2</span> Design</a></li>
<li><a href="#develop" id="toc-develop"><span class="toc-section-number">18.1.3</span> Develop</a></li>
<li><a href="#deliver" id="toc-deliver"><span class="toc-section-number">18.1.4</span> Deliver</a></li>
</ul></li>
<li><a href="#data-visualization" id="toc-data-visualization"><span class="toc-section-number">18.2</span> Data Visualization</a>
<ul>
<li><a href="#step-by-step-visual-upgrade-1" id="toc-step-by-step-visual-upgrade-1"><span class="toc-section-number">18.2.1</span> Step-by-Step Visual Upgrade</a></li>
<li><a href="#tables-1" id="toc-tables-1"><span class="toc-section-number">18.2.2</span> Tables</a></li>
<li><a href="#heatmaps-1" id="toc-heatmaps-1"><span class="toc-section-number">18.2.3</span> Heatmaps</a></li>
<li><a href="#scatterplots-1" id="toc-scatterplots-1"><span class="toc-section-number">18.2.4</span> Scatterplots</a></li>
<li><a href="#line-charts" id="toc-line-charts"><span class="toc-section-number">18.2.5</span> Line Charts</a></li>
<li><a href="#slopegraphs-1" id="toc-slopegraphs-1"><span class="toc-section-number">18.2.6</span> Slopegraphs</a></li>
<li><a href="#bar-charts-1" id="toc-bar-charts-1"><span class="toc-section-number">18.2.7</span> Bar Charts</a></li>
<li><a href="#combination-charts-1" id="toc-combination-charts-1"><span class="toc-section-number">18.2.8</span> Combination Charts</a></li>
<li><a href="#waterfall-charts-1" id="toc-waterfall-charts-1"><span class="toc-section-number">18.2.9</span> Waterfall Charts</a></li>
<li><a href="#waffle-charts-1" id="toc-waffle-charts-1"><span class="toc-section-number">18.2.10</span> Waffle Charts</a></li>
<li><a href="#sankey-diagrams-1" id="toc-sankey-diagrams-1"><span class="toc-section-number">18.2.11</span> Sankey Diagrams</a></li>
<li><a href="#pie-charts-1" id="toc-pie-charts-1"><span class="toc-section-number">18.2.12</span> Pie Charts</a></li>
</ul></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Fundamentals of People Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<!--chapter:end:index.Rmd-->
<div id="dedication" class="section level1 unnumbered">
<h1 class="unnumbered">Dedication</h1>
<p><em>To my family:</em></p>
<p><em>Casey, Ava, and Callum</em></p>
<p><em>for their boundless love, patience, support, and encouragement.</em></p>
<!--chapter:end:r/dedication.Rmd-->
</div>
<div id="foreword" class="section level1 unnumbered">
<h1 class="unnumbered">Foreword</h1>
<!--chapter:end:r/foreword.Rmd-->
</div>
<div id="preface" class="section level1 unnumbered">
<h1 class="unnumbered">Preface</h1>
<p>Twenty years ago, I was an unlikely author of this book. My first statistics course in college was dreadful. On day one, my professor entered our lecture hall and shared some grim stats: “Based on historical data, half of you won’t make it to the midterm and of those who do, half won’t receive a passing grade in the end.” This was both discouraging and motivating. Stats was a required course for my major so failure wasn’t an option; I had to pass. I attended weekly study sessions with classmates and studied a lot independently to learn the material. I saw no applications for statistics to anything I planned to do with my degree, so the course was reduced to memorization of equations. I passed the course with a B, and I was determined to never open another stats book.</p>
<p>You may be wondering what changed to motivate authoring a book involving this insufferable subject. The short answer is that I discovered the very important applications to a discipline I truly love, people analytics. The practical applications were altogether absent from my undergraduate stats course. As I began to think about complex and nuanced challenges in social science contexts, it became clear that I would not only need to reengage with stats; I would need to develop an authentic appreciation for the discipline. Over the past decade, I have taken the journey of ‘relearning’ statistics and developing a deep understanding of how statistical methodologies can be applied to various organizational problem statements.</p>
<p>My purpose in writing this book is to help make this content – which may unfortunately be intimidating to many – both accessible and exciting. In addition to my roles in people analytics, I have taught a graduate-level business analytics course for Finance and MBA students for many years and have developed several teaching strategies through this experience that have proven successful in demystifying statistical concepts. In addition to applying these strategies, this book makes a unique contribution in curating what I consider to be the most salient topics for people analytics practitioners along with step-by-step instructions on the technical implementations. There are many texts available for deeper treatments of individual subjects covered in this book but as of this writing, none organize within a single text both theoretical and applied instruction spanning the whole of the people analytics lifecycle.</p>
<p>Thus, this book represents my earnest attempt to provide a concise – yet adequately comprehensive – treatment of the concepts and methods I’ve found to be most important for success in people analytics. My hope is that this book will ignite within you the same passion for analytics I have discovered over the past decade.</p>
<!--chapter:end:r/preface.Rmd-->
</div>
<div id="getting-started" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Getting Started</h1>
<p><strong>People analytics</strong> is the evidence-based practice of surfacing actionable insights from data to help people and organizations thrive. Relative to other functions such as Finance and Marketing, data-informed decisions in the talent domain is a recent concept. People analytics has significant potential to transform organizations by surfacing subtle barriers to success and optimizing for both the employee experience and shareholder value.</p>
<p>The importance of the future of work, employee well-being, candidate and employee experience, worker productivity and collaboration, diversity, equity, inclusion, and belonging (DEIB), and retention of critical talent has resulted in companies making growing investments in people analytics capabilities. The nature of workforce challenges is increasingly too complex and nuanced for traditional HR skills, and the ability to extract intelligence from workforce data to inform strategic talent decisions is critically important.</p>
<p>Many organizations struggle to progress beyond basic operational reporting and dashboards, but reports and dashboards are not people analytics; they merely help inform what questions to ask based on unanticipated observations (e.g., surprising changes and trajectories) which are often the impetus for people analytics projects. The ability to think critically and reason through the available data to properly frame problems and theoretical explanations are perhaps the most essential skills for success in people analytics.</p>
<p>This book will cut through the fluff and teach you how to do stuff. Knowledge of concepts is futile without an understanding of how to apply them to people analytics use cases. The goal of this book is not to boil the ocean by implementing an exhaustive set of analysis methods in every tool. This book is guided by a goal of optimizing for the <em>fewest</em> number of concepts and applications required to successfully design and execute the <em>majority</em> of projects in the people analytics domain. While this is a technical book, it indexes more heavily on concepts and practical applications to people analytics than on mathematical underpinnings.</p>
<p>Whether you are a people leader, individual contributor, or aspiring analytics practitioner, this book is for you. This book will serve as a guide through the analytics lifecycle, curating the key concepts and applications germane to common questions and hypotheses within people analytics and providing a repeatable framework for successful analytics projects.</p>
<div id="guiding-principles" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Guiding Principles</h2>
<p>Among the many principles guiding how analytics teams operate, there are three that I have found to be universally applicable and fundamental to the success of an analytics capability.</p>
<div id="pro-employee-thinking" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Pro-Employee Thinking</h3>
<p>With great power comes great responsibility.</p>
<p>‘Pro-employee’ thinking is addressed first and for good reason. People analytics has the power to improve the lives of people in meaningful ways. Whether we are shedding light on an area of the business struggling with work-life balance or identifying developmental areas of which a group of leaders may be unaware, people analytics ideally improves employee well-being and effectively, the success of the business. It is important to embrace a pro-employee philosophy, as newfound knowledge could also have damaging repercussions if shared with the wrong people or if findings are disseminated without proper instruction on how to interpret and act.</p>
<p>One way to error on the side of caution when considering whether to disseminate insights is to ask the following: “With this knowledge, could the recipient act in a manner that is inconsistent with our pro-employee philosophy?” If the answer to this question is not a clear <em>no</em>, discuss with your HR, legal, and privacy partners and together, determine how best to proceed. The decision may be to not share the findings with the intended audience at all or to develop a proper communication and training plan to ensure there is consistency in how recipients interpret the insights and act in response. Employment Law and Data Privacy Counsel are our friends, and it is important to build strong relationships with these critical partners.</p>
</div>
<div id="quality" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Quality</h3>
<p>Garbage in, garbage out.</p>
<p>Never compromise quality for greater velocity. If quality falls to the bottom of the priority list, all other efforts are pointless. It is unlikely that requestors of data and analytics will ever ask us to take longer to prepare the information. The onus is on us as analytics professionals to level set on a reasonable timeline for analyses based on many factors that can impact the quality of analyses and insights. A single instance of compromised quality can have lasting damage on the reputation of the analytics function and cause consumers of insights to view all findings as suspect. Be sure quality is consistently a top value and guard your team’s reputation at all costs. If stakeholders lose trust, there will likely be additional data requests for validation; this is wasteful to both you and your user community and detracts from the bigger story that needs to be communicated.</p>
<p>Trustworthy results are highly dependent on the quality of data in source systems. If tight controls do not exist within source applications to support data integrity, downstream data cleaning efforts can only go so far in delivering reliable and valid findings. It is often the analysts who identify data integrity issues due to the nature of their work; therefore, close relationships should be formed with source application owners to put into place validation rules to proactively prevent the entry of erroneous data or at the very least, exception/audit reports to identify and address the issues once they are observed.</p>
</div>
<div id="prioritization" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Prioritization</h3>
<p>If everything is a priority, nothing is a priority.</p>
<p>Analyses should always have a strong value proposition – a clear expectation of how an analysis will support a General Manager, People Partner, Salesperson, or other member of the organization. Nothing in this book will increase the value of an analysis no one needs. There should be a clear business need and commitment to action before implementing an analysis. While curiosity is important, it is not a justification for an analysis.</p>
<p>It is crucial to be relentless about prioritizing strategically important projects with ‘measurable’ impact over merely interesting questions that few care to answer. According to the Pareto Principle, 80% of outcomes (or outputs) result from 20% of causes (or inputs). In analytics, it is important to be laser focused on identifying the 20% of inputs that will result in disproportionate value creation for stakeholders. There are some general customer-oriented questions I have found to be helpful for the intake process to optimize the allocation of time and resources:</p>
<ol style="list-style-type: decimal">
<li>Does this support a company or departmental objective? If not, why should this be prioritized over something else?</li>
<li>Who is the executive sponsor? Really important projects will have an executive-level sponsor.</li>
<li>What quantitative and/or qualitative data can be provided as a rationale for this request? Is there data to support doing this, or is the problem statement rooted merely in theories and anecdotes?</li>
<li>Will this mitigate risk or enable opportunities?</li>
<li>What actions can or will be taken as a result of this analysis?</li>
<li>What is the <em>scale</em> of impact (# of impacted people)?</li>
<li>What is the <em>depth</em> of impact (minimum –&gt; significant)?</li>
<li>Is this a dependency or blocker for another important deliverable?</li>
<li>What is the impact of not doing (or delaying) this?</li>
<li>What is the request date? Is there flexibility in this date and/or scope of the request (e.g., what does MVP look like)?</li>
</ol>
<p>These questions can be weighted and scored as well to support a more automated and algorithmic approach to prioritization.</p>
</div>
</div>
<div id="tooling" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Tooling</h2>
<p>Applications in this book are demonstrated in R, which is open-sourced statistical and data visualization software that can be downloaded free of charge. It is incredibly powerful, and there is a package (or at least the ability to easily create one) for every conceivable statistical method and data visualization. R is also widely used in highly regulated environments (e.g., clinical trials).</p>
<p>As of this writing, R Markdown – the dynamic document creator in which this book is written – allows for coding in 56 different languages! Therefore, debating whether to use Python, Julia, or other software is unproductive; we need not sacrifice the advantages of other languages by choosing one. All code has been written such that it is fully reproducible should you choose to implement the analysis methods on your machine (and I highly recommend you do).</p>
<p>Software such as R allows analysts to organize and annotate steps of the analytical process in a manner that is both logical and reproducible. End-to-end analytics workflows (data extraction –&gt; wrangling –&gt; cleaning –&gt; analysis –&gt; visualization) can be fully automated and executed in R without opening the script, mitigating the risk of inadvertently modifying data or formulas. This is one of the many reasons tools like Excel will not be covered in this book.</p>
<p>Please note that while R basics are covered, this is not a book on how to code. An introductory programming course is highly recommended, and this is one of the best investments you can make for a successful career in analytics. The ability to write code is now table stakes for anyone in an analytics-oriented field, as this is the best way to develop reproducible analyses. Coding is to analytics professionals what typing was for Baby Boomers decades ago; a lack of coding proficiency is a major limiting factor on one’s potential in this field.</p>
<p>The goal of the code provided in this book is not to represent the most performant, succinct, or productionalizable approaches. The code herein is intended only to facilitate understanding and demonstrate how concepts can be implemented in people analytics settings. The most performant approaches are often at odds with more intuitive alternatives. Programming expertise is important for optimizing these approaches for production applications.</p>
</div>
<div id="data-sets" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Data Sets</h2>
<p>Several data sets are leveraged throughout this book to demonstrate how to implement various analysis methods.</p>
<div id="employees" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Employees</h3>
<p>The primary data set used in this book is <code>employees</code>, which contains information on active and terminated employees. Fields are defined in the data dictionary provided below:</p>
<ul>
<li><code>employee_id</code>: Unique identifier for each employee</li>
<li><code>active</code>: Flag set to <em>Yes</em> for active employees and <em>No</em> for inactive employees</li>
<li><code>stock_opt_lvl</code>: Stock option level</li>
<li><code>trainings</code>: Number of trainings completed within the past year</li>
<li><code>age</code>: Employee age in years</li>
<li><code>commute_dist</code>: Commute distance in miles</li>
<li><code>ed_lvl</code>: Education level, where 1 = <em>High School</em>, 2 = <em>Associate Degree</em>, 3 = <em>Bachelor’s Degree</em>, 4 = <em>Master’s Degree</em>, and 5 = <em>Doctoral Degree</em></li>
<li><code>ed_field</code>: Education field associated with most recent degree</li>
<li><code>gender</code>: Gender self-identification</li>
<li><code>marital_sts</code>: Marital status</li>
<li><code>dept</code>: Department of which an employee is a member</li>
<li><code>engagement</code>: Employee engagement score measured on a 4-point Likert scale, where 1 = <em>Highly Disengaged</em> and 4 = <em>Highly Engaged</em></li>
<li><code>job_lvl</code>: Job level, where 1 = <em>Junior</em> and 5 = <em>Senior</em></li>
<li><code>job_title</code>: Job title</li>
<li><code>overtime</code>: Flag set to <em>Yes</em> if the employee is nonexempt and works overtime and <em>No</em> if the employee does not work overtime</li>
<li><code>business_travel</code>: Business travel frequency</li>
<li><code>hourly_rate</code>: Hourly rate calculated irrespective of hourly/salaried employees</li>
<li><code>daily_comp</code>: Hourly rate * 8</li>
<li><code>monthly_comp</code>: Hourly rate * 2080 / 12</li>
<li><code>annual_comp</code>: Hourly rate * 2080</li>
<li><code>ytd_leads</code>: Year-to-date (YTD) number of leads generated for employees in Sales Executive and Sales Representative positions</li>
<li><code>ytd_sales</code>: Year-to-date (YTD) sales measured in USD for employees in Sales Executive and Sales Representative positions</li>
<li><code>standard_hrs</code>: Expected working hours over a two-week payroll cycle</li>
<li><code>salary_hike_pct</code>: The percent increase in salary for the employee’s most recent compensation adjustment (whether due to a standard merit increase, off-cycle adjustment, or promotion)</li>
<li><code>perf_rating</code>: Most recent performance rating, where 1 = <em>Needs Improvement</em>, 2 = <em>Core Contributor</em>, 3 = <em>Noteworthy</em>, and 4 = <em>Exceptional</em></li>
<li><code>prior_emplr_cnt</code>: Number of prior employers</li>
<li><code>env_sat</code>: Environment satisfaction score measured on a 4-point Likert scale, where 1 = <em>Highly Dissatisfied</em> and 4 = <em>Highly Satisfied</em></li>
<li><code>job_sat</code>: Job satisfaction score measured on a 4-point Likert scale, where 1 = <em>Highly Dissatisfied</em> and 4 = <em>Highly Satisfied</em></li>
<li><code>rel_sat</code>: Colleague relationship satisfaction score measured on a 4-point Likert scale, where 1 = <em>Highly Dissatisfied</em> and 4 = <em>Highly Satisfied</em></li>
<li><code>wl_balance</code>: Work-life balance score measured on a 4-point Likert scale, where 1 = <em>Poor Balance</em> and 4 = <em>Excellent Balance</em></li>
<li><code>work_exp</code>: Total years of work experience</li>
<li><code>org_tenure</code>: Years at current company</li>
<li><code>job_tenure</code>: Years in current job</li>
<li><code>last_promo</code>: Years since last promotion</li>
<li><code>mgr_tenure</code>: Years under current manager</li>
<li><code>interview_rating</code>: Average rating across the interview loop for the onsite stage of the employee’s recruiting process, where 1 = <em>Definitely Not</em> and 5 = <em>Definitely Yes</em></li>
</ul>
<p>Most of these fields have also been broken into separate topical data sets to support data wrangling examples in Chapter @ref(sql-intro): <code>benefits</code>, <code>demographics</code>, <code>job</code>, <code>payroll</code>, <code>performance</code>, <code>prior_employment</code>, <code>status</code>, <code>survey_response</code>, and <code>tenure</code>.</p>
</div>
<div id="turnover-trends" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Turnover Trends</h3>
<p>The <code>turnover_trends</code> data set contains trailing 12-month turnover rates for each month across a five-year period. Fields are defined in the data dictionary provided below:</p>
<ul>
<li><code>year</code>: Integer representing the year, which ranges from 1 (earliest) to 5 (most recent)</li>
<li><code>month</code>: Integer representing the month, which ranges from 1 (January) to 12 (December)</li>
<li><code>job</code>: Job title</li>
<li><code>level</code>: Job level, where 1 = <em>Junior</em> and 5 = <em>Senior</em></li>
<li><code>remote</code>: Flag set to <em>Yes</em> for a remote worker and <em>No</em> for a non-remote worker</li>
<li><code>turnover_rate</code>: monthly turnover rate, calculated by dividing the termination count into the average headcount (beginning headcount + ending headcount / 2) for the respective month</li>
</ul>
</div>
<div id="survey-responses" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Survey Responses</h3>
<p>The <code>survey_responses</code> data set contains responses to survey items measured on a 5-point Likert scale, where 1 = <em>Highly Unfavorable</em> and 5 = <em>Highly Favorable</em>. Each observation represents a unique survey respondent.</p>
<ul>
<li><code>belong</code>: belonging</li>
<li><code>effort</code>: discretionary effort</li>
<li><code>incl</code>: inclusion</li>
<li><code>eng_1</code>: engagement item 1 of 3</li>
<li><code>eng_2</code>: engagement item 2 of 3</li>
<li><code>eng_3</code>: engagement item 3 of 3</li>
<li><code>happ</code>: happiness</li>
<li><code>psafety</code>: psychological safety</li>
<li><code>ret_1</code>: retention item 1 of 3</li>
<li><code>ret_2</code>: retention item 2 of 3</li>
<li><code>ret_3</code>: retention item 3 of 3</li>
<li><code>ldrshp</code>: senior leadership</li>
</ul>
</div>
</div>
<div id="d-framework" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> 4D Framework</h2>
<p>In practical analytics settings, we generally operate with respect to five primary constraints: timeliness, client expectation, accuracy, reliability, and cost (Bartlett, 2013). Adherence to a lightweight framework over hastily rushing into an analysis full of assumptions generally lends to better outcomes that respect these constraints. A framework ensures (a) the problem statement is understood and well-defined; (b) relevant literature and prior research are reviewed; (c) the measurement strategy is sound; (d) the analysis approach is suitable for the hypotheses being tested; and (e) results and conclusions are valid and communicated in a way that resonates with the target audience. This chapter will outline a recommended framework as well as other important considerations that should be reviewed early in the project.</p>
<p>It is important to develop a clear understanding of the key elements of research. Scientific research is the systematic, controlled, empirical, and critical investigation of natural phenomena guided by theory and hypotheses about the presumed relations among such phenomena (Kerlinger &amp; Lee, 2000). In other words, research is an organized and systematic way of finding answers to questions. If you are in the business of analytics, I encourage you to think of yourself as a research scientist – regardless of whether you are wearing a lab coat or have plans to publish.</p>
<p>As we will discover when exploring the laws of probability in a later chapter, there is a 1 in 20 chance of finding a significant result when none exists. Therefore, it is important to remain disciplined and methodical to protect against backward research wherein the researcher mines data for interesting relationships or differences and then develops hypotheses which they know the data support. There have been many examples of bad research over the years, which often presents in the form of p-hacking or data dredging: the act of finding data to confirm what the researcher wants to prove. This can occur by running an exhaustive number of experiments to find one that supports the hypothesis, or by using only a subset of data which features the expected patterning.</p>
<p>Academics at elite research institutions are often under immense pressure to publish in top-tier journals that have a track record of accepting new ground-breaking research over replication studies or unsupported hypotheses, and incentives have unfortunately influenced some to compromise integrity. As my PhD advisor told me many years ago, an unsupported hypothesis – while initially disappointing given the exhaustive literature review that precedes its development – is a meaningful empirical contribution given theory suggests the opposite should be true.</p>
<p>If you participated in a science fair as a child, you are likely already familiar with the scientific method. The scientific method is the standard scheme of organized and systematic inquiry, and this duly applies to people analytics practitioners in the promotion of robust analyses and recommendations.</p>
<div class="figure" style="text-align: center">
<img src="graphics/scientific_method.png" alt="The Scientific Method" width="75%" />
<p class="caption">
(#fig:sci-method)The Scientific Method
</p>
</div>
<p>An important feature of the Scientific Method, as reflected in Figure @ref(fig:sci-method), is that the process never ends. New knowledge resulting from hypothesis testing prompts a new set of questions and hypotheses, which initiates a new lifecycle of scientific inquiry.</p>
<p>Over the years, I have adapted the scientific method into a curtailed four-step framework to help ensure a rigorous and disciplined approach is applied to the end-to-end analytical process. The four steps are (a) Discover, (b) Design, (c) Develop, and (d) Deliver.</p>
<div class="figure" style="text-align: center">
<img src="graphics/4d_framework_overview.png" alt="4D Framework" width="100%" />
<p class="caption">
(#fig:4d-framework)4D Framework
</p>
</div>
<p>The 4D framework detailed in Chapter @ref(appendix) provides a method of structuring analytics projects to ensure they are anchored in well-defined problem statements and proactively consider the key elements at each stage of the analytics lifecycle to increase the likelihood of meaningful ROI.</p>
<!--chapter:end:r/01_getting_started.Rmd-->
</div>
</div>
<div id="r-intro" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Introduction to R</h1>
<p>This chapter covers how to install R, R Studio, and required packages for replicating examples in this book. This chapter also covers R basics such as objects, data structures, and data types that are fundamental to working in R. In addition, many common functions will be covered in this chapter, and many more will be introduced throughout later chapters.</p>
<div id="getting-started-1" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Getting Started</h2>
<p>Run and test your code frequently. Writing a significant number of lines before testing will make debugging your code far more difficult and time-intensive than it needs to be.</p>
<p><strong>Installing R</strong></p>
<p>R can be compiled and ran on a variety of platforms including UNIX, Windows, and MacOS. R can be downloaded here: <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a></p>
<p>When installing R, you will need to select a CRAN mirror. The <strong>Comprehensive R Archive Network (CRAN)</strong> is a network of servers around the world that store identical, current versions of code and documentation for R. You should select the CRAN mirror nearest you to minimize network load.</p>
<p><strong>Installing R IDE</strong></p>
<p><strong>R Studio</strong>, recently rebranded <strong>Posit</strong> to reflect the scientific research it endeavors to support (i.e., testing <em>posited</em> hypotheses), is an <strong>Integrated Development Environment (IDE)</strong> for R. This IDE provides a console with syntax editing that is helpful for debugging code as well as tools for plotting, history, and workspace management. Both open source and commercial editions are available, but the open-source option is sufficient for replicating everything in this book.</p>
<p>R Studio can be downloaded here: <a href="https://www.rstudio.com/products/rstudio/download/#download" class="uri">https://www.rstudio.com/products/rstudio/download/#download</a></p>
<p><strong>Installing Packages</strong></p>
<p>Libraries from several R packages will be utilized in this book. The line of code below can be executed within either the R console or IDE to install all at once:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;corrplot&quot;</span>, <span class="st">&quot;psych&quot;</span>, <span class="st">&quot;moments&quot;</span>, <span class="st">&quot;ggpubr&quot;</span>, <span class="st">&quot;ggdist&quot;</span>, <span class="st">&quot;GGally&quot;</span>, <span class="st">&quot;networkD3&quot;</span>, <span class="st">&quot;sqldf&quot;</span>, <span class="st">&quot;caret&quot;</span>, <span class="st">&quot;car&quot;</span>, <span class="st">&quot;reshape2&quot;</span>, <span class="st">&quot;flextable&quot;</span>, <span class="st">&quot;lmtest&quot;</span>, <span class="st">&quot;equatiomatic&quot;</span>, <span class="st">&quot;pwr&quot;</span>, <span class="st">&quot;nnet&quot;</span>, <span class="st">&quot;MASS&quot;</span>, <span class="st">&quot;brant&quot;</span>, <span class="st">&quot;lme4&quot;</span>, <span class="st">&quot;lmerTest&quot;</span>, <span class="st">&quot;rpart&quot;</span>, <span class="st">&quot;rpart.plot&quot;</span>, <span class="st">&quot;lavaan&quot;</span>, <span class="st">&quot;lavaanPlot&quot;</span>, <span class="st">&quot;factoextra&quot;</span>, <span class="st">&quot;cluster&quot;</span>), <span class="at">dependencies =</span> <span class="cn">TRUE</span>, <span class="at">repos =</span> <span class="st">&quot;http://cran.us.r-project.org&quot;</span>)</span></code></pre></div>
<pre><code>## 
##   There are binary versions available but the source versions are later:
##            binary   source needs_compilation
## deSolve      1.31     1.33              TRUE
## fda         5.5.1    6.0.5             FALSE
## doconv      0.1.3    0.1.4             FALSE
## texPreview    1.5    2.0.0             FALSE
## ade4       1.7-18   1.7-19              TRUE
## tidyverse   1.3.1    1.3.2             FALSE
## corrplot     0.89     0.92             FALSE
## psych       2.2.3    2.2.5             FALSE
## moments      0.14   0.14.1             FALSE
## ggdist      3.1.1    3.2.0             FALSE
## caret      6.0-91   6.0-93              TRUE
## car        3.0-12    3.1-0             FALSE
## flextable   0.7.0    0.7.3             FALSE
## MASS       7.3-56 7.3-58.1              TRUE
## lme4       1.1-28   1.1-30              TRUE
## rpart.plot  3.1.0    3.1.1             FALSE
## lavaan     0.6-11   0.6-12             FALSE
## cluster     2.1.3    2.1.4              TRUE
## 
## 
## The downloaded binary packages are in
##  /var/folders/b1/0nnhbsx55hvfb1b3n83x0qrw0000gn/T//RtmptdPVYs/downloaded_packages</code></pre>
<p><strong>Case Sensitivity</strong></p>
<p>It’s important to note that everything in R is case-sensitive. When working with functions, be sure to match the case when typing the function name. For example, <code>Mean()</code> is not the same as <code>mean()</code>; since <code>mean()</code> is the correct case for the function, capitalized characters will result in an error when executing the function.</p>
<p><strong>Help</strong></p>
<p>Documentation for functions is available via the <code>?</code> command. This can be inserted prior to any function to access the function’s documentation. For example, <code>?mean</code> will display the documentation, including its required and optional arguments, for the <code>mean()</code> function.</p>
<div class="figure" style="text-align: center">
<img src="graphics/r_help.png" alt="Documentation for Arithmetic Mean Function" width="100%" />
<p class="caption">
(#fig:r-help)Documentation for Arithmetic Mean Function
</p>
</div>
<p><strong>Objects</strong></p>
<p>Objects underpin just about everything we do in R. An object is a container for various types of data. Objects can take many forms, ranging from simple objects holding a single number or character to complex structures that support advanced visualizations. The assignment character <code>&lt;-</code> is used to assign values to an object.</p>
<p>Let’s use the assignment operator to assign a number and character to separate objects. Note that non-numeric values must be enveloped in either single ticks <code>''</code> or double quotes <code>""</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>obj_1 <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>obj_1</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>obj_2 <span class="ot">&lt;-</span> <span class="st">&#39;a&#39;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>obj_2</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;</code></pre>
<p>Several functions are available for returning the type of data in an object:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(obj_2)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(obj_2)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p><strong>Comments</strong></p>
<p>The <code>#</code> symbol is used for commenting/annotating code. This is a best practice to aid in quickly and easily deciphering the role of each line or block of code. Without comments, troubleshooting large scripts can be a more challenging task than necessary.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign a new number to the object named obj_1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>obj_1 <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display value in obj_1</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>obj_1</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign a new character to the object named obj_2</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>obj_2 <span class="ot">&lt;-</span> <span class="st">&#39;b&#39;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display value in obj_2</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>obj_2</span></code></pre></div>
<pre><code>## [1] &quot;b&quot;</code></pre>
<p>In-line code comments can also be added where needed to reduce the number of lines in a script:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign a new number to the object named obj_1</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>obj_1 <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>obj_1 <span class="co"># Display value in obj_1</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign a new character to the object named obj_2</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>obj_2 <span class="ot">&lt;-</span> <span class="st">&#39;c&#39;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>obj_2 <span class="co"># Display value in obj_2</span></span></code></pre></div>
<pre><code>## [1] &quot;c&quot;</code></pre>
</div>
<div id="vectors" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Vectors</h2>
<p>A <strong>vector</strong> is the most basic data object in R. Vectors contain a collection of data elements of the same data type, which we will denote as <span class="math inline">\(x_1, x_2, ..., x_n\)</span> in this book, where <span class="math inline">\(n\)</span> is the number of observations or length of the vector. A vector may contain a series of numbers, set of characters, collection of dates, or logical <code>TRUE</code> or <code>FALSE</code> results.</p>
<p>In this example, we introduce the combine function <code>c()</code>, which allows us to fill an object with more than one value:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill a numeric vector named vect_num</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>vect_num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">10</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>vect_num</span></code></pre></div>
<pre><code>## [1]  2  4  6  8 10</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill a character vector named vect_char</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>vect_char <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>vect_char</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>We can use the <code>as.Date()</code> function to convert character strings containing dates to an actual date data type. By default, anything within single ticks or double quotes is treated as a character, so we must make an <strong>explicit type conversion</strong> from characters to dates. Remember that R is case-sensitive. Therefore, <code>as.date()</code> is not a valid function; the <code>D</code> must be capitalized.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill a date vector named vect_dt</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>vect_dt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2021-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2022-01-01&quot;</span>))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>vect_dt</span></code></pre></div>
<pre><code>## [1] &quot;2021-01-01&quot; &quot;2022-01-01&quot;</code></pre>
<p>We can use the sequence generation function <code>seq()</code> to fill values between a start and end point using a specified interval. For example, we can fill <code>vect_dt</code> with the first day of each month between <code>2021-01-01</code> and <code>2022-01-01</code> via the <code>seq()</code> function and its <code>by = "months"</code> argument:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill a date vector named vect_dt</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>vect_dt <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2021-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2022-01-01&quot;</span>), <span class="at">by =</span> <span class="st">&#39;months&#39;</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>vect_dt</span></code></pre></div>
<pre><code>##  [1] &quot;2021-01-01&quot; &quot;2021-02-01&quot; &quot;2021-03-01&quot; &quot;2021-04-01&quot; &quot;2021-05-01&quot;
##  [6] &quot;2021-06-01&quot; &quot;2021-07-01&quot; &quot;2021-08-01&quot; &quot;2021-09-01&quot; &quot;2021-10-01&quot;
## [11] &quot;2021-11-01&quot; &quot;2021-12-01&quot; &quot;2022-01-01&quot;</code></pre>
<p>We can also use the <code>:</code> operator to fill integers between a starting and ending number:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill a numeric vector with values between 1 and 10</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>vect_num <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>vect_num</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>We can access a particular element of a vector using its index. An <strong>index</strong> represents the position in a set of elements. In R, the first element of a vector has an index of 1, and the final element of a vector has an index equal to the vector’s length. The index is specified using square brackets, such as <code>[5]</code> for the fifth element of a vector.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the value in position 5 of vect_num</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>When applied to a vector, the <code>length()</code> function returns the number of elements in the vector, and this can be used to dynamically return the last value of vectors.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the last element of vect_num</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="fu">length</span>(vect_num)]</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p><strong>Vectorized Operations</strong></p>
<p><strong>Vectorized operations (or vectorization)</strong> underpin mathematical operations in R and greatly simplify computation. For example, if we need to perform a mathematical operation to each data element in a numeric vector, we do not need to specify each and every element explicitly. We can simply apply the operation at the vector level, and the operation will be applied to each of the vector’s individual elements.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a numeric vector named x and fill with values between 1 and 10</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add 2 to each element of x</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>x_plus2 <span class="ot">&lt;-</span> x<span class="sc">+</span><span class="dv">2</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>x_plus2</span></code></pre></div>
<pre><code>##  [1]  3  4  5  6  7  8  9 10 11 12</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiply each element of x by 2</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>x_times2 <span class="ot">&lt;-</span> x<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>x_times2</span></code></pre></div>
<pre><code>##  [1]  2  4  6  8 10 12 14 16 18 20</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Square each element of x</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>x_sq <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>x_sq</span></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100</code></pre>
<p>Many built-in arithmetic functions are available and compatible with vectors:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate sum of x elements</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count of x elements</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Square root of x elements</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
##  [9] 3.000000 3.162278</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Natural logarithm of x elements</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(x)</span></code></pre></div>
<pre><code>##  [1] 0.0000000 0.6931472 1.0986123 1.3862944 1.6094379 1.7917595 1.9459101
##  [8] 2.0794415 2.1972246 2.3025851</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exponential of x elements</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(x)</span></code></pre></div>
<pre><code>##  [1]     2.718282     7.389056    20.085537    54.598150   148.413159
##  [6]   403.428793  1096.633158  2980.957987  8103.083928 22026.465795</code></pre>
<p>We can also perform various operations on multiple vectors. Vectorization will result in an implied ordering about the elements, in that the specified operation will be applied to the first elements of the vectors and then the second, then third, etc.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create vectors x1 and x2 and fill with integers</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Store sum of vectors to new x3 vector</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> x1 <span class="sc">+</span> x2</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>x3</span></code></pre></div>
<pre><code>##  [1] 12 14 16 18 20 22 24 26 28 30</code></pre>
<p>Using vectorization, we can also evaluate whether a specified condition is true or false for each element in a vector:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate whether each element of x is less than 6, and store results to a logical vector</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>logical_rslts <span class="ot">&lt;-</span> x<span class="sc">&lt;</span><span class="dv">6</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>logical_rslts</span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div id="matrices" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Matrices</h2>
<p>A <strong>matrix</strong> is like a vector in that it represents a collection of data elements of the same data type; however, the elements of a matrix are <em>arranged into a fixed number of rows and columns</em>.</p>
<p>We can create a matrix using the <code>matrix()</code> function. Per <code>?matrix</code>, the <code>nrow</code> and <code>ncol</code> arguments can be used to organize like data elements into a specified number of rows and columns.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill matrix with numbers</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>mtrx_num <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>mtrx_num</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>We can leverage shorthand for function calls. As long as the argument values are in the correct order by the documentation, the argument names are not required. Per <code>?matrix</code>, the first argument is <code>data</code>, followed by <code>nrow</code> and then <code>ncol</code>. Therefore, we can achieve the same result using the following:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill matrix with numbers</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>mtrx_num <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">2</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>mtrx_num</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>Several functions are available to quickly retrieve the number of rows and columns in a rectangular object like a matrix:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the number of rows in mtrx_num</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mtrx_num)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the number of columns in mtrx_num</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mtrx_num)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the number of columns and rows in mtrx_num</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mtrx_num)</span></code></pre></div>
<pre><code>## [1] 5 2</code></pre>
<p>The <code>head()</code> and <code>tail()</code> functions return the first and last pieces of data, respectively. For large matrices (or other types of objects), this can be helpful for previewing the data:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the first five rows of the matrix</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="dv">1000</span>, <span class="dv">10</span>), <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## [1,]    1 1001 2001 3001 4001 5001 6001 7001 8001  9001
## [2,]    2 1002 2002 3002 4002 5002 6002 7002 8002  9002
## [3,]    3 1003 2003 3003 4003 5003 6003 7003 8003  9003
## [4,]    4 1004 2004 3004 4004 5004 6004 7004 8004  9004
## [5,]    5 1005 2005 3005 4005 5005 6005 7005 8005  9005</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the last five rows of the matrix</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="dv">1000</span>, <span class="dv">10</span>), <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##         [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
##  [996,]  996 1996 2996 3996 4996 5996 6996 7996 8996  9996
##  [997,]  997 1997 2997 3997 4997 5997 6997 7997 8997  9997
##  [998,]  998 1998 2998 3998 4998 5998 6998 7998 8998  9998
##  [999,]  999 1999 2999 3999 4999 5999 6999 7999 8999  9999
## [1000,] 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000</code></pre>
<p>Using vectorization, we can easily perform matrix multiplication.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 3x3 matrix</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiply each matrix value by 2</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>) <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2    8   14
## [2,]    4   10   16
## [3,]    6   12   18</code></pre>
</div>
<div id="factors" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Factors</h2>
<p>A <strong>factor</strong> is a data structure containing a finite number of categorical values. Each categorical value of a factor is known as a <strong>level</strong>, and the levels can be either ordered or unordered. This data structure is a requirement for several statistical models we will cover in later chapters.</p>
<p>We can create a factor using the <code>factor()</code> function:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill factor with unordered categories</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>education <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;undergraduate&quot;</span>, <span class="st">&quot;post-graduate&quot;</span>, <span class="st">&quot;graduate&quot;</span>))</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>education</span></code></pre></div>
<pre><code>## [1] undergraduate post-graduate graduate     
## Levels: graduate post-graduate undergraduate</code></pre>
<p>Since education has an inherent ordering, we can use the <code>ordered</code> and <code>levels</code> arguments of the <code>factor()</code> function to order the categories:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and fill factor with unordered categories</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>education <span class="ot">&lt;-</span> <span class="fu">factor</span>(education, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;undergraduate&quot;</span>, <span class="st">&quot;graduate&quot;</span>, <span class="st">&quot;post-graduate&quot;</span>))</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>education</span></code></pre></div>
<pre><code>## [1] undergraduate post-graduate graduate     
## Levels: undergraduate &lt; graduate &lt; post-graduate</code></pre>
<p>The ordering of factors is critical to a correct interpretation of statistical model output as we will cover later.</p>
</div>
<div id="data-frames" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Data Frames</h2>
<p>A <em>data frame</em> is like a matrix in that it organizes elements within rows and columns but unlike matrices, data frames can store multiple types of data. Data frames are often the most appropriate data structures for the data required in people analytics.</p>
<p>A data frame can be created using the <code>data.frame()</code> function:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create three vectors containing integers (x), characters (y), and dates (z)</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>,<span class="st">&#39;d&#39;</span>,<span class="st">&#39;e&#39;</span>,<span class="st">&#39;f&#39;</span>,<span class="st">&#39;g&#39;</span>,<span class="st">&#39;h&#39;</span>,<span class="st">&#39;i&#39;</span>,<span class="st">&#39;j&#39;</span>)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2021-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2021-10-01&quot;</span>), <span class="at">by =</span> <span class="st">&#39;months&#39;</span>)</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with 3 columns (vectors x, y, and z) and 10 rows</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, y, z)</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##     x y          z
## 1   1 a 2021-01-01
## 2   2 b 2021-02-01
## 3   3 c 2021-03-01
## 4   4 d 2021-04-01
## 5   5 e 2021-05-01
## 6   6 f 2021-06-01
## 7   7 g 2021-07-01
## 8   8 h 2021-08-01
## 9   9 i 2021-09-01
## 10 10 j 2021-10-01</code></pre>
<p>The structure of an object can be viewed using the <code>str()</code> function:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Describe the structure of df</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  3 variables:
##  $ x: int  1 2 3 4 5 6 7 8 9 10
##  $ y: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##  $ z: Date, format: &quot;2021-01-01&quot; &quot;2021-02-01&quot; ...</code></pre>
<p>Specific columns in the data frame can be referenced using the <code>$</code> symbol between the data frame and column names:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return data in column x in df</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Another method that allows for efficient subsetting of rows and/or columns is the <code>subset()</code> function. The example below illustrates how to subset <code>df</code> using conditions on <code>x</code> and <code>y</code> while only displaying <code>z</code> in the output:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return z values for rows where x is at least 7 OR y is a, b, or c.</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, x <span class="sc">&gt;=</span> <span class="dv">7</span> <span class="sc">|</span> y <span class="sc">==</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>), <span class="at">select =</span> z)</span></code></pre></div>
<pre><code>##             z
## 1  2021-01-01
## 2  2021-02-01
## 3  2021-03-01
## 7  2021-07-01
## 8  2021-08-01
## 9  2021-09-01
## 10 2021-10-01</code></pre>
</div>
<div id="lists" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Lists</h2>
<p><strong>Lists</strong> are versatile objects that can contain elements with different types and lengths. The elements of a list can be vectors, matrices, data frames, functions, or even other lists.</p>
<p>A list can be created using the <code>list()</code> function:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store vectors x, y, and z as well as df to a list</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(x, y, z, df)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lst)</span></code></pre></div>
<pre><code>## List of 4
##  $ : int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ : chr [1:10] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##  $ : Date[1:10], format: &quot;2021-01-01&quot; &quot;2021-02-01&quot; ...
##  $ :&#39;data.frame&#39;:    10 obs. of  3 variables:
##   ..$ x: int [1:10] 1 2 3 4 5 6 7 8 9 10
##   ..$ y: chr [1:10] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##   ..$ z: Date[1:10], format: &quot;2021-01-01&quot; &quot;2021-02-01&quot; ...</code></pre>
<p>Unlike vectors, accessing elements of a list requires double brackets, such as <code>[[3]]</code> for the third element.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return data from the third element of lst</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>lst[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>##  [1] &quot;2021-01-01&quot; &quot;2021-02-01&quot; &quot;2021-03-01&quot; &quot;2021-04-01&quot; &quot;2021-05-01&quot;
##  [6] &quot;2021-06-01&quot; &quot;2021-07-01&quot; &quot;2021-08-01&quot; &quot;2021-09-01&quot; &quot;2021-10-01&quot;</code></pre>
</div>
<div id="loops" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Loops</h2>
<p>In many cases, the need arises to perform an operation a variable number of times. Loops are available to avoid the cumbersome task of writing the same statement many times. The two most common types of loops are <code>while</code> and <code>for</code> loops.</p>
<p>Let’s use a <code>while</code> loop to square integers between 1 and 5:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize variable</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using a &#39;while&#39; loop, square the values 1 through 5 and print results to the screen</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;i&#39; is a variable that takes on a value between 1 and 5 for the respective loop</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">^</span><span class="dv">2</span>) </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span> <span class="co"># increment i by 1</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16
## [1] 25</code></pre>
<p>With a <code>while</code> loop, we needed to initialize the variable <code>i</code> as well as increment it by <code>1</code> within the loop. With a <code>for</code> loop, we can accomplish the same goal with less code:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using a &#39;for&#39; loop, square the values 1 through 5 and print results to the screen</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) { </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16
## [1] 25</code></pre>
</div>
<div id="user-defined-functions-udfs" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> User-Defined Functions (UDFs)</h2>
<p>Though many built-in functions are available, R provides the flexibility to create our own. In fact, many functions used in this book are actually functions of functions.</p>
<p>Functions can be an effective alternative to loops. For example, here is a basic function that achieves the same goal as our <code>while</code> and <code>for</code> loop examples (i.e., squaring integers 1 through 5):</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function named square.val() with one argument (x) that squares given x values</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>square.val <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pass integers 1 through 5 into the new square.val() function and display results</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="fu">square.val</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25</code></pre>
<p>While many projects warrant UDFs and/or loops, we do not actually need either to square a set of integers. As you gain experience writing R code, you will naturally discover ways to write more performant and terse code:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Square integers</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25</code></pre>
</div>
<div id="graphics" class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span> Graphics</h2>
<p>While base R has native plotting capabilities, we will use the more flexible and sophisticated visualization capabilities within the <code>ggplot2</code> library in this book. We can load the <code>ggplot2</code> library using the <code>library()</code> function:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library for data viz</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>When working with functions beyond what is available in base R, entering <code>::</code> between the library and function name is a best practice for efficient coding. R Studio will provide a menu of available functions within the specified library upon typing <code>library_name::</code>.</p>
<p>The <code>ggplot2</code> library contains many types of visualizations. For example, we can build a line chart to show how the values of vector <code>x</code> relate to values of vector <code>y</code> in a data frame named <code>data</code>:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame containing two related vectors</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(x, y))</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce line chart</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="The_Fundamentals_of_People_Analytics_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
<p>Furthermore, we can use <code>ggplot</code> parameters and themes to adjust the aesthetics of visuals:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce line chart</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> .<span class="dv">4</span>, <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> <span class="co"># Reduce line thickness and change color to blue</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># Remove the default grey background</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Chart Title&#39;</span>, <span class="co"># Assign a chart title</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Title for x-axis&#39;</span>, <span class="co"># Title the x-axis</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Title for y-axis&#39;</span>) <span class="co"># Title the y-axis</span></span></code></pre></div>
<p><img src="The_Fundamentals_of_People_Analytics_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="co"># Center plot title</span></span></code></pre></div>
<pre><code>## List of 1
##  $ plot.title:List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0.5
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, &quot;class&quot;)= chr [1:2] &quot;element_text&quot; &quot;element&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;theme&quot; &quot;gg&quot;
##  - attr(*, &quot;complete&quot;)= logi FALSE
##  - attr(*, &quot;validate&quot;)= logi TRUE</code></pre>
</div>
<div id="review-questions" class="section level2" number="2.10">
<h2><span class="header-section-number">2.10</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What is the difference between a factor and character vector?</p></li>
<li><p>What is vectorization?</p></li>
<li><p>How do data frames differ from matrices?</p></li>
<li><p>Does executing the <code>Sum()</code> function achieve the same result as executing <code>sum()</code>?</p></li>
<li><p>Does <code>seq(1,10)</code> return the same output as <code>1:10</code>?</p></li>
<li><p>Is the following command sufficient for creating a vector recognized by R as having three <em>dates</em>: <code>dates &lt;- c("2022-01-01", "2022-01-02", "2022-01-03")</code>.</p></li>
<li><p>How are <code>while</code> and <code>for</code> loops different?</p></li>
<li><p>If vectors <code>x1</code> and <code>x2</code> each hold 100 integers, how can we add each element of one to the respective element of the other using a single line of code?</p></li>
<li><p>How are slots in a list object referenced?</p></li>
<li><p>What are some examples in which a user-defined function (UDF) is needed?</p></li>
</ol>
<!--chapter:end:r/02_r_intro.Rmd-->
</div>
</div>
<div id="sql-intro" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Introduction to SQL</h1>
<p><strong>Structured Query Language (SQL)</strong> is the most common language used to extract and wrangle data contained in a relational database. SQL is an essential skill for anyone working in analytics.</p>
<div id="basics" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Basics</h2>
<p>There are three main <em>clauses</em> in a SQL query: (a) <code>SELECT</code>, (b) <code>FROM</code>, and (c) <code>WHERE</code>. The <code>SELECT</code> and <code>FROM</code> clauses are required, though the optional <code>WHERE</code> clause is frequently needed.</p>
<ul>
<li><strong>SELECT</strong>: Specifies the columns to include in the output</li>
<li><strong>FROM</strong>: Specifies the table(s) in which the relevant data are contained</li>
<li><strong>WHERE</strong>: Specifies the rows to search</li>
</ul>
<p>Despite the clauses being ordered as shown above (<code>SELECT</code> then <code>FROM</code> then <code>WHERE</code>), the <code>FROM</code> clause is the first to execute since we first need to identify the relevant table(s) before filtering rows and selecting columns. The <code>SELECT</code> clause is the last to execute.</p>
<p>Additional clauses are available for grouping and sorting data.</p>
<ul>
<li><strong>GROUP BY</strong>: Specifies the columns by which data should be grouped when using aggregate functions</li>
<li><strong>HAVING</strong>: Specifies conditions for filtering rows based on aggregate functions</li>
<li><strong>ORDER BY</strong>: Specifies how data should be sorted in the output</li>
</ul>
<p>When implementing aggregate functions in a <code>SELECT</code> clause, such as counting, summing, or averaging a numeric field, all other non-aggregated fields must be included in the <code>GROUP BY</code> clause.</p>
<p>When working with large datasets, it is best to filter records on the database side to avoid reading superfluous records into an analytics tool such as R only to then filter data to the relevant subset. For example, if we are performing an analysis on employees in the Engineering department, we should ideally filter to this subset on the database side rather than loading into R data on the entire workforce before paring down to the relevant records. Fewer records can help enhance the performance of R scripts – especially when R is running on a local machine, such as a laptop, rather than on a more powerful server.</p>
<p>Though it is important to execute SQL queries directly on the database to minimize the amount of data read into R, we will use the <code>sqldf</code> library within R to demonstrate the mechanics of a SQL query for easily replicable examples. The <code>sqldf</code> library allows us to write SQL to query data frames via an embedded database engine (SQLite by default). In a practical setting, we would pass a string containing the SQL query, execute it directly against the database, and then store the query’s results to an object within R. While the syntax of SQL may vary by database, the core structure of queries is universal.</p>
<p>First, let’s load the data sets:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data sets</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>status <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/status.csv&quot;</span>)</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>benefits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/benefits.csv&quot;</span>)</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>demographics <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/demographics.csv&quot;</span>)</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>job <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/job.csv&quot;</span>)</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>payroll <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/payroll.csv&quot;</span>)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>performance <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/performance.csv&quot;</span>)</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>prior_employment <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/prior_employment.csv&quot;</span>)</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>sentiment <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/sentiment.csv&quot;</span>)</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>tenure <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/tenure.csv&quot;</span>)</span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Return row and column counts</span></span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(employees)</span></code></pre></div>
<pre><code>## [1] 1470   36</code></pre>
<p>Next, we will apply the <code>sqldf()</code> function to our data frame to extract specific rows and columns. In addition to the <code>SELECT</code>, <code>FROM</code>, and <code>WHERE</code> clauses, we will use the <code>LIMIT</code> clause to limit the number of rows that are displayed given the data frame’s size (<span class="math inline">\(n = 1,470\)</span>). In a practical setting, the <code>LIMIT</code> clause is only used for efficient data profiling and troubleshooting, as we would not want to arbitrarily truncate a data set used for analysis.</p>
<p>A best practice in writing SQL is to capitalize the names of clauses and functions and to use separate lines and indentation to make the SQL statements more readable:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load SQL library</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sqldf)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string using the paste() function</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="st">                      employee_id</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="st">                      employees</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="st">                    LIMIT 10&quot;</span>)</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##    employee_id
## 1         1002
## 2         1003
## 3         1004
## 4         1005
## 5         1006
## 6         1007
## 7         1008
## 8         1009
## 9         1010
## 10        1011</code></pre>
<p>This query returned a list of employee ids for employees in the Research &amp; Development department.</p>
<p>To optimize query performance, it is important to order conditions in the <code>WHERE</code> clause beginning with the condition that will exclude the largest number of records. Conditions are executed sequentially, and each subsequent condition must evaluate all records that remain following any preceding filtering. Limiting the number of records that must be searched when evaluating each condition will reduce the time it takes the query to return results. For example, if two conditions are needed and one excludes 5,000 records while the other excludes 10, the condition that excludes 5,000 records should be listed first in the <code>WHERE</code> clause.</p>
</div>
<div id="aggregate-functions" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Aggregate Functions</h2>
<p>Next, let’s take a look at average organization tenure by job for those in the Research &amp; Development department:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      AVG(org_tenure)</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="st">                      employees</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title AVG(org_tenure)
## 1 Healthcare Representative        8.618321
## 2     Laboratory Technician        5.019305
## 3                   Manager       13.673077
## 4    Manufacturing Director        7.600000
## 5         Research Director       10.937500
## 6        Research Scientist        5.113014
## 7            Vice President        9.500000</code></pre>
<p>There are 7 distinct job titles among employees in the Research &amp; Development department, and the average organization tenure for these ranges from <code>5</code> to <code>13.7</code> years.</p>
<p>Since there could be a small number of employees in certain jobs, in which case average organization tenure may not be as meaningful, we can use the <code>COUNT(*)</code> function to count the number of rows for each group. In this case, <code>COUNT(*)</code> will return the number of employees in each job in the Research &amp; Development department. We will also apply column aliases via <code>AS</code> in the <code>SELECT</code> clause to assign different names to the output fields:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) AS employee_cnt,</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      AVG(org_tenure) AS avg_org_tenure</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="st">                      employees</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_cnt avg_org_tenure
## 1 Healthcare Representative          131       8.618321
## 2     Laboratory Technician          259       5.019305
## 3                   Manager           52      13.673077
## 4    Manufacturing Director          145       7.600000
## 5         Research Director           80      10.937500
## 6        Research Scientist          292       5.113014
## 7            Vice President            2       9.500000</code></pre>
<p>The output shows that there are only 2 Vice Presidents in the Research &amp; Development department, while other job titles are much more prevalent.</p>
<p>Since relatively few employees are Vice Presidents, let’s use the <code>HAVING</code> clause to only show average organization tenure for Research &amp; Development department jobs with more than 10 employees. We can also use the <code>ROUND()</code> function to truncate average organization tenure to one significant digit:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) AS employee_cnt,</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(org_tenure), 1) AS avg_org_tenure</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="st">                      employees</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="st">                    HAVING</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) &gt; 10</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_cnt avg_org_tenure
## 1 Healthcare Representative          131            8.6
## 2     Laboratory Technician          259            5.0
## 3                   Manager           52           13.7
## 4    Manufacturing Director          145            7.6
## 5         Research Director           80           10.9
## 6        Research Scientist          292            5.1</code></pre>
</div>
<div id="joins" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Joins</h2>
<p>In a practical setting, the required data are rarely contained within a single table. Therefore, we must query multiple tables and join them together. Figure @ref(fig:sql-joins) illustrates SQL join types using Venn diagrams:</p>
<div class="figure" style="text-align: center">
<img src="graphics/sql_joins.png" alt="Types of SQL Joins" width="100%" />
<p class="caption">
(#fig:sql-joins)Types of SQL Joins
</p>
</div>
<p>The structure of SQL queries containing each type of join is represented below:</p>
<p><strong>LEFT INCLUSIVE</strong></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  LEFT OUTER JOIN B</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span></code></pre></div>
<p><strong>LEFT EXCLUSIVE</strong></p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  LEFT OUTER JOIN B</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  WHERE B.Key IS NULL</span></span></code></pre></div>
<p><strong>FULL OUTER INCLUSIVE</strong></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  FULL OUTER JOIN B</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span></code></pre></div>
<p><strong>FULL OUTER EXCLUSIVE</strong></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  FULL OUTER JOIN B</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  WHERE A.Key IS NULL OR B.Key IS NULL  </span></span></code></pre></div>
<p><strong>RIGHT INCLUSIVE</strong></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  RIGHT OUTER JOIN B</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span></code></pre></div>
<p><strong>RIGHT EXCLUSIVE</strong></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  LEFT OUTER JOIN B</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  WHERE A.Key IS NULL</span></span></code></pre></div>
<p><strong>INNER JOIN</strong></p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  SELECT [Output Field List]</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  FROM A </span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  INNER JOIN B</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  ON A.Key = B.Key</span></span></code></pre></div>
<p>To illustrate how SQL joins work, we will leverage three of the data sets used to produce the consolidated <code>employees</code> data set we have been using: <code>job</code>, <code>tenure</code>, and <code>demographics</code>. For many people analytics projects, employee id is the PK since this identifier for one employee should not be assigned to another employee – past, present, or future. Email or network id may also be a suitable PK. We will use the <code>employee_id</code> column in each of the three data frames to facilitate joins:</p>
<p>Next, we will query these data frames to return the average organization tenure and average commute distance for employees in the Research &amp; Development department, grouped by jobs with more than 10 employees. For this, we will leverage an <code>INNER JOIN</code>, which will return records only for employee ids which are present in all three data frames. For example, if a record exists in <code>demographics</code> and <code>tenure</code> for a particular employee id, but there is no corresponding record in <code>job</code>, that employee id would not be included in the output.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) AS employee_cnt,</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(org_tenure), 1) AS avg_org_tenure,</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(commute_dist), 1) AS avg_commute_dist</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a><span class="st">                      INNER JOIN</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a><span class="st">                        tenure</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = tenure.employee_id</span></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a><span class="st">                      INNER JOIN</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a><span class="st">                        job</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = job.employee_id</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a><span class="st">                    HAVING</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) &gt; 10</span></span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_cnt avg_org_tenure avg_commute_dist
## 1 Healthcare Representative          131            8.6              9.8
## 2     Laboratory Technician          259            5.0              9.4
## 3                   Manager           52           13.7              7.2
## 4    Manufacturing Director          145            7.6              9.5
## 5         Research Director           80           10.9              8.4
## 6        Research Scientist          292            5.1              9.0</code></pre>
<p>Note that the <code>INNER JOIN</code> in this SQL query was structured such that both <code>tenure</code> and <code>job</code> were joined to <code>demographics</code> via the <code>employee_id</code> column. We could have instead joined <code>job</code> to <code>tenure</code> since we joined <code>tenure</code> to <code>demographics</code>; this would have achieved the same result since all employee ids exist in each of the three data frames.</p>
<p>If it were possible for all employee ids to exist in <code>demographics</code> but not in either <code>tenure</code> or <code>job</code>, we could leverage a <code>LEFT JOIN</code> to ensure all records from <code>demographics</code> are included in the output irrespective of whether they have matches in <code>tenure</code> or <code>job</code>:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) AS employee_cnt,</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(org_tenure), 1) AS avg_org_tenure,</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(commute_dist), 1) AS avg_commute_dist</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="st">                      LEFT JOIN</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="st">                        tenure</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = tenure.employee_id</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="st">                      LEFT JOIN</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="st">                        job</span></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = job.employee_id</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title</span></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a><span class="st">                    HAVING</span></span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) &gt; 10</span></span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_cnt avg_org_tenure avg_commute_dist
## 1 Healthcare Representative          131            8.6              9.8
## 2     Laboratory Technician          259            5.0              9.4
## 3                   Manager           52           13.7              7.2
## 4    Manufacturing Director          145            7.6              9.5
## 5         Research Director           80           10.9              8.4
## 6        Research Scientist          292            5.1              9.0</code></pre>
<p>In this case, if demographics is the base data set which contains all employee ids (i.e., the ‘LEFT’ dataset), it is important for <code>tenure</code> and <code>job</code> to be joined to it. Joining <code>job</code> to <code>tenure</code> may result in information loss if an employee id exists in <code>demographics</code> and <code>job</code> but not in the intermediate <code>tenure</code> data set.</p>
<p>When integrating data within R, the <code>tidyverse</code> provides a more efficient and parsimonious method of joining many data sets using various join types. Within this framework, components are chained together via the package-specific <code>%&gt;%</code> operator. The example below joins nine data sets into a single <code>employees</code> data frame using a left join on the <code>employee_id</code> column:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load tidyverse</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">list</span>(demographics,</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>                  status,</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>                  benefits,</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>                  job,</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>                  payroll,</span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>                  performance,</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>                  prior_employment,</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>                  sentiment,</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>                  tenure) <span class="sc">%&gt;%</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>                  purrr<span class="sc">::</span><span class="fu">reduce</span>(left_join, <span class="at">by =</span> <span class="st">&quot;employee_id&quot;</span>)</span></code></pre></div>
</div>
<div id="subqueries" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Subqueries</h2>
<p><strong>Subqueries</strong> are queries nested within other queries. Subqueries are often referred to as <strong>inner queries</strong>, while the main queries are referred to as <strong>outer queries</strong>.</p>
<p>For example, if we are interested in performing an analysis on employees with more than a year of organization tenure, we can use a subquery to pass a list of employee ids that meet this criterion into the outer query for filtering. In this case, we would not need to include <code>tenure</code> in the join conditions of our main query:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: Since employee_id exists in multiple data sets, we must name a specific data set when referencing it</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) AS employee_cnt,</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(commute_dist), 1) AS avg_commute_dist</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="st">                      LEFT JOIN</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="st">                        job</span></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = job.employee_id</span></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id IN (SELECT employee_id FROM tenure WHERE org_tenure &gt; 1)</span></span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a><span class="st">                      AND </span></span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a><span class="st">                        dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title</span></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a><span class="st">                    HAVING</span></span>
<span id="cb123-20"><a href="#cb123-20" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) &gt; 10</span></span>
<span id="cb123-21"><a href="#cb123-21" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb123-22"><a href="#cb123-22" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb123-23"><a href="#cb123-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-24"><a href="#cb123-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb123-25"><a href="#cb123-25" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_cnt avg_commute_dist
## 1 Healthcare Representative          118              9.7
## 2     Laboratory Technician          198              9.6
## 3                   Manager           49              6.9
## 4    Manufacturing Director          133              9.7
## 5         Research Director           74              8.3
## 6        Research Scientist          238              9.2</code></pre>
</div>
<div id="virtual-tables" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Virtual Tables</h2>
<p>An alternative to a subquery is creating a <strong>virtual table</strong> in the <code>FROM</code> clause. When using an <code>INNER JOIN</code> to connect <code>demographics</code> to the virtual table <code>ids</code>, which provides a list of employee ids for those with more than a year of organization tenure, any records in <code>demographics</code> or <code>job</code> that do not relate to employees with at least a year of organization tenure will be dropped. This is true even though a <code>LEFT JOIN</code> is used to join <code>job</code> to <code>demographics</code> since records in <code>demographics</code> will be filtered based on <code>employee_id</code> matches in the virtual table. With this approach, our <code>WHERE</code> clause is limited to the <code>department = 'Research &amp; Development'</code> condition:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) AS employee_cnt,</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      ROUND(AVG(commute_dist), 1) AS avg_commute_dist</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="st">                      LEFT JOIN</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="st">                        job</span></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = job.employee_id</span></span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a><span class="st">                      INNER JOIN</span></span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a><span class="st">                        (SELECT employee_id FROM tenure WHERE org_tenure &gt; 1) ids</span></span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = ids.employee_id</span></span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title</span></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a><span class="st">                    HAVING</span></span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a><span class="st">                      COUNT(*) &gt; 10</span></span>
<span id="cb125-22"><a href="#cb125-22" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb125-23"><a href="#cb125-23" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title&quot;</span>)</span>
<span id="cb125-24"><a href="#cb125-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-25"><a href="#cb125-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb125-26"><a href="#cb125-26" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_cnt avg_commute_dist
## 1 Healthcare Representative          118              9.7
## 2     Laboratory Technician          198              9.6
## 3                   Manager           49              6.9
## 4    Manufacturing Director          133              9.7
## 5         Research Director           74              8.3
## 6        Research Scientist          238              9.2</code></pre>
<p>As you can see, the output of the query using a virtual table matches the results from the preceding approach that utilized a subquery.</p>
</div>
<div id="window-functions" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Window Functions</h2>
<p><strong>Window functions</strong> are used for performing calculations over a set of rows without collapsing the records. Unlike the aggregate functions we’ve covered, window functions do not collapse rows into a single value; the calculated value is returned for each of the rows over which the calculation is performed.</p>
<p>For example, we can assign an organization tenure rank by Research &amp; Development job using the <code>RANK()</code> and <code>OVER()</code> functions in the <code>SELECT</code> clause. The <code>PARTITION BY</code> argument functions like a <code>GROUP BY</code> clause but without collapsing rows, while the <code>ORDER BY</code> argument sorts the records in ascending (<code>ASC</code>) or descending (<code>DESC</code>) order for proper ranking:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Limit output to 10 records since query does not collapse records</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="st">                      demographics.employee_id,</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="st">                      commute_dist,</span></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="st">                      RANK () OVER (PARTITION BY job_title ORDER BY commute_dist DESC) AS commute_dist_rank</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="st">                    FROM</span></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics</span></span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a><span class="st">                      LEFT JOIN</span></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a><span class="st">                        job</span></span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = job.employee_id</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a><span class="st">                      INNER JOIN</span></span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a><span class="st">                        (SELECT employee_id FROM tenure WHERE org_tenure &gt; 1) ids</span></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a><span class="st">                      ON</span></span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a><span class="st">                        demographics.employee_id = ids.employee_id</span></span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a><span class="st">                    WHERE</span></span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a><span class="st">                      dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY</span></span>
<span id="cb127-21"><a href="#cb127-21" aria-hidden="true" tabindex="-1"></a><span class="st">                      job_title,</span></span>
<span id="cb127-22"><a href="#cb127-22" aria-hidden="true" tabindex="-1"></a><span class="st">                      commute_dist_rank</span></span>
<span id="cb127-23"><a href="#cb127-23" aria-hidden="true" tabindex="-1"></a><span class="st">                    LIMIT 10&quot;</span>)</span>
<span id="cb127-24"><a href="#cb127-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-25"><a href="#cb127-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb127-26"><a href="#cb127-26" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##    employee_id                 job_title commute_dist commute_dist_rank
## 1         2325 Healthcare Representative           29                 1
## 2         1414 Healthcare Representative           28                 2
## 3         1010 Healthcare Representative           27                 3
## 4         1573 Healthcare Representative           27                 3
## 5         2200 Healthcare Representative           26                 5
## 6         1730 Healthcare Representative           25                 6
## 7         1833 Healthcare Representative           25                 6
## 8         1993 Healthcare Representative           25                 6
## 9         2415 Healthcare Representative           25                 6
## 10        1164 Healthcare Representative           24                10</code></pre>
<p>Notice that in the case of commute distance ties, the <code>RANK()</code> function assigns the same rank and then adds the number of ties to that rank to determine the rank for the next highest value of commute distance.</p>
<p>We can also treat this query as a virtual table, and then filter on the derived <code>commute_dist_rank</code> field to return the highest commute distance for each job. We can add a <code>DISTINCT()</code> function in the <code>SELECT</code> clause to collapse jobs for which there are more than one employee with the max commute distance, and display the number of ties for each using the <code>COUNT(*)</code> function:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="st">                        DISTINCT(job_title) AS job_title,</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="st">                        COUNT(*) AS employee_count,</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="st">                        commute_dist</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="st">                     FROM</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="st">                        (SELECT</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="st">                          demographics.employee_id,</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="st">                          job_title,</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="st">                          commute_dist,</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="st">                          RANK () OVER (PARTITION BY job_title ORDER BY commute_dist DESC) AS commute_dist_rank</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        FROM</span></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="st">                            demographics</span></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="st">                          LEFT JOIN</span></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a><span class="st">                            job</span></span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a><span class="st">                          ON</span></span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a><span class="st">                            demographics.employee_id = job.employee_id</span></span>
<span id="cb129-18"><a href="#cb129-18" aria-hidden="true" tabindex="-1"></a><span class="st">                          INNER JOIN</span></span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a><span class="st">                            (SELECT employee_id FROM tenure WHERE org_tenure &gt; 1) ids</span></span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a><span class="st">                          ON</span></span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a><span class="st">                            demographics.employee_id = ids.employee_id</span></span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a><span class="st">                        WHERE</span></span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a><span class="st">                          dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb129-24"><a href="#cb129-24" aria-hidden="true" tabindex="-1"></a><span class="st">                        ORDER BY</span></span>
<span id="cb129-25"><a href="#cb129-25" aria-hidden="true" tabindex="-1"></a><span class="st">                          job_title,</span></span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a><span class="st">                          commute_dist_rank) tbl</span></span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a><span class="st">                      WHERE</span></span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a><span class="st">                        tbl.commute_dist_rank = 1</span></span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a><span class="st">                      GROUP BY</span></span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a><span class="st">                        job_title&quot;</span>)</span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_count commute_dist
## 1 Healthcare Representative              1           29
## 2     Laboratory Technician              6           29
## 3                   Manager              2           29
## 4    Manufacturing Director              4           29
## 5         Research Director              3           28
## 6        Research Scientist              4           29
## 7            Vice President              1            8</code></pre>
</div>
<div id="common-table-expressions-ctes" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Common Table Expressions (CTEs)</h2>
<p>An alternative approach is to use a <strong>common table expression (CTE)</strong>, which is the result set of a query that exists temporarily and only for use in a larger query. Like the virtual table example, CTEs do not persist data in objects or tables; the data exist only for the duration of the query.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SQL query as a character string</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>sql_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;WITH max_commute_job</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="st">                     AS</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="st">                        (SELECT</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="st">                          demographics.employee_id,</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="st">                          job_title,</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="st">                          commute_dist,</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="st">                          RANK () OVER (PARTITION BY job_title ORDER BY commute_dist DESC) AS commute_dist_rank</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="st">                        FROM</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="st">                            demographics</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="st">                          LEFT JOIN</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="st">                            job</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="st">                          ON</span></span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="st">                            demographics.employee_id = job.employee_id</span></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="st">                          INNER JOIN</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a><span class="st">                            (SELECT employee_id FROM tenure WHERE org_tenure &gt; 1) ids</span></span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a><span class="st">                          ON</span></span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a><span class="st">                            demographics.employee_id = ids.employee_id</span></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a><span class="st">                        WHERE</span></span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a><span class="st">                          dept = &#39;Research &amp; Development&#39;</span></span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a><span class="st">                        ORDER BY</span></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a><span class="st">                          job_title,</span></span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a><span class="st">                          commute_dist_rank)</span></span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a><span class="st">                      </span></span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a><span class="st">                      SELECT</span></span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a><span class="st">                        DISTINCT(job_title) AS job_title,</span></span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a><span class="st">                        COUNT(*) AS employee_count,</span></span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a><span class="st">                        commute_dist</span></span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a><span class="st">                     FROM</span></span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a><span class="st">                        max_commute_job</span></span>
<span id="cb131-31"><a href="#cb131-31" aria-hidden="true" tabindex="-1"></a><span class="st">                      WHERE</span></span>
<span id="cb131-32"><a href="#cb131-32" aria-hidden="true" tabindex="-1"></a><span class="st">                        commute_dist_rank = 1</span></span>
<span id="cb131-33"><a href="#cb131-33" aria-hidden="true" tabindex="-1"></a><span class="st">                      GROUP BY</span></span>
<span id="cb131-34"><a href="#cb131-34" aria-hidden="true" tabindex="-1"></a><span class="st">                        job_title&quot;</span>)</span>
<span id="cb131-35"><a href="#cb131-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-36"><a href="#cb131-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute SQL query</span></span>
<span id="cb131-37"><a href="#cb131-37" aria-hidden="true" tabindex="-1"></a>sqldf<span class="sc">::</span><span class="fu">sqldf</span>(sql_string)</span></code></pre></div>
<pre><code>##                   job_title employee_count commute_dist
## 1 Healthcare Representative              1           29
## 2     Laboratory Technician              6           29
## 3                   Manager              2           29
## 4    Manufacturing Director              4           29
## 5         Research Director              3           28
## 6        Research Scientist              4           29
## 7            Vice President              1            8</code></pre>
</div>
<div id="review-questions-1" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What two clauses must always be present in a SQL query?</p></li>
<li><p>What SQL clause is executed first at run time?</p></li>
<li><p>To optimize the performance of a SQL query, how should conditions in the WHERE clause be ordered?</p></li>
<li><p>How do aggregate functions differ from window functions in SQL?</p></li>
<li><p>What is a subquery?</p></li>
<li><p>What is the difference between an INNER JOIN and LEFT JOIN?</p></li>
<li><p>What is the purpose of a common table expression (CTE)?</p></li>
<li><p>What does the PARTITION BY function do?</p></li>
<li><p>Why is it important for queries to limit records on the database side before reading into R?</p></li>
<li><p>In which clause are filter conditions applied to aggregate functions (e.g., <code>COUNT(*) &gt; 5</code>, <code>AVG(salary) &lt; 100000</code>)?</p></li>
</ol>
<!--chapter:end:r/03_sql_intro.Rmd-->
</div>
</div>
<div id="measure-sampl" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Measurement &amp; Sampling</h1>
<p>This chapter will survey the type and function of study variables, measurement scales, sampling and nonsampling error, as well as probability and nonprobability sampling methods.</p>
<div id="variable-types" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Variable Types</h2>
<p>The framing of variables in research hypotheses guides the treatment of each in our analyses. In this section, we will discuss the function of <em>independent</em>, <em>dependent</em>, <em>control</em>, <em>moderating</em>, and <em>mediating</em> variables as well as the broader classification of these variables as either <em>endogenous</em> or <em>exogenous</em>.</p>
<div id="independent-variables-iv" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Independent Variables (IV)</h3>
<p>An <strong>Independent Variable (IV)</strong> is a variable which is assumed to have a direct effect on another variable. IVs are sometimes referred to as <em>predictors</em>, <em>factors</em>, <em>features</em>, <em>antecedents</em>, or <em>explanatory</em> variables, and these terms will be used interchangeably throughout this book.</p>
<p>Let’s consider a scenario in which we wish to examine whether an inclusion training program given to a random sample of leaders has a positive effect on team-level belonging. In a true experimental design, participation in the inclusion training would be the only difference between the treatment (teams whose leaders who participate in the training) and the control (teams whose leaders who do not participate in the training). In this case, inclusion training participation is the IV (the variable we are manipulating).</p>
<p>IVs are also present in non-experimental designs. For example, we may survey employees and ask them to rate their leader’s inclusiveness and provide self-reported belonging ratings. In this context, leader inclusiveness (rather than an inclusion training) is the IV. If we find that average team-level belonging scores tend to be higher when leader inclusiveness scores are higher, this <em>may</em> indicate that leader inclusion has some degree of influence on team-level belonging. Of course, there could be alternative explanations for any observed differences in team-level belonging, which is why experimental designs tend to provide stronger evidence for an IV’s effect.</p>
</div>
<div id="dependent-variables-dv" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Dependent Variables (DV)</h3>
<p>A <strong>Dependent Variable (DV)</strong> is a variable that is <em>dependent</em> on the IV. DVs are also referred to as <em>outcome</em>, <em>response</em>, or <em>criterion</em> variables.</p>
<p>In our leader inclusion example, team-level belonging is the DV since this variable is assumed to depend on the level of team leaders’ inclusiveness. It’s important to note that regardless of a study’s results, it is the positioning of the variables in the study’s hypotheses (rooted in theory) that determines the type of variable. If we hypothesize that leader inclusion training has a positive effect on team-level belonging, but the study finds no such effect, the inclusion intervention is still the IV and team-level belonging the DV.</p>
</div>
<div id="control-variables-cv" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Control Variables (CV)</h3>
<p>A <strong>Control Variable (CV)</strong> is a variable that is held constant in research. The unchanging state of a CV allows us to understand the extent to which the IV has a unique and independent effect on the DV.</p>
<p>In an experimental context, control variables represent a researcher’s attempt to control for alternative explanations so that the IV’s main effect on the DV can be isolated. In our leader inclusion example, we would seek to determine whether the reason for any observed differences in team-level belonging can be attributed to leader inclusion training rather than other factors that theoretically may explain the differences. In this setting, we should ensure that the two groups are similar with respect to characteristics such as gender and ethnicity, since underrepresented groups (URGs) may have different experiences independent of any training programs. In this case, gender and ethnicity are CVs.</p>
<p>While we control for the effects of alternative explanations by way of the research design in an experimental context, we will discuss ways to control for these statistically in Chapter @ref(lm) for correlational designs. CVs are equally important in experimental and non-experimental contexts.</p>
</div>
<div id="moderating-variables" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Moderating Variables</h3>
<p>A <strong>Moderating Variable</strong> influences the strength of the effect of an IV on a DV. Moderating variables are often referred to as <em>interactions</em> or <em>interaction terms</em> in models.</p>
<p>Moderating variables may augment (strengthen) or attenuate (weaken) the effect one variable has on another. Interactions are widely understood in the context of medications; one drug may independently have a positive effect on one’s health but when combined with another medication, the interaction can behave very differently – and may even be lethal! In our inclusive leadership example, we may find that the strength of the training’s effect on team-level belonging varies based on a leader’s span of control (SoC). It stands to reason that leaders with a lower SoC may find it easier to cultivate a climate of inclusivity and belonging, while leaders with a higher SoC may have more scope/projects and team dynamics to manage and may find it more difficult to consistently apply strategies covered during the training.</p>
<p>Interactions between variables are vital to our understanding of nuance and complexity in the dynamics influencing outcomes in organizational settings. Chapter @ref(lm) will cover how to test for significant interactions.</p>
</div>
<div id="mediating-variables" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Mediating Variables</h3>
<p>A <strong>Mediating Variable</strong> explains the <em>how</em> or <em>why</em> of an IV’s effect on a DV. It may be helpful to think of mediating variables as a “go-between” – a part of the causal pathway of an effect.</p>
<p>In the case of inclusive leadership training, effects on belonging are likely not the result of the training itself. More likely, the training raised awareness and helped leaders develop strategies to cultivate team inclusivity. One strategy endorsed during the training may be participative decision making, and the implementation of this strategy may explain <strong>why</strong> the training has a positive effect on team-level belonging. There may be multiple mediators of any observed effect of the intervention on team-level belonging depending on training outcomes.</p>
<p>Variables in these more complex relationship paths are sometimes characterized as <strong>proximal</strong> and <strong>distal</strong> effects. Proximal effects are those which <em>directly</em> influence an outcome, such as the impact of participative training on team belonging. Distal effects are upstream effects that <em>indirectly</em> influence an outcome, such as inclusion training participation.</p>
<p>Mediating variables may fully or partially mediate the relationship between an IV and DV. <strong>Full mediation</strong> indicates that the mediator fully explains the effect; in other words, without the mediator in the model, there is no relationship between an IV and DV. <strong>Partial mediation</strong> indicates that the mediator partially explains the effect; that is, there is still a relationship between an IV and DV without the mediator in the model. Partial mediation indicates that there are additional explanations for <em>how</em> or <em>why</em> observed effects exist, such as the implementation of additional team inclusion strategies influencing team belonging. In Chapter @ref(lm), we will discuss how to test for both full and partial mediation.</p>
<p>Translating research hypotheses into conceptual models of hypothesized relationships is helpful in visually representing the function of each variable in the study. Figure @ref(fig:concept-mdl) illustrates how each type of variable is depicted using our inclusive leadership example:</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/conceptual_model.png" alt="Conceptual Model of Hypothesized Relationships among Variables" width="75%" />
<p class="caption">
(#fig:concept-mdl)Conceptual Model of Hypothesized Relationships among Variables
</p>
</div>
<p><br /></p>
</div>
<div id="endogenous-vs.-exogenous-variables" class="section level3" number="4.1.6">
<h3><span class="header-section-number">4.1.6</span> Endogenous vs. Exogenous Variables</h3>
<p>Variables are sometimes referred to as either <em>endogenous</em> or <em>exogenous</em> in the context of linear regression, which will be covered in later chapters. Endogenous and exogenous variables are especially important in econometrics and economic modeling in which analysts seek to understand causal factors influencing outcomes of interest.</p>
<p>An <strong>endogenous variable</strong> is a dependent variable whose values can be determined or explained based on the other variables in a statistical model. In other words, values of the dependent variable change predictably with values of other variables in the model. By contrast, an <strong>exogenous variable</strong> is an independent variable on which other variables in the model have no direct or systematic impact.</p>
<p>For example, if we are interested in studying the factors influencing year-to-date (YTD) sales among salespeople, we may consider an independent variable such as years of sales experience. If YTD sales is a function of one’s sales experience, YTD sales is an endogenous variable since its values can be explained – at least in part – by the values of the independent factor (sales experience). Since one’s experience in sales is independent of other variables in the model (i.e., YTD sales does not influence a person’s years of experience), experience is an exogenous variable.</p>
</div>
</div>
<div id="measurement-scales" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Measurement Scales</h2>
<p><strong>Measurement scales</strong> are used to categorize and quantify variables. There are two major categorizations – <em>discrete</em> and <em>continuous</em> – and these, together with the research hypotheses, help determine appropriate types of analyses to perform.</p>
<div id="discrete-variables" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Discrete Variables</h3>
<p><strong>Discrete variables</strong> are also known as <em>categorical</em> or <em>qualitative</em> variables. Categorical variables have a finite or countable number of values associated with them, and these can be further categorized as either <em>nominal</em> or <em>ordinal</em>.</p>
<p><strong>Nominal</strong></p>
<p>A <strong>nominal</strong> variable is one with two or more categories for which there is no intrinsic ordering to the categories. Examples of nominal variables include office locations, departments, and teams. A <strong>dichotomous variable</strong> is a type of nominal variable which has only two unordered categories. Examples of dichotomous variables include people leader vs. individual contributor, active vs. inactive status, and remote worker vs. non-remote worker.</p>
<p><strong>Ordinal</strong></p>
<p>An <strong>ordinal</strong> variable is like a nominal variable with one important difference: ordinal variables have <em>ordered</em> categories. Examples of ordinal variables include education levels, job levels, and survey variables measured on Likert-type scales.</p>
</div>
<div id="continuous-variables" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Continuous Variables</h3>
<p><strong>Continuous variables</strong> are also known as <em>quantitative</em> variables. Continuous variables can assume any real value in some interval, and these can be further categorized as either <em>interval</em> or <em>ratio</em> variables.</p>
<p><strong>Interval</strong></p>
<p>Variables measured on an <strong>interval</strong> scale have a natural order and a quantifiable difference between values but no absolute zero value. Examples include SAT scores, IQ scores, and temperature measured in Fahrenheit or Celsius (but not Kelvin). In these examples, 0 is either not an option (i.e., SAT and IQ) or does not represent the absence of something (e.g., 0 degrees is a temperature, albeit a cold one!).</p>
<p><strong>Ratio</strong></p>
<p>Variables measured on a <strong>ratio</strong> scale have the same properties as data measured on an interval scale with one important difference: ratio data have an absolute zero value. Examples include compensation, revenue, and sales; a zero in these contexts is possible and would indicate a true absence of something.</p>
</div>
</div>
<div id="sampling" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Sampling</h2>
<p>The goal of research is to understand a population based on data from a subset of population members. In practice, it is often not feasible to collect data from every member of a population, so we instead calculate <strong>sample statistics</strong> to estimate <strong>population parameters</strong>.</p>
<p>Another important concept is the <strong>sampling frame</strong>. While the population represents the entire group of interest, the sampling frame represents the subset of the population to which the researcher has access. In an ideal setting, the population and sampling frame are the same, but they are often different in practice. For example, a professor may be interested in understanding student sentiment about a new school policy but only has access to collect data from students in the courses she teaches. In this case, the entire student body is the population but the students she has access to (those in the courses she teaches) represent the sampling frame. The sample is the subset of the sampling frame that ultimately participates in the research (e.g,. those who complete a survey or participate in a focus group).</p>
<div id="sampling-nonsampling-error" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Sampling &amp; Nonsampling Error</h3>
<p>Sampling and nonsampling errors are general categorizations of biases and error in research (Albright &amp; Winston, 2016).</p>
<div id="sampling-error" class="section level4" number="4.3.1.1">
<h4><span class="header-section-number">4.3.1.1</span> Sampling Error</h4>
<p><strong>Sampling error</strong> is the inevitable result of basing inferences on a random sample rather than the entire population. The two main contributors to sampling error are the size of the sample and variation in the underlying population. The risk of sampling error decreases as the sample size approaches the population size; however, it is usually not feasible to gain information from the entire population, so sampling error is generally a concern.</p>
<p><strong>Selection Bias</strong></p>
<p><strong>Selection bias</strong> is the bias introduced by a non-random method of selecting data for analysis, which can systematically skew results in a particular direction. Selection bias may result in observed relationships or differences that are not due to true relationships or differences in the underlying populations, but to the way in which participants or data were selected for the research.</p>
<p>A type of selection bias that is important to consider in people analytics is <strong>survival bias</strong>. In people analytics, survival bias is the logical error of focusing only on people who made it past some selection process while overlooking those who did not. For example, to gain an accurate understanding of the number of employees who <em>survive</em> to each tenure milestone (e.g., 1 year, 2 years, 3 years, etc.), we need to study both active and inactive people to avoid biased results. We may find a significant drop in the percent of active employees who survive from 3 to 4 years, for example, but without information on inactive employees we do not know if this is a function of hiring (i.e., relatively few hired more than 3 years ago) or due to a spike in attrition beyond 3 years of tenure.</p>
<p>The work of a mathematician named Abraham Wald during World War II is a classic example of survival bias. Wald was a member of the Statistical Research Group (SRG) at Columbia University that examined damage to returning aircraft (Wald, 1943). Rather than focusing on the areas with damage, Wald recommended a different way of looking at the data, suggesting that the reason certain parts of planes were not covered in bullet holes was because planes that were shot in these areas did not return. In other words, locations with bullet holes represented locations that could sustain damage and still return home. This insight led to armor being reinforced in areas with no bullet holes.</p>
<div class="figure" style="text-align: center">
<img src="graphics/ww2_plane_damage.png" alt="Hypothetical Data for Damaged Portions of Returning WWII Planes. Image Courtesy of Wikimedia Commons." width="75%" />
<p class="caption">
(#fig:ww2-plane-damage)Hypothetical Data for Damaged Portions of Returning WWII Planes. Image Courtesy of Wikimedia Commons.
</p>
</div>
<p>Missing data can sometimes be more valuable than the data we have, and it is critical to promote a representative data generative process to prevent biased selection and results.</p>
<p>It is important to understand the centrality of <strong>randomness</strong> in sampling. Randomization protects against subjective biases, self-validates the data, and is the key ingredient that defines the representative means of extracting information (Kahneman, 2011). Sample data that are not representative of the population of interest can lend to anomalies – mere coincidences. While non-random data can be leveraged for directionally accurate insights, randomness is required to make inferences about a broader population with a reasonable degree of confidence.</p>
<p>Let’s consider an example from Kahneman (2011) in which six babies are born in sequence at a hospital. The gender of these babies is of course random and independent; the gender of one does not influence the gender of another. Consider the three possible sequences of girls (G) and boys (B) below:</p>
<ul>
<li>BBBGGG</li>
<li>GGGGGG</li>
<li>BGBBGB</li>
</ul>
<p>Are these sequences equally likely? Though it may initially be counter-intuitive, since the events are independent and the outcomes (B and G) are (approximately) equally likely, any possible sequence of births is as likely as any other.</p>
<p>Sample size (colloquially referred to as the <span class="math inline">\(n\)</span>-count) is also important as this can have a material influence on the representativeness of sample data – and consequently, the veracity of results and conclusions based on them. As we will explore in Chapter @ref(inf-stats), as the sample size increases, so too does our confidence that estimates based on sample data reflect population parameters.</p>
<p>To illustrate the effects of sample sizes, let’s consider a hypothetical study in which the promotion rate in an organization is found to be lowest in divisions that are primarily software engineers, low diversity, small, and geographically dispersed. Which of these characteristics might offer an explanation? Let’s consider that this study also found that the divisions with highest promotion rates have identical characteristics: software engineers, low diversity, small, and geographically dispersed.</p>
<p>Small samples yield extreme results more often than large samples. Small samples neither cause nor prevent outcomes; they merely allow the incidence of the outcome to be much higher (or much lower) than it is in the larger population (Kahneman, 2011).</p>
<p><strong>Non-Probability Sampling</strong></p>
<p><strong>Non-probability sampling</strong> can help us gain insight into the <em>possible</em>. However, we cannot make inferences based on data collected through non-probability sampling methods since the sample is unlikely to be representative of the population.</p>
<p><strong>Convenience (Accidental) Sampling</strong></p>
<p><strong>Convenience sampling</strong> is the most common type of nonprobabilistic sampling. This sampling method involves taking samples that are conveniently located around a specific location (physical or virtual).</p>
<p>For example, if we were to study employee sentiment about new benefit plans by polling employees walking through the lobby of a particular office building one morning, this would represent convenience sampling. Aside from the risk of employees sharing socially desirable responses in such a setting and invalidating the results, a major shortcoming of this approach is that we are only capturing the sentiment of those who happen to walk into one particular building during one limited window of time. This would not capture the voice of employees who are working remotely, working in another office location, on PTO, taking a sick day, attending an offsite conference or meeting, or stuck in traffic and running late.</p>
<p><strong>Quota Sampling</strong></p>
<p><strong>Quota sampling</strong> is a nonprobabilistic sampling method in which researchers for a sample that is representative of a larger population. With quota sampling, researchers assign quotas to a group of people to create subgroups of individuals that reflect the characteristics of the population. This is nonprobabilistic since researchers choose the sample rather than randomly selecting it.</p>
<p>For example, if the characteristics of the employee population are known, the researcher polling employees in the office lobby about benefit plans could collect some additional information (e.g., department, job, tenure) to achieve a commensurate proportion of each in the sample. If 30% of employees in the larger workforce are in the Engineering department, the researcher could assign a quota – such as 3 in every 10 participants – to <em>choose</em> a sample in which 30% of employees come from the Engineering department.</p>
<p><strong>Purposive (Judgmental) Sampling</strong></p>
<p>The main goal of <strong>purposive sampling</strong> is to construct a sample by focusing on characteristics of a population that are of interest to the researcher. Purposive sampling is often used in qualitative or mixed methods research contexts in which a smaller sample is sufficient. Since it is a nonprobabilistic sampling method, purposive sampling is highly prone to researcher bias.</p>
<p>For example, the People Team may be interested in understanding what is top-of-mind for employees in order to design a survey with relevant items. The team may choose people to participate in focus groups to surface qualitative themes – not for the purpose of generalizing findings but to guide survey item selection efforts.</p>
<p><strong>Probability Sampling</strong></p>
<p><strong>Probability sampling</strong> can help us gain insight into the <em>probable</em>. The main difference between non-probability and probability sampling is that non-probability sampling does not involve random selection and probability sampling does. Probability sampling is intended to facilitate inferences since data collected through random selection methods is more likely to be representative of the population and protects against over-indexing on participants with similar qualities in the sample.</p>
<p><strong>Simple Random Sampling</strong></p>
<p><strong>Simple random sampling</strong> is a method in which each member of the population has the same probability of being selected for a sample. An example of simple random sampling is randomly selecting a specified number or percent of employees from the workforce to participate in a survey without regard for tenure, department, level, or other characteristics.</p>
<p>We can use the sample() function in R to randomly select from a vector of elements:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library for data wrangling</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible results</span></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 10 employees randomly</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(employees<span class="sc">$</span>employee_id, n, <span class="at">replace =</span> F)</span></code></pre></div>
<pre><code>##  [1] 2308 2018 2125 2004 1623 1905 1645 1934 1400 1900</code></pre>
<p>The <code>replace = F</code> argument in the sample() function indicates that we want to sample <em>without</em> replacement (i.e., we do not want an employee to be selected twice in the sample). For example, if we draw multiple names from a hat without replacement, we will not put names back into the hat once they are drawn; each has a chance of being selected only once.</p>
<p>While sampling <em>with</em> replacement would not make sense for applications such as pulse survey participation, as we would not want a given employee to take a survey multiple times, <code>replace = T</code> can be applied if the application requires it (e.g., a lottery in which employees can win more than once).</p>
<p><strong>Stratified Random Sampling</strong></p>
<p><strong>Stratified random sampling</strong> is a sampling method in which the population is first divided into <em>strata</em>. Then, a simple random sample is taken from each <em>stratum</em> – a homogeneous subset of the population with similar characteristics with regard to the variable of interest. The combined results constitute the sample.</p>
<p>To ensure samples do not comprise a larger proportion of employees from a particular department, education level, tenure band, generational cohort, or other variable deemed useful in explaining differences in response scores, researchers can randomly select members for each stratum based on the proportion in the respective stratum in the larger population. For example, if 30% of all employees are in the Engineering department, the researcher could <em>randomly</em> select a calculated number of employees from the Engineering department such that 30% of employees in the sample come from this department.</p>
<p>Let’s demonstrate stratified random sampling in R by sampling <span class="math inline">\(\frac{1}{2}\)</span> of employees within each department. First, we can review counts of employees for each department using the group_by() and summarise() functions from the <code>dplyr</code> library. Note that <code>dplyr</code> functions are chained together using a <code>%&gt;%</code> symbol:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return employee counts by department</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>employees <span class="sc">%&gt;%</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept) <span class="sc">%&gt;%</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   dept                       n
##   &lt;chr&gt;                  &lt;int&gt;
## 1 Human Resources           63
## 2 Research &amp; Development   961
## 3 Sales                    446</code></pre>
<p>Next, we will randomly select <span class="math inline">\(\frac{1}{2}\)</span> of employees within each department using the group_by() and sample_frac() functions from the <code>dplyr</code> library. We will store the selected employees’ records in a data frame and then query it to validate that the counts are roughly <span class="math inline">\(\frac{1}{2}\)</span> the total count observed for each department.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain and store stratified random sample</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>strat_sample <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept) <span class="sc">%&gt;%</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">sample_frac</span>(<span class="at">size =</span> .<span class="dv">5</span>)</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Return sample counts by department</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>strat_sample <span class="sc">%&gt;%</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept) <span class="sc">%&gt;%</span></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   dept                       n
##   &lt;chr&gt;                  &lt;int&gt;
## 1 Human Resources           32
## 2 Research &amp; Development   480
## 3 Sales                    223</code></pre>
<p><strong>Cluster Sampling</strong></p>
<p><strong>Cluster sampling</strong> is a sampling method often used in market research in which the population is first divided into clusters. Then, a simple random sample of clusters is taken. All the members of the selected clusters together constitute the sample. Unlike stratified random sampling, it is the clusters that are selected at random – not the individuals. It is hoped that each cluster by itself is representative of the population (i.e., each cluster is heterogeneous).</p>
<p>For example, employees could be partitioned into clusters based only on their geographic region. Since there is not further partitioning on other variables, each cluster is expected to be heterogeneous on the basis of variables other than geographic region – that is, unless geography is related to other variables (e.g., call center employees are all located in a company’s Pacific Northwest region). By selecting a random set of clusters, the combination of employees across the selected clusters is expected to be representative of the population.</p>
<p>Let’s demonstrate how to implement cluster sampling in R:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly assign each employee to 1 of 10 clusters (groups)</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>cluster <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">size =</span> <span class="fu">nrow</span>(employees), <span class="at">replace =</span> T)</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly select 5 clusters</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">unique</span>(employees<span class="sc">$</span>cluster), <span class="at">size =</span> <span class="dv">5</span>, <span class="at">replace =</span> F)</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Store cluster sample</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>clust_sample <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">filter</span>(cluster <span class="sc">%in%</span> clusters)</span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Display dimensions of the cluster sample object</span></span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(clust_sample)</span></code></pre></div>
<pre><code>## [1] 748  37</code></pre>
<p><strong>Systematic Sampling</strong></p>
<p><strong>Systematic sampling</strong> involves selecting sample members from a population according to a random starting point and a fixed, periodic interval known as a sampling interval. The sampling interval is computed by taking the population size and dividing it by the desired sample size. The resulting number is the interval at which population members are selected for the sample.</p>
<p>For example, if there are 10,000 employees and our desired sample size is 500, the sampling interval is 20. Therefore, we would select every 20th employee for our sample. It is important that the sequence does not represent a standardized pattern that would bias the data; this process needs to be random. For example, if the employee id generated by the HRIS increases with time, we would expect employees with longer tenure to have lower employee ids while new joiners would have higher employee ids. Ordering employees by employee id prior to selection could bias the sample on the basis of variables related to tenure (e.g., aggressive periods of Engineering hiring).</p>
<p>Let’s walk through the step-by-step process for implementing the systematic sampling procedure in R:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify desired sample size</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="dv">100</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine population size</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">nrow</span>(employees)</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute sampling interval, rounding up to nearest whole number via the ceiling() function</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>si <span class="ot">=</span> <span class="fu">ceiling</span>(N<span class="sc">/</span>n)</span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly select value between 1 and the sampling interval for starting value</span></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>strt <span class="ot">=</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>si, <span class="dv">1</span>)</span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Increment starting value by the sampling interval until the desired sample size is achieved, and hydrate index vector with the selected indices</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>index <span class="ot">=</span> <span class="fu">seq</span>(strt, strt <span class="sc">+</span> si <span class="sc">*</span> (n <span class="sc">-</span> <span class="dv">1</span>), si)</span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Store systematic sample</span></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a>syst_sample <span class="ot">&lt;-</span> employees[index, ]</span></code></pre></div>
</div>
<div id="nonsampling-error" class="section level4" number="4.3.1.2">
<h4><span class="header-section-number">4.3.1.2</span> Nonsampling Error</h4>
<p>There are many types of <strong>nonsampling error</strong> that can invalidate results beyond the sampling procedure, and we will focus on several that are particularly germane to people analytics: <em>nonresponse bias</em>, <em>nontruthful responses</em>, <em>measurement error</em>, and <em>voluntary response bias</em>.</p>
<p><strong>Nonresponse Bias</strong></p>
<p>Surveys are a staple in the set of data sources germane to people analytics. While survey data provide unique attitudinal and perceptive signals that can be highly predictive of future behavior and events, surveys tend to be far more susceptible to nonsampling error than other data sources.</p>
<p>As discussed in the context of sampling error, we usually do not have access to information on entire populations of interest, so we must consider the possibility that those for whom we are missing data may have common qualities, perceptions, or opinions that differ from those for whom we do have data. This is known as <strong>nonresponse bias</strong>. For example, if we administer an employee experience survey to the entire organization and receive a 60% response rate, the reality is that we do not know how the 40% of nonrespondents would have responded. It is possible that nonrespondents represent highly disengaged employees, in which case their responses may have materially influenced results and conclusions in an unfavorable direction. It is also possible that nonrespondents did not participate because they were busy, away on vacation, cynical to the confidentiality language in the communications, or any number of other reasons which may or may not have resulted in significantly different feedback from that of respondents.</p>
<p>As an aside, nonrespondents can actually function as an important variable in analyses. In some contexts, nonrespondents may be at greater risk of voluntary attrition than those who respond unfavorably on a stay intentions survey item such as, “I plan to be working here in one year.” Evaluating response rate distributions across departments, divisions, roles, and other dimensions may be an insightful endeavor.</p>
<p>Nonresponse bias is not limited to surveys. For example, self-reported demographics such as gender and ethnicity may not be disclosed by all employees in the HR information system (HRIS). This can bias segmentations based on these categorical dimensions. While there are strategies to address this, such as visual ID or applying models trained to infer missing values (which may be necessary to fulfill EEOC reporting requirements), there may still be error in the imputed values.</p>
<p><strong>Nontruthful Responses</strong></p>
<p>While high response rates may reduce nonresponse bias, this isn’t always something to celebrate. Organizations that incentivize participation in surveys often do so at the risk of people responding in socially desirable ways and providing <strong>nontruthful responses</strong> to achieve some defined target. For example, if an employee has an unhealthy relationship with his manager but does not trust that managers will not have access to individual-level responses, the employee may decide to indicate on the survey that everything is highly favorable to help the team win the month of casual days leadership promised. This can of course skew and invalidate results.</p>
<p>While survey participation should be strongly encouraged since higher response rates can mitigate the risk of certain types of bias and increase confidence that the survey is representative of the collective organization’s sentiments, incentivizing participation can be dangerous.</p>
<p><strong>Measurement Error</strong></p>
<p>The measurement method can affect observed data either by changing the underlying construct of interest, or by distorting the measurement process without impacting the construct itself (Spector, 2006).</p>
<p><strong>Common method variance (CMV)</strong>, also known as <strong>monomethod bias</strong>, relates to a widely held belief that relationships between variables measured using the same method are inflated. The idea that the measurement method itself introduces a degree of variance in measures has been cited in organizational papers for decades, and it is raised almost exclusively when cross-sectional, self-reported surveys are utilized. Though controversial, there is generally a consensus that where it is possible to do so, it is preferrable to leverage multiple measurement methods.</p>
<p>My doctoral dissertation research explored how implicit voice theories, which are deep-seated beliefs about the risks involved in speaking up to those higher in the organizational hierarchy (e.g., negative career consequences), influenced the extent to which individual contributors actually speak up in prosocial ways to their leaders (Starbuck, 2016). Since the individual contributors are best placed to provide information on the implicit beliefs they maintain, data for the IV were collected using cross-sectional self-reports. At the same time, I surveyed their immediate supervisors and asked them to rate each of their direct reports using a leader-directed voice scale; these supervisor-reports of leader-directed voice were used as the DV in this study. To investigate CMV, which was a tangential interest to the primary research objective, I also included the leader-directed voice scale (using self-reported language) on the survey administered to individual contributors.</p>
<p>For the 1,032 employees from whom I collected data in an investment firm context (individual contributors: <span class="math inline">\(n\)</span> = 696; supervisors: <span class="math inline">\(n\)</span> = 336), I was surprised to find only a weak correlation between self-reported voice and supervisor-reported voice (<span class="math inline">\(r\)</span> = .26, <span class="math inline">\(p\)</span> &lt; .01). On average, self-reported voice was higher with less variation (<span class="math inline">\(\bar{x}\)</span> = 5.91, <span class="math inline">\(s\)</span> = 1.15) relative to supervisor-reported voice (<span class="math inline">\(\bar{x}\)</span> = 5.69, <span class="math inline">\(s\)</span> = 1.34). Interestingly, there was support for almost none of the hypothesized relationships when supervisor-reported voice was positioned as the DV, though most were supported when self-reported voice was substituted as the DV in post-hoc analyses. Given the prevalence of monomethod self-reports in the social sciences, the influence of CMV is an important consideration.</p>
<p><strong>Measurement error</strong> relates to errors stemming from confusing questions, survey fatigue, and low-quality scales used to measure multidimensional psychological constructs. The field of <strong>psychometrics</strong> is a vast scientific discipline concerned with the development of assessment tools, measurement instruments, and formalized models to understand latent psychological constructs such as engagement, belonging, purpose, and wellbeing using observable indicators.</p>
<p>The reduction of measurement error is a principal concern to psychometricians. For a deeper treatment of the survey scale development process, see DeVellis (2012). While an exhaustive treatment of psychometrics is beyond the scope of this book, <em>reliability</em> and <em>validity</em> are two broad sets of methods designed to increase the robustness of psychological instrumentation which will be reviewed in this section. Even slight adjustments to validated instrumentation – such as changing the number of scale anchors (e.g., increasing from a 5-point to 7-point Likert scale), tweaking item language, or modifying which items are included in a composite scale – generally warrant reliability and validity analyses.</p>
<p>Figure @ref(fig:reli-vali) illustrates differences between reliability and validity.</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/reliability_validity.png" alt="Reliability and Validity" width="75%" />
<p class="caption">
(#fig:reli-vali)Reliability and Validity
</p>
</div>
<p><br /></p>
<p>A weight scale may be a helpful example for understanding differences between these concepts. A weight scale is designed to provide an accurate measurement of one’s weight, and we expect measurements to be consistently accurate over time. If a 150 lb. person steps onto a weight scale and receives a reading of 180 lbs., the scale is not valid as the person actually weighs 30 lbs. less than the reading. If the person steps onto the scale a second time moments later and receives a reading of 200 pounds, the scale is not reliable either (inconsistent measurements). As researchers, it is critical to measure what we intend to measure (validity) and do it with consistency (reliability). Survey items with poor psychometric properties can lend to invalid conclusions due to measurement error.</p>
<p><strong>Reliability</strong> describes the quality of measurement (i.e., the consistency or repeatability of measures). Types of reliability include:</p>
<ul>
<li><strong>Inter-Rater or Inter-Observer Reliability</strong>: the degree to which different raters/observers give consistent estimates of the same phenomenon.</li>
<li><strong>Test-Retest Reliability</strong>: the consistency of a measure from one time to another.</li>
<li><strong>Parallel-Forms Reliability</strong>: the consistency of the results of two tests constructed in the same way from the same content domain.</li>
<li><strong>Internal Consistency Reliability</strong>: the consistency of results across items within a test.</li>
</ul>
<p><strong>Validity</strong> describes how well a concept was translated into a functioning and operating reality (operationalization). There are four main types of validity: (a) <em>face validity</em>, (b) <em>content validity</em>, (c) <em>construct validity</em>, and (d) <em>criterion-related validity</em>:</p>
<p><strong>Face validity</strong></p>
<p><strong>Face validity</strong> is an assessment of how valid a measure appears on the surface. In other words, face validity represents whether the measurement approach “on its face” is a good translation of the construct. This is the least scientific method of validity and should never be accepted on its own merits.</p>
<p><strong>Content Validity</strong></p>
<p><strong>Content validity</strong> is a somewhat subjective assessment of whether a measure covers the full content domain. Content validity relies on people’s perceptions to measure constructs that would otherwise be difficult to measure.</p>
<p>For example, a panel of experts may gather to discuss the various dimensions of a theoretical construct. The psychometrician may then use this information to develop survey items that tap these dimensions to achieve a comprehensive measure of the construct.</p>
<p><strong>Construct Validity</strong></p>
<p>In social science, constructs are often measured using a collection of related indicators that together, tap the various dimensions of the theoretical idea. Constructs may manifest in a set of behaviors, which provide evidence for their existence. <strong>Construct validity</strong> represents the degree to which a collection of indicators and behaviors – the <strong>operationalization</strong> of the concept – truly represents theoretical constructs.</p>
<p>Psychological safety, a belief that a context is safe for interpersonal risk-taking (Edmondson, 1999), has no direct measure. However, there are indicators and behaviors that are helpful in understanding the extent to which an environment is psychologically safe. We may ask employees whether they are able to bring up problems to decision makers or whether it is safe to take risks on their team. Based on the theoretical conception of psychological safety, these would be helpful (though not exhaustive) indicators of the construct in an organizational setting.</p>
<p>There are two types of construct validity:</p>
<ul>
<li><strong>Convergent validity</strong>: the degree to which the operationalization is similar to (converges on) other operationalizations to which it theoretically should be similar.</li>
<li><strong>Discriminant validity</strong>: the degree to which the operationalization is not similar to (diverges from) other operationalizations to which it theoretically should not be similar.</li>
</ul>
<p>A <strong>nomological network</strong> is central to providing evidence for a measure’s construct validity. The nomological network is an idea developed by Cronbach and Meehl (1955) to represent the constructs of interest, their observable manifestations, as well as the interrelationships among them. The term “nomological” is derived from the Greek word meaning “lawful”; therefore, the nomological network aims to make clear what a construct means so that laws (nomologicals) can be applied. Simply put, the nomological network attempts to link the conceptual and theoretical realm to the observable one to provide a practical methodology for assessing a measure’s construct validity.</p>
<p>If psychological safety theory suggests the construct should be positively related to leader openness and negatively associated with employee withholding (silence), we can use validated measures of openness and withholding to test for these theoretical relationships with psychological safety and substantiate construct validity.</p>
<p><strong>Criterion-Related Validity</strong></p>
<p><strong>Criterion-related validity</strong>, sometimes referred to as <em>instrumental validity</em>, describes how well scores from one measure are adequate estimates of performance on an outcome measure (or <em>criterion</em>).</p>
<p>There are two types of criterion-related validity:</p>
<ul>
<li><strong>Predictive validity</strong>: the operationalization’s ability to predict something it should theoretically be able to predict.</li>
<li><strong>Concurrent validity</strong>: the operationalization’s ability to distinguish between groups that it should theoretically be able to distinguish between.</li>
</ul>
<p>If psychological safety should positively influence employee voice, there would be support for predictive validity if we find that employees who report more favorable perceptions of psychological safety are more willing to speak up. If we administer a new scale to measure psychological safety and <em>at the same time</em> (concurrently) administer an existing, validated measure of the same construct, highly correlated results would lend support for the new measure’s concurrent validity.</p>
</div>
</div>
</div>
<div id="review-questions-2" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What are the differences between parameters and statistics?</p></li>
<li><p>How does a sampling frame differ from a sample?</p></li>
<li><p>How does cluster sampling differ from stratified random sampling?</p></li>
<li><p>What is the primary benefit of probabilistic sampling methods over non-probabilistic sampling?</p></li>
<li><p>Is nonresponse bias only applicable in the context of surveys?</p></li>
<li><p>What type of variable influences the strength of the effect one variable has on another?</p></li>
<li><p>100 randomly selected employees in the Marketing department of an organization participated in a survey on career pathing for marketing professionals. What is the sample and what is the population in this case?</p></li>
<li><p>How does the meaning of zero differ between interval and ratio-scaled variables?</p></li>
<li><p>Can discrete variables have more than 2 values?</p></li>
<li><p>What are some examples of nonprobabilistic sampling methods?</p></li>
</ol>
<!--chapter:end:r/04_measurement_sampling.Rmd-->
</div>
</div>
<div id="research" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Research Fundamentals</h1>
<p>The importance of appropriate research methods and designs cannot be overstated. Just as probability sampling methods help us achieve data that are representative of the population, research methods and designs help us achieve an accurate understanding of various phenomena and ensure conclusions are justified.</p>
<div id="research-questions" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Research Questions</h2>
<p><strong>Research questions</strong> are fundamental to all research projects. Research questions help focus the study, determine the appropriate methodology, and guide each stage of inquiry, analysis, and reporting. Some examples of research questions germane to people analytics include:</p>
<ul>
<li><span class="math inline">\(Q_1\)</span>: Why has there been an increase in attrition over the past quarter?</li>
<li><span class="math inline">\(Q_2\)</span>: How equitable are promotion nominations across the organization?</li>
<li><span class="math inline">\(Q_3\)</span>: Are there meaningful differences in the favorability of experiences for remote vs. non-remote employees?</li>
<li><span class="math inline">\(Q_4\)</span>: Do new joiners have the training and resources they need to be successful?</li>
<li><span class="math inline">\(Q_5\)</span>: What portion of team performance is attributable to leadership effectiveness?</li>
</ul>
</div>
<div id="research-hypotheses" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Research Hypotheses</h2>
<p><strong>Research hypotheses</strong> are testable statements about the expected outcome of a research project or experiment.</p>
<ul>
<li><span class="math inline">\(H_1\)</span>: Manager satisfaction is a significant predictor of voluntary attrition.</li>
<li><span class="math inline">\(H_2\)</span>: Promotion nomination rates are not significantly different by gender and ethnicity.</li>
<li><span class="math inline">\(H_3\)</span>: Employee experience favorability is not significantly different between remote and non-remote workers.</li>
<li><span class="math inline">\(H_4\)</span>: New hire training perceptions are positively associated with onboarding experience favorability.</li>
<li><span class="math inline">\(H_5\)</span>: Leadership effectiveness perceptions explain significant variation in team performance.</li>
</ul>
</div>
<div id="internal-vs.-external-validity" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Internal vs. External Validity</h2>
<p><strong>Internal validity</strong> refers to the extent to which confounding variables are controlled. In other words, internal validity reflects the <em>robustness</em> of the study.</p>
<p>For example, if a study finds a significant relationship between work location and attrition but considers no other factors or explanations, this would <em>not</em> be a robust study. Work location may emerge significant because certain roles for which attrition is higher are more concentrated in one or more geographies. It could also be the case that the company has made acquisitions in new geographies, and the acquired employees have significantly different experiences (and attrition rates) relative to non-acquired employees.</p>
<p><strong>Confounding variables</strong> are critically important in the context of internal validity. A confounding variable is an extraneous variable whose presence impacts the variables being studied such that results do not reflect the actual relationships. Studies with weak internal validity often result in spurious associations that <em>confound</em> the true relationship between two variables, leading to invalid conclusions and recommendations.</p>
<p><strong>External validity</strong> refers to the extent to which study conclusions will hold in other contexts (for other people, in other places, at other times). <em>Randomization</em> is fundamental to our ability to generalize and apply findings to other groups or contexts.</p>
<p>If we survey employees to understand sentiments about recent changes in business strategy but exclude groups for which there may be different impacts or perceptions, conclusions about the collective sentiment would be suspect at best.</p>
</div>
<div id="research-methods" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Research Methods</h2>
<p>There are three major categories of research methods: (1) <em>quantitative</em>, (2) <em>qualitative</em>, and (3) <em>mixed methods</em>.</p>
<ol style="list-style-type: decimal">
<li><strong>Quantitative</strong>
<ul>
<li>Addresses “what” questions</li>
<li>Utilizes numerical data (e.g., surveys, systems)</li>
<li>Primarily deductive</li>
<li>Used to test hypotheses</li>
<li>Involves statistical analyses</li>
<li>More objective</li>
<li>More generalizable</li>
</ul></li>
<li><strong>Qualitative</strong>
<ul>
<li>Addresses “how” and “why” questions</li>
<li>Utilizes text data (e.g., focus groups, interviews, open-ended feedback)</li>
<li>Primarily inductive</li>
<li>Used to formulate theory or hypotheses</li>
<li>Involves organizing data into categories or themes</li>
<li>More subjective</li>
<li>Less generalizable</li>
</ul></li>
<li><strong>Mixed Methods</strong>
<ul>
<li>Integrates the strengths of both quantitative and qualitative methods within a single study, often leading with qualitative approaches to build theory and hypotheses followed by quantitative methods to test hypotheses</li>
</ul></li>
</ol>
</div>
<div id="research-designs" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Research Designs</h2>
<p>In addition to determining whether a quantitative, qualitative, or mixed methods study is most appropriate, researchers also need to decide on the type of study within each of these three. <strong>Research designs</strong> are the types of inquiry within quantitative, qualitative, and mixed methods approaches that issue specific direction for the research procedures (Creswell, 2018). There are multiple taxonomies for research designs, and we will simplify to the most common types.</p>
<p>Within the quantitative category, there are three types of designs: (a) <em>experimental</em>, (b) <em>quasi-experimental</em>, and (c) <em>correlational</em>. As shown in Figure @ref(fig:res-designs), it is important to understand the centrality of randomization in this decision.</p>
<div class="figure" style="text-align: center">
<img src="graphics/research_designs.png" alt="Quantitative Research Designs" width="75%" />
<p class="caption">
(#fig:res-designs)Quantitative Research Designs
</p>
</div>
<p><strong>Experimental Research</strong></p>
<p><strong>Experimental research</strong> is concerned with casual (internal) validity. Randomized experimental designs provide the most rigor with regard to causal validity. However, in social science research contexts, true experiments often are not possible due to ethical considerations.</p>
<p>For example, if we were interested in understanding the causal effect leadership quality has on employee engagement, based on a hypothesis that poor leadership decreases employee engagement, we would need to randomly assign employees to one of two groups that are identical on the basis of all variables that could theoretically explain why employees vary in their levels of engagement. Then, we would need to manipulate the variable of interest (leadership quality) to evaluate if the group of employees subjected to poor leadership (treatment group) reports significantly different levels of engagement relative to the group of employees for whom leadership quality has not been manipulated (control group). In a practical setting, it would of course be unethical to purposefully subject employees to poor leadership with the expectation of reducing engagement – and consequently, retention, productivity, and impact to the organization.</p>
<p>Clinical trials are a common setting for true experiments, as isolating the effects of an experimental drug can be a matter of life or death. In a randomized clinical trial, patients are randomly assigned to an experimental group (patients who receive the drug) or control group (patients who receive a placebo). To protect against placebo effects biasing the results, patients do not know if they receive the experimental treatment or the placebo. Done correctly, these experiments have the highest level of internal validity.</p>
<p>Another example of an experimental design is <strong>A/B testing</strong>. A/B testing is often performed in the context of website optimization, in which two or more versions of the site are shown to customers to identify which version impacts key success metrics more positively. In a people analytics context, we may create two versions of a dashboard and <em>randomly</em> assign the permissioned users to each. We could then assess whether utilization rates, average usage time, repeat usage, among other success measures are significantly different between the two groups of users to inform which design is most effective.</p>
<p>In experimental research, it is important to consider the influence of the <strong>Hawthorne Effect</strong>, which refers to the tendency of some individuals to modify their behavior in response to the awareness that they are being observed. This term was coined during experiments at Western Electric’s factory in the Hawthorne suburb of Chicago in the late 1920s and early 1930s. One of many studies conducted to understand how work environments effect productivity was known as the “Illumination Experiment”. During this study, researchers experimented with a number of lighting levels in a warehouse in which workers made electrical relays. The researchers found that any change in the lighting – even when introducing poor lighting – led to favorable changes in output. However, these productivity gains disappeared once the attention faded (Roethlisberg &amp; Dickson, 1939).</p>
<p>In a people analytics context, if we inform employees that we are going to monitor their productivity more closely over a period of time, it is likely that at least some employees will attempt to modify their behavior in order to increase productivity levels. After all, higher productivity is generally regarded as an ideal across companies and industries. In this case, manipulation of an IV to study a treatment effect, such as flexible work arrangements, would be impacted by this phenomenon; that is, observed differences in productivity may not be attributable to flexible work arrangements but merely due to employees knowing they were being observed.</p>
<p><strong>Quasi-Experimental Research</strong></p>
<p><strong>Quasi-experimental research</strong> is an experiment in which participants cannot be randomly assigned.</p>
<p>In the case of our leadership quality example, a quasi-experiment may examine engagement differences between two groups of employees who rate their leader either favorably (Group A) or unfavorably (Group B). A key limitation of this approach is that the groups may be different in important ways beyond leader perception incongruities. For example, Group A employees may be concentrated within a single department, whereas Group B employees may span all other departments. This would indicate that the difference in leadership – and presumably engagement – is driven by factors unique to the department, making it more challenging to isolate the effects of leadership quality on engagement. Perhaps the department with unfavorable leader perceptions has seen significant attrition, or the department is largely first-time people leaders in need of coaching and support.</p>
<p>Another example of quasi-experiments is a pretest-posttest setting in which there are multiple measures. Random assignment could be used in pretest-posttest contexts, in which case this would be characterized as a true experiment, but often this approach is implemented without random assignment. For example, we could test the hypothesized effect of leadership quality on engagement via a pretest-posttest approach. If leaders are selected for a leadership development workshop, we could survey the leaders’ teams and collect data on leader effectiveness perceptions and self-reported engagement prior to (baseline) and after the workshop. It is unlikely that leaders were selected for this workshop by a random process; more likely, there were criteria driving the selection, such as leaders who were identified as critical talent or who achieved a certain performance level. If this study finds that improvements in leadership effectiveness correlate with improvements in engagement, there would be <em>some</em> evidence in favor of improving leadership quality; however, this would not be sufficient evidence for a causal effect.</p>
<p>Though quasi-experiments are not as robust as true experiments, they are usually more feasible in a people analytics context. True experiments control for confounding variables by way of the research design (randomization ensures equivalent groups), while these factors must be controlled statistically in quasi-experimental contexts. In Chapter @ref(lm), we will discuss how to model relationships among multiple variables in order to study how one variable influences another while holding constant variables that may influence the outcome but are not the primary focus of the research.</p>
<p><strong>Non-Experimental Research</strong></p>
<p>Unlike experimental and quasi-experimental designs, <strong>non-experimental research</strong> does not involve the manipulation of an IV. The goal of non-experiments is not to provide evidence for causal effects, but to study measured variables as they naturally occur and disentangle patterns in the data.</p>
<p>Given the potential for alternative explanations of any observed differences or relationships, non-experimental research tends to have lower internal validity than experimental and quasi-experimental designs. As we have discussed, it is often not possible or ethical to manipulate IVs or to randomly assign people to groups. In addition, the nature of research questions does not always warrant experiments. In these cases, one or three non-experimental approaches may be considered: (a) <em>cross-sectional</em>, (b) <em>correlational</em>, and (c) <em>observational</em>.</p>
<p><strong>Cross-sectional research</strong> compares two or more natural groups of people. For example, we may examine differences in engagement between employees in the Engineering department relative to employees in the Product department. In this case, we would neither manipulate one’s department to determine how department influences engagement, nor randomly assign employees to these departments. Department membership exists apart from the research, so these naturally occurring groups can be leveraged for comparisons. There are of course many examples of naturally occurring groups that we would not manipulate, such as gender, ethnicity, generation, education, job family, job level, location, and tenure band. When participant characteristics are used to create groups, the IV is sometimes referred to as <em>experimenter-selected</em> rather than <em>experimenter-manipulated</em> IVs.</p>
<p><strong>Correlational research</strong> involves studying the statistical relationship between two variables without the manipulation of an IV. The relationship between leadership quality and engagement could be evaluated using correlational research. However, we would be unable to leverage a correlational design to test a hypothesis positing a causal effect of leadership quality on engagement. We would be limited to understanding how leadership quality and engagement covary; that is, to what extent a change in one variable is associated with a change in the other. Engagement may tend to increase as leadership quality increases, but a correlational design does not lend to understanding the direction of causal influence – if such an effect exists.</p>
<p><strong>Observational research</strong> refers to studies in which the researcher gathers information without research subjects being explicitly involved in the recording of data. Collecting data from the company’s HRIS could be an observational research method. For example, if we access data on terminations to determine the rate of attrition over a specified period, we would not need to interfere by asking past or present employees for this information. We would also do so without manipulating an IV, tagging people to naturally occurring or artificially created groups, or evaluating the association of attrition with another variable. The reality is that such an approach would not be too actionable, however, as this would offer no understanding of what may be influencing attrition or how attrition varies across departments, jobs, locations, or other theoretically-relevant dimensions.</p>
</div>
<div id="review-questions-3" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What type of research method and design would be best suited for a study aiming to understand the effect of stay interviews on employee attrition?</p></li>
<li><p>Why are quasi-experiments less rigorous than true experiments?</p></li>
<li><p>Why aren’t experimental designs always implemented when an experimenter-manipulated IV is warranted?</p></li>
<li><p>What is the role of research questions?</p></li>
<li><p>What is the role of research hypotheses?</p></li>
<li><p>What is the difference between internal and external validity, and why are these concepts important in research?</p></li>
<li><p>What is an example of a mixed methods study?</p></li>
<li><p>What is the key difference between experimental and non-experimental research designs?</p></li>
<li><p>What are the differences between cross-sectional, correlational, and observational non-experimental designs?</p></li>
<li><p>How can the Hawthorne Effect impact the integrity of an experiment?</p></li>
</ol>
<!--chapter:end:r/05_research_fundamentals.Rmd-->
</div>
</div>
<div id="data-mgmt-prep" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Data Management &amp; Preparation</h1>
<p>To begin a data analysis, we must first access and organize the relevant data. These tasks – together with data preparation steps outlined in this chapter – account for a large part of the work analytics professionals do.</p>
<div class="figure" style="text-align: center">
<img src="graphics/data_scientist_tasks.jpeg" alt="What Data Scientists Really Do" width="75%" />
<p class="caption">
(#fig:ds-tasks)What Data Scientists Really Do
</p>
</div>
<div id="data-management" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Data Management</h2>
<p>Data are generally extracted directly from the source systems in which they are generated or from downstream repositories such as a <em>data lake</em>, <em>data warehouse</em>, or <em>data mart</em>. To properly and efficiently extract data – often through the use of SQL as covered in Chapter @ref(sql-intro) – it is important to first understand some of the most common ways in which data are stored and structured.</p>
<p>A <strong>data lake</strong> stores myriad types of data – both structured and unstructured – in its native format until needed. <strong>Structured data</strong> refers to data that fits a predefined data model, such as hire dates formatted as <code>MM/DD/YYYY</code> or zip codes stored as a five-digit string. <strong>Unstructured data</strong> has no predefined data model, such as audio and video files, free-form performance review comments, emails, or digital exhaust from messaging tools; it is difficult to structure this type of data within a set of related tables.</p>
<p>The main difference between a data lake and data warehouse is the type of data they are designed to store. A <strong>data warehouse (DW)</strong> is designed to support analytics across large collections of data, such as transactional data (e.g., point-of-sale systems), point-in-time snapshots (e.g., month-end close reports), survey responses, spreadsheets, and more. As shown in Figure @ref(fig:dw-schema), data in a DW are structured and organized into schemas of related tables to enhance the performance of queries spanning sets of large and diverse data.</p>
<p>Figure @ref(fig:dw-schema) illustrates how worker, position, and recruiting schemas may be related. For example, a candidate submits a job application to a posted requisition, which is connected to an open position Finance approved as part of the company’s workforce plan; when the selected candidate is hired, they become a worker with one or many events (hire, promotion, transfer, termination) and activities (learning, performance appraisals, surveys) during their tenure with the company.</p>
<div class="figure" style="text-align: center">
<img src="graphics/dw_schema.png" alt="Related Tables Organized within Schemas" width="100%" />
<p class="caption">
(#fig:dw-schema)Related Tables Organized within Schemas
</p>
</div>
<p>Tables in a DW are related using a set of keys. Each table needs a <strong>Primary Key (PK)</strong>, which is a unique identifier for each row in the table. A PK may be a single column or multiple columns; a multi-column PK is often referred to as a <em>composite key</em>. It is generally best to leverage non-recyclable system-generated ids for PKs, as descriptors like names tend to be unreliable. A <strong>Foreign Key (FK)</strong> is a column whose values correspond to the values of a PK in another table. <strong>Referential integrity</strong> is the logical dependency of a FK on a PK, and these constraints protect against orphaned FK values in child tables by deleting PK values from an associated parent table.</p>
<p>Figure @ref(fig:dw-erd) shows an <strong>Entity Relationship Diagram (ERD)</strong> that depicts PK/FK relationships among the Position, Worker, and Requisition tables. Notice that the PK of each related table shown in Figure @ref(fig:dw-schema) is listed as a FK.</p>
<div class="figure" style="text-align: center">
<img src="graphics/dw_erd.png" alt="Entity Relationship Diagram (ERD)" width="75%" />
<p class="caption">
(#fig:dw-erd)Entity Relationship Diagram (ERD)
</p>
</div>
<p>A DW may contain many different types of tables, but this chapter will focus on the two most common which are known as <em>Type 1</em> and <em>Type 2</em> tables. These tables are sometimes referred to as <strong>slowly changing dimensions (SCD)</strong>.</p>
<p>A <strong>Type 1 table</strong> is created on a regular cadence (usually daily or monthly) and contains no history – only current values. For example, a Type 1 table may contain the latest known attributes for each active and terminated worker such as job, location, and manager. Type 1 tables are often archived and appended to prior snapshots with an effective date, and this design has utility when a view of the workforce is required as of a past date or when an analysis calls for querying across multiple point-in-time snapshots (e.g., computing trailing 12-month attrition rates using average monthly headcount).</p>
<p>It is important to note that leveraging snapshots for trending analyses has significant deficiencies given the large number of retroactive transactions processed in HCM applications that are never reflected in prior snapshots. Below are some examples:</p>
<ul>
<li>Org changes for which incorrect manager assignments are later identified and corrected</li>
<li>Back-dated compensation changes</li>
<li>Job profile attribute updates, resulting in incorrect values across snapshots prior to the update date</li>
<li>Edits to hire, promotion, transfer, and termination events after completing the business process in the system (e.g., delayed start date)</li>
</ul>
<p>While a past date may be set as the effective date for these transactions, snapshots would incorrectly indicate that the change was effective on the date they were entered into the system (i.e., when the value first changed across snapshots), resulting in misalignment with the system of record. This can result in inaccurate metrics related to headcount, hires, career moves, and terminations in a given period. This type of data leakage can quickly become a larger issue as the size and complexity of the workforce grows. Even a few discrepancies relative to what managers see in the source system can create mistrust in data solutions and hamstring progress up the analytics value chain.</p>
<p>A <strong>Type 2 table</strong> is a table in which a new record is inserted when a change occurs for one or more specified dimensions. Jobs, managers, and locations are examples of slowly changing dimensions but unlike the Type 1 table which contains only the latest information, the Type 2 table houses a <em>start date</em> and <em>end date</em> (where applicable) for each worker and dimension to facilitate reporting and analysis on changes to attribute values over time – based on when they actually took effect.</p>
<p>Figure @ref(fig:type-2-tbl) illustrates the design of a Type 2 SCD for an active worker’s job, manager, and location changes. As the data show, worker 123 was promoted from Data Analyst to Sr. Data Analyst 1.5 years after joining, began reporting to their original manager (456) after a short stint reporting to someone else (789), and has worked remotely throughout their tenure with the company.</p>
<p>Note that rows where <code>end_date = '12/31/9999'</code> indicate <em>current attributes</em> for active workers. For inactive workers, <code>end_date</code> is set to the worker’s termination date for rows that represent <em>last known attributes</em>:</p>
<div class="figure" style="text-align: center">
<img src="graphics/type_2_table.png" alt="Type 2 SCD" width="100%" />
<p class="caption">
(#fig:type-2-tbl)Type 2 SCD
</p>
</div>
<p>To construct a view of the last known attributes for each worker in this table, we could select rows where the current date is on or after <code>start_date</code> and on or prior to <code>end_date</code> for active workers and then select the most recent rows (with max <code>end_date</code>) for inactive workers, but this approach would be unnecessarily complex. Using a Type 1 table simplifies the task and output since each dimension value is stored in a separate column and there is only one row per employee. Figure @ref(fig:type-1-tbl) shows how the current record for worker 123 would look in a Type 1 SCD:</p>
<div class="figure" style="text-align: center">
<img src="graphics/type_1_table.png" alt="Type 1 SCD" width="100%" />
<p class="caption">
(#fig:type-1-tbl)Type 1 SCD
</p>
</div>
<p>A <strong>data mart</strong> is a subset of a DW designed to easily deliver specific information to a certain set of users on a particular subject or for a well-defined use case. For example, in a people analytics context a diversity data mart could be developed to better isolate and secure restricted data such as gender and ethnicity. This data may be used to support diversity descriptives and trends for a limited audience approved by Data Privacy and Employment Law counsel based on justified business needs.</p>
<p><strong>Modern Data Architecture</strong></p>
<p>Though a deep treatment of data architecture is beyond the scope of this book, it is important to acknowledge the significant advancements in infrastructure and computation since these complex SCD architectures were introduced by Kimball (1996). These developments have greatly improved the efficiency with which analysts can translate data into information and insight. The primitive systems in place decades ago required expensive <strong>ETL</strong> jobs to <strong>extract (E)</strong> data from source systems, <strong>transform (T)</strong> data using complex transformation rules, and <strong>load (L)</strong> the transformed data to relational tables – which then required complex queries to wrangle and analyze the data.</p>
<p>With modern cloud environments, the significant investment associated with humans designing, developing, and maintaining these complex architectures is often difficult to justify given how inexpensive storage and compute have become. Increasingly, the heavy computational tasks have migrated out of data pipelines and into the analytics layer wherein analytics teams have more flexibility and control. Today, daily snapshots containing <em>all</em> current and historical records can be copied and stored within partitioned DW tables for a negligible increase in storage costs, and this greatly simplifies data pipeline complexity and engineering support requirements. This changing dynamic has given rise to a new breed of data engineers focused on optimizing the heavy computation requirements of analytics teams.</p>
</div>
<div id="data-screening-cleaning" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Data Screening &amp; Cleaning</h2>
<p>The initial data review process is sometimes referred to as <strong>exploratory data analysis (EDA)</strong>. EDA involves investigating patterns, completeness, anomalies, and assumptions using summary statistics and graphical representations. An analytics ideal is <em>unimpeachable data quality</em>, which is to say that the rigor of upstream processes and downstream data screening is such that stakeholders become confident enough to channel more energy towards actioning on results than questioning the quality. Suspect data quality is often surfaced during the initial EDA step and affords the opportunity to address and avoid stakeholders discounting results during later phases of the project.</p>
<p>A handy function in base R for initial data screening is <code>summary()</code>:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize df</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(employees)</span></code></pre></div>
<pre><code>##   employee_id      active          stock_opt_lvl      trainings    
##  Min.   :1001   Length:1470        Min.   :0.0000   Min.   :0.000  
##  1st Qu.:1368   Class :character   1st Qu.:0.0000   1st Qu.:2.000  
##  Median :1736   Mode  :character   Median :1.0000   Median :3.000  
##  Mean   :1736                      Mean   :0.7939   Mean   :2.799  
##  3rd Qu.:2103                      3rd Qu.:1.0000   3rd Qu.:3.000  
##  Max.   :2470                      Max.   :3.0000   Max.   :6.000  
##                                                                    
##       age         commute_dist        ed_lvl        ed_field        
##  Min.   :18.00   Min.   : 1.000   Min.   :1.000   Length:1470       
##  1st Qu.:30.00   1st Qu.: 2.000   1st Qu.:2.000   Class :character  
##  Median :36.00   Median : 7.000   Median :3.000   Mode  :character  
##  Mean   :36.92   Mean   : 9.193   Mean   :2.913                     
##  3rd Qu.:43.00   3rd Qu.:14.000   3rd Qu.:4.000                     
##  Max.   :60.00   Max.   :29.000   Max.   :5.000                     
##                                                                     
##     gender          marital_sts            dept             engagement  
##  Length:1470        Length:1470        Length:1470        Min.   :1.00  
##  Class :character   Class :character   Class :character   1st Qu.:2.00  
##  Mode  :character   Mode  :character   Mode  :character   Median :3.00  
##                                                           Mean   :2.73  
##                                                           3rd Qu.:3.00  
##                                                           Max.   :4.00  
##                                                                         
##     job_lvl       job_title           overtime         business_travel   
##  Min.   :1.000   Length:1470        Length:1470        Length:1470       
##  1st Qu.:1.000   Class :character   Class :character   Class :character  
##  Median :2.000   Mode  :character   Mode  :character   Mode  :character  
##  Mean   :2.064                                                           
##  3rd Qu.:3.000                                                           
##  Max.   :5.000                                                           
##                                                                          
##   hourly_rate       daily_comp     monthly_comp    annual_comp    
##  Min.   : 30.00   Min.   :240.0   Min.   : 5200   Min.   : 62400  
##  1st Qu.: 48.00   1st Qu.:384.0   1st Qu.: 8320   1st Qu.: 99840  
##  Median : 66.00   Median :528.0   Median :11440   Median :137280  
##  Mean   : 65.89   Mean   :527.1   Mean   :11421   Mean   :137054  
##  3rd Qu.: 83.75   3rd Qu.:670.0   3rd Qu.:14517   3rd Qu.:174200  
##  Max.   :100.00   Max.   :800.0   Max.   :17333   Max.   :208000  
##                                                                   
##    ytd_leads       ytd_sales       standard_hrs salary_hike_pct  perf_rating   
##  Min.   :11.00   Min.   : 15496   Min.   :80    Min.   :11.00   Min.   :3.000  
##  1st Qu.:45.00   1st Qu.: 56997   1st Qu.:80    1st Qu.:12.00   1st Qu.:3.000  
##  Median :59.00   Median : 73505   Median :80    Median :14.00   Median :3.000  
##  Mean   :55.84   Mean   : 77124   Mean   :80    Mean   :15.21   Mean   :3.154  
##  3rd Qu.:65.00   3rd Qu.: 96002   3rd Qu.:80    3rd Qu.:18.00   3rd Qu.:3.000  
##  Max.   :95.00   Max.   :281499   Max.   :80    Max.   :25.00   Max.   :4.000  
##  NA&#39;s   :1061    NA&#39;s   :1061                                                  
##  prior_emplr_cnt    env_sat         job_sat         rel_sat     
##  Min.   :0.000   Min.   :1.000   Min.   :1.000   Min.   :1.000  
##  1st Qu.:1.000   1st Qu.:2.000   1st Qu.:2.000   1st Qu.:2.000  
##  Median :2.000   Median :3.000   Median :3.000   Median :3.000  
##  Mean   :2.693   Mean   :2.722   Mean   :2.729   Mean   :2.712  
##  3rd Qu.:4.000   3rd Qu.:4.000   3rd Qu.:4.000   3rd Qu.:4.000  
##  Max.   :9.000   Max.   :4.000   Max.   :4.000   Max.   :4.000  
##                                                                 
##    wl_balance       work_exp       org_tenure       job_tenure    
##  Min.   :1.000   Min.   : 0.00   Min.   : 0.000   Min.   : 0.000  
##  1st Qu.:2.000   1st Qu.: 6.00   1st Qu.: 3.000   1st Qu.: 2.000  
##  Median :2.000   Median :10.00   Median : 5.000   Median : 3.000  
##  Mean   :1.841   Mean   :11.28   Mean   : 7.032   Mean   : 4.229  
##  3rd Qu.:2.000   3rd Qu.:15.00   3rd Qu.: 9.000   3rd Qu.: 7.000  
##  Max.   :2.000   Max.   :40.00   Max.   :72.000   Max.   :18.000  
##                                                                   
##    last_promo       mgr_tenure     interview_rating
##  Min.   : 0.000   Min.   : 0.000   Min.   :2.000   
##  1st Qu.: 0.000   1st Qu.: 2.000   1st Qu.:3.600   
##  Median : 1.000   Median : 3.000   Median :4.100   
##  Mean   : 2.188   Mean   : 4.123   Mean   :3.989   
##  3rd Qu.: 3.000   3rd Qu.: 7.000   3rd Qu.:4.500   
##  Max.   :15.000   Max.   :17.000   Max.   :5.000   
## </code></pre>
<p>Note that fields with <code>NA's</code> contain missing values. Also, by default <code>employee_id</code> is treated as an integer in R, which is why descriptive statistics appropriate for numeric data are provided. <code>employee_id</code> should actually be treated as a character string since we will not perform any arithmetic operations using these ids.</p>
<p><strong>Missingness</strong></p>
<p>Before considering whether and how to handle missing data, it is important to distinguish between <em>structural missingness</em> and <em>informative missingness</em> (Kuhn &amp; Johnson, 2013).</p>
<p><strong>Structural missingness</strong> relates to data that are missing for a logical reason. For example, we would not expect a new joiner with a few days of tenure to have a performance score. Likewise, we would not expect an active employee who is not a rehire to have a termination date. Therefore, it would not make sense to define a value to address missing data in these cases.</p>
<p><strong>Informative missingness</strong> relates to missing data that is informative regarding an outcome of interest. For example, in a survey context we may find a relationship between missing values on manager effectiveness questions and unfavorability on a psychological safety scale. This may indicate that employees who are fearful of retaliation are uncomfortable providing honest feedback about their managers, while employees who feel it is safe to speak up about issues are more comfortable responding in prosocial ways.</p>
<p>In some cases, we have the luxury of simply removing observations with missing values and using the remaining complete cases for analysis. However, since we are often working with wide datasets containing relatively few observations in people analytics, this may not be feasible. As we will cover in later chapters, sample size considerations are fundamental to achieving adequate power in statistical testing, so case removal is only possible with larger datasets. Also, elimination of many impacted records – even with a sufficiently large sample – may bias analyses if there are missingness patterns.</p>
<p><strong>Data imputation</strong> refers to the methods by which missing data are replaced with substituted values when case removal is not appropriate. The most common data imputation method is replacing missing values with a descriptive statistic such as the mean, median, or mode based on available data. For example, if most employees have an age in the system, the average, median, or most frequent age could be used in place of the cases with a missing age. To be more precise, the average, median, or most frequent age of those with <em>similar characteristics</em> may be used (e.g., similar years of experience, job, level). We would expect there to be less variability in age within a well-defined segment relative to the entire employee population, so this would likely be a more accurate substitute for an individual’s actual age.</p>
<p>Let’s evaluate the <code>employees</code> data frame for missing <code>annual_comp</code> values using the logical <code>is.na()</code> function, and return values of variables relevant in determining one’s annual compensation. The <code>subset()</code> function can be used to select a subset of data from a data frame.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store original annual comp for sample employee</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>orig_comp <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, employee_id <span class="sc">==</span> <span class="st">&#39;2176&#39;</span>, <span class="at">select =</span> annual_comp)</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Force a NA in lieu of annual comp for illustrative purposes</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>employees[employees<span class="sc">$</span>employee_id <span class="sc">==</span> <span class="st">&#39;2176&#39;</span>, <span class="st">&#39;annual_comp&#39;</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Return relevant employee characteristics where annual comp is missing</span></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(employees, <span class="fu">is.na</span>(annual_comp), <span class="at">select =</span> <span class="fu">c</span>(employee_id, job_title, job_lvl))</span></code></pre></div>
<pre><code>##      employee_id              job_title job_lvl
## 1176        2176 Manufacturing Director       2</code></pre>
<p>Next, we can impute the average value of <code>annual_comp</code> based on employees with the same values for the relevant variables:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return average annual comp for employees with similar characteristics, excluding employees with missing comp values</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>imputed_comp <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="fu">subset</span>(employees, job_title <span class="sc">==</span> <span class="st">&#39;Manufacturing Director&#39;</span> <span class="sc">&amp;</span> job_lvl <span class="sc">==</span> <span class="dv">2</span>, <span class="at">select =</span> annual_comp), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Impute missing comp for relevant segment</span></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>employees[employees<span class="sc">$</span>employee_id <span class="sc">==</span> <span class="st">&#39;2176&#39;</span>, <span class="st">&#39;annual_comp&#39;</span>] <span class="ot">&lt;-</span> imputed_comp</span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display absolute difference between original and imputed comp</span></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">abs</span>(orig_comp <span class="sc">-</span> <span class="fu">subset</span>(employees, employee_id <span class="sc">==</span> <span class="st">&#39;2176&#39;</span>, <span class="at">select =</span> annual_comp)), <span class="dv">0</span>)</span></code></pre></div>
<pre><code>##      annual_comp
## 1176        1169</code></pre>
<p>While this approach should help in demonstrating the mechanics of imputing a missing value on a case-by-case basis, a more scalable solution is needed for data with a large number of missing values across employees with different values of these variables. There are more sophisticated methods of data imputation that involve models to estimate missing values. <em>Linear regression</em> and <em>K-Nearest Neighbor (KNN)</em> models are commonly used for this and will be covered in later chapters. These modeling techniques leverage a similar approach to the method outlined above in that the target values of cases with similar characteristics to those with missing values are used to aid estimation. <strong>Multiple imputation</strong> combines the information from multiple data sets imputed using different methods with a goal of minimizing the potential bias introduced by a singular method of imputation.</p>
<p><strong>Outliers</strong></p>
<p>The treatment of outliers is one of the most enduring and pervasive methodological challenges in organizational research. A literature review by Aguinis, Gottfredson, and Joo (2013) uncovered 14 unique definitions of outliers, 39 outlier identification techniques, and 20 different ways of addressing them. Appropriate methods for defining and addressing outliers are domain-specific, and there are many important considerations that should inform whether and how outliers should be handled.</p>
<p>The water crisis in Flint, Michigan is a tragic example of a series of statistical mishaps involving poor sampling methodology and outlier handling. As the story goes, Flint stopped paying the Detroit Water and Sewer Department to source water from Lake Huron and began sourcing it from the Flint River as a cost-cutting measure in April 2014 (Langkjær-Bain, 2017). Residents of Flint began showing signs of lead poisoning, and authorities denied residents’ claims that their tap water was to blame – despite some extreme cases in which the tap water was colored orange.</p>
<p>Water companies routinely add chemicals to water to prevent pipe corrosion which can cause lead to seep into drinking water. In Flint’s hurry to switch water sources, they failed to address the fact that the Flint River is naturally high in chloride (which corrodes pipes) by adding corrosion-inhibiting chemicals. According to the Lead and Copper Rule (LCR) of 1991, lead consumption should not exceed 15 parts per billion (ppb) in more than 10% of homes tested – though no quantity of lead is considered safe to ingest. If the 90th percentile value for sampled homes is greater than 15 ppb, action is required.</p>
<p>Two initial samples of tap water were taken from a concerned resident’s home; one measured 104 ppb (6X higher than the LCR threshold) and the other measured 397 ppb (25X higher than the LCR threshold). Authorities dismissed these samples as outliers, citing old led pipes in the resident’s home. Authorities collected samples of their own and despite federal guidelines requiring <span class="math inline">\(n \ge 100\)</span> samples, an under-powered analysis was performed using only 71 samples. Of the 71 samples, two with levels above the 15 ppb threshold were discarded, and the removal of these outliers resulted in aggregate lead levels falling beneath the action threshold.</p>
<p>In the end, the tenacity of the growing number of residents with health concerns resulted in new samples being analyzed by a team of researchers at Virginia Tech University. Researchers found that the 90th percentile value among the sample of households – which included homes with non-lead pipes and water filtration systems – was 26.8 ppb and the highest individual sample was 158 ppb! The city switched back to the Lake Huron water source in October 2015 (18 months later), and a state of emergency was declared. The State of Michigan has brought numerous criminal charges against state and local officials which include misconduct in office, tampering with evidence, willful neglect of duty, and various counts of conspiracy. Residents also launched a series of class action lawsuits against the Governor (Langkjær-Bain, 2017).</p>
<p>This may seem like a dramatic appeal, but the importance of investigating outliers cannot be overstated. Simply discarding outliers may truly be a grave mistake! If outliers are attributable to measurement error, it may be appropriate to discard them. If outliers represent properly measured values, they should be investigated. As we will discuss in Chapter @ref(desc-stats), a common method of outlier detection is identifying values which fall outside the following interval:</p>
<p><span class="math display">\[I = Q1 - 1.5 * IQR; Q3 + 1.5 * IQR\]</span></p>
<p><strong>Low Variability</strong></p>
<p>Variables with <strong>low variability</strong> often do not provide sufficient information for identifying patterns in data. For example, if we are interested in using information on stock options to understand why employees vary in their levels of retention risk, but find that the employee stock purchase plan (ESPP) terms are identical for nearly all employees, including a stock option variable in the analysis is unlikely to provide any meaningful signal.</p>
<p>When working with survey data, checking for <strong>straightlining</strong> should be an early data screening step. Straightlining refers to a constant response across all survey items, which may be evidence that the respondent lost motivation or was not attentive and thoughtful when taking the survey. Since straight-line responses may influence results, it is often best to discard these cases – especially when the sample size is adequately large for the planned analyses without them. If the same response is given for both positively and negatively worded versions of a question (e.g., comparing “I plan to be here in a year” to “I do not plan to be here in a year”), which we expect to be inversely related, this gives added support for discarding these responses.</p>
<p>Fields with low variability can be easily identified using descriptive statistics from the <code>summary()</code> function. If the <code>Min</code> and <code>Max</code> values are equal, there is no variability in the field’s values. Based on the following descriptives, we should remove <code>standard_hrs</code> from the data:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return descriptives to understand distribution of standard hours</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(employees<span class="sc">$</span>standard_hrs)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      80      80      80      80      80      80</code></pre>
<p>Given that the data dictionary in Chapter @ref(getting-started) indicates performance ratings range from 1 to 4, the following descriptives should raise red flags:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return descriptives to understand distribution of standard hours</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(employees<span class="sc">$</span>perf_rating)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   3.000   3.000   3.000   3.154   3.000   4.000</code></pre>
<p>Assuming not everyone in the company is a stellar performer (i.e., only Noteworthy and Exceptional ratings), we may be working with a partial data set that could bias analyses. This may be due to poor integrity of performance data in the source system or repository from which the data were pulled, or the data may have been limited via a condition in the query.</p>
<p><strong>Inconsistent Categories</strong></p>
<p><strong>Inconsistent categories</strong> impact aggregation and trending by categorical dimensions. It is often necessary to create mappings based on logical rules in order to standardize dimension values across time. In the case of reorgs, a department may be disbanded, renamed, or integrated into one or multiple other departments. Therefore, when working with historical data, records may contain legacy department names that do not align with the current organizational taxonomy. Mapping from former to current departments may require logic based on manager ids, divisions, job profiles, locations, or other variables depending on the nature of reorgs over time.</p>
<p>Job architecture projects often introduce the need for mappings as well. Jobs and levels may completely change for all employees with a job architecture revamp, in which case trending along job and level dimensions (e.g., attrition by job or level over multiple years) is only possible with logic that clarifies how legacy jobs and levels map to those in the new career framework.</p>
<p>Changes to allowable values in source systems often result in inconsistent categorical data over time. For example, the education field may switch from a free-form text field in which employees can enter any value (e.g., B.S., B.A., BS, BA, Bachelor of Science, Bachelor of Arts, Bachelor’s, Bachelors, Bachelor’s Degree, Bachelor Degree, undergraduate degree, 4-year degree, four-year degree) to a standardized solution in which there is a clean and well-defined set of allowable values from which employees can choose (e.g., Bachelor’s Degree, Master’s Degree, Doctoral Degree). This warrants either a one-time historical cleanup upon implementing the allowable values or downstream logic to tidy up data for analytics. A best practice is to address data quality issues upstream (e.g., in the source system) to avoid duplicative data cleaning procedures across downstream applications.</p>
<p><strong>Data Binning</strong></p>
<p><strong>Data binning</strong> refers to the process by which larger high-level groups of values are defined and constructed. As a general rule, extremely granular categories should be avoided – especially when there is no theoretical basis for such categories facilitating a project’s objectives or deepening insights. Where the <span class="math inline">\(n\)</span>-count is expected to be consistently low for a defined categorical bin, it is usually best to define a larger bin. For example, a variable measuring highest level of educational attainment that contains 9th, 10th, 11th, and 12th grade categories may be converted into higher-level “High School Not Completed” and “High School Completed” bins.</p>
<p>For modeling applications, it is important to let the algorithm determine the cutpoints for numeric data in relation to the outcome. For example, if organization tenure is measured in years, arbitrarily defining bin sizes of ‘Less Than 1 Year’, ‘1-5 Years’, and ‘More Than 5 Years’ will likely result in information loss. Any variability <em>within</em> these bins that may be useful in explaining variance in the outcome would be lost with such wide bins. In fact, machine learning (ML) models such as decision trees, which will be covered in later chapters, are great for algorithmically determining cut points for binning numeric data across descriptive, diagnostic, and predictive projects alike.</p>
</div>
<div id="one-hot-encoding" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> One-Hot Encoding</h2>
<p><strong>One-hot encoding</strong>, also known as <strong>dummy coding</strong>, involves transforming a categorical variable into numeric values on which statistical procedures can be performed. For EDA, this is not required, as counts and percent of total metrics can be calculated on these dimensions for descriptive purposes. However, for statistical and ML modeling applications, categorical variables must be converted into <span class="math inline">\(k-1\)</span> variables, where <span class="math inline">\(k\)</span> is the number of categories, using binary (1/0) coding.</p>
<p>Understanding how categorical data are coded is critical to a correct interpretation of output. For example, if a remote work variable exists with “Remote” or “Non-Remote” values, we may code “Remote” values as 1 and “Non-Remote” values as 0. We could then evaluate the statistical relationship of this transformed categorical variable with other numeric variables.</p>
<p>If a categorical variable has more than 2 values, we must create a separate 1/0 field for each value and omit one category for use as a reference group. As we will cover in Chapter @ref(lm), one of several assumptions in linear regression is that independent variables are not collinear; that is no pair of independent variables is highly correlated. Without an omitted category, each of the one-hot encoded fields will be perfectly correlated with the others. That is, when the field representing category A is 1, the fields for other categories will always be 0. As illustrated in Figure @ref(fig:onehot-encoding), by omitting a category there will be cases when all fields have a 0 value (i.e., rows where the value is the omitted category), which will reduce the strength of the bivariate correlations.</p>
<div class="figure" style="text-align: center">
<img src="graphics/onehot_encoding.png" alt="One-Hot Encoding" width="75%" />
<p class="caption">
(#fig:onehot-encoding)One-Hot Encoding
</p>
</div>
<p>For a categorical variable with only two values, the <code>ifelse()</code> function can be leveraged to assign values:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return unique values of gender field with unique() function</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(employees<span class="sc">$</span>gender)</span></code></pre></div>
<pre><code>## [1] &quot;Female&quot; &quot;Male&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gender one-hot encoding</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>gender_ohe <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(employees<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&#39;Female&#39;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview records</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">subset</span>(employees, <span class="at">select =</span> <span class="fu">c</span>(employee_id, gender_ohe)))</span></code></pre></div>
<pre><code>##   employee_id gender_ohe
## 1        1001          1
## 2        1002          0
## 3        1003          0
## 4        1004          1
## 5        1005          0
## 6        1006          0</code></pre>
<p>For variables with more than 2 categories, we can leverage the <code>model.matrix()</code> function for one-hot encoding. Let’s illustrate be encoding locations.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return counts by department</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>employees <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">count</span>(dept, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##                     dept   n
## 1 Research &amp; Development 961
## 2                  Sales 446
## 3        Human Resources  63</code></pre>
<p>By default, the <code>model.matrix()</code> function will produce a matrix of 1/0 values for <span class="math inline">\(k-1\)</span> categories. The first column in the matrix is an intercept column containing a value of 1 for each row to ensure linear independence, and the default behavior results in the first value of the factor being the omitted group. For more flexibility over which value is omitted, we can drop the intercept using <code>-1</code> in the first argument passed to <code>model.matrix()</code> and then choose the reference group for the analysis in a subsequent step.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Department one-hot encoding</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>dept_ohe <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span>dept<span class="dv">-1</span>, <span class="at">data =</span> employees)</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview data</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dept_ohe)</span></code></pre></div>
<pre><code>##   deptHuman Resources deptResearch &amp; Development deptSales
## 1                   0                          0         1
## 2                   0                          1         0
## 3                   0                          1         0
## 4                   0                          1         0
## 5                   0                          1         0
## 6                   0                          1         0</code></pre>
<p>We will drop the department with the lowest <span class="math inline">\(n\)</span> rather than the more arbitrary method based on the first value of the factor. Since departments are coded as either <span class="math inline">\(1\)</span> or <span class="math inline">\(0\)</span>, we can use the <code>colSums()</code> function to sum each column and the <code>which.min()</code> function to identify which has the lowest sum (i.e., smallest department by employee count).</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop department with lowest sum (lowest n-count)</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>dept_ohe <span class="ot">&lt;-</span> dept_ohe[, <span class="sc">-</span><span class="fu">which.min</span>(<span class="fu">colSums</span>(dept_ohe))]</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview refined one-hot encoded data</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dept_ohe)</span></code></pre></div>
<pre><code>##   deptResearch &amp; Development deptSales
## 1                          0         1
## 2                          1         0
## 3                          1         0
## 4                          1         0
## 5                          1         0
## 6                          1         0</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine employees and matrix containing one-hot encoded departments</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">cbind</span>(employees, dept_ohe)</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop original department field</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(dept))</span></code></pre></div>
</div>
<div id="feature-engineering" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Feature Engineering</h2>
<p>Level one people analytics tends to utilize only the delivered fields from the HRIS (e.g., location, job profile, org tenure), but a good next step is to derive smarter variables from these fields. These can then be used to cut data differently or as inputs in models. Below are some examples of how basic data available in the HRIS can be transformed into new variables that provide different information. This can be easily accomplished using the arithmetic functions we’ve covered.</p>
<ul>
<li>Number of jobs per unit of tenure (larger proportions tend to see greater career pathing)</li>
<li>Office/remote worker (binary variable dummy coded as 1/0)</li>
<li>Local/remote manager (binary variable dummy coded as 1/0)</li>
<li>Hire/Rehire (binary variable dummy coded as 1/0)</li>
<li>Hired/acquired (proxy for culture shock effects)</li>
<li>Gender isolation (ratio of employee’s gender to number of the same within immediate work
group)</li>
<li>Generation isolation (comparison of age bracket to most frequent generational bracket within
immediate work group)</li>
<li>Ethnic isolation (ratio of employee’s ethnicity to number of the same within immediate work
group)</li>
<li>Difference between employee and manager age</li>
<li>Percentage change between last two performance appraisal scores (per competency and/or
overall)</li>
<li>Team and department quit outbreak indicators (ratio of terms over x months relative to average
headcount over x months)</li>
<li>Industry experience (binary or length in years)</li>
</ul>
</div>
<div id="review-questions-4" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What are the differences between data lakes, data warehouses, and data marts?</p></li>
<li><p>What is the difference between a Type 1 and Type 2 table in a DW?</p></li>
<li><p>In what ways has modern cloud computing influenced data architecture?</p></li>
<li><p>Why is it dangerous to address missing values without domain knowledge of how the data are generated?</p></li>
<li><p>How can missing values be addressed when impacted records cannot be eliminated from a data set?</p></li>
<li><p>When is one-hot encoding required for categorical variables?</p></li>
<li><p>When one-hot encoding a categorical variable with more than two categories, why is an omitted category important?</p></li>
<li><p>When binning numeric data, what are some considerations in determining the size of each bin?</p></li>
<li><p>Why should variables with low to no variability be dropped?</p></li>
<li><p>Where are validation rules ideally situated to limit downstream data cleaning tasks and ensure consistent categorical dimension values?</p></li>
</ol>
<!--chapter:end:r/06_data_mgmt_preparation.Rmd-->
</div>
</div>
<div id="desc-stats" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Descriptive Statistics</h1>
<p>This chapter reviews essential univariate and bivariate analysis concepts that underpin the more complex statistical methods in subsequent chapters of this book. Univariate and bivariate analyses can be either descriptive or inferential, and this chapter will cover descriptive techniques while Chapter @ref(inf-stats) will cover inferential methods.</p>
<div id="univariate-analysis" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Univariate Analysis</h2>
<p><strong>Univariate analysis</strong> is the simplest form of statistical analysis, which explores each variable independently.</p>
<p><strong>Descriptive statistics</strong> are rudimentary analysis techniques that help describe and summarize a variable’s data in a meaningful way. Descriptive statistics do not allow us to draw any conclusions beyond the available data but are helpful in interpreting the data at hand.</p>
<p>There are two categories of descriptive statistics: (a) <strong>measures of central tendency</strong> describe the central position in a set of data; and (b) <strong>measures of spread</strong> describe how dispersed the data are.</p>
<div id="measures-of-central-tendency" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Measures of Central Tendency</h3>
<p><strong>Mean</strong></p>
<p>Perhaps the most intuitive measure of central tendency is the <strong>mean</strong>, which is often referred to as the average. The mean of a sample is denoted by <span class="math inline">\(\bar{x}\)</span> and is defined by:</p>
<p><span class="math display">\[ \bar{x} = \frac{\displaystyle\sum_{i=1}^{n} x_{i}}{n} \]</span></p>
<p>The population mean is denoted by <span class="math inline">\(\mu\)</span> and is defined by:</p>
<p><span class="math display">\[ \mu = \frac{\displaystyle\sum_{i=1}^{n} x_{i}}{N} \]</span></p>
<p>The mean of a set of numeric values can be calculated using the <code>mean()</code> function in R:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill vector x with integers</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">300</span>)</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average of vector x</span></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 87</code></pre>
<p><strong>Median</strong></p>
<p>The <strong>median</strong> represents the midpoint in a sorted vector of numbers. For vectors with an even number of values, the median is the average of the middle two numbers; it is simply the middle number for vectors with an odd number of values. When the distribution of data is skewed or there is an extreme value, the median <em>may</em> be a better measure of central tendency.</p>
<p>The <code>median()</code> function in R can be used to handle the sorting and midpoint selection:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate median of vector x</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>In this example, the median is only <code>3</code> while the mean is <span class="math inline">\(\bar{x} = 87\)</span>. Large deltas between mean and median values provide important information about the distribution of data.</p>
<p>Here, a single value has significant leverage on these measures of central tendency. To demonstrate, let’s eliminate one instance of <code>3</code> from the vector and recalculate the mean and median:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill vector x1 with integers</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">300</span>)</span></code></pre></div>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean of vector x1</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x1)</span></code></pre></div>
<pre><code>## [1] 101</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate median of vector x1</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x1)</span></code></pre></div>
<pre><code>## [1] 51.5</code></pre>
<p>By removing a single value from this vector, the mean increased from <span class="math inline">\(\bar{x} = 87\)</span> to <span class="math inline">\(\bar{x} = 101\)</span> and the median from <code>3</code> to <code>51.5</code>!</p>
<p>Note that differences in mean and median values for <code>x</code> and <code>x1</code> are <em>not</em> due to an extreme value (outlier), as <code>3</code> is similar to half of the values in the vector. However, in some cases extreme values may be the cause of large discrepancies between mean and median values since the mean can be sensitive to extreme values. Consider the following set of values:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill vector x2 with integers</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">1000</span>)</span></code></pre></div>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean of vector x2</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x2)</span></code></pre></div>
<pre><code>## [1] 169.1667</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate median of vector x2</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x2)</span></code></pre></div>
<pre><code>## [1] 3.5</code></pre>
<p>In this case, the value of <code>1000</code> has a significant influence on the mean (<span class="math inline">\(\bar{x} = 169.2\)</span>) but the median of <code>3.5</code> is representative of the middle of values in this vector.</p>
<p>The reality is that both the mean and median can be misleading – and even inappropriate. It is important to understand how the data are distributed around these centers. It would not be too useful to calculate median organization tenure, for example, for a hyper-growth company that has hired the majority of its workforce in the past few months; long-tenured employees would be lost in this metric.</p>
<p>The larger the <span class="math inline">\(n\)</span>-count, the less influential an extreme value will be on <span class="math inline">\(\bar{x}\)</span>. As we will learn in Chapter @ref(inf-stats), sample size is fundamental to our ability to achieve precise estimates of population parameters based on sample statistics.</p>
<p>While the focus of this section is central tendency, it is important to recognize that outlying values are often the more actionable data points in an analysis since these cases may represent those with significantly different experiences relative to the average employee. Understanding the <em>distribution</em> of data is critical, and the spread of data around measures of central tendency will receive considerable attention throughout this book.</p>
<p><strong>Mode</strong></p>
<p>The <strong>mode</strong> is the most frequent number in a set of values.</p>
<p>While <code>mean()</code> and <code>median()</code> are standard functions in R, <code>mode()</code> returns the internal storage mode of the object rather than the statistical mode of the data. We can easily create a function to return the statistical mode(s):</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill vector x2 with integers</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">300</span>, <span class="dv">300</span>)</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create function to calculate statistical mode(s)</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>stat.mode <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>  ux <span class="ot">&lt;-</span> <span class="fu">unique</span>(x)</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> <span class="fu">tabulate</span>(<span class="fu">match</span>(x, ux))</span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>  ux[tab <span class="sc">==</span> <span class="fu">max</span>(tab)]</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Return mode(s) of vector x3</span></span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a><span class="fu">stat.mode</span>(x3)</span></code></pre></div>
<pre><code>## [1]   3 300</code></pre>
<p>In this case, we have a bimodal distribution since both <code>3</code> and <code>300</code> occur most frequently.</p>
<p><strong>Range</strong></p>
<p>The <strong>range</strong> is the difference between the maximum and minimum values in a set of numbers.</p>
<p>The <code>range()</code> function in R returns the minimum and maximum numbers:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return lowest and highest values of vector x</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(x)</span></code></pre></div>
<pre><code>## [1]   1 300</code></pre>
<p>We can leverage the <code>max()</code> and <code>min()</code> functions to calculate the difference between these values:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate range of vector x</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 299</code></pre>
<p>In people analytics, there are many conventional descriptive metrics – largely counts, percentages, and ratios cut by time series (day, month, quarter, year) and categorical dimensions (department, job, location, tenure band). Here is a sample of common measures:</p>
<ul>
<li>Time to Fill: average days between job requisition posting and offer acceptance</li>
<li>Offer Acceptance Rate: percent of offers extended to candidates that are accepted</li>
<li>Pass-Through Rate: percent of candidates in a particular stage of the recruiting process who passed through to the next stage</li>
<li>Progress to Goal: percent of approved positions that have been filled</li>
<li>cNPS/eNPS: candidate and employee NPS (-100 to 100)</li>
<li>Headcount: counts and percent of workforce across worker types (employee, intern, contingent)</li>
<li>Diversity: counts and percent of workforce across gender, ethnicity, and generational cohorts</li>
<li>Positions: count and percent of open, committed, and filled seats</li>
<li>Hires: counts and rates</li>
<li>Career Moves: counts and rates</li>
<li>Turnover: counts and rates (usually terms / average headcount over the period)</li>
<li>Workforce Growth: net changes over time, accounting for hires, internal transfers, and exits</li>
<li>Span of Control: ratio of people leaders to individual contributors</li>
<li>Layers/Tiers: average and median number of layers removed from CEO</li>
<li>Engagement: average score or top-box favorability score</li>
</ul>
</div>
<div id="measures-of-spread" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Measures of Spread</h3>
<p><strong>Variance</strong></p>
<p><strong>Variance</strong> is a measure of variability in the data. Variance is calculated using the average of squared differences – or deviations – from the mean.</p>
<p>Variance of a population is defined by:</p>
<p><span class="math display">\[ \sigma^{2} = \frac{\displaystyle\sum_{i=1}^{n} (x_{i}-\mu)^{2}}{N} \]</span></p>
<p>Variance of a sample is defined by:</p>
<p><span class="math display">\[ s^{2} = \frac{\displaystyle\sum_{i=1}^{n} (x_{i}-\bar{x})^{2}}{n-1} \]</span></p>
<p>It is important to note that since differences are squared, the variance is always non-negative. In addition, we cannot compare these squared differences to the arithmetic mean since the units are different. For example, if we calculate the variance of annual compensation measured in USD, variance should be expressed as USD squared while the mean exists in the original USD unit of measurement.</p>
<p>In R, the sample variance can be calculated using the <code>var()</code> function:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library for data wrangling</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate sample variance for annual compensation</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(employees<span class="sc">$</span>annual_comp)</span></code></pre></div>
<pre><code>## [1] 1788038934</code></pre>
<p>Sample statistics are the default in R. Since the population variance differs from the sample variance by a factor of <span class="math inline">\(s^2 (\frac{n - 1}{n})\)</span>, it is simple to convert output from <code>var()</code> to the population variance:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store number of observations</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">length</span>(employees<span class="sc">$</span>annual_comp)</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate population variance for annual compensation</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(employees<span class="sc">$</span>annual_comp) <span class="sc">*</span> (n <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> n</span></code></pre></div>
<pre><code>## [1] 1786822581</code></pre>
<p><strong>Standard Deviation</strong></p>
<p>The <strong>standard deviation</strong> is simply the square root of the variance.</p>
<p>The standard deviation of a population is defined by:</p>
<p><span class="math display">\[ \sigma = \sqrt{\frac{\displaystyle\sum_{i=1}^{n} (x_{i} - \mu)^{2}}{N}} \]</span></p>
<p>The standard deviation of a sample is defined by:</p>
<p><span class="math display">\[ s = \sqrt{\frac{\displaystyle\sum_{i=1}^{n} (x_{i} - \bar{x})^{2}}{n - 1}} \]</span></p>
<p>Since a squared value can be converted back to its original units by taking its square root, the standard deviation expresses variability around the mean in the variable’s original units.</p>
<p>In R, the sample standard deviation can be calculated using the <code>sd()</code> function:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate sample standard deviation for annual compensation</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(employees<span class="sc">$</span>annual_comp)</span></code></pre></div>
<pre><code>## [1] 42285.21</code></pre>
<p>Since the population standard deviation differs from the sample standard deviation by a factor of <span class="math inline">\(s \sqrt \frac{n - 1}{n}\)</span>, it is simple to convert output from <code>sd()</code> to the population standard deviation:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate population standard deviation for annual compensation</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(employees<span class="sc">$</span>annual_comp) <span class="sc">*</span> <span class="fu">sqrt</span>((n <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> n)</span></code></pre></div>
<pre><code>## [1] 42270.82</code></pre>
<p><strong>Quartiles</strong></p>
<p>A <strong>quartile</strong> is a type of quantile that partitions data into four equally sized parts after ordering the data. Quartiles are a staple of <strong>exploratory data analysis (EDA)</strong>, which is the process of investigating data sets, summarizing their main characteristics, and discovering general trends and patterns. Each quartile is equally sized with respect to the number of data points – not the range of values in each. Quartiles are also related to <strong>percentiles</strong>. For example, Q1 is the 25th percentile – the value at or below which 25% of values lie. Percentiles are likely more familiar than quartiles, as percentiles show up in the height and weight measurements of babies, performance on standardized tests like the SAT and GRE, among other things.</p>
<p>The <strong>Interquartile Range (IQR)</strong> represents the difference between Q3 and Q1 cut point values (the middle two quartiles). The IQR is sometimes used to detect extreme values in a distribution; values less than <span class="math inline">\(Q1 - 1.5 * IQR\)</span> or greater than <span class="math inline">\(Q3 + 1.5 * IQR\)</span> are generally considered outliers.</p>
<p>In R, the <code>quantile()</code> function returns the values that bookend each quartile:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return quartiles for annual compensation</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(employees<span class="sc">$</span>annual_comp)</span></code></pre></div>
<pre><code>##     0%    25%    50%    75%   100% 
##  62400  99840 137280 174200 208000</code></pre>
<p>Based on this output, we know that 25% of people in our data earn annual compensation of <span class="math inline">\(99,840\)</span> USD or less, <span class="math inline">\(137,280\)</span> USD is the median annual compensation, and 75% of people earn annual compensation of <span class="math inline">\(174,200\)</span> USD or less.</p>
<p>We can also return a specific percentile value using the <code>probs</code> argument in the <code>quantile()</code> function. For example, if we want to know the 80th percentile annual compensation value, we can execute the following:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return 80th percentile annual compensation value</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(employees<span class="sc">$</span>annual_comp, <span class="at">probs =</span> .<span class="dv">8</span>)</span></code></pre></div>
<pre><code>##    80% 
## 180960</code></pre>
<p>In addition, the <code>summary()</code> function returns several common descriptive statistics for an object:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return common descriptives</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(employees<span class="sc">$</span>annual_comp)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   62400   99840  137280  137054  174200  208000</code></pre>
<p><strong>Box plots</strong> are a common way to visualize the distribution of data. Box plots are not usually found in presentations to stakeholders, since they are a bit more technical and often require explanation, but these are very useful to analysts for understanding data distributions during the EDA phase.</p>
<p>Let’s visualize the spread of annual compensation by education level and gender using the <code>geom_boxplot()</code> function from the <code>ggplot2</code> library:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce box plots to visualize compensation distribution by education level and gender</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(employees, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(ed_lvl), <span class="at">y =</span> annual_comp, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Education Level&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Annual Compensation&quot;</span>) <span class="sc">+</span> </span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">col =</span> <span class="fu">guide_legend</span>(<span class="st">&quot;Gender&quot;</span>)) <span class="sc">+</span></span>
<span id="cb197-9"><a href="#cb197-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="The_Fundamentals_of_People_Analytics_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<p>Box plots can be interpreted as follows:
* Horizontal lines represent median compensation values.
* The box in the middle of each distribution represents the IQR.
* The end of the line above the IQR represents the threshold for outliers in the upper range: <span class="math inline">\(Q3 + 1.5 * IQR\)</span>.
* The end of the line below the IQR represents the threshold for outliers in the lower range: <span class="math inline">\(Q1 - 1.5 * IQR\)</span>.
* Data points represent outliers: <span class="math inline">\(x &gt; Q3 + 1.5 * IQR\)</span> or <span class="math inline">\(x &lt; Q1 - 1.5 * IQR\)</span>.</p>
<p>While box plots are pervasive in statistically-oriented disciplines, they can be misleading. Figure @ref(fig:boxplot-barchart-compare) illustrates how information about the shape of a distribution can be lost on a box plot. The range with the highest frequency (0-9) is not as obvious in the box plot relative to the bar chart.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/boxplot-barchart-compare-1.png" alt="The number range with the highest frequency (0-9) is not as apparent with a box plot (left) relative to the bar chart (right)." width="100%" />
<p class="caption">
(#fig:boxplot-barchart-compare)The number range with the highest frequency (0-9) is not as apparent with a box plot (left) relative to the bar chart (right).
</p>
</div>
<p>Box plot alternatives such as <strong>violin plots</strong>, <strong>jittered strip plots</strong>, and <strong>raincloud plots</strong> are often more helpful in understanding data distributions. Figure @ref(fig:boxplot-alt) shows the juxtaposition of a raincloud plot against a box plot. While it may seem like an oxymoron, in this case the spread of data is clearer in the rain.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/boxplot-alt-1.png" alt="Raincloud plot superimposed on a box plot to illustrate the data distribution." width="100%" />
<p class="caption">
(#fig:boxplot-alt)Raincloud plot superimposed on a box plot to illustrate the data distribution.
</p>
</div>
<p><strong>Skewness</strong></p>
<p><strong>Skewness</strong> is a measure of the horizontal distance between the mode and mean – a representation of symmetric distortion. In most practical settings, data are not normally distributed. That is, the data are skewed either positively (right-tailed distribution) or negatively (left-tailed distribution). The coefficient of skewness is one of many ways in which we can ascertain the degree of skew in the data. The skewness of sample data is defined as:</p>
<p><span class="math display">\[ Sk = \frac{1}{n} \frac{\displaystyle\sum_{i=1}^{n} (x_i-\bar{x})^3}{s^3} \]</span></p>
<p>A positive skewness coefficient indicates positive skew, while a negative coefficient indicates negative skew. The order of descriptive statistics can also be leveraged to ascertain the direction of skew in the data:</p>
<ul>
<li>Positive skewness: mode &lt; median &lt; mean</li>
<li>Negative skewness: mode &gt; median &gt; mean</li>
<li>Symmetrical distribution: mode = median = mean</li>
</ul>
<p>Figure @ref(fig:skewness) illustrates the placement of these descriptive statistics in each of the three types of distributions:</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/skewness.png" alt="Skewness" width="100%" />
<p class="caption">
(#fig:skewness)Skewness
</p>
</div>
<p><br /></p>
<p>The magnitude of skewness can be determined by measuring the distance between the mode and mean relative to the variable’s scale. Alternatively, we can simply evaluate this using the coefficient of skewness:</p>
<ul>
<li>If skewness is between -0.5 - 0.5, the data are considered symmetrical.</li>
<li>If skewness is between -0.5 and -1 or 0.5 and 1, the data are moderately skewed.</li>
<li>If skewness is &lt; -1 or &gt; 1, the data are highly skewed.</li>
</ul>
<p>Since there is not a base R function for skewness, we can leverage the moments library to calculate skewness:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate skewness for org tenure, rounded to two significant figures via the round() function</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(moments<span class="sc">::</span><span class="fu">skewness</span>(employees<span class="sc">$</span>org_tenure), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 2.27</code></pre>
<p><strong>Statistical Moments</strong>, after which this library was named, play an important role in specifying the appropriate probability distribution for a set of data. Moments are a set of statistical parameters used to describe the characteristics of a distribution. Skewness is the third statistical moment in the set; hence the sum of cubed differences and cubic polynomial in the denominator of the formula above. The complete set of moments comprises: (1) expected value or mean, (2) variance and standard deviation, (3) skewness, and (4) kurtosis.</p>
<p>We can verify that the <code>skewness()</code> function from the moments library returns the expected value (per the aforementioned formula) by validating against a manual calculation:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store components of skewness calculation</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">length</span>(employees<span class="sc">$</span>org_tenure)</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> employees<span class="sc">$</span>org_tenure</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>x_bar <span class="ot">=</span> <span class="fu">mean</span>(employees<span class="sc">$</span>org_tenure)</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">sd</span>(employees<span class="sc">$</span>org_tenure)</span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate skewness manually, rounded to two significant figures via the round() function</span></span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="dv">1</span><span class="sc">/</span>n <span class="sc">*</span> (<span class="fu">sum</span>((x <span class="sc">-</span> x_bar)<span class="sc">^</span><span class="dv">3</span>) <span class="sc">/</span> s<span class="sc">^</span><span class="dv">3</span>), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 2.27</code></pre>
<p>A skewness coefficient of 2.27 indicates that organization tenure is positively skewed. We can visualize the data to confirm the expected right-tailed distribution:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce histogram to visualize sample distribution</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">aes</span>(employees<span class="sc">$</span>org_tenure) <span class="sc">+</span> </span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Organization Tenure&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/org-tenure-distribution-1.png" alt="Organization Tenure Distribution" width="672" />
<p class="caption">
(#fig:org-tenure-distribution)Organization Tenure Distribution
</p>
</div>
<p><strong>Kurtosis</strong></p>
<p>While skewness provides information on the symmetry of a distribution, <strong>kurtosis</strong> provides information on the heaviness of a distribution’s tails (“tailedness”). Kurtosis is the fourth statistical moment, defined by:</p>
<p><span class="math display">\[ K = \frac{1}{n} \frac{\displaystyle\sum_{i=1}^{n} (x_i-\bar{x})^4}{s^4} \]</span></p>
<p>Note that the quartic functions characteristic of the fourth statistical moment are the only differences from the skewness formula we reviewed in the prior section (which featured cubic functions).</p>
<p>The terms <strong>leptokurtic</strong> and <strong>platykurtic</strong> are often used to describe distributions with light and heavy tails, respectively. “Platy-” in platykurtic is the same root as “platypus”, and I’ve found it helpful to recall the characteristics of the flat platypus when characterizing frequency distributions as platkurtic (wide and flat) vs. its antithesis, leptokurtic (tall and skinny). The normal (or Gaussian) distribution is referred to as a <strong>mesokurtic</strong> distribution in the context of kurtosis.</p>
<p>Figure @ref(fig:kurtosis) illustrates the three kurtosis categorizations:</p>
<div class="figure" style="text-align: center">
<img src="graphics/kurtosis.jpg" alt="Kurtosis" width="75%" />
<p class="caption">
(#fig:kurtosis)Kurtosis
</p>
</div>
<p>Kurtosis is measured relative to a normal distribution. Normal distributions have a kurtosis coefficient of 3. Therefore, the kurtosis coefficient is greater than 3 for leptokurtic distributions and less than 3 for platykurtic distributions.</p>
<p>The moments library can also be used to calculate kurtosis in R:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate kurtosis for org tenure, rounded to one significant figure</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(moments<span class="sc">::</span><span class="fu">kurtosis</span>(employees<span class="sc">$</span>org_tenure), <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 13.4</code></pre>
<p>We can verify that the <code>kurtosis()</code> function returns the expected value (per the aforementioned formula) by validating against a manual calculation:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate kurtosis manually, rounded to one significant figure</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="dv">1</span><span class="sc">/</span>n <span class="sc">*</span> (<span class="fu">sum</span>((x <span class="sc">-</span> x_bar)<span class="sc">^</span><span class="dv">4</span>) <span class="sc">/</span> s<span class="sc">^</span><span class="dv">4</span>), <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 13.4</code></pre>
<p>Our kurtosis coefficient of 13.4 indicates a leptokurtic distribution which is supported by the visual in Figure @ref(fig:org-tenure-distribution).</p>
<p>It is important not to characterize a distribution based on a single isolated metric; we need the complete set of statistical moments to fully understand the distribution of data.</p>
</div>
</div>
<div id="bivariate-analysis" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Bivariate Analysis</h2>
<p>While univariate analysis explores each variable independently, <strong>bivariate analysis</strong> explores statistical relationships between two variables.</p>
<div id="covariance" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Covariance</h3>
<p>While variance provides an understanding of how values for a single variable vary, <strong>covariance</strong> is an unstandardized measure of how two variables vary together. Values can range from <span class="math inline">\(-\infty\)</span> to <span class="math inline">\(+\infty\)</span>, and these values can be used to understand the direction of the linear relationship between variables. Positive covariance values indicate that the variables vary in the same direction (e.g., tend to increase or decrease together), while negative covariance values indicate that the variables vary in opposite directions (e.g., when one increases, the other decreases, or vice versa).</p>
<p>Covariance of a sample is defined by:</p>
<p><span class="math display">\[ cov_{x,y} = \frac{\displaystyle\sum_{i=1}^{n} (x_{i}-\bar{x})(y_{i}-\bar{y})}{n-1} \]</span></p>
<p>It’s important to note that while covariance aids our understanding of the direction of the relationship between two variables, we cannot use it to understand the strength of the association since it is unstandardized. Due to differences in variables’ units of measurement, the strength of the relationship between two variables with large covariance could be weak, while the strength of the relationship between another pair of variables with small covariance could be strong.</p>
<p>In R, we can compute the covariance between a pair of numeric variables by passing the two vectors into the <code>cov()</code> function:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate sample covariance between annual compensation and age using complete observations (missing values will cause issues if not addressed)</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(employees<span class="sc">$</span>annual_comp, employees<span class="sc">$</span>age, <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 9381.677</code></pre>
<p>In this example, using the default Pearson method, the covariance between annual compensation and age is 9,381.7. The positive value indicates that annual compensation is generally higher for older employees and lower for younger employees.</p>
<p>Just as we multiplied the sample variance by <span class="math inline">\((n - 1) / n\)</span> to obtain the population variance, we can apply the same approach to convert the sample covariance returned by <code>cov()</code> to the population covariance:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate population covariance between annual compensation and age</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(employees<span class="sc">$</span>annual_comp, employees<span class="sc">$</span>age, <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>) <span class="sc">*</span> (n <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> n</span></code></pre></div>
<pre><code>## [1] 9375.295</code></pre>
<p>The examples thus far have only examined associations between two variables at a time. However, rather than looking at isolated pairwise relationships, we can produce a covariance matrix to surface associations among many variables by passing a dataframe or matrix object into the <code>cov()</code> function:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a covariance matrix among select continuous variables</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(<span class="fu">subset</span>(employees, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">&quot;annual_comp&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;org_tenure&quot;</span>, <span class="st">&quot;job_tenure&quot;</span>, <span class="st">&quot;prior_emplr_cnt&quot;</span>, <span class="st">&quot;commute_dist&quot;</span>)), <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)</span></code></pre></div>
<pre><code>##                   annual_comp          age    org_tenure    job_tenure
## annual_comp      1.788039e+09 9381.6772019 -3921.9601469 -3693.1960749
## age              9.381677e+03   83.4550488    17.9255146     7.0467503
## org_tenure      -3.921960e+03   17.9255146    39.7967987    16.9797312
## job_tenure      -3.693196e+03    7.0467503    16.9797312    13.1271220
## prior_emplr_cnt  2.340406e+03    6.8377387    -1.8547177    -0.8213802
## commute_dist     1.067158e+04   -0.1248728     0.7746438     0.5535206
##                 prior_emplr_cnt  commute_dist
## annual_comp        2340.4057552 10671.5790741
## age                   6.8377387    -0.1248728
## org_tenure           -1.8547177     0.7746438
## job_tenure           -0.8213802     0.5535206
## prior_emplr_cnt       6.2400490    -0.5923586
## commute_dist         -0.5923586    65.7212510</code></pre>
<p>Using the default Pearson method, the <code>cov()</code> function will return sample variances for each variable down the diagonal, since covariance is not applicable in the context of a variable with itself. We can confirm by producing the variance for age:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return sample variance for age</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(employees<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>## [1] 83.45505</code></pre>
<p>As expected, the variance for age (<span class="math inline">\(s^{2} = 83.5\)</span>) matches the value found in the age x age cell of the covariance matrix.</p>
</div>
<div id="correlation" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Correlation</h3>
<p><strong>Correlation</strong> is a scaled form of covariance. While covariance provides an unstandardized measure of the direction of a relationship between variables, correlation provides a standardized measure that can be used to quantify both the direction and strength of bivariate relationships. Correlation coefficients range from -1 to 1, where -1 indicates a perfectly negative association, 1 indicates a perfectly positive association, and 0 indicates the absence of an association. <strong>Pearson’s product-moment correlation coefficient</strong> <span class="math inline">\(r\)</span> is defined by:</p>
<p><span class="math display">\[ r_{x,y} = \frac{\displaystyle\sum_{i=1}^{n} (x_{i}-\bar{x})(y_{i}-\bar{y})}{\sqrt{\displaystyle\sum_{i=1}^{n} (x_{i}-\bar{x})^2 \displaystyle\sum_{i=1}^{n} (y_{i}-\bar{y})^2}} \]</span></p>
<p>In R, Pearson’s <span class="math inline">\(r\)</span> can be calculated using the <code>cor()</code> function:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the correlation between annual compensation and age</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(employees<span class="sc">$</span>annual_comp, employees<span class="sc">$</span>age, <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0.02428654</code></pre>
<p>While we already know that the relationship between annual compensation and age is positive based on the positive covariance coefficient, Pearson’s <span class="math inline">\(r\)</span> of .02 indicates that the strength of the positive association is weak (<span class="math inline">\(r\)</span> = 0 represents the absence of a relationship). Though there are no absolute rules for categorizing the strength of relationships, as thresholds often vary by domain, the following is a general rule of thumb for interpreting the strength of bivariate associations:</p>
<ul>
<li>Weak = Absolute value of correlation coefficients between 0 and .3</li>
<li>Moderate = Absolute value of correlation coefficients between .4 and .6</li>
<li>Strong = Absolute value of correlation coefficients between .7 and 1</li>
</ul>
<p>There are several correlation coefficients, and the measurement scale of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> determine the appropriate type:</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/correlation_table.png" alt="Proper Applications of Correlation Coefficients" width="100%" />
<p class="caption">
(#fig:corr-table)Proper Applications of Correlation Coefficients
</p>
</div>
<p><br /></p>
<p>Pearson’s <span class="math inline">\(r\)</span> can be used when both variables are measured on continuous scales or when one is continuous and the other is dichotomous (point-biserial correlation).</p>
<p>When one or both variables are ordinal, we can leverage <strong>Spearman’s</strong> <span class="math inline">\(\rho\)</span> or <strong>Kendall’s</strong> <span class="math inline">\(\tau\)</span>, which are both standardized nonparametric measures of the association between one or two rank-ordered variables. Let’s look at Spearman’s <span class="math inline">\(\rho\)</span>, which is defined as:</p>
<p><span class="math display">\[ \rho = 1 - {\frac {6 \sum d_i^2}{n(n^2 - 1)}} \]</span></p>
<p>We can override the default Pearson method in the <code>cor()</code> function to implement a specific form of rank correlation using the <code>method</code> argument:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the correlation between job level and education level using Spearman&#39;s method</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(employees<span class="sc">$</span>job_lvl, employees<span class="sc">$</span>ed_lvl, <span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>, <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0.1074192</code></pre>
<p>The <span class="math inline">\(\rho\)</span> coefficient of .11 indicates that the positive association between job level and education level is weak. We could also pass <code>method = "kendall"</code> to this <code>cor()</code> function to implement Kendall’s <span class="math inline">\(\tau\)</span>.</p>
<p>The <strong>Phi Coefficient</strong> (<span class="math inline">\(\phi\)</span>), sometimes referred to as the mean square contingency coefficient or Matthews correlation in ML, can be used to understand the association between two dichotomous variables. For a 2x2 table for two random variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>:</p>
<div class="figure" style="text-align: center">
<img src="graphics/phi_coefficient_formula.png" alt="2x2 Table for Random Variables x and y" width="50%" />
<p class="caption">
(#fig:phi-tbl)2x2 Table for Random Variables x and y
</p>
</div>
<p>The <span class="math inline">\(\phi\)</span> coefficient is defined as:</p>
<p><span class="math display">\[ \phi = {\frac {(AD-BC)}{\sqrt{(A+B)(C+D)(A+C)(B+D)}}} \]</span></p>
<p>To illustrate, let’s examine whether there is a relationship between gender and performance after transforming performance from its ordinal form to a dichotomous variable (high vs. low performance). We can leverage the <code>psych</code> library to calculate <span class="math inline">\(\phi\)</span> in R:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set females to 1 and everything else to 0</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>gender_code <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(employees<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&#39;Female&#39;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set stock options to 1 if level &gt; 0</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>stock_option_code <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(employees<span class="sc">$</span>stock_opt_lvl <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 2x2 contingency table</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a>contingency_tbl <span class="ot">&lt;-</span> <span class="fu">table</span>(employees<span class="sc">$</span>gender_code, employees<span class="sc">$</span>stock_option_code)</span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the Phi Coefficient between dichotomous variables</span></span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">phi</span>(contingency_tbl)</span></code></pre></div>
<pre><code>## [1] -0.01</code></pre>
<p><span class="math inline">\(\phi\)</span> is essentially 0, which means stock options are distributed equitably across gender categories (good news!). While there are not differences in the proportion of males and females who receive at least some stock options, examining whether there is equity in the amount of stock grants and refreshes may be a good next step.</p>
<p>A correlation matrix can be produced to surface associations among many variables by passing a dataframe or matrix object into the <code>cor()</code> function:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a correlation matrix among select continuous variables</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(<span class="fu">subset</span>(employees, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">&quot;annual_comp&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;org_tenure&quot;</span>, <span class="st">&quot;job_tenure&quot;</span>, <span class="st">&quot;prior_emplr_cnt&quot;</span>, <span class="st">&quot;commute_dist&quot;</span>)), <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)</span></code></pre></div>
<pre><code>##                 annual_comp         age  org_tenure  job_tenure prior_emplr_cnt
## annual_comp      1.00000000  0.02428654 -0.01470248 -0.02410622      0.02215688
## age              0.02428654  1.00000000  0.31104359  0.21290106      0.29963476
## org_tenure      -0.01470248  0.31104359  1.00000000  0.74288567     -0.11769547
## job_tenure      -0.02410622  0.21290106  0.74288567  1.00000000     -0.09075393
## prior_emplr_cnt  0.02215688  0.29963476 -0.11769547 -0.09075393      1.00000000
## commute_dist     0.03113059 -0.00168612  0.01514695  0.01884500     -0.02925080
##                 commute_dist
## annual_comp       0.03113059
## age              -0.00168612
## org_tenure        0.01514695
## job_tenure        0.01884500
## prior_emplr_cnt  -0.02925080
## commute_dist      1.00000000</code></pre>
<p>Based on this correlation matrix, most pairwise associations are weak with the exception of the relationship between <code>org_tenure</code> and <code>job_tenure</code> (<span class="math inline">\(r = .7\)</span>). The values down the diagonal are 1 because these represent the correlation between each variable with itself. You may also notice that the information above and below the diagonal is identical and, therefore, redundant.</p>
<p>A great R library for visualizing correlation matrices is corrplot. Several arguments can be specified for various visual representations of the relationships among variables:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/corrplot-comp-1.png" alt="Corrplot correlation matrix" width="100%" />
<p class="caption">
(#fig:corrplot-comp)Corrplot correlation matrix
</p>
</div>
<p>The <code>GGally</code> library produces a variety of useful information, including correlation coefficients, bivariate scatterplots, and univariate distributions:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ggpairs-comp-1.png" alt="GGpairs bivariate correlations and data distributions." width="100%" />
<p class="caption">
(#fig:ggpairs-comp)GGpairs bivariate correlations and data distributions.
</p>
</div>
<p>We may find that these bivariate associations look quite different for certain business areas or jobs, assuming departments and jobs were created at different points in the company’s history. There is often a lot of noise in data at the broader company level, so understanding the nature and nuance of associations will be highly important. We will explore this further in the context of linear regression in Chapter @ref(lm).</p>
<p>It’s important to remember that correlation is not causation. Correlations can be spurious (variables related by chance), and drawing conclusions based on bivariate associations alone – especially in the absence of sound theoretical underpinnings – can be dangerous.</p>
<div class="figure" style="text-align: center">
<img src="graphics/correlation_comic.png" alt="Correlation comic (Source: www.explainxkcd.com)" width="75%" />
<p class="caption">
(#fig:corr-comic)Correlation comic (Source: www.explainxkcd.com)
</p>
</div>
<p><br /></p>
<p>Here are two examples of nearly perfect correlations between variables for which there is likely no true direct association:</p>
<div class="figure" style="text-align: center">
<img src="graphics/spurious_corr_maine_divorce.png" alt="Correlation between Maine Divorce Rate and Margarine Consumption (r = .99)" width="100%" />
<p class="caption">
(#fig:spur-corr-1)Correlation between Maine Divorce Rate and Margarine Consumption (r = .99)
</p>
</div>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/spurious_corr_mozzarella_cheese.png" alt="Correlation between Mozzarella Cheese Consumption and Civil Engineering Doctorate Conferrals (r = .96)" width="100%" />
<p class="caption">
(#fig:spur-corr-2)Correlation between Mozzarella Cheese Consumption and Civil Engineering Doctorate Conferrals (r = .96)
</p>
</div>
<p>In addition, covariance and correlation alone are not sufficient for determining whether an observed association in sample data is also present in the population. To understand the likelihood that patterns observed in sample data are also present in the larger population of interest, we need to move beyond descriptive measures.</p>
</div>
</div>
<div id="review-questions-5" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>How does the mean and median compare with respect to sensitivity to extreme values (outliers)?</p></li>
<li><p>What does the standard deviation tell us about the spread of data, and how does it compare to the variance?</p></li>
<li><p>How does the order of the mean, median, and mode differ between positively and negatively skewed distributions?</p></li>
<li><p>Do large covariance coefficients always indicate strong bivariate associations? Why or why not?</p></li>
<li><p>What information is represented in box plots?</p></li>
<li><p>Do do quartiles relate to percentiles?</p></li>
<li><p>What type of correlation coefficient should be used when evaluating the relationship between a pair of rank-ordered variables?</p></li>
<li><p>What type of correlation coefficient should be used when evaluating the relationship between a pair of dichotomous variables?</p></li>
<li><p>How would you characterize the shape of platykurtic, leptokurtic, and mesokurtic distributions?</p></li>
<li><p>When using the Pearson method, what do the values down the diagonal of a <em>covariance</em> matrix represent?</p></li>
</ol>
<!--chapter:end:r/07_descriptive_statistics.Rmd-->
</div>
</div>
<div id="inf-stats" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Statistical Inference</h1>
<p>The objective of <strong>inferential statistics</strong> is to make inferences – with some degree of confidence – about a population based on available sample data. Several related concepts are fundamental to this goal and will be covered here.</p>
<div id="introduction-to-probability" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Introduction to Probability</h2>
<p>Randomness and uncertainty exist all around us. In <strong>probability theory</strong>, random phenomena refer to events or experiments whose outcomes cannot be predicted with certainty (Pishro-Nik, 2014). If you’ve taken a course in probability, there is a good chance you have considered the case of a fair coin flip – one of the most intuitive applications of probability. In the absence of information on how the coin is flipped, we cannot be certain of the outcome. What we can be certain of is that with a large number of coin flips, the proportion of heads will become increasingly close to 50%, or <span class="math inline">\(\frac{1}{2}\)</span>.</p>
<p>The <strong>Law of Large Numbers (LLN)</strong> is an important theorem for building an intuitive understanding of how probability relates to the statistical inference concepts we will cover. In the case of a fair coin flip, it is possible to observe many consecutive heads by chance. This is because small samples can lend to anomalies. However, as the number of flips increases, we will undoubtedly observe an increasing number of tails; we expect a roughly equal number of heads and tails with a large enough number of flips.</p>
<div id="probability-distributions" class="section level3" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Probability Distributions</h3>
<p><strong>Probability distributions</strong> are statistical functions that yield the probability of obtaining possible values for a random variable. Probabilities range from 0 to 1, where the probability of a definite event is 1 and the probability of an impossible event is 0. The <strong>empirical probability (or experimental probability)</strong> of an event is the fraction of times it occurred relative to the total number of repetitions. Since a probability distribution defines the likelihood of observing all possible outcomes of an event or experiment, the sum of all probabilities for all possible values must equal 1.</p>
<p>For example, let’s look at how org tenure is distributed across employees. We can understand the general shape of the distribution using descriptive statistics:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library for data wrangling</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce descriptive stats for org tenure</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(employees<span class="sc">$</span>org_tenure)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   3.000   5.000   7.032   9.000  72.000</code></pre>
<p><br /></p>
<p>Comparing the higher mean value of 7.03 to the median value of 5 indicates there are larger values skewing the mean upward which can be seen in the Q3 and max values.</p>
<p>Beyond descriptives, visuals are often helpful in understanding a variable’s distribution. As shown in Figure @ref(fig:org-tenure-dist), it is clear that org tenure is positively skewed, and understanding the shape (or spread) of this distribution enables us to identify which values are most likely in order to estimate the likelihood of different results:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize org tenure distribution</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">aes</span>(employees<span class="sc">$</span>org_tenure) <span class="sc">+</span> </span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Org Tenure&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/org-tenure-dist-1.png" alt="Org Tenure Distribution" width="672" />
<p class="caption">
(#fig:org-tenure-dist)Org Tenure Distribution
</p>
</div>
<p><br /></p>
<p>You can likely image the shape of probability distributions for many common events. If we consider the probability of employees exiting an organization, the outcome is binary. That is, employees either leave or stay; there are no options between these extremes. However, the distribution of performance scores will look quite different. Most organizations have expected – or even forced – distributions in which an average rating is awarded most frequently and low and high performance ratings less frequently. This would start to look more like a bell curve as the number of performance levels increases.</p>
<p>Just as we grouped variables into discrete and continuous categories in Chapter @ref(measure-sampl), this is also how probability distributions are categorized. If you read Chapter @ref(measure-sampl), you likely already have some a priori expectations about the characteristics of discrete and continuous distributions.</p>
<p>The shape of a probability distribution is defined by parameters, which represent its essential properties (e.g., measures of central tendency and spread). These probability distributions underpin the many types of statistical tests covered in this book.</p>
<p><strong>Discrete Probability Distributions</strong></p>
<p><strong>Discrete probability distributions</strong>, also known as <strong>Probability Mass Functions (PMF)</strong>, can be leveraged to model different types of nominal and ordinal variables. Some common discrete distributions include:</p>
<ul>
<li><strong>Bernoulli</strong>: probability of success or failure for a <em>single</em> observation with two outcomes</li>
<li><strong>Binomial</strong>: number of successes and failures in a <em>sequence</em> of independent observations with two outcomes (collection of Bernoulli trials)</li>
<li><strong>Multinomial</strong>: generalization of the binomial distribution for observations with more than two outcomes</li>
<li><strong>Negative Binomial (Pascal)</strong>: a version of the binomial distribution for a <em>fixed</em> number of observations (this is positively skewed despite what the name might suggest)</li>
<li><strong>Poisson</strong>: probability of a given number of events occurring over a specified period</li>
<li><strong>Geometric</strong>: special case of the negative binomial distribution that repeats observations until a success is observed (rather than a fixed number of times)</li>
</ul>
<p>Several functions are available in R to simulate PMFs. The precise shape of a distribution depends on the parameters, but we will simulate and visualize these common PMFs to illustrate differences in the general shape of each. First, let’s simulate the distributions by drawing 1,000 random values from each with a specified set of parameters:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible random distribution</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate bernoulli distribution</span></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a>bernoulli_dist <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="dv">1000</span>, <span class="dv">1</span>, <span class="at">prob =</span> .<span class="dv">5</span>)</span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate binomial distribution</span></span>
<span id="cb226-8"><a href="#cb226-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice the important difference relative to the Bernoulli simulation (100 trials vs. 1)</span></span>
<span id="cb226-9"><a href="#cb226-9" aria-hidden="true" tabindex="-1"></a>binomial_dist <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="dv">1000</span>, <span class="dv">100</span>, <span class="at">prob =</span> .<span class="dv">5</span>) </span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-11"><a href="#cb226-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate negative binomial distribution</span></span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true" tabindex="-1"></a>nbinomial_dist <span class="ot">&lt;-</span> <span class="fu">rnbinom</span>(<span class="dv">1000</span>, <span class="dv">100</span>, <span class="at">prob =</span> .<span class="dv">5</span>) </span>
<span id="cb226-13"><a href="#cb226-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-14"><a href="#cb226-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate multinomial distribution with varying probabilities per level</span></span>
<span id="cb226-15"><a href="#cb226-15" aria-hidden="true" tabindex="-1"></a>multinomial_dist <span class="ot">&lt;-</span> <span class="fu">rmultinom</span>(<span class="dv">1000</span>, <span class="dv">4</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">3</span>, .<span class="dv">2</span>, .<span class="dv">6</span>))</span>
<span id="cb226-16"><a href="#cb226-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-17"><a href="#cb226-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate poisson distribution</span></span>
<span id="cb226-18"><a href="#cb226-18" aria-hidden="true" tabindex="-1"></a>poisson_dist <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">1000</span>, <span class="dv">10</span>) </span>
<span id="cb226-19"><a href="#cb226-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-20"><a href="#cb226-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate geometric distribution</span></span>
<span id="cb226-21"><a href="#cb226-21" aria-hidden="true" tabindex="-1"></a>geometric_dist <span class="ot">&lt;-</span> <span class="fu">rgeom</span>(<span class="dv">1000</span>, <span class="at">prob =</span> .<span class="dv">2</span>) </span></code></pre></div>
<p><br /></p>
<p>Next, we will visualize each distribution:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create user-defined function (UDF) to simplify probability distribution visualization</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Function arguments: (1) data = object containing random distribution values; (2) type = &#39;discrete&#39; or &#39;continuous&#39; probability distribution; and (3) title = name of distribution</span></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>dist.viz <span class="ot">&lt;-</span> <span class="cf">function</span>(data, type, title) {</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&quot;discrete&quot;</span>){</span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Discrete distribution</span></span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a>    viz <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">aes</span>(data) <span class="sc">+</span> </span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(title), <span class="at">x =</span> <span class="st">&quot;x&quot;</span>, <span class="at">y =</span> <span class="st">&quot;count&quot;</span>) <span class="sc">+</span> </span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb227-16"><a href="#cb227-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-17"><a href="#cb227-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Continuous distribution</span></span>
<span id="cb227-18"><a href="#cb227-18" aria-hidden="true" tabindex="-1"></a>    viz <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb227-19"><a href="#cb227-19" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">aes</span>(data) <span class="sc">+</span> </span>
<span id="cb227-20"><a href="#cb227-20" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(title), <span class="at">x =</span> <span class="st">&quot;x&quot;</span>, <span class="at">y =</span> <span class="st">&quot;density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb227-21"><a href="#cb227-21" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb227-22"><a href="#cb227-22" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb227-23"><a href="#cb227-23" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb227-24"><a href="#cb227-24" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb227-25"><a href="#cb227-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb227-26"><a href="#cb227-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-27"><a href="#cb227-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(viz)</span>
<span id="cb227-28"><a href="#cb227-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb227-29"><a href="#cb227-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-30"><a href="#cb227-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Call UDF to build visualizations and store to objects</span></span>
<span id="cb227-31"><a href="#cb227-31" aria-hidden="true" tabindex="-1"></a>p_bernoulli <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> bernoulli_dist, <span class="at">type =</span> <span class="st">&quot;discrete&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Bernoulli&quot;</span>)</span>
<span id="cb227-32"><a href="#cb227-32" aria-hidden="true" tabindex="-1"></a>p_binomial <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> binomial_dist, <span class="at">type =</span> <span class="st">&quot;discrete&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Binomial&quot;</span>)</span>
<span id="cb227-33"><a href="#cb227-33" aria-hidden="true" tabindex="-1"></a>p_nbinomial <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> nbinomial_dist, <span class="at">type =</span> <span class="st">&quot;discrete&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Negative Binomial&quot;</span>)</span>
<span id="cb227-34"><a href="#cb227-34" aria-hidden="true" tabindex="-1"></a>p_multinomial <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> multinomial_dist, <span class="at">type =</span> <span class="st">&quot;discrete&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Multinomial&quot;</span>)</span>
<span id="cb227-35"><a href="#cb227-35" aria-hidden="true" tabindex="-1"></a>p_poisson <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> poisson_dist, <span class="at">type =</span> <span class="st">&quot;discrete&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Poisson&quot;</span>)</span>
<span id="cb227-36"><a href="#cb227-36" aria-hidden="true" tabindex="-1"></a>p_geometric <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> geometric_dist, <span class="at">type =</span> <span class="st">&quot;discrete&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Geometric&quot;</span>)</span>
<span id="cb227-37"><a href="#cb227-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb227-38"><a href="#cb227-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Display distribution visualizations</span></span>
<span id="cb227-39"><a href="#cb227-39" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(p_bernoulli, p_binomial, p_nbinomial, p_multinomial, p_poisson, p_geometric,</span>
<span id="cb227-40"><a href="#cb227-40" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/discrete-dist-1.png" alt="Discrete Probability Distributions" width="672" />
<p class="caption">
(#fig:discrete-dist)Discrete Probability Distributions
</p>
</div>
<p><br /></p>
<p><strong>Continuous Probability Distributions</strong></p>
<p><strong>Continuous probability distributions</strong>, also known as <strong>Probability Density Functions (PDF)</strong>, can be leveraged to model different types of interval and ratio variables. Some common continuous distributions include:</p>
<ul>
<li><strong>Normal (Gaussian)</strong>: distribution characterized by a mean and standard deviation for which the mean, median, and mode are equal</li>
<li><strong>Uniform</strong>: values of a random variable with equal probabilities of occurring</li>
<li><strong>Log-Normal</strong>: normal distribution of log-transformed values</li>
<li><strong>Student’s</strong> <span class="math inline">\(\textbf t\)</span>: similar to the normal distribution but with thicker tails (approaches normal as <span class="math inline">\(n\)</span> increases)</li>
<li><strong>Chi-Square</strong>: similar to the t distribution in that the shape approaches normal as <span class="math inline">\(n\)</span> increases</li>
<li><strong>F</strong>: developed to examine variances from random samples taken from two independent normal populations</li>
</ul>
<p>A number of functions are available in R to simulate PDFs. While the precise shape of a distribution depends on the parameters, we will simulate and visualize these common PDFs to illustrate differences in the general shape of each. Let’s first draw 1,000 random values from each distribution with a specified set of parameters:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible random distribution</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate normal distribution</span></span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>normal_dist <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">50</span>, <span class="at">sd =</span> <span class="dv">5</span>)</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate log-normal distribution</span></span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a>lnormal_dist <span class="ot">&lt;-</span> <span class="fu">rlnorm</span>(<span class="dv">1000</span>, <span class="at">meanlog =</span> <span class="dv">0</span>, <span class="at">sdlog =</span> <span class="dv">1</span>)</span>
<span id="cb228-9"><a href="#cb228-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-10"><a href="#cb228-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate uniform distribution</span></span>
<span id="cb228-11"><a href="#cb228-11" aria-hidden="true" tabindex="-1"></a>uniform_dist <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1000</span>, <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">100</span>) </span>
<span id="cb228-12"><a href="#cb228-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-13"><a href="#cb228-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate student&#39;s t distribution</span></span>
<span id="cb228-14"><a href="#cb228-14" aria-hidden="true" tabindex="-1"></a>t_dist <span class="ot">&lt;-</span> <span class="fu">rt</span>(<span class="dv">1000</span>, <span class="at">df =</span> <span class="dv">5</span>)</span>
<span id="cb228-15"><a href="#cb228-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-16"><a href="#cb228-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate chi-square distribution</span></span>
<span id="cb228-17"><a href="#cb228-17" aria-hidden="true" tabindex="-1"></a>chisq_dist <span class="ot">&lt;-</span> <span class="fu">rchisq</span>(<span class="dv">1000</span>, <span class="at">df =</span> <span class="dv">5</span>)</span>
<span id="cb228-18"><a href="#cb228-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-19"><a href="#cb228-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate F distribution</span></span>
<span id="cb228-20"><a href="#cb228-20" aria-hidden="true" tabindex="-1"></a>f_dist <span class="ot">&lt;-</span> <span class="fu">rf</span>(<span class="dv">1000</span>, <span class="at">df1 =</span> <span class="dv">5</span>, <span class="at">df2 =</span> <span class="dv">200</span>)</span></code></pre></div>
<p><br /></p>
<p>Next, we will visualize each distribution. Since these continuous distributions are probability <em>density</em> functions, we will superimpose density plots over each:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Call UDF to build visualizations and store to objects</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that as long as the arguments are in the order specified in the function (see our UDF definition above), the argument names do not need to be specified. To illustrate, we will drop the argument names from these function calls:</span></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>p_normal <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(normal_dist, <span class="st">&quot;continuous&quot;</span>, <span class="st">&quot;Normal&quot;</span>)</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>p_lnormal <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(lnormal_dist, <span class="st">&quot;continuous&quot;</span>, <span class="st">&quot;Log-Normal&quot;</span>)</span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>p_uniform <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(uniform_dist, <span class="st">&quot;continuous&quot;</span>, <span class="st">&quot;Uniform&quot;</span>)</span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>p_t <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(t_dist, <span class="st">&quot;continuous&quot;</span>, <span class="st">&quot;Student&#39;s T&quot;</span>)</span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a>p_chisq <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(chisq_dist, <span class="st">&quot;continuous&quot;</span>, <span class="st">&quot;Chi-Square&quot;</span>)</span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a>p_f <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(f_dist, <span class="st">&quot;continuous&quot;</span>, <span class="st">&quot;F&quot;</span>)</span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-10"><a href="#cb229-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Display distribution visualizations</span></span>
<span id="cb229-11"><a href="#cb229-11" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(p_normal, p_lnormal, p_uniform, p_t, p_chisq, p_f,</span>
<span id="cb229-12"><a href="#cb229-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/continous-dist-1.png" alt="Continuous Probability Distributions" width="672" />
<p class="caption">
(#fig:continous-dist)Continuous Probability Distributions
</p>
</div>
<p><br /></p>
<p>The distribution of data is critically important in statistics. The accuracy of many statistical tests is based on assumptions rooted in underlying data distributions, and violating these assumptions can result in serious errors due to misaligned probability distributions. Though there are many more discrete and continuous probability distributions, we will leverage several of these common types to assess the likelihood of differences, effects, and associations in later chapters of this book.</p>
</div>
<div id="conditional-probability" class="section level3" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Conditional Probability</h3>
<p><strong>Conditional probability</strong> reflects the probability conditioned on the occurrence of a previous event or outcome. For example, we may find that the proportion of heads is greater or less than <span class="math inline">\(\frac{1}{2}\)</span> with a large number of fair coin flips when the coin is consistently heads up when flipped. The outcome is, therefore, conditioned on the fixed – rather than random – positioning of the coin when flipped.</p>
<p>Formally, <strong>Bayes’ Theorem (alternatively, Bayes’ Rule)</strong> states that for any two events A and B wherein the probability of A is not 0 (<span class="math inline">\(P(A) \neq 0\)</span>):</p>
<p><span class="math display">\[ P(A \vert B) = \frac{P(B \vert A) P(A)}{P(B)}, \]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(A\)</span> = an event</li>
<li><span class="math inline">\(B\)</span> = another event</li>
<li><span class="math inline">\(P(A|B)\)</span> = conditional probability that event A occurs, given event B occurs (posterior)</li>
<li><span class="math inline">\(P(B|A)\)</span> = conditional probability that event B occurs, given event A occurs (likelihood)</li>
<li><span class="math inline">\(P(B)\)</span> = normalizing constant, constraining the probability distribution to sum to 1 (evidence)</li>
<li><span class="math inline">\(P(A)\)</span> = probability event A occurs before knowing if event B occurs (prior)</li>
</ul>
<p>Bayes’ Rule allows us to predict the outcome more accurately by conditioning the probability on known factors rather than assuming all events operate under the same conditions. Bayes’ Rule is pervasive in people analytics, as the probability of outcomes can vary widely when conditioned on a person’s age, tenure, education, job, perceptions, relationships, and many other factors. For example, if we consider a company with 100 terminations over a 12-month period and average headcount of 1,000, the probability of attrition not conditioned on any other factor is 10%, or <span class="math inline">\(\frac{1}{10}\)</span>. Aside from trending this probability over time to identify if overall attrition is becoming more or less of a concern, this isn’t too helpful at the company level. However, if we condition the probability of attrition on an event – such as a recent manager exit – and find that the probability of attrition among those whose manager has left in the last six months is 70%, or <span class="math inline">\(\frac{7}{10}\)</span>, this is far more actionable (and concerning).</p>
<p>The <strong>Monty Hall Problem</strong> is an excellent example of how our intuition is often at odds with the laws of conditional probability.</p>
<p>In the classic game show, Let’s Make a Deal, Monty Hall asks contestants to choose one of three closed doors. Behind one door is a prize while the other two doors contain nothing. After the contestant selects a door, Monty opens one of the other two doors which does not contain a prize. At this point, there are two closed doors: the door the contestant selected and another for which the content remains unknown. All that is known at this point is that the prize is behind one of the two closed doors.</p>
<p>It is at this juncture that Monty introduces a twist by asking if the contestant would like to switch doors. Most assume that the two closed doors have an equal (50/50) chance of containing the prize, because we generally think of probabilities as independent, random events. However, this is incorrect. Contestants who switch from their original selection have a 66% chance (rather than 50%) of winning. This may be counterintuitive, because the brain wants to reduce the problem to a simple coin flip. There is a major difference between the Monty Hall problem and a coin flip; for two outcomes to have the same probability, randomness and independence are required. In the case of the Monty Hall problem, neither assumption is satisfied.</p>
<p>When all three doors are closed, each has the same probability of being selected. The probability of choosing the door with a prize is .33. Monty’s knowledge of the door containing the prize does not impact the probability of selecting the winning door. This is because the choice is completely random given we have no information that would increase the probability of a door containing the prize. The process is no longer random when Monty uses his insider knowledge about the prize’s location and opens a door he knows does not contain the prize. The probabilities change. Since Monty will never show the door containing the prize, he is careful to always open a door that has nothing behind it. If he was not constrained by the requirement to not reveal the prize’s location and instead chose to open one of the remaining doors at random, the probabilities would be equal (and he may end up opening the door that contains the prize).</p>
<p>Seeing is believing, so let’s prove this with a simulation in R:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible simulations</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set number of simulations</span></span>
<span id="cb230-5"><a href="#cb230-5" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">=</span> <span class="dv">10000</span></span>
<span id="cb230-6"><a href="#cb230-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-7"><a href="#cb230-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Store switch/keep decisions</span></span>
<span id="cb230-8"><a href="#cb230-8" aria-hidden="true" tabindex="-1"></a>decisions <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;switch&quot;</span>, <span class="st">&quot;keep&quot;</span>)</span>
<span id="cb230-9"><a href="#cb230-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-10"><a href="#cb230-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Store integer for each door</span></span>
<span id="cb230-11"><a href="#cb230-11" aria-hidden="true" tabindex="-1"></a>doors <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb230-12"><a href="#cb230-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-13"><a href="#cb230-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize empty data frame for results</span></span>
<span id="cb230-14"><a href="#cb230-14" aria-hidden="true" tabindex="-1"></a>results <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb230-15"><a href="#cb230-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-16"><a href="#cb230-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>trials){</span>
<span id="cb230-17"><a href="#cb230-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-18"><a href="#cb230-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (decision <span class="cf">in</span> decisions){</span>
<span id="cb230-19"><a href="#cb230-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-20"><a href="#cb230-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select correct door</span></span>
<span id="cb230-21"><a href="#cb230-21" aria-hidden="true" tabindex="-1"></a>    correct_door <span class="ot">&lt;-</span> <span class="fu">sample</span>(doors, <span class="dv">1</span>, <span class="at">replace =</span> T)</span>
<span id="cb230-22"><a href="#cb230-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-23"><a href="#cb230-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Contestant chooses a door at random</span></span>
<span id="cb230-24"><a href="#cb230-24" aria-hidden="true" tabindex="-1"></a>    selected_door <span class="ot">&lt;-</span> <span class="fu">sample</span>(doors, <span class="dv">1</span>, <span class="at">replace =</span> T)</span>
<span id="cb230-25"><a href="#cb230-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-26"><a href="#cb230-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Open door that was neither selected by the contestant nor contains the prize</span></span>
<span id="cb230-27"><a href="#cb230-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Choose one door to open if multiple remain without the prize (i.e., the contestant didn&#39;t initially select the door containing the prize)</span></span>
<span id="cb230-28"><a href="#cb230-28" aria-hidden="true" tabindex="-1"></a>    remaining_doors <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span>doors <span class="sc">==</span> correct_door <span class="sc">&amp;</span> <span class="sc">!</span>doors <span class="sc">==</span> selected_door)</span>
<span id="cb230-29"><a href="#cb230-29" aria-hidden="true" tabindex="-1"></a>    open_door <span class="ot">&lt;-</span> <span class="fu">sample</span>(remaining_doors, <span class="dv">1</span>, <span class="at">replace =</span> T) </span>
<span id="cb230-30"><a href="#cb230-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-31"><a href="#cb230-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Contestant makes decision to switch doors or keep with the originally selected door</span></span>
<span id="cb230-32"><a href="#cb230-32" aria-hidden="true" tabindex="-1"></a>    selected_door <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(decision <span class="sc">==</span> <span class="st">&quot;switch&quot;</span>, <span class="fu">which</span>(<span class="sc">!</span>doors <span class="sc">==</span> selected_door <span class="sc">&amp;</span> <span class="sc">!</span>doors <span class="sc">==</span> open_door), selected_door)</span>
<span id="cb230-33"><a href="#cb230-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-34"><a href="#cb230-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results in data frame</span></span>
<span id="cb230-35"><a href="#cb230-35" aria-hidden="true" tabindex="-1"></a>    results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb230-36"><a href="#cb230-36" aria-hidden="true" tabindex="-1"></a>                     <span class="at">trial =</span> n,</span>
<span id="cb230-37"><a href="#cb230-37" aria-hidden="true" tabindex="-1"></a>                     <span class="at">decision =</span> decision,</span>
<span id="cb230-38"><a href="#cb230-38" aria-hidden="true" tabindex="-1"></a>                     <span class="at">result =</span> <span class="fu">ifelse</span>(correct_door <span class="sc">==</span> selected_door, <span class="st">&quot;win&quot;</span>, <span class="st">&quot;lose&quot;</span>)))</span>
<span id="cb230-39"><a href="#cb230-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb230-40"><a href="#cb230-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb230-41"><a href="#cb230-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-42"><a href="#cb230-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage difference in wins for switch vs. keep decisions</span></span>
<span id="cb230-43"><a href="#cb230-43" aria-hidden="true" tabindex="-1"></a>switch_wins <span class="ot">&lt;-</span> <span class="fu">nrow</span>(results[results<span class="sc">$</span>decision <span class="sc">==</span> <span class="st">&quot;switch&quot;</span> <span class="sc">&amp;</span> results<span class="sc">$</span>result <span class="sc">==</span> <span class="st">&quot;win&quot;</span>, ]) <span class="sc">/</span> <span class="fu">nrow</span>(results) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb230-44"><a href="#cb230-44" aria-hidden="true" tabindex="-1"></a>keep_wins <span class="ot">&lt;-</span> <span class="fu">nrow</span>(results[results<span class="sc">$</span>decision <span class="sc">==</span> <span class="st">&quot;keep&quot;</span> <span class="sc">&amp;</span> results<span class="sc">$</span>result <span class="sc">==</span> <span class="st">&quot;win&quot;</span>, ]) <span class="sc">/</span> <span class="fu">nrow</span>(results) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb230-45"><a href="#cb230-45" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>((switch_wins <span class="sc">-</span> keep_wins) <span class="sc">/</span> keep_wins <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] 45</code></pre>
<p><br /></p>
<p>As we can see, wins occur nearly 50% more often when contestants switch doors. This exercise hopefully demonstrates the importance of conditional probability and statistical assumptions like randomness. Also, if ever you find yourself playing Let’s Make a Deal, switch doors.</p>
</div>
</div>
<div id="central-limit-theorem" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Central Limit Theorem</h2>
<p>The <strong>Central Limit Theorem (CLT)</strong> is a mainstay of statistics and probability and fundamental to understanding the mechanics of statistical inference. The CLT was initially coined by a French-born mathematician named Abraham De Moivre in the 1700s.</p>
<p>The CLT states that given a sufficiently large sample size, the average of independent random variables tends to follow a normal (or Gaussian) distribution as the number of samples increases. The distribution of sample means approaches a normal distribution regardless of the shape of the population distribution from which the samples are drawn. This is important because the normal distribution has properties that can be used to test the likelihood that an observed value, difference, or relationship in a sample is also present in the population.</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/normal_distribution.png" alt="The Empirical Rule" width="75%" />
<p class="caption">
(#fig:emp-rule)The Empirical Rule
</p>
</div>
<p><br /></p>
<p>Let’s begin with an intuitive example of CLT. Imagine that we have a reliable way to measure how fun a population is on a 100-point scale, where 100 indicates maximum fun (life of the party) and 1 indicates maximum boringness. Consider that a small statistics conference is in progress at a nearby convention center, and there are 40 statisticians in attendance. In a separate room at the same convention center, there is also a group of 40 random people (non-statisticians) who are gathered to discuss some less interesting topic. Our job is to walk into one of the rooms and determine – based on the “fun” factor alone – whether we have entered the statistics conference or the other, less interesting gathering of non-statisticians.</p>
<p>Instinctively, we already know the statisticians will be more fun than the other group. However, let’s assume we need the mean fun score and standard deviation of these two groups for this example. The group of statisticians have, on average, a fun score of 85 with a standard deviation of 2, while the group of non-statisticians are a bit less fun with a mean score of 65 and a standard deviation of 4. With a known population mean and standard deviation, the standard error (the standard deviation of the sample means) provides the ability to calculate the probability that the sample (the room of 40 people) belongs to the population of interest (fellow statisticians).</p>
<p>Herein lies the beauty of the CLT: roughly 68 percent of sample means will lie within one standard error of the population mean, roughly 95 percent within two standard errors of the population mean, and roughly 99 percent within three standard errors of the population mean. Therefore, any room whose members have an average fun score that is not within two standard errors of the population mean (between 81 and 89 for our statisticians) is statistically unlikely to be the group of statisticians for which we are searching. This is because in less than 5 in 100 cases could we randomly draw a ‘reasonably sized’ sample of statisticians with average funness so extremely different from the population average.</p>
<p>Because small samples lend to anomalies, we could – by chance – select a single person who happens to fall in the tails (extremely boring or extremely fun); however, as the sample size increases, it becomes more and more likely that the observed average reflects the average of the larger population. It would be virtually impossible (in less than 1 in 100 cases) to draw a random sample of statisticians from the population with average funness that is not within three standard errors of the population mean (between 79 and 91). Therefore, if we find that the room of people have an average fun score of 75, we will likely have far more fun in the other room!</p>
<p>Let’s now see the CLT in action by simulating a random uniform population distribution from which we can draw random samples. Remember, the shape of the population distribution does not matter; we could simulate an Exponential, Gamma, Poisson, Binomial, or other distribution and observe the same behavior.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible random distribution</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate uniform population distribution with 1000 values ranging from 1 to 100</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>rand.unif <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1000</span>, <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate population mean</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(rand.unif)</span></code></pre></div>
<pre><code>## [1] 51.22007</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate population variance</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(rand.unif)</span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(rand.unif) <span class="sc">*</span> (N <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> N</span></code></pre></div>
<pre><code>## [1] 830.3155</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce histogram to visualize population distribution</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">aes</span>(rand.unif) <span class="sc">+</span> </span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;x&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/unnamed-chunk-126-1.png" alt="Uniform Population Distribution (N = 1000)" width="672" />
<p class="caption">
(#fig:unnamed-chunk-126)Uniform Population Distribution (N = 1000)
</p>
</div>
<p><br /></p>
<p>As expected, these randomly generated data are uniformly distributed. Next, we will draw 100 random samples of various sizes and plot the average of each.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define number of samples to draw from population distribution</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Populate vector with sample sizes</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>sample_n <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">25</span>,<span class="dv">50</span>)</span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize empty data frame to hold sample means</span></span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a>sample_means <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb238-9"><a href="#cb238-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-10"><a href="#cb238-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible random samples</span></span>
<span id="cb238-11"><a href="#cb238-11" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb238-12"><a href="#cb238-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-13"><a href="#cb238-13" aria-hidden="true" tabindex="-1"></a><span class="co"># For each n, draw random samples</span></span>
<span id="cb238-14"><a href="#cb238-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (n <span class="cf">in</span> sample_n) {</span>
<span id="cb238-15"><a href="#cb238-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb238-16"><a href="#cb238-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (draw <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>samples) {</span>
<span id="cb238-17"><a href="#cb238-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-18"><a href="#cb238-18" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Store sample means in data frame</span></span>
<span id="cb238-19"><a href="#cb238-19" aria-hidden="true" tabindex="-1"></a>      sample_means <span class="ot">&lt;-</span> <span class="fu">rbind</span>(sample_means, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb238-20"><a href="#cb238-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n =</span> n, </span>
<span id="cb238-21"><a href="#cb238-21" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x_bar =</span> <span class="fu">mean</span>(<span class="fu">sample</span>(rand.unif, n, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="cn">NULL</span>))))</span>
<span id="cb238-22"><a href="#cb238-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb238-23"><a href="#cb238-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb238-24"><a href="#cb238-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-25"><a href="#cb238-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce histograms to visualize distributions of sample means, grouped by n-count</span></span>
<span id="cb238-26"><a href="#cb238-26" aria-hidden="true" tabindex="-1"></a>sample_means <span class="sc">%&gt;%</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb238-27"><a href="#cb238-27" aria-hidden="true" tabindex="-1"></a>                 ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x_bar, <span class="at">fill =</span> n) <span class="sc">+</span> </span>
<span id="cb238-28"><a href="#cb238-28" aria-hidden="true" tabindex="-1"></a>                 ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;x-bar&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb238-29"><a href="#cb238-29" aria-hidden="true" tabindex="-1"></a>                 ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb238-30"><a href="#cb238-30" aria-hidden="true" tabindex="-1"></a>                 ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb238-31"><a href="#cb238-31" aria-hidden="true" tabindex="-1"></a>                 ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb238-32"><a href="#cb238-32" aria-hidden="true" tabindex="-1"></a>                 ggplot2<span class="sc">::</span><span class="fu">facet_wrap</span>(<span class="sc">~</span>n)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/unnamed-chunk-127-1.png" alt="Distribution of 10,000 Sample Means of Varied Size" width="672" />
<p class="caption">
(#fig:unnamed-chunk-127)Distribution of 10,000 Sample Means of Varied Size
</p>
</div>
<p><br /></p>
<p>Per the CLT, we can see that as n increases, the sample means become more normally distributed.</p>
</div>
<div id="confidence-intervals" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Confidence Intervals</h2>
<p>A <strong>Confidence Interval (CI)</strong> is a range of values that likely contains the value of an unknown population parameter. These unknown population parameters are often <span class="math inline">\(\mu\)</span> or <span class="math inline">\(\sigma\)</span>, though we will also leverage CIs in later chapters for regression coefficients, proportions, rates, and differences.</p>
<p>If we draw random samples from a population, we can compute a CI for each sample. Building on the CLT, for a given confidence level (usually 95%, though 99% or 90% are sometimes used), the specified percent of sample intervals is expected to include the estimated population parameter. For example, for a 95% CI we would expect 19 in every 20 (or 95 in every 100) intervals across the samples to include the true population parameter. This is illustrated in Figure @ref(fig:conf-int):</p>
<div class="figure" style="text-align: center">
<img src="graphics/confidence_intervals.png" alt="Intervals for 95 Percent Confidence Level" width="75%" />
<p class="caption">
(#fig:conf-int)Intervals for 95 Percent Confidence Level
</p>
</div>
<p>It is important to note that CIs should not be applied to the distribution of sample values; CIs relate to <em>population parameters</em>. A common misinterpretation of a CI is that it represents an interval within which a certain percent of sample values exists, and this is inaccurate. Because this misinterpretation is so prevalent, there is a good chance you will be tested on your understanding of CIs when applying to positions involving statistical analyses!</p>
<p>A related concept that is fundamental to estimating CIs is the <strong>standard error (SE)</strong>, which is the standard deviation of sample means. While the standard deviation is a measure of variability for a random variable, the variability captured by the SE reflects how well a sample represents the population. Since sample statistics will approach the actual population parameters as the size of the sample increases, the SE and sample size are inversely related; that is, the SE decreases as the sample size increases. The SE is defined by:</p>
<p><span class="math display">\[ SE = \frac{\sigma}{\sqrt{n}} \]</span></p>
<p>Since the CLT is fundamental to inferential statistics, let’s validate that our simulated distribution of sample means adheres to the properties of normally distributed data per the Empirical Rule:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store sample means with n = 50</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>x_bars <span class="ot">&lt;-</span> sample_means[sample_means<span class="sc">$</span>n <span class="sc">==</span> <span class="dv">50</span>, <span class="st">&quot;x_bar&quot;</span>]</span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Store sample size</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">length</span>(x_bars)</span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percent of sample means within +/- 2 SEs</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">subset</span>(x_bars, x_bars <span class="sc">&lt;</span> <span class="fu">mean</span>(x_bars) <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sd</span>(x_bars) <span class="sc">&amp;</span> x_bars <span class="sc">&gt;</span> <span class="fu">mean</span>(x_bars) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sd</span>(x_bars))) <span class="sc">/</span> n <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>## [1] 95.35</code></pre>
<p>95% of sample means are within 2 SEs, which is what we expect per the characteristics of the normal distribution.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percent of sample means within +/- 3 SEs</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">subset</span>(x_bars, x_bars <span class="sc">&lt;</span> <span class="fu">mean</span>(x_bars) <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">sd</span>(x_bars) <span class="sc">&amp;</span> x_bars <span class="sc">&gt;</span> <span class="fu">mean</span>(x_bars) <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">sd</span>(x_bars))) <span class="sc">/</span> n <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>## [1] 99.79</code></pre>
<p>Nearly all of the sample means are within 3 SEs, indicating that it would be highly unlikely – nearly impossible even – to observe a sample mean ‘from the same population’ that falls outside this interval.</p>
<p>Now, let’s illustrate the relationship between CIs and standard errors using sample data from our uniform population distribution. In our example, both <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma\)</span> are known and our sample size <span class="math inline">\(n\)</span> is at least 30; therefore, we can use a <strong>Z-Test</strong> to calculate the 95% CI. A <span class="math inline">\(z\)</span> score of 1.96 corresponds to the 95% CI for a two-tailed distribution; that is, we are looking for significantly different values in either the larger or smaller direction. The 95% CI represents the range of values we would expect to include <span class="math inline">\(\mu\)</span> in at least 95 of 100 random samples taken from the population.</p>
<p>The CI in this case is defined by:</p>
<p><span class="math display">\[ CI = \bar{x} \pm z_{\alpha/_2} \frac{\sigma}{\sqrt{n}} \]</span></p>
<p>Let’s randomly take <span class="math inline">\(n\)</span> = 100 from the population, and compute sample statistics to estimate the 95% CI:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible random samples</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 100 values from uniform population distribution</span></span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(rand.unif, <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="cn">NULL</span>)</span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 95% CI</span></span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true" tabindex="-1"></a>ci95_lower_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">100</span>))</span>
<span id="cb243-9"><a href="#cb243-9" aria-hidden="true" tabindex="-1"></a>ci95_upper_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">100</span>))</span></code></pre></div>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print lower bound for 95% CI</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>ci95_lower_bound</span></code></pre></div>
<pre><code>## [1] 47.90733</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print upper bound for 95% CI</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>ci95_upper_bound</span></code></pre></div>
<pre><code>## [1] 58.98773</code></pre>
<p>Our known <span class="math inline">\(\mu\)</span> is 51.2, which is covered by our 95% CI (47.9 - 59.0). Per the CLT, in less than 5% of cases would we expect to draw a random sample from the population that results in a 95% CI which does not include <span class="math inline">\(\mu\)</span>. Note that our CI narrows with larger samples since our confidence that the range includes <span class="math inline">\(\mu\)</span> increases with more data.</p>
<p>Next, let’s look at a 99% CI. We will enter 2.576 for <span class="math inline">\(z\)</span>:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 99% CI</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a>ci99_lower_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fl">2.576</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">100</span>))</span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a>ci99_upper_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fl">2.576</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">100</span>))</span></code></pre></div>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print lower bound for 99% CI</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a>ci99_lower_bound</span></code></pre></div>
<pre><code>## [1] 46.16612</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print upper bound for 99% CI</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>ci99_upper_bound</span></code></pre></div>
<pre><code>## [1] 60.72893</code></pre>
<p>Like the 95% CI, this slightly wider 99% CI (46.2 - 60.7) also includes our <span class="math inline">\(\mu\)</span> of 51.2.</p>
<p>If <span class="math inline">\(\sigma\)</span> is not known, and/or we have a small sample (<span class="math inline">\(n\)</span> &lt; 30), we need to use a <span class="math inline">\(t\)</span><strong>-test</strong> to calculate the CIs. In a people analytics setting, the reality is that population parameters are often unknown. For example, if we knew how engagement scores vary in the employee population, there would be no need to survey a sample of employees and make inferences about said population.</p>
<p>As we will see, the <span class="math inline">\(t\)</span>-test underpins many statistical tests and models germane to the people analytics discipline since we are often working with small datasets, so it is important to understand the mechanics. As shown in Figure @ref(fig:t-distribution), the <span class="math inline">\(t\)</span> distribution is increasingly wider and shorter relative to the normal distribution as the sample size decreases; this is also characteristic of the sampling distribution of means for smaller samples we observed in our CLT example. Specifically, <strong>degrees of freedom (df)</strong> is used to determine the shape of the probability distribution. Degrees of freedom represents the number of observations in the data that are free to vary when estimating statistical parameters, which is a function of the sample size (<span class="math inline">\(n - 1\)</span>). For example, if we could choose 1 of 5 projects to work on each day between Monday and Friday, we would only be able to <em>choose</em> 4 out of the 5 days; on Friday, only 1 project would remain to be selected, so our degrees of freedom (the number of days in which we have a choice between projects) would be 4.</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/t_distribution.png" alt="t Distribution Shape by Degrees of Freedom" width="75%" />
<p class="caption">
(#fig:t-distribution)t Distribution Shape by Degrees of Freedom
</p>
</div>
<p><br /></p>
<p>When estimating the CI for smaller samples, we need to leverage the wider, more platykurtic <span class="math inline">\(t\)</span> distribution to achieve greater accuracy. Therefore, the CI for a two-tailed test in this case is defined by:</p>
<p><span class="math display">\[ CI = \bar{x} \pm t_{\alpha/_2} \frac{\sigma}{\sqrt{n}} \]</span></p>
<p>Let’s compare CIs calculated using a <span class="math inline">\(t\)</span>-test to those calculated using the Z-Test. While a fixed <span class="math inline">\(z\)</span> score can be used for each CI level when <span class="math inline">\(n\)</span> &gt; 30, the <span class="math inline">\(t\)</span> statistic varies based on both the CI level and <span class="math inline">\(df\)</span>. Though R will determine the correct <span class="math inline">\(t\)</span> statistic for us, let’s reference the table shown in Figure @ref(fig:t-crit) to manually lookup the <span class="math inline">\(t\)</span> statistic:</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/t-table.png" alt="Critical Values of Student's t Distribution" width="50%" />
<p class="caption">
(#fig:t-crit)Critical Values of Student’s t Distribution
</p>
</div>
<p><br /></p>
<p>For illustrative purposes, let’s draw a smaller sample of <span class="math inline">\(n\)</span> = 25 from our uniform population distribution and calculate the 95% CI using the <span class="math inline">\(t\)</span> statistic from the table (<span class="math inline">\(df\)</span> = 24). The <span class="math inline">\(t\)</span> statistic for this CI and <span class="math inline">\(df\)</span> is 2.064:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible random samples</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 25 values from uniform population distribution</span></span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(rand.unif, <span class="dv">25</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="cn">NULL</span>)</span>
<span id="cb253-6"><a href="#cb253-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-7"><a href="#cb253-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 95% CI</span></span>
<span id="cb253-8"><a href="#cb253-8" aria-hidden="true" tabindex="-1"></a>ci95_lower_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fl">2.064</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">25</span>))</span>
<span id="cb253-9"><a href="#cb253-9" aria-hidden="true" tabindex="-1"></a>ci95_upper_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fl">2.064</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">25</span>))</span></code></pre></div>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print lower bound for 95% CI</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a>ci95_lower_bound</span></code></pre></div>
<pre><code>## [1] 35.24305</code></pre>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print upper bound for 95% CI</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>ci95_upper_bound</span></code></pre></div>
<pre><code>## [1] 59.60959</code></pre>
<p>As expected, the 95% CI using the <span class="math inline">\(t\)</span> statistic is much wider (35.2 - 59.6), acknowledging the increased uncertainty in estimating population parameters given the limited information in this smaller sample. To increase our confidence to the 99% level, the interval widens even further (30.9 - 63.9):</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 99% CI</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>ci99_lower_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fl">2.797</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">25</span>))</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a>ci99_upper_bound <span class="ot">&lt;-</span> <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fl">2.797</span> <span class="sc">*</span> (<span class="fu">sd</span>(x) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">25</span>))</span></code></pre></div>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print lower bound for 99% CI</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a>ci99_lower_bound</span></code></pre></div>
<pre><code>## [1] 30.91633</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print upper bound for 99% CI</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>ci99_upper_bound</span></code></pre></div>
<pre><code>## [1] 63.93631</code></pre>
<div id="hypothesis-testing" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Hypothesis Testing</h3>
<p><strong>Hypothesis testing</strong> is how we leverage CIs to test whether a significant difference or relationship exists in the data. Sir Ronald Fisher invented what is known as the null hypothesis, which states that there is no relationship/difference; disprove me if you can! The null hypothesis is defined by:</p>
<p><span class="math display">\[ H_0: \mu_A = \mu_B \]</span></p>
<p>The objective of hypothesis testing is to determine if there is sufficient evidence to reject the null hypothesis in favor of an alternative hypothesis. The null hypothesis always states that there is ‘nothing’ of significance. For example, if we want to test whether an intervention has an effect on an outcome in a population, the null hypothesis states that there is no effect. If we want to test whether there is a difference in average scores between two groups in a population, the null hypothesis states that there is no difference.</p>
<p>An alternative hypothesis may simply state that there is a difference or relationship in the population, or it may specify the expected direction (e.g., Population A has a significantly ‘larger’ or ‘smaller’ average value than Population B; Variable A is ‘positively’ or ‘negatively’ related to Variable B). Therefore, alternative hypotheses are defined by:</p>
<p><span class="math display">\[ H_A: \mu_A \neq \mu_B \]</span></p>
<p><span class="math display">\[ H_A: \mu_A &lt; \mu_B \]</span></p>
<p><span class="math display">\[ H_A: \mu_A &gt; \mu_B \]</span></p>
</div>
<div id="alpha" class="section level3" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Alpha</h3>
<p>The <strong>alpha</strong> level of a hypothesis test, denoted by <span class="math inline">\(\alpha\)</span>, represents the probability of obtaining observed results due to chance if the null hypothesis is true. In other words, <span class="math inline">\(\alpha\)</span> is the probability of rejecting the null hypothesis (and therefore claiming that there is a significant difference or relationship) when in fact we should have failed to reject it because there is insufficient evidence to support the alternative hypothesis.</p>
<p><span class="math inline">\(\alpha\)</span> is often set at .05 but is sometimes set at a more rigorous .01, depending upon the context and tolerance for error. An <span class="math inline">\(\alpha\)</span> of .05 corresponds to a 95% CI (1 - .05), and .01 to a 99% CI (1 - .01). With non-directional alternative hypotheses, we must divide <span class="math inline">\(\alpha\)</span> by 2 (i.e., we could observe a significant result in either tail of the distribution), while one-tailed tests position the rejection region entirely within one tail based on what is being hypothesized.</p>
<p>At the .05 level, we would conclude that a finding is statistically significant if the chance of observing a value at least as extreme as the one observed is less than 1 in 20 if the null hypothesis is true. Note that we observed this behavior with our simulated distribution of sample means. While we could observe more extreme values by chance with repeated attempts, in less than 1 in every 20 times would we expect a 95% CI that does not capture <span class="math inline">\(\mu\)</span>. Moreover, in less than 1 in every 100 times should we expect a sample with a 99% CI that does not capture <span class="math inline">\(\mu\)</span>.</p>
</div>
<div id="type-i-ii-errors" class="section level3" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> Type I &amp; II Errors</h3>
<p>A <strong>Type I Error</strong> is a false positive, wherein we conclude that there is a significant difference or relationship when there is not. A <strong>Type II Error</strong> is a false negative, wherein we fail to capture a significant finding. <span class="math inline">\(\alpha\)</span> represents our chance of making a Type I Error, while <span class="math inline">\(\beta\)</span> represents our chance of making a Type II Error. I once had a professor explain that committing a Type I error is a shame, while committing a Type II error is a pity, and I’ve found this to be a helpful way to remember what each type of error represents.</p>
<p><br /></p>
<div class="figure" style="text-align: center">
<img src="graphics/hypothesis_testing_errors.png" alt="Type I and II Errors" width="50%" />
<p class="caption">
(#fig:hyp-errs)Type I and II Errors
</p>
</div>
<p><br /></p>
</div>
<div id="p-values" class="section level3" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> <span class="math inline">\(p\)</span>-Values</h3>
<p>In statistical tests, the <span class="math inline">\(\textbf p\)</span><strong>-value</strong> is referenced to determine whether the null hypothesis can be rejected. We generally rely on the availability of a <strong>theoretical null distribution</strong> to obtain a <span class="math inline">\(p\)</span>-value associated with a particular test statistic. The p-value represents the probability of obtaining a result at least as extreme as the one observed if the null hypothesis is true. As a general rule, if <span class="math inline">\(p\)</span> &lt; .05, we can confidently reject the null hypothesis and conclude that the observed difference or relationship was unlikely a chance observation.</p>
<p>While statistical significance helps us understand the probability of observing results by chance when there is no difference or effect in the population, it does not tell us anything about the size of the difference or effect. Analysis should never be reduced to inspecting p-values; in fact, p-values have been the subject of much controversy among researchers and practitioners in recent years. Later chapters will cover how to interpret results of statistical tests to surface the story and determine if there is anything ‘practically’ significant among statistically significant findings.</p>
</div>
<div id="bonferroni-correction" class="section level3" number="8.3.5">
<h3><span class="header-section-number">8.3.5</span> Bonferroni Correction</h3>
<p>One caveat when leveraging a p-value to determine statistical significance is that when multiple testing is performed – that is, multiple tests using the same sample data – the probability of a Type I error increases by a factor equivalent to the number of tests performed. It’s important to note that there is not agreement among statisticians about how (or even whether) the p-value threshold for statistical significance needs to be adjusted to account for this increased risk. Nevertheless, we will cover this conservative approach for mitigating this risk.</p>
<p>Thus far, we have only discussed statistical significance in the context of a <strong>per analysis error rate</strong> – that is, the probability of committing a Type I error for a single statistical test. However, when two or more tests are being conducted on the same sample, the <strong>familywise error rate</strong> is an important factor in determining statistical significance. The familywise error rate reflects the fact that as we conduct more and more analyses on the same sample, the probability of a Type I error across the set (or family) of analyses increases. The familywise error rate can be calculated by:</p>
<p><span class="math display">\[ \alpha_{FW} = 1 - (1 - \alpha_{PC})^C,  \]</span></p>
<p>where <span class="math inline">\(c\)</span> is equal to the number of comparisons (or statistical tests) performed, and <span class="math inline">\(\alpha_{PC}\)</span> is equal to the specified per analysis error rate (usually .05). For example, if <span class="math inline">\(\alpha\)</span> = .05 per analysis, the probability of a Type I error with three tests on the same data increases from 5% to 14.3%: <span class="math inline">\(1 - (1 - .05)^3 = .143\)</span>.</p>
<p>The most common method of adjusting the familywise error rate down to the specified per analysis error rate is the <strong>Bonferroni Correction</strong>. To implement this correction, we can simply divide <span class="math inline">\(\alpha\)</span> by the number of analyses performed on the dataset – such as <span class="math inline">\(\alpha / 3 = .017\)</span> in the case of three analyses with <span class="math inline">\(\alpha = .05\)</span>. This means that for each statistical test, we must achieve <span class="math inline">\(p &lt; .017\)</span> to report a statistically significant result. An alternative which allows us to achieve the same number of statistically significant results is to multiply the unadjusted per analysis p-values for each statistical test by the number of tests. For example, if we run three statistical tests and receive <span class="math inline">\(p = .014\)</span>, <span class="math inline">\(p = .047\)</span>, and <span class="math inline">\(p = .125\)</span>, we would achieve one significant result with the first method (<span class="math inline">\(p &lt; .017\)</span>) as well as with the alternative since the first statistical test satisfies the per analysis error rate (<span class="math inline">\(p &lt; .05\)</span>): <span class="math inline">\(p = .014 * 3 = .042\)</span>.</p>
<p>Perneger (1998) is one of many who oppose the use of the Bonferroni Correction, suggesting that these “adjustments are, at best, unnecessary and, at worst, deleterious to sound statistical inference.” The Bonferroni Correction is controversial among researchers because while applying the correction reduces the chance of a Type I error, it also increases the chance of a Type II error. Because this correction makes it more difficult to detect significant results, it is rare to find such a correction reported in published research, though research often involves multiple testing on the same sample. Perneger suggests that simply describing the statistical tests that were performed, and why, is sufficient for dealing with potential problems introduced by multiple testing.</p>
</div>
<div id="statistical-power" class="section level3" number="8.3.6">
<h3><span class="header-section-number">8.3.6</span> Statistical Power</h3>
<p>Whereas <span class="math inline">\(\alpha\)</span> is the probability of a Type I error, <strong>Beta</strong> <span class="math inline">\(\beta\)</span> is the opposite: the probability of accepting <span class="math inline">\(H_0\)</span> when it is false (Type II error).</p>
<p><span class="math inline">\(\beta\)</span> is related to the <em>power</em> of the analysis, which is calculated by 1 - <span class="math inline">\(\beta\)</span> and reflects our ability to detect a difference or relationship if one exists. For example, if a study has 80% power, it has an 80% chance of detecting an effect if one actually exists in the population. <strong>Power analysis</strong> helps with defining the optimal <span class="math inline">\(n\)</span>-count for detecting a population effect in sample data (i.e., correctly rejecting a false <span class="math inline">\(H_0\)</span>). Increasing the power of a statistical test decreases the probability that we will fail to detect a significant effect present in the population.</p>
<p>At this point, it should be intuitive that larger samples increase our chances of observing significant results. As we observed in the <span class="math inline">\(t\)</span>-test example, CIs for small samples (<span class="math inline">\(n\)</span> &lt; 30) are quite wide relative to those for large samples; therefore, the power of the analysis to detect significance is limited given how different the values of <span class="math inline">\(x\)</span> must be to observe non-overlapping CIs.</p>
<p>Before diving into the mechanics of power analysis, it is important to understand the three important – and interrelated – considerations in hypothesis tests that influence whether effects are real or a product of random sampling error:</p>
<ul>
<li><strong>Effect size</strong>: Larger differences and stronger relationships are less likely random sampling error</li>
<li><strong>Sample size</strong>: Larger samples can detect smaller differences and weaker relationships (though they may be too small or weak to be meaningful)</li>
<li><strong>Variability</strong>: Greater variability in the data is likely to result in differences that are attributable to random sampling error</li>
</ul>
<p>It may be helpful to think of power analysis as an optimization problem. The goal is to achieve a large enough sample size to detect meaningful effects – but not wastefully large as data collection can be expensive – whilst protecting against an underpowered analysis with a low probability of detecting an important effect.</p>
<p>To estimate the sample size needed to achieve a given power level, one must use domain expertise to specify parameters. The effect size parameter varies based on the statistical test but when in doubt, we can use Cohen’s (1988) conventional effect sizes which are defined in Figure @ref(fig:conv-eff-size-tbl). The effect size for a particular test can also be retrieved using the <code>cohen.ES()</code> function. For example, the following command returns 0.25 as the medium effect size threshold for ANOVA: <code>cohen.ES(test = "anov", size = "medium")</code>.</p>
<div class="figure" style="text-align: center">
<img src="graphics/conventional_effect_size_table.png" alt="Cohen's conventional effect sizes by statistical test." width="100%" />
<p class="caption">
(#fig:conv-eff-size-tbl)Cohen’s conventional effect sizes by statistical test.
</p>
</div>
<p>Let’s illustrate by calculating the sample size required for a one-way ANOVA that involves four groups. We will set <span class="math inline">\(\alpha = .05\)</span> and specify an 80% chance (power = .8) of detecting a moderate population effect. We can leverage the <code>pwr</code> library in R to perform power analysis. Executing <code>?pwr</code> will provide package documentation that clarifies what function to execute to calculate the sample size requirement for various statistical tests.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pwr)</span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate sample size for one-way ANOVA</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co"># k = 4 indicates we plan to compare 4 groups</span></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a><span class="co"># f = .25 indicates we wish to detect a medium effect</span></span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.anova.test</span>(<span class="at">k =</span> <span class="dv">4</span>, <span class="at">f =</span> .<span class="dv">25</span>, <span class="at">sig.level =</span> .<span class="dv">05</span>, <span class="at">power =</span> .<span class="dv">8</span>)</span></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 4
##               n = 44.59927
##               f = 0.25
##       sig.level = 0.05
##           power = 0.8
## 
## NOTE: n is number in each group</code></pre>
<p>The power analysis for this one-way ANOVA shows that we need a minimum of <span class="math inline">\(n = 45\)</span> <em>within each</em> of the four groups to achieve an 80% chance of detecting a medium population effect across the four groups when setting <span class="math inline">\(\alpha = .05\)</span>.</p>
</div>
</div>
<div id="review-questions-6" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What are some examples of a null hypothesis?</p></li>
<li><p>What is the difference between Type I and Type II errors?</p></li>
<li><p>What is the primary purpose of inferential statistics, and how does it differ from descriptive statistics?</p></li>
<li><p>What is the Central Limit Theorem (CLT), and why is it important?</p></li>
<li><p>Is randomness a requirement for probabilistic methods? Why or why not?</p></li>
<li><p>What does the Bonferroni Correction seek to achieve?</p></li>
<li><p>What is a confidence interval (CI)?</p></li>
<li><p>What are some examples of how the context influences what level of confidence is appropriate for statistical significance testing? Should we always use a 95 CI?</p></li>
<li><p>When population parameters are unknown, which test would be appropriate for testing the following null hypothesis: <span class="math inline">\(\mu_A = \mu_B\)</span>?</p></li>
<li><p>According to the Empirical Rule, 95% of normally distributed data lie within how many standard deviations of the mean?</p></li>
</ol>
<!--chapter:end:r/08_statistical_inference.Rmd-->
</div>
</div>
<div id="aod" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Analysis of Differences</h1>
<p>There are many statistical tests that can be used to test for differences within or between two or more groups. This chapter will cover common contexts for differences in people analytics and the tests applicable to each.</p>
<div id="parametric-vs.-nonparametric-tests" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Parametric vs. Nonparametric Tests</h2>
<p>In the context of data measured on a continuous scale (quantitative), we will cover parametric tests along with their nonparametric counterparts. When the hypothesis relates to average (mean) differences and <span class="math inline">\(n\)</span> is large, <strong>parametric tests</strong> are preferred as they generally have more statistical power. <strong>Nonparametric tests</strong> are <strong>distribution-free tests</strong> that do not require the population’s distribution to be characterized by certain parameters, such as a normal distribution defined by a mean and standard deviation. Nonparametric tests are great for qualitative data since the distribution of non-numeric data cannot be characterized by parameters.</p>
<p>Beyond ensuring the data were generated from a random and representative process as discussed in Chapter @ref(measure-sampl), as well as following the data screening procedures outlined in Chapter @ref(data-mgmt-prep) (e.g., addressing concerning outliers), parametric tests of differences <em>generally</em> feature three key assumptions:</p>
<ol style="list-style-type: decimal">
<li><strong>Independence</strong>: Observations within each group are independent of each other</li>
<li><strong>Homogeneity of Variance</strong>: Variances of populations from which samples were drawn are equal</li>
<li><strong>Normality</strong>: Residuals must be normally distributed (with mean of 0) within each group</li>
</ol>
<p>While homogeneity of variance assumes the variances across multiple groups are equal, parametric tests are generally robust to violations of equal variances when the sample sizes are large. Also, you may recall that <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma\)</span> are sufficient to characterize a population distribution when data are situated symmetrically around the mean. However, the mean can be sensitive to outliers so if outliers are present in the data, the median may be a better way of representing the data’s center (i.e., nonparametric tests); just remember that the use of nonparametric tests requires hypotheses to be modified to adjust for <em>median</em> – rather than <em>mean</em> – centers.</p>
<p>You may be wondering whether the magical elixir that is the CLT, which we covered in Chapter @ref(inf-stats), influences our ability to utilize parametric tests with respect to the assumption of normality. It’s important to remember that the normal distribution properties under the CLT relate to the <em>sampling distribution of means</em> – not to the distribution of the population or to the data for an individual sample. The CLT is important for estimating population parameters, but it does not transform a population distribution from nonnormal to normal. If we know the population distribution is nonnormal (e.g., ordinal, nominal, or skewed data), nonparametric tests should be considered. This is why we used Spearman’s correlation coefficient – a nonparametric test – in Chapter @ref(desc-stats) to evaluate the relationship between job level and education; these ordinal data are not normally distributed in the population.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="differences-in-discrete-data" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Differences in Discrete Data</h2>
<p>Nonparametric tests are generally best when working with data measured on a discrete scale since these data do not come from normally distributed populations. The two most commonly used tests to analyze variables measured on a discrete scale are the nonparametric <em>Chi-square test</em> and <em>Fisher’s exact test</em>.</p>
<div class="figure" style="text-align: center">
<img src="graphics/discrete_differences_test_table.png" alt="Chi-Square and Fisher Exact Test Criteria for Discrete Data" width="100%" />
<p class="caption">
(#fig:discrete-tests)Chi-Square and Fisher Exact Test Criteria for Discrete Data
</p>
</div>
<p>Both tests organize data within 2x2 <strong>contingency tables</strong> which enables us to understand interrelations between variables.</p>
<p><strong>Chi-Square Test</strong></p>
<p>The <strong>Chi-Square Test of Independence</strong> evaluates patterns of observations to determine if categories occur more frequently than we would expect by chance. The Chi-square statistic is defined by:</p>
<p><span class="math display">\[ {\chi}^2 = \sum\frac{(O_i - E_i)^2}{E_i}, \]</span></p>
<p>where <span class="math inline">\(O_i\)</span> is the observed value, and <span class="math inline">\(E_i\)</span> is the expected value.</p>
<p><span class="math inline">\(H_0\)</span> states that each variable is independent of one another (i.e., there is no relationship). In addition to the <span class="math inline">\({\chi}^2\)</span> test statistic, <span class="math inline">\(df\)</span> for the contingency table, defined by <span class="math inline">\(df = (rows - 1) * (columns - 1)\)</span>, is required to determine whether we reject or fail to reject <span class="math inline">\(H_0\)</span>.</p>
<p>While there is not consensus on the minimum sample size for this test, it is important to note that the <span class="math inline">\({\chi}^2\)</span> statistic follows a chi-square distribution <em>asymptotically</em>. This means we can only calculate accurate <span class="math inline">\(p\)</span>-values for larger samples, and a general rule of thumb is that the expected value for each cell needs to be at least 5. The challenge with small <span class="math inline">\(n\)</span>-counts is illustrated in Figure @ref(fig:chisq-dist); the chi-square distribution approaches a vertical line as <span class="math inline">\(df\)</span> drops below 5.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/chisq-dist-1.png" alt="Chi-Square Distributions by Degrees of Freedom (df)" width="100%" />
<p class="caption">
(#fig:chisq-dist)Chi-Square Distributions by Degrees of Freedom (df)
</p>
</div>
<p>We will demonstrate how to perform a chi-square test of independence by evaluating whether exit rates are independent of whether an employee works overtime. Let’s first construct a 2x2 contingency table using the <code>table()</code> function:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create contingency table</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a>cont_tbl <span class="ot">&lt;-</span> <span class="fu">table</span>(employees<span class="sc">$</span>active, employees<span class="sc">$</span>overtime)</span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a>cont_tbl</span></code></pre></div>
<pre><code>##      
##        No Yes
##   No  110 127
##   Yes 944 289</code></pre>
<p>A <strong>mosaic plot</strong> is a great way to visualize the delta between expected and observed frequencies for each cell. This can be produced using the <code>mosaicplot()</code> function from the <code>graphics</code> library:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/mosaic-plot-1.png" alt="Mosaic Plot of Residuals for Overtime x Active Status" width="100%" />
<p class="caption">
(#fig:mosaic-plot)Mosaic Plot of Residuals for Overtime x Active Status
</p>
</div>
<p>In Figure @ref(fig:mosaic-plot), blue indicates that the observed value is higher than the expected value, while red indicates that the observed value is lower than the expected value. Based on this plot, there appears to be some meaningful patterns and departures from expected values in both the high and low directions. There are more inactive employees than expected in the overtime group, and more active employees than expected in the group with no overtime. These large standardized residuals are indicative of meaningful relationships between the two categorical variables.</p>
<p>Let’s run the chi-square test of independence to determine whether these residuals are statistically significant. This test can be performed in R by passing the contingency table into the <code>chisq.test()</code> function:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform chi-square test of independence</span></span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(cont_tbl)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  cont_tbl
## X-squared = 87.564, df = 1, p-value &lt; 2.2e-16</code></pre>
<p>Based on the results, exit rates are not independent of overtime (<span class="math inline">\({\chi}^2(1) = 87.56, p &lt; .05\)</span>). Therefore, there is a statistically significant relationship between an employee working overtime and the rate at which they change from an active to inactive status – confirming what was evident in the mosaic plot.</p>
<p><strong>Fisher’s Exact Test</strong></p>
<p>When the sample size is small, <strong>Fisher’s Exact Test</strong> can be used to calculate the <em>exact</em> <span class="math inline">\(p\)</span>-value rather than an approximation, which is the case with many statistical tests such as the chi-square test.</p>
<p><span class="math inline">\(H_0\)</span> for Fisher’s exact test is the same as <span class="math inline">\(H_0\)</span> for the chi-square test of independence: There is no relationship between the two categorical variables (i.e., they are independent). We can perform Fisher’s exact test using the <code>fisher.test()</code> function in R:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Fisher&#39;s exact test</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fisher.test</span>(cont_tbl)</span></code></pre></div>
<pre><code>## 
##  Fisher&#39;s Exact Test for Count Data
## 
## data:  cont_tbl
## p-value &lt; 2.2e-16
## alternative hypothesis: true odds ratio is not equal to 1
## 95 percent confidence interval:
##  0.1969101 0.3572582
## sample estimates:
## odds ratio 
##  0.2654384</code></pre>
<p>Note the <em>odds ratio</em> shown in this output. The <strong>odds ratio</strong> represents the ratio of positive to negative cases, which is the ratio of overtime for active and inactive workers in this example. The odds ratio is defined by:</p>
<p><span class="math display">\[OR = \frac{a*d}{b*c}\]</span></p>
<p>An odds ratio of 1 indicates no difference in overtime frequency between active and inactive workers. Figure @ref(fig:contingency-tbl) illustrates the cells for the odds ratio calculation for the 2x2 contingency table of overtime for active and inactive (termed) workers.</p>
<div class="figure" style="text-align: center">
<img src="graphics/contingency_table.png" alt="2x2 Contingency Table of Overtime for Active and Inactive Workers" width="75%" />
<p class="caption">
(#fig:contingency-tbl)2x2 Contingency Table of Overtime for Active and Inactive Workers
</p>
</div>
<p>Since the 95% <span class="math inline">\(CI\)</span> for the odds ratio does not include 1, we reject the null hypothesis and conclude that exit rates are related to working overtime; this is consistent with results from the chi-square test of independence. Since overtime was indicated far more often for inactive workers than for active workers, it is no surprise that the denominator of our ratio is larger than the numerator (i.e., <span class="math inline">\(OR\)</span> &lt; 1).</p>
<p>As discussed in Chapter @ref(desc-stats), we can produce a <span class="math inline">\(\phi\)</span> coefficient to understand the strength of the association by passing the contingency table into the <code>phi</code> function from the <code>psych</code> library:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the Phi Coefficient</span></span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">phi</span>(cont_tbl)</span></code></pre></div>
<pre><code>## [1] -0.25</code></pre>
<p>The relationship between active status and overtime is negative, and the strength of the relationship is weak (<span class="math inline">\(\phi\)</span> = -.25).</p>
<p>Another common method of measuring the strength of the association between two categorical variables is <strong>Cramer’s V</strong>, which ranges from 0 (no association) to 1 (strong association). In the interest of not muddying the waters with an exhaustive set of alernative methods, the implementation won’t be covered.</p>
</div>
<div id="differences-in-continuous-data" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Differences in Continuous Data</h2>
<p>A variety of parametric and nonparametric tests are available for evaluating differences between variables measured on a continuous scale. Figure @ref(fig:continuous-tests) provides a side-by-side of these parametric and corresponding nonparametric tests of differences.</p>
<div class="figure" style="text-align: center">
<img src="graphics/continuous_differences_test_table.png" alt="Parametric and Nonparametric Tests of Differences for Continuous Data" width="100%" />
<p class="caption">
(#fig:continuous-tests)Parametric and Nonparametric Tests of Differences for Continuous Data
</p>
</div>
<p><strong>Independent Samples </strong><span class="math inline">\(\textbf t\)</span><strong>-Test</strong></p>
<p>When evaluating differences between two independent samples, social psychology researchers generally select from two tests: <em>Student’s</em> <span class="math inline">\(t\)</span><em>-test</em> and <em>Welch’s</em> <span class="math inline">\(t\)</span><em>-test</em>. There are other alternatives, such as <em>Yuen’s</em> <span class="math inline">\(t\)</span><em>-test</em> and a <em>bootstrapped</em> <span class="math inline">\(t\)</span><em>-test</em>, but these are less commonly reported in scholarly social science journals and will not be covered in this book.</p>
<p>The <strong>Student’s</strong> <span class="math inline">\(t\)</span><strong>-test</strong>, which was introduced in Chapter @ref(inf-stats), is a parametric test whose assumptions of equal variances seldom hold in people analytics. <strong>Welch’s</strong> <span class="math inline">\(t\)</span><strong>-test</strong> is generally preferred to the Student’s <span class="math inline">\(t\)</span>-test because it has been shown to provide better control of Type 1 error rates when homogeneity of variance is not met, whilst losing little robustness (e.g., Delacre, Lakens, &amp; Leys, 2017). When <span class="math inline">\(n\)</span> is equal between groups, the Student’s <span class="math inline">\(t\)</span>-test is known to be robust to violations of the equal variance assumption, as long as <span class="math inline">\(n\)</span> is sufficiently high to accurately estimate parameters and the underlying distribution is not characterized by high skewness and kurtosis.</p>
<p>Let’s explore the mechanics of independent samples <span class="math inline">\(t\)</span>-tests. Figure @ref(fig:mean-group-diff) illustrates mean differences (<span class="math inline">\(MD\)</span>) for nine Welch’s <span class="math inline">\(t\)</span>-tests based on random sample data generated from independent normal populations. Remember that statistical power increases with a large <span class="math inline">\(n\)</span>, as <span class="math inline">\(t\)</span> distributions approximate a standard normal distribution with larger <span class="math inline">\(df\)</span>. In the context of analysis of differences, this translates to an increase in the likelihood of detecting statistical differences in the means of two distributions. Note that for the two cases where both <span class="math inline">\(MD\)</span> and <span class="math inline">\(n\)</span> are relatively small, mean differences are not statistically significant (<span class="math inline">\(p &gt; .05\)</span>). You may also notice that as the <span class="math inline">\(t\)</span>-statistic approaches 0, statistical differences become less likely since a smaller <span class="math inline">\(t\)</span>-statistic indicates a smaller difference between mean values.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/mean-group-diff-1.png" alt="Density plots comparing distributions with a mean of 100 (blue) and 120 (grey) with sample sizes of 100, 1,000, and 10,000 (rows) and standard deviations of 25, 50, and 75 (columns). Dashed vertical lines represent distribution means." width="100%" />
<p class="caption">
(#fig:mean-group-diff)Density plots comparing distributions with a mean of 100 (blue) and 120 (grey) with sample sizes of 100, 1,000, and 10,000 (rows) and standard deviations of 25, 50, and 75 (columns). Dashed vertical lines represent distribution means.
</p>
</div>
<p>Next, we will walk through the steps involved in performing Welch’s <span class="math inline">\(t\)</span>-test. Let’s first visualize the distribution of data for each group using box plots:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/comp-job-boxplots-1.png" alt="Annual Compensation Distributions for Managers and Research Scientists" width="100%" />
<p class="caption">
(#fig:comp-job-boxplots)Annual Compensation Distributions for Managers and Research Scientists
</p>
</div>
<p>While the median – rather than the mean which is being evaluated with Welch’s <span class="math inline">\(t\)</span>-test – is shown in these box plots, this is a great way to visually inspect whether there are meaningful differences in the distribution of data between groups (in addition to identifying outliers). We could of course use density plots or histograms as an alternative. As we can see, annual compensation for employees with a Manager job title tends to be slightly higher than for those with a Research Scientist job title, and the variance in annual compensation appears to be fairly consistent between the groups.</p>
<p>There are several alternatives to a visual inspection of normality, such as the <span class="math inline">\({\chi}^2\)</span> <strong>Goodness-of-Fit test</strong> (Snedecor &amp; Cochran, 1980), <strong>Kolmogorov-Smirnov (K-S) test</strong> (Chakravarti, Laha, &amp; Roy, 1967), or <strong>Shapiro-Wilk test</strong> (Shapiro &amp; Wilk, 1965). The general idea is consistent for each of these tests: compare observed data to what would be expected if data are sampled from a normally distributed population. The <span class="math inline">\({\chi}^2\)</span> Goodness-of-Fit test compares the <em>count</em> of data points across the range of values relative to what would be expected in each for a sample with the same dimensions taken from a normal distribution. For example, if data are sampled from a normal population distribution, it follows that roughly half the values should exist below the mean and half above the mean. The K-S test evaluates how the observed <em>cumulative</em> distribution compares to the properties of a normal <em>cumulative</em> distribution. The Shapiro-Wilk test is based on <em>correlations</em> between observed and expected data.</p>
<p>We will test for normality using the Shapiro-Wilk test. The null hypothesis for the Shapiro-Wilk test is that the data are normally distributed, so a high <span class="math inline">\(p\)</span>-value indicates that the assumption of normality is satisfied (i.e., failure to reject the null hypothesis of normally distributed data). We can use the <code>with()</code> function together with the <code>shapiro.test()</code> function to run this test in R:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Shapiro-Wilk test of normality for each group</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(employees, <span class="fu">shapiro.test</span>(annual_comp[job_title <span class="sc">==</span> <span class="st">&#39;Manager&#39;</span>]))</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  annual_comp[job_title == &quot;Manager&quot;]
## W = 0.93546, p-value = 0.000103</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(employees, <span class="fu">shapiro.test</span>(annual_comp[job_title <span class="sc">==</span> <span class="st">&#39;Research Scientist&#39;</span>]))</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  annual_comp[job_title == &quot;Research Scientist&quot;]
## W = 0.96002, p-value = 3.427e-07</code></pre>
<p>Based on these tests, the distribution of annual compensation for Managers and Research Scientists are significantly different from normally distributed data (<span class="math inline">\(p\)</span> &lt; .05).</p>
<p>While we should not proceed with performing Welch’s <span class="math inline">\(t\)</span>-test due to unequal variances, let’s do so merely to illustrate how the test is implemented in R. To perform Welch’s <span class="math inline">\(t\)</span>-test in R, we can simply pass into the <code>t.test()</code> function a numeric vector for each of the two groups.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create compensation vectors for two jobs</span></span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a>comp_mgr <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, job_title <span class="sc">==</span> <span class="st">&#39;Manager&#39;</span>, <span class="at">select =</span> annual_comp))</span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true" tabindex="-1"></a>comp_rsci <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, job_title <span class="sc">==</span> <span class="st">&#39;Research Scientist&#39;</span>, <span class="at">select =</span> annual_comp))</span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Run Welch&#39;s t-test</span></span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(comp_mgr, comp_rsci)</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  comp_mgr and comp_rsci
## t = 0.22623, df = 159.55, p-value = 0.8213
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -8860.685 11153.244
## sample estimates:
## mean of x mean of y 
##  139900.8  138754.5</code></pre>
<p>If the data adhered to the assumptions of Welch’s <span class="math inline">\(t\)</span>-test, we would conclude that the mean difference between annual compensation for Managers (<span class="math inline">\(\bar{x}\)</span> = 139,901) and Research Scientists (<span class="math inline">\(\bar{x}\)</span> = 138,755) is not significant (<span class="math inline">\(t(159.55)\)</span> = .23, <span class="math inline">\(p\)</span> = .82).</p>
<p>Note that we can access specific metrics from this output by storing results to an object and then referencing specific elements by name or index:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This assigns each element of results from Welch&#39;s t-test to an indexed position in the object</span></span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>t_rslts <span class="ot">&lt;-</span> <span class="fu">t.test</span>(comp_mgr, comp_rsci)</span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>t_rslts<span class="sc">$</span>statistic <span class="co"># t-statistic</span></span></code></pre></div>
<pre><code>##         t 
## 0.2262262</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>t_rslts<span class="sc">$</span>parameter <span class="co"># df</span></span></code></pre></div>
<pre><code>##       df 
## 159.5544</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a>t_rslts<span class="sc">$</span>p.value <span class="co"># p-value</span></span></code></pre></div>
<pre><code>## [1] 0.8213151</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>t_rslts<span class="sc">$</span>method <span class="co"># type of t-test</span></span></code></pre></div>
<pre><code>## [1] &quot;Welch Two Sample t-test&quot;</code></pre>
<p>When object elements are referenced by index, the element name is displayed in the output to clarify what the metric represents:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a>t_rslts[<span class="dv">1</span>] <span class="co"># t-statistic</span></span></code></pre></div>
<pre><code>## $statistic
##         t 
## 0.2262262</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a>t_rslts[<span class="dv">2</span>] <span class="co"># df</span></span></code></pre></div>
<pre><code>## $parameter
##       df 
## 159.5544</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a>t_rslts[<span class="dv">3</span>] <span class="co"># p-value</span></span></code></pre></div>
<pre><code>## $p.value
## [1] 0.8213151</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a>t_rslts[<span class="dv">9</span>] <span class="co"># type of t-test</span></span></code></pre></div>
<pre><code>## $method
## [1] &quot;Welch Two Sample t-test&quot;</code></pre>
<p>Given <span class="math inline">\(df\)</span> = 159.55, you may be wondering how <span class="math inline">\(df\)</span> is calculated for Welch’s <span class="math inline">\(t\)</span>-test given that thus far, we have only discussed the basic <span class="math inline">\(df\)</span> calculation outlined in Chapter @ref(inf-stats); namely, <span class="math inline">\(df = n - 1\)</span>. Welch’s <span class="math inline">\(t\)</span>-test uses the <strong>Welch-Satterthwaite equation</strong> for <span class="math inline">\(df\)</span> (Satterthwaite, 1946; Welch, 1947). This equation approximates <span class="math inline">\(df\)</span> for a linear combination of independent sample variances; which means that if samples are not independent, this approximation may not be valid. The Welch-Satterthwaite equation is defined by:</p>
<p><span class="math display">\[ df = \frac {(\frac{s^2_1}{n_1} + \frac{s^2_2}{n_2})^2} {\frac{1}{n_1 - 1} (\frac{s^2_1}{n_1})^2 + \frac{1}{n_2 - 1} (\frac{s^2_2}{n_2})^2} \]</span></p>
<p><strong>Cohen’s</strong> <span class="math inline">\(\textbf d\)</span> is a standardized measure of the difference between two means that helps us understand the size (or <em>practical</em> significance) of observed mean differences. Cohen’s <span class="math inline">\(d\)</span> is defined by:</p>
<p><span class="math display">\[ d = \frac{\bar{x}_1 - \bar{x}_2} {s_p},  \]</span></p>
<p>where <span class="math inline">\(s_p\)</span> represents the pooled standard deviation defined by:</p>
<p><span class="math display">\[ s_p = \sqrt\frac{s^2_1 + s^2_2}{2} \]</span></p>
<p>Cohen’s <span class="math inline">\(d\)</span> can be produced using the <code>cohen.d()</code> function from the <code>effsize</code> package in R. The following thresholds can be referenced as a <em>general</em> rule of thumb for interpreting effect size:</p>
<ul>
<li><strong>Small</strong> = 0.2</li>
<li><strong>Medium</strong> = 0.5</li>
<li><strong>Large</strong> = 0.8</li>
</ul>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library for effect size functions</span></span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(effsize)</span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Cohen&#39;s d</span></span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a>effsize<span class="sc">::</span><span class="fu">cohen.d</span>(comp_mgr, comp_rsci)</span></code></pre></div>
<pre><code>## 
## Cohen&#39;s d
## 
## d estimate: 0.0273669 (negligible)
## 95 percent confidence interval:
##      lower      upper 
## -0.2004390  0.2551728</code></pre>
<p>Not only are the differences statistically insignificant, Cohen’s <span class="math inline">\(d\)</span> = .03 indicates a negligible difference. Therefore, there is nothing of interest based on these statistical and practical significance tests.</p>
<p><strong>Mann-Whitney U Test</strong></p>
<p>A popular nonparametric (distribution-free) alternative to Welch’s <span class="math inline">\(t\)</span>-test is the <strong>Mann-Whitney U Test</strong>, also referred to as the <strong>Wilcoxon Rank-Sum Test</strong>. Rather than comparing the mean between two groups, like the Student’s <span class="math inline">\(t\)</span>-test or Welch’s <span class="math inline">\(t\)</span>-test, the Mann-Whitney U test considers the entire distribution by evaluating the extent to which the <em>ranks</em> are consistent between groups (i.e., similarity in the proportion of records with each value). When distributions are similar, the medians of the two groups are compared.</p>
<p>The <code>wilcox.test()</code> function is used to run this test in R. Let’s illustrate by examining whether engagement (an ordinal variable in our dataset) is significantly different between those who have been promoted in the past year and those who have not:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy-coded promotion variable</span></span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>promo <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(employees<span class="sc">$</span>last_promo <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create numeric engagement vectors for promo groups</span></span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a>no_promo <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, promo <span class="sc">==</span> <span class="dv">0</span>, <span class="at">select =</span> engagement))</span>
<span id="cb298-6"><a href="#cb298-6" aria-hidden="true" tabindex="-1"></a>promo <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, promo <span class="sc">==</span> <span class="dv">1</span>, <span class="at">select =</span> engagement))</span>
<span id="cb298-7"><a href="#cb298-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-8"><a href="#cb298-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the Mann-Whitney U (aka Wilcoxon rank-sum) test</span></span>
<span id="cb298-9"><a href="#cb298-9" aria-hidden="true" tabindex="-1"></a><span class="fu">wilcox.test</span>(no_promo, promo)</span></code></pre></div>
<pre><code>## 
##  Wilcoxon rank sum test with continuity correction
## 
## data:  no_promo and promo
## W = 196056, p-value = 0.6707
## alternative hypothesis: true location shift is not equal to 0</code></pre>
<p>Based on these results, we fail to reject the null hypothesis, which states that there is no difference in engagement between those with and without promotions (<span class="math inline">\(W\)</span> = 196,056, <span class="math inline">\(p\)</span> = .67). Note the reference to continuity correction in the output. <strong>Continuity correction</strong> is applied when using a continuous distribution to approximate a discrete distribution. The Mann-Whitney U test we performed approximated a continuous distribution for testing differences between our ordinal (discrete) engagement data by applying this continuity correction.</p>
<p>Just as Cohen’s <span class="math inline">\(d\)</span> is used to measure the magnitude of difference between a pair of means, <strong>Cliff’s delta</strong> can be leveraged to evaluate the size of differences between ordinal variables. Cliff’s delta measures how often a value in one distribution is higher than values in another, and this is appropriate in situations in which a nonparametric test of differences is used. This statistic can be produced using the <code>cliff.delta()</code> function from the <code>effsize</code> package in R.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run Cliff&#39;s Delta</span></span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true" tabindex="-1"></a>effsize<span class="sc">::</span><span class="fu">cliff.delta</span>(no_promo, promo)</span></code></pre></div>
<pre><code>## 
## Cliff&#39;s Delta
## 
## delta estimate: -0.0131625 (negligible)
## 95 percent confidence interval:
##       lower       upper 
## -0.07329491  0.04706528</code></pre>
<p>Some (e.g., Vargha &amp; Delaney, 2000) have endeavored to categorize the Cliff’s delta statistic, which ranges from -1 to 1, into effect size buckets. However, such categorizations are far more controversial than thresholds attributed to Cohen’s <span class="math inline">\(d\)</span>. Nevertheless, the near-zero delta estimate of -.01 indicates a negligible difference.</p>
<p><strong>Paired Samples</strong> <span class="math inline">\(\textbf t\)</span><strong>-Test</strong></p>
<p>A <strong>Paired Samples </strong><span class="math inline">\(\textbf t\)</span><strong>-Test</strong> is used to compare means between pairs of measurements. This test is known by many other names, such as a <strong>dependent samples</strong> <span class="math inline">\(\textbf t\)</span><strong>-test</strong>, <strong>paired-difference</strong> <span class="math inline">\(\textbf t\)</span><strong>-test</strong>, <strong>matched pairs</strong> <span class="math inline">\(\textbf t\)</span><strong>-test</strong>, and <strong>repeated-samples</strong> <span class="math inline">\(\textbf t\)</span><strong>-test</strong>.</p>
<p>The assumption of normality in the context of a paired samples <span class="math inline">\(t\)</span>-test relates to normally distributed paired differences. This is important, as the <span class="math inline">\(p\)</span>-value for the test statistic will not be valid if this assumption is violated.</p>
<p>To illustrate, let’s design an experiment. Let’s assume morale has declined for employees who travel frequently, and several actions have been proposed by a task force to help address this. The task force has decided to pilot a new flexible work benefit over a six-month period to determine if it has a meaningful effect on morale. This new benefit is piloted to a random sample of frequent travelers, and our task is to test whether the outcomes warrant a broader rollout to frequent travelers.</p>
<p>Our DV (happiness) will be measured using a composite index derived from individual engagement, environment satisfaction, job satisfaction, and relationship satisfaction scores. Our objective is to determine if there is a significant improvement in this happiness index for the treatment group (those who are part of the flexible work pilot) relative to the pre/post difference for the control group (those not selected for the flexible work pilot).</p>
<p>While we could simply look at the pre/post differences for the treatment group, we understand from Chapter @ref(research) that this would be a weak design that may lead to inaccurate conclusions. There could be alternative explanations for any observed increases in happiness that are unrelated to the intervention itself. For example, between time 1 and time 2, travel frequency may have decreased for everyone, which may contribute to overall happiness. By comparing pre/post differences between the treatment and control groups, we gain more confidence in isolating the effect of the flexible work benefit on happiness since alternative explanations should be reflected in any pre/post changes observed for the control group.</p>
<p><strong>Difference-in-differences (DiD)</strong> estimation is a quasi-experimental approach that originated from econometrics for this same purpose, but it is beyond the scope of this book. Angrist and Pischke (2009) is an excellent resource for learning about these methods.</p>
<p>Let’s prepare the data for this experiment. Since <code>employees</code> is a cross-sectional dataset (single point-in-time), we will generate simulated data for repeated measures (i.e., post-intervention scores).</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible results</span></span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb302-3"><a href="#cb302-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-4"><a href="#cb302-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Derive happiness index from survey variables</span></span>
<span id="cb302-5"><a href="#cb302-5" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>happiness_ind <span class="ot">&lt;-</span> (employees<span class="sc">$</span>engagement <span class="sc">+</span> employees<span class="sc">$</span>env_sat <span class="sc">+</span> employees<span class="sc">$</span>job_sat <span class="sc">+</span> employees<span class="sc">$</span>rel_sat) <span class="sc">/</span> <span class="dv">4</span></span>
<span id="cb302-6"><a href="#cb302-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-7"><a href="#cb302-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample size of frequent travelers</span></span>
<span id="cb302-8"><a href="#cb302-8" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">nrow</span>(<span class="fu">subset</span>(employees, business_travel <span class="sc">==</span> <span class="st">&#39;Travel_Frequently&#39;</span>, <span class="at">select =</span> employee_id))</span>
<span id="cb302-9"><a href="#cb302-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-10"><a href="#cb302-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly assign half of frequent travelers to treatment and control groups</span></span>
<span id="cb302-11"><a href="#cb302-11" aria-hidden="true" tabindex="-1"></a>treat_ids <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">unlist</span>(<span class="fu">subset</span>(employees, business_travel <span class="sc">==</span> <span class="st">&#39;Travel_Frequently&#39;</span>, <span class="at">select =</span> employee_id)), <span class="fu">floor</span>(n <span class="sc">*</span> .<span class="dv">5</span>))</span>
<span id="cb302-12"><a href="#cb302-12" aria-hidden="true" tabindex="-1"></a>ctrl_ids <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, business_travel <span class="sc">==</span> <span class="st">&#39;Travel_Frequently&#39;</span> <span class="sc">&amp;</span> <span class="sc">!</span>employee_id <span class="sc">%in%</span> treat_ids, <span class="at">select =</span> employee_id))</span>
<span id="cb302-13"><a href="#cb302-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-14"><a href="#cb302-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize dfs for pre/post metrics</span></span>
<span id="cb302-15"><a href="#cb302-15" aria-hidden="true" tabindex="-1"></a>treat_metrics <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">pre_ind =</span> <span class="fu">numeric</span>(<span class="fu">length</span>(treat_ids)),</span>
<span id="cb302-16"><a href="#cb302-16" aria-hidden="true" tabindex="-1"></a>                           <span class="at">rand_num =</span> <span class="fu">rnorm</span>(<span class="fu">length</span>(treat_ids), <span class="at">mean =</span> <span class="dv">15</span>, <span class="at">sd =</span> <span class="dv">5</span>) <span class="sc">*</span> .<span class="dv">001</span>,</span>
<span id="cb302-17"><a href="#cb302-17" aria-hidden="true" tabindex="-1"></a>                           <span class="at">post_ind =</span> <span class="fu">numeric</span>(<span class="fu">length</span>(treat_ids)), </span>
<span id="cb302-18"><a href="#cb302-18" aria-hidden="true" tabindex="-1"></a>                           <span class="at">diff =</span> <span class="fu">numeric</span>(<span class="fu">length</span>(treat_ids)))</span>
<span id="cb302-19"><a href="#cb302-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-20"><a href="#cb302-20" aria-hidden="true" tabindex="-1"></a>ctrl_metrics <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">pre_ind =</span> <span class="fu">numeric</span>(<span class="fu">length</span>(ctrl_ids)), </span>
<span id="cb302-21"><a href="#cb302-21" aria-hidden="true" tabindex="-1"></a>                          <span class="at">rand_num =</span> <span class="fu">rnorm</span>(<span class="fu">length</span>(ctrl_ids), <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>) <span class="sc">*</span> .<span class="dv">001</span>, </span>
<span id="cb302-22"><a href="#cb302-22" aria-hidden="true" tabindex="-1"></a>                          <span class="at">post_ind =</span> <span class="fu">numeric</span>(<span class="fu">length</span>(ctrl_ids)),</span>
<span id="cb302-23"><a href="#cb302-23" aria-hidden="true" tabindex="-1"></a>                          <span class="at">diff =</span> <span class="fu">numeric</span>(<span class="fu">length</span>(ctrl_ids)))</span>
<span id="cb302-24"><a href="#cb302-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-25"><a href="#cb302-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Store happiness indices for treatment and control groups</span></span>
<span id="cb302-26"><a href="#cb302-26" aria-hidden="true" tabindex="-1"></a>treat_metrics<span class="sc">$</span>pre_ind <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, employee_id <span class="sc">%in%</span> treat_ids, <span class="at">select =</span> happiness_ind))</span>
<span id="cb302-27"><a href="#cb302-27" aria-hidden="true" tabindex="-1"></a>ctrl_metrics<span class="sc">$</span>pre_ind <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, employee_id <span class="sc">%in%</span> ctrl_ids, <span class="at">select =</span> happiness_ind))</span>
<span id="cb302-28"><a href="#cb302-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-29"><a href="#cb302-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Create vectors with artificially inflated post-intervention happiness indices</span></span>
<span id="cb302-30"><a href="#cb302-30" aria-hidden="true" tabindex="-1"></a>treat_metrics<span class="sc">$</span>post_ind <span class="ot">&lt;-</span> treat_metrics<span class="sc">$</span>pre_ind <span class="sc">+</span> treat_metrics<span class="sc">$</span>rand_num</span>
<span id="cb302-31"><a href="#cb302-31" aria-hidden="true" tabindex="-1"></a>ctrl_metrics<span class="sc">$</span>post_ind <span class="ot">&lt;-</span> ctrl_metrics<span class="sc">$</span>pre_ind <span class="sc">+</span> ctrl_metrics<span class="sc">$</span>rand_num</span>
<span id="cb302-32"><a href="#cb302-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-33"><a href="#cb302-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Force an upper bound of 4 to adjusted index scores (variables were measured using a 4-point Likert scale)</span></span>
<span id="cb302-34"><a href="#cb302-34" aria-hidden="true" tabindex="-1"></a>treat_metrics<span class="sc">$</span>post_ind <span class="ot">&lt;-</span> <span class="cf">if</span>(treat_metrics<span class="sc">$</span>post_ind <span class="sc">&gt;</span> <span class="dv">4</span>) {<span class="dv">4</span>} <span class="cf">else</span> {treat_metrics<span class="sc">$</span>post_ind}</span>
<span id="cb302-35"><a href="#cb302-35" aria-hidden="true" tabindex="-1"></a>ctrl_metrics<span class="sc">$</span>post_ind <span class="ot">&lt;-</span> <span class="cf">if</span>(ctrl_metrics<span class="sc">$</span>post_ind <span class="sc">&gt;</span> <span class="dv">4</span>) {<span class="dv">4</span>} <span class="cf">else</span> {ctrl_metrics<span class="sc">$</span>post_ind}</span></code></pre></div>
<p>It’s important to remember that a paired samples <span class="math inline">\(t\)</span>-test requires that each of the paired measurements be obtained from the same subject. Therefore, if an employee terms between time 1 and time 2, or does not provide the survey responses needed to calculate the happiness index at both time 1 and time 2, the employee should be removed from the data since paired measurements will not be available.</p>
<p>The variance is not assumed to be equal for a paired test; therefore, the homogeneity of variance assumption is not applicable in this context.</p>
<p>Next, we will evaluate whether paired differences are normally distributed using the Shapiro Wilk test. While individual survey items are measured on an ordinal scale, our derived happiness index is the average of multiple ordinal items and can be considered an <em>approximately</em> continuous variable. There are <span class="math inline">\(2^p - p - 1\)</span> combinations of scores, where <span class="math inline">\(p\)</span> is the number of variables. For our happiness index, there are <span class="math inline">\(2^4 - 4 - 1 = 11\)</span> combinations.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-4"><a href="#cb303-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate pre/post differences</span></span>
<span id="cb303-5"><a href="#cb303-5" aria-hidden="true" tabindex="-1"></a>treat_metrics<span class="sc">$</span>diff <span class="ot">&lt;-</span> treat_metrics<span class="sc">$</span>post_ind <span class="sc">-</span> treat_metrics<span class="sc">$</span>pre_ind</span>
<span id="cb303-6"><a href="#cb303-6" aria-hidden="true" tabindex="-1"></a>ctrl_metrics<span class="sc">$</span>diff <span class="ot">&lt;-</span> ctrl_metrics<span class="sc">$</span>post_ind <span class="sc">-</span> ctrl_metrics<span class="sc">$</span>pre_ind</span>
<span id="cb303-7"><a href="#cb303-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-8"><a href="#cb303-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram for distribution of pre/post treatment group differences</span></span>
<span id="cb303-9"><a href="#cb303-9" aria-hidden="true" tabindex="-1"></a>p_treat <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb303-10"><a href="#cb303-10" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">aes</span>(treat_metrics<span class="sc">$</span>diff) <span class="sc">+</span> </span>
<span id="cb303-11"><a href="#cb303-11" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Treatment Group&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Happiness Index Differences&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>) <span class="sc">+</span> </span>
<span id="cb303-12"><a href="#cb303-12" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb303-13"><a href="#cb303-13" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb303-14"><a href="#cb303-14" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb303-15"><a href="#cb303-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-16"><a href="#cb303-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram for distribution of pre/post control group differences</span></span>
<span id="cb303-17"><a href="#cb303-17" aria-hidden="true" tabindex="-1"></a>p_ctrl <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb303-18"><a href="#cb303-18" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">aes</span>(ctrl_metrics<span class="sc">$</span>diff) <span class="sc">+</span> </span>
<span id="cb303-19"><a href="#cb303-19" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Control Group&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Happiness Index Differences&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>) <span class="sc">+</span> </span>
<span id="cb303-20"><a href="#cb303-20" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb303-21"><a href="#cb303-21" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb303-22"><a href="#cb303-22" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb303-23"><a href="#cb303-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-24"><a href="#cb303-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Display histograms side-by-side</span></span>
<span id="cb303-25"><a href="#cb303-25" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(p_treat, p_ctrl, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/pre-post-diff-1.png" alt="Pre/Post Differences for Treatment and Control Groups" width="672" />
<p class="caption">
(#fig:pre-post-diff)Pre/Post Differences for Treatment and Control Groups
</p>
</div>
<p>Based on a visual inspection, the distributions of differences appear to be roughly normal. This should not be surprising given random values were sampled from normal distributions to derive artificial post-intervention happiness indices.</p>
<p>Let’s test for normality by performing the Shapiro-Wilk test on vectors of differences:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Shapiro-Wilk test of normality</span></span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(treat_metrics<span class="sc">$</span>diff)</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  treat_metrics$diff
## W = 0.98936, p-value = 0.3738</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(ctrl_metrics<span class="sc">$</span>diff)</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  ctrl_metrics$diff
## W = 0.99096, p-value = 0.5134</code></pre>
<p>Since <span class="math inline">\(p\)</span> &gt; .05 for both tests, the assumption of normally distributed differences is met. Given the data generative process implemented for this example, differences would become increasingly normal as the sample size increases. We now have the greenlight to perform the paired samples <span class="math inline">\(t\)</span>-test.</p>
<p>We can run a paired samples <span class="math inline">\(t\)</span>-test in R by passing <code>paired = TRUE</code> as an argument to the same <code>t.test()</code> function used for the independent samples <span class="math inline">\(t\)</span>-test. Since we are investigating whether the average post-intervention happiness index is significantly <em>greater</em> than the average pre-intervention happiness index, we also need the <code>alternative = "greater"</code> argument since the default two-tailed test only evaluates whether the average indices are significantly different (regardless of whether the pre- or post-intervention index is larger).</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform one-tailed paired samples t-test for treatment group</span></span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(treat_metrics<span class="sc">$</span>post_ind, treat_metrics<span class="sc">$</span>pre_ind, <span class="at">paired =</span> <span class="cn">TRUE</span>, <span class="at">alternative =</span> <span class="st">&quot;greater&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  Paired t-test
## 
## data:  treat_metrics$post_ind and treat_metrics$pre_ind
## t = 35.906, df = 137, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means is greater than 0
## 95 percent confidence interval:
##  0.01490482        Inf
## sample estimates:
## mean of the differences 
##              0.01562551</code></pre>
<p>These results indicate that the post-intervention happiness index is significantly larger than the pre-intervention happiness index. This is encouraging with respect to the potential efficacy of the flexible work pilot, but the question about whether the control group experienced a commensurate improvement over the observation period remains unanswered.</p>
<p>Let’s run the same paired samples <span class="math inline">\(t\)</span>-test using the control group indices:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform one-tailed paired samples t-test for control group</span></span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ctrl_metrics<span class="sc">$</span>post_ind, ctrl_metrics<span class="sc">$</span>pre_ind, <span class="at">paired =</span> <span class="cn">TRUE</span>, <span class="at">alternative =</span> <span class="st">&quot;greater&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  Paired t-test
## 
## data:  ctrl_metrics$post_ind and ctrl_metrics$pre_ind
## t = 0.59995, df = 138, p-value = 0.2748
## alternative hypothesis: true difference in means is greater than 0
## 95 percent confidence interval:
##  -8.719262e-05           Inf
## sample estimates:
## mean of the differences 
##            4.953658e-05</code></pre>
<p>Since <span class="math inline">\(p\)</span> &gt; .05, we can conclude that there was not a significant increase in happiness indices for the control group, which provides additional – but not conclusive – support for the effectiveness of the flexible work benefit. Chapter @ref(lm) will introduce linear regression, which is a powerful modeling tool for people analytics that helps control for multiple alternative explanations of associations with the DV in order to isolate the unique effects of each IV.</p>
<p>We can evaluate the magnitude of mean differences for these paired samples by passing the <code>paired = TRUE</code> argument to the same <code>cohen.d()</code> function used for independent samples:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Cohen&#39;s d</span></span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a>effsize<span class="sc">::</span><span class="fu">cohen.d</span>(treat_metrics<span class="sc">$</span>post_ind, treat_metrics<span class="sc">$</span>pre_ind, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## 
## Cohen&#39;s d
## 
## d estimate: 0.03132117 (negligible)
## 95 percent confidence interval:
##      lower      upper 
## 0.02960345 0.03303890</code></pre>
<p>Though pre/post indices are statistically significant for the treatment group, the size of the difference is negligible (<span class="math inline">\(d\)</span> = .03).</p>
<p><strong>Wilcoxon Signed-Rank Test</strong></p>
<p>The <strong>Wilcoxon Signed-Rank Test</strong> is the nonparametric alternative to the paired samples <span class="math inline">\(t\)</span>-test. This distribution-free test does not require normally distributed differences.</p>
<p>The matched Wilcoxon Signed-Rank test is performed in R using the same <code>wilcox.test()</code> function used to perform the unmatched Wilcoxon Rank-Sum test. Though we can use a paired samples <span class="math inline">\(t\)</span>-test to test differences for our flexible work benefit study since the assumption of normally distributed differences is met, let’s run a Wilcoxon Signed-Rank test for demonstrative purposes:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Wilcoxon Signed-Rank test</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wilcox.test</span>(treat_metrics<span class="sc">$</span>post_ind, treat_metrics<span class="sc">$</span>pre_ind, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## 
##  Wilcoxon signed rank test with continuity correction
## 
## data:  treat_metrics$post_ind and treat_metrics$pre_ind
## V = 9591, p-value &lt; 2.2e-16
## alternative hypothesis: true location shift is not equal to 0</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Wilcoxon Signed-Rank test</span></span>
<span id="cb316-2"><a href="#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wilcox.test</span>(ctrl_metrics<span class="sc">$</span>post_ind, ctrl_metrics<span class="sc">$</span>pre_ind, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## 
##  Wilcoxon signed rank test with continuity correction
## 
## data:  ctrl_metrics$post_ind and ctrl_metrics$pre_ind
## V = 5166, p-value = 0.5275
## alternative hypothesis: true location shift is not equal to 0</code></pre>
<p>Consistent with results from the paired samples <span class="math inline">\(t\)</span>-tests, significantly higher post-intervention happiness indices were observed for the treatment group but not for the control group.</p>
<p>We can evaluate the magnitude of differences for these paired samples by passing the <code>paired = TRUE</code> argument to the same <code>cliff.delta()</code> function used for independent samples:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run Cliff&#39;s Delta</span></span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a>effsize<span class="sc">::</span><span class="fu">cliff.delta</span>(treat_metrics<span class="sc">$</span>post_ind, treat_metrics<span class="sc">$</span>pre_ind, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## 
## Cliff&#39;s Delta
## 
## delta estimate: 0.1544844 (small)
## 95 percent confidence interval:
##      lower      upper 
## 0.01652557 0.28667094</code></pre>
<p>With Cliff’s delta, we observe a small difference between pre/post indices for the treatment group (delta estimate = .15).</p>
<p><strong>Analysis of Variance (ANOVA)</strong></p>
<p><strong>Analysis of Variance (ANOVA)</strong> is used to determine whether the means of scale-level DVs are equal across nominal-level variables with three or more independent categories.</p>
<p>It is important to understand that <span class="math inline">\(H_0\)</span> in ANOVA not only requires all group means to be equal but their complex contrasts as well. For example, if we have four groups named A, B, C, and D, <span class="math inline">\(H_0\)</span> requires that <span class="math inline">\(\mu_A = \mu_B = \mu_C = \mu_D\)</span> is true as well as the various complex contrasts such as <span class="math inline">\(\mu_{A,B} = \mu_{C,D}\)</span> and <span class="math inline">\(\mu_A = \mu_{B,C,D}\)</span> and <span class="math inline">\(\mu_D = \mu_{B,C}\)</span>. Therefore, a difference between one or more of these contrasts results in a decision to reject <span class="math inline">\(H_0\)</span> in ANOVA. As a result, we may find a significant <span class="math inline">\(F\)</span>-statistic but no significant differences between pairwise means.</p>
<p>In addition, it is possible to find a significant pairwise mean difference but a non-significant result from ANOVA. As you may recall from Chapter @ref(inf-stats), multiple comparisons reduce the power of statistical tests. Since multiple tests of mean differences are performed with ANOVA, the family-wise error rate is used to adjust for the increased probability of a Type I error across the set of analyses. Since the power of a single pairwise test is greater relative to the power of familywise comparisons, we may find a significant result for the former but not the latter.</p>
<p>ANOVA requires IVs to be categorical (nominal or ordinal) and the DV to be continuous (interval or ratio). A <strong>one-way ANOVA</strong> is used to determine how one categorical IV influences a continuous DV. A <strong>two-way ANOVA</strong> is used to determine how two categorical IVs influence a continuous DV. A <strong>three-way ANOVA</strong> is used to evaluate how three categorical IVs influence a continuous DV. An ANOVA that uses two or more categorical IVs is often referred to as a <strong>factorial ANOVA</strong>. As discussed in Chapter @ref(getting-started), it is important to remain grounded in specific hypotheses, as a significant ANOVA may not actually test what is being hypothesized.</p>
<p>ANOVA is not a test, per se, but a <span class="math inline">\(F\)</span>-test underpins it. The mathematical procedure behind the <span class="math inline">\(F\)</span>-test is relatively straightforward:</p>
<ol style="list-style-type: decimal">
<li>Compute the <strong>within-group variance</strong>, which is also known as residual variance. Simply put, this tells us how different each member of the group is from the average.</li>
<li>Compute the <strong>between-group variance</strong>. This represents how different the group means are from one another.</li>
<li>Produce the <span class="math inline">\(F\)</span>-statistic, which is the ratio of <em>within-group variance</em> to <em>between-group variance</em>.</li>
</ol>
<p>More formally, the <span class="math inline">\(F\)</span>-statistic is defined by:</p>
<p><span class="math display">\[ F = \frac{MS_{between}}{MS_{within}}, \]</span></p>
<p>where:</p>
<p><span class="math display">\[ MS_{between} = \frac{SS_{between}}{df_{between}}, \]</span></p>
<p><span class="math display">\[ MS_{within} = \frac{SS_{within}}{df_{within}}, \]</span></p>
<p><span class="math display">\[ SS_{between} = \displaystyle\sum_{j=1}^{p} n_j(\bar{x}_j-\bar{x})^2, \]</span></p>
<p><span class="math display">\[ SS_{within} = \displaystyle\sum_{j=1}^{p} \displaystyle\sum_{i=1}^{n_j} (x_{ij}-\bar{x_j})^2 \]</span></p>
<p><strong>One-Way ANOVA</strong></p>
<p>To illustrate how to perform a one-way ANOVA, we will test the hypothesis that mean annual compensation is equal across job satisfaction levels.</p>
<p>Each observation in <code>employees</code> represents a unique employee, and a given employee can only have one job satisfaction score and one annual compensation value. The assumption of independence is met since each record exists independent of one another and each job satisfaction group is comprised of different employees.</p>
<p>Levene’s test (Levene, 1960) can be used to test the homogeneity of variance assumption – even with non-normal distributions. This can be performed in R using the <code>leveneTest()</code> function from the <code>car</code> package:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Levene&#39;s test for homogeneity of variance</span></span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">leveneTest</span>(annual_comp <span class="sc">~</span> <span class="fu">as.factor</span>(job_sat), <span class="at">data =</span> employees)</span></code></pre></div>
<pre><code>## Levene&#39;s Test for Homogeneity of Variance (center = median)
##         Df F value Pr(&gt;F)
## group    3  0.3293 0.8042
##       1466</code></pre>
<p>The test statistic associated with Levene’s test relates to the null hypothesis that there are no significant differences in variances across the job satisfaction levels. Since <span class="math inline">\(p &gt; .05\)</span>, we fail to reject this null hypothesis and can assume equal variances.</p>
<p>Next, let’s test the assumption of normality. It is important to note that the assumption of normality <em>does not</em> apply to the distribution of the DV but to the distribution of residuals for each group of the IV. Residuals in the context of ANOVA represent the difference between the actual values of the continuous DV relative to its mean value for each level of the categorical IV (e.g., <span class="math inline">\(y - \bar{y}_A\)</span>, <span class="math inline">\(y - \bar{y}_B\)</span>, <span class="math inline">\(y - \bar{y}_C\)</span>). In ANOVA, we expect the residuals to be normally distributed around a mean of 0 (the balance point) when the data are normally distributed within each IV category; the more skewed the data, the larger the average distance of each DV value from the mean.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data viz library</span></span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb322-4"><a href="#cb322-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-5"><a href="#cb322-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create function to visualize distribution</span></span>
<span id="cb322-6"><a href="#cb322-6" aria-hidden="true" tabindex="-1"></a>dist.viz <span class="ot">&lt;-</span> <span class="cf">function</span>(data, x) {</span>
<span id="cb322-7"><a href="#cb322-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb322-8"><a href="#cb322-8" aria-hidden="true" tabindex="-1"></a>viz <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb322-9"><a href="#cb322-9" aria-hidden="true" tabindex="-1"></a>       ggplot2<span class="sc">::</span><span class="fu">aes</span>(data) <span class="sc">+</span> </span>
<span id="cb322-10"><a href="#cb322-10" aria-hidden="true" tabindex="-1"></a>       ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Job Sat = &quot;</span>, x), <span class="at">x =</span> <span class="st">&quot;Annual Compensation&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>) <span class="sc">+</span> </span>
<span id="cb322-11"><a href="#cb322-11" aria-hidden="true" tabindex="-1"></a>       ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb322-12"><a href="#cb322-12" aria-hidden="true" tabindex="-1"></a>       ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb322-13"><a href="#cb322-13" aria-hidden="true" tabindex="-1"></a>       ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb322-14"><a href="#cb322-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-15"><a href="#cb322-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(viz)</span>
<span id="cb322-16"><a href="#cb322-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb322-17"><a href="#cb322-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-18"><a href="#cb322-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce annual compensation vectors for each job satisfaction level</span></span>
<span id="cb322-19"><a href="#cb322-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Unlist() is needed to convert the default object from subset() into a numeric vector</span></span>
<span id="cb322-20"><a href="#cb322-20" aria-hidden="true" tabindex="-1"></a>group_1 <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, job_sat <span class="sc">==</span> <span class="dv">1</span>, <span class="at">select =</span> annual_comp))</span>
<span id="cb322-21"><a href="#cb322-21" aria-hidden="true" tabindex="-1"></a>group_2 <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, job_sat <span class="sc">==</span> <span class="dv">2</span>, <span class="at">select =</span> annual_comp))</span>
<span id="cb322-22"><a href="#cb322-22" aria-hidden="true" tabindex="-1"></a>group_3 <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, job_sat <span class="sc">==</span> <span class="dv">3</span>, <span class="at">select =</span> annual_comp))</span>
<span id="cb322-23"><a href="#cb322-23" aria-hidden="true" tabindex="-1"></a>group_4 <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">subset</span>(employees, job_sat <span class="sc">==</span> <span class="dv">4</span>, <span class="at">select =</span> annual_comp))</span>
<span id="cb322-24"><a href="#cb322-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-25"><a href="#cb322-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Call UDF to build annual comp histogram for each job satisfaction level</span></span>
<span id="cb322-26"><a href="#cb322-26" aria-hidden="true" tabindex="-1"></a>viz_1 <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> group_1, <span class="at">x =</span> <span class="dv">1</span>)</span>
<span id="cb322-27"><a href="#cb322-27" aria-hidden="true" tabindex="-1"></a>viz_2 <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> group_2, <span class="at">x =</span> <span class="dv">2</span>)</span>
<span id="cb322-28"><a href="#cb322-28" aria-hidden="true" tabindex="-1"></a>viz_3 <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> group_3, <span class="at">x =</span> <span class="dv">3</span>)</span>
<span id="cb322-29"><a href="#cb322-29" aria-hidden="true" tabindex="-1"></a>viz_4 <span class="ot">&lt;-</span> <span class="fu">dist.viz</span>(<span class="at">data =</span> group_4, <span class="at">x =</span> <span class="dv">4</span>)</span>
<span id="cb322-30"><a href="#cb322-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-31"><a href="#cb322-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Display distribution visualizations</span></span>
<span id="cb322-32"><a href="#cb322-32" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(viz_1, viz_2, viz_3, viz_4,</span>
<span id="cb322-33"><a href="#cb322-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/comp-dist-1.png" alt="Annual Compensation Distribution by Job Satisfaction Level" width="672" />
<p class="caption">
(#fig:comp-dist)Annual Compensation Distribution by Job Satisfaction Level
</p>
</div>
<p>As we can see, annual compensation data are not normally distributed within job satisfaction groups. Therefore, we would not expect the distribution of residuals to be normally distributed within these groups either.</p>
<p>To test whether the assumption of normality is met, we will first produce and review a <strong>quantile-quantile (Q-Q) plot</strong>. A Q-Q plot compares two probability distributions by plotting their quantiles (data partitioned into equal-sized groups) against each other. After partitioning annual compensation into groups differentiated by job satisfaction level, we can use the <code>ggqqplot()</code> function from the <code>ggpubr</code> library to build a Q-Q plot and evaluate the distribution of residuals.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate residuals for each group</span></span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a>residuals <span class="ot">&lt;-</span> <span class="fu">c</span>(group_1 <span class="sc">-</span> <span class="fu">mean</span>(group_1), group_2 <span class="sc">-</span> <span class="fu">mean</span>(group_2), group_3 <span class="sc">-</span> <span class="fu">mean</span>(group_3), group_4 <span class="sc">-</span> <span class="fu">mean</span>(group_4))</span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-4"><a href="#cb323-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Q-Q plot of residuals</span></span>
<span id="cb323-5"><a href="#cb323-5" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggqqplot</span>(residuals)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/qq-plot-1.png" alt="Q-Q Plot of Annual Compensation Residuals" width="672" />
<p class="caption">
(#fig:qq-plot)Q-Q Plot of Annual Compensation Residuals
</p>
</div>
<p>To satisfy the assumption of normality, residuals must lie along the linear line. Based on the Q-Q plot in Figure @ref(fig:qq-plot), there is a clear departure from normality at both ends of the theoretical range.</p>
<p>Let’s test for normality using the Shapiro-Wilk test:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Shapiro-Wilk test of normality</span></span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(residuals)</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  residuals
## W = 0.95874, p-value &lt; 2.2e-16</code></pre>
<p>Since <span class="math inline">\(p &lt; .05\)</span>, we reject the null hypothesis of normally distributed data, which indicates that the assumption of normality is violated. This should not be surprising based on the deviation from normality we observed in Figure @ref(fig:qq-plot).</p>
<p>Because the assumption of normality is violated, we have two options. First, we can attempt to transform the data so that the residuals using the transformed values are normally distributed. If the data are resistant to transformation, we can leverage a nonparametric alternative to ANOVA.</p>
<p>Let’s first try several common data transformations and then examine the resulting Q-Q plots:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a linear model using the natural logarithm of annual comp</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>ln.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(annual_comp) <span class="sc">~</span> job_sat, <span class="at">data =</span> employees)</span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a linear model using the log base 10 of annual comp</span></span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a>log10.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log10</span>(annual_comp) <span class="sc">~</span> job_sat, <span class="at">data =</span> employees)</span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a linear model using the square root of annual comp</span></span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true" tabindex="-1"></a>sqrt.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">sqrt</span>(annual_comp) <span class="sc">~</span> job_sat, <span class="at">data =</span> employees)</span>
<span id="cb326-9"><a href="#cb326-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-10"><a href="#cb326-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Store Q-Q plots to viz objects</span></span>
<span id="cb326-11"><a href="#cb326-11" aria-hidden="true" tabindex="-1"></a>ln.viz <span class="ot">&lt;-</span> ggpubr<span class="sc">::</span><span class="fu">ggqqplot</span>(<span class="fu">residuals</span>(ln.model)) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Natural Log&quot;</span>)</span>
<span id="cb326-12"><a href="#cb326-12" aria-hidden="true" tabindex="-1"></a>log10.viz <span class="ot">&lt;-</span> ggpubr<span class="sc">::</span><span class="fu">ggqqplot</span>(<span class="fu">residuals</span>(log10.model)) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Log Base 10&quot;</span>)</span>
<span id="cb326-13"><a href="#cb326-13" aria-hidden="true" tabindex="-1"></a>sqrt.viz <span class="ot">&lt;-</span> ggpubr<span class="sc">::</span><span class="fu">ggqqplot</span>(<span class="fu">residuals</span>(sqrt.model)) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Square Root&quot;</span>)</span>
<span id="cb326-14"><a href="#cb326-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-15"><a href="#cb326-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display Q-Q plots of residuals</span></span>
<span id="cb326-16"><a href="#cb326-16" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(ln.viz, log10.viz, sqrt.viz,</span>
<span id="cb326-17"><a href="#cb326-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/qq-plots-trans-1.png" alt="Q-Q Plots of Transformed Annual Compensation Residuals" width="672" />
<p class="caption">
(#fig:qq-plots-trans)Q-Q Plots of Transformed Annual Compensation Residuals
</p>
</div>
<p>Even with these transformations, there is still a clear S-shaped curve about the residuals. Though we cannot proceed with ANOVA due to violated assumptions, the implementation of ANOVA is demonstrated below. Performing ANOVA involves the <code>aov()</code> function along with the <code>summary()</code> function to display model output:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One-way ANOVA investigating mean differences in annual comp by job satisfaction</span></span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a>one.way <span class="ot">&lt;-</span> <span class="fu">aov</span>(annual_comp <span class="sc">~</span> job_sat, <span class="at">data =</span> employees)</span>
<span id="cb327-3"><a href="#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(one.way)</span></code></pre></div>
<pre><code>##               Df    Sum Sq   Mean Sq F value  Pr(&gt;F)   
## job_sat        1 1.337e+10 1.337e+10   7.508 0.00622 **
## Residuals   1468 2.613e+12 1.780e+09                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The <strong>Kruskal Wallis H Test</strong> is the nonparametric alternative to a one-way ANOVA (Daniel, 1990) and an appropriate alternative for investigating median differences in annual comp by job satisfaction in our data. This test can be performed using the <code>kruskal.test()</code> function in R:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nonparametric Kruskal one-way ANOVA</span></span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(annual_comp <span class="sc">~</span> job_sat, <span class="at">data =</span> employees)</span></code></pre></div>
<pre><code>## 
##  Kruskal-Wallis rank sum test
## 
## data:  annual_comp by job_sat
## Kruskal-Wallis chi-squared = 8.3242, df = 3, p-value = 0.03977</code></pre>
<p>Since <span class="math inline">\(p &lt; .05\)</span>, we can conclude that there are significant differences in median compensation across the groups. However, this test does not indicate which groups are different. We can utilize the <code>pairwise.wilcox.test()</code> function to compute pairwise Wilcoxon rank-sum tests to identify where differences exist:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pairwise.wilcox.test</span>(employees<span class="sc">$</span>annual_comp, employees<span class="sc">$</span>job_sat, <span class="at">p.adjust.method =</span> <span class="st">&quot;BH&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  Pairwise comparisons using Wilcoxon rank sum test with continuity correction 
## 
## data:  employees$annual_comp and employees$job_sat 
## 
##   1     2     3    
## 2 0.298 -     -    
## 3 0.041 0.298 -    
## 4 0.041 0.298 0.879
## 
## P value adjustment method: BH</code></pre>
<p>Based on the results, there are significant pairwise differences in median annual compensation for job satisfaction levels 3 and 4 relative to level 1.</p>
<p><strong>Factorial ANOVA</strong></p>
<p><strong>Factorial ANOVA</strong> is any ANOVA which uses two or more categorical IVs, such as a two-way or three-way ANOVA. It is important to understand the hypothesis a factorial design tests. The following output reflects the cross-tabulation of average annual compensation for each combination of two factors – job satisfaction and stock option level.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean for each IV pair</span></span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a>combos <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(annual_comp <span class="sc">~</span> job_sat <span class="sc">+</span> stock_opt_lvl, employees, mean)</span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a>combos</span></code></pre></div>
<pre><code>##    job_sat stock_opt_lvl annual_comp
## 1        1             0    141254.0
## 2        2             0    138753.3
## 3        3             0    132159.2
## 4        4             0    132227.0
## 5        1             1    141763.9
## 6        2             1    135494.5
## 7        3             1    135235.7
## 8        4             1    135569.0
## 9        1             2    146240.0
## 10       2             2    146432.0
## 11       3             2    145080.0
## 12       4             2    143019.3
## 13       1             3    154844.4
## 14       2             3    144254.1
## 15       3             3    135672.7
## 16       4             3    127102.9</code></pre>
<p>As we have already discussed, a difference between one or more of these contrasts may result in a decision to reject <span class="math inline">\(H_0\)</span> in ANOVA. We may also find a significant pairwise difference but a non-significant result from ANOVA since the family-wise error rate adjustment is applied in the context of multiple comparisons which reduces statistical power.</p>
<p>Factorial ANOVA can be performed by adding variables with <code>+</code> within the same <code>aov()</code> function used for one-way ANOVA:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Factorial ANOVA investigating mean differences in annual comp by job satisfaction and stock option level</span></span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a>factorial <span class="ot">&lt;-</span> <span class="fu">aov</span>(annual_comp <span class="sc">~</span> job_sat <span class="sc">+</span> stock_opt_lvl, <span class="at">data =</span> employees)</span>
<span id="cb335-3"><a href="#cb335-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(factorial)</span></code></pre></div>
<pre><code>##                 Df    Sum Sq   Mean Sq F value  Pr(&gt;F)   
## job_sat          1 1.337e+10 1.337e+10   7.523 0.00617 **
## stock_opt_lvl    1 6.840e+09 6.840e+09   3.850 0.04995 * 
## Residuals     1467 2.606e+12 1.777e+09                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>While mean annual compensation is significantly different by both job satisfaction and stock option level factors, this output alone is not too helpful in understanding the nature of the differences. These statistical significance markers indicate that there are meaningful differences that warrant a deeper understanding. Relationships of job satisfaction and stock option level with annual compensation are illustrated more effectively in Figure @ref(fig:two-way-factorial).</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/two-way-factorial-1.png" alt="Relationships of Job Satisfaction and Stock Option Level with Annual Compensation" width="100%" />
<p class="caption">
(#fig:two-way-factorial)Relationships of Job Satisfaction and Stock Option Level with Annual Compensation
</p>
</div>
<p>As we can see, there is a strong negative relationship between job satisfaction and average annual compensation among employees with the highest stock option level (3). The relationship between job satisfaction and average annual compensation appears to be negative for employees with other stock option levels as well, albeit much weaker.</p>
<p>These relationships may initially seem counterintuitive, as one might expect higher levels of job satisfaction to contribute to higher performance and consequently, higher compensation. There may be other variables that happen to be correlated with job satisfaction and/or stock option level that are the actual determinants of annual compensation. For example, there may be a relationship between jobs that each feature a stock option level of 3 but for which there are markedly different average job satisfaction scores and annual compensation among workers in said jobs. Without accounting for additional variables that may explain why employees vary in the amount of annual compensation they earn, the limited set of relationships shown in Figure @ref(fig:two-way-factorial) may lead to a misleading understanding and inaccurate conclusions.</p>
<p>Three-way factorials (and beyond) become difficult to visualize and understand in the way one-way ANOVA and two-way factorials have been explained in this chapter. In Chapter @ref(lm), we will discuss how to create linear combinations of many IVs and parse the output to understand how they independently and jointly explain variation in the DV.</p>
</div>
<div id="review-questions-7" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What are the main differences between a Chi-square test and Fisher’s exact test?</p></li>
<li><p>Why is it problematic to test for significant differences using the <span class="math inline">\({\chi}^2\)</span> statistic with extremely small samples (e.g., <span class="math inline">\(n\)</span> &lt; 5)?</p></li>
<li><p>What are the general assumptions of parametric tests?</p></li>
<li><p>What is a benefit of Welch’s <span class="math inline">\(t\)</span>-test over the Student’s <span class="math inline">\(t\)</span>-test?</p></li>
<li><p>How does a paired-samples <span class="math inline">\(t\)</span>-test differ from an independent samples <span class="math inline">\(t\)</span>-test?</p></li>
<li><p>In what ways does the Wilcoxon signed-rank test differ from the paired samples <span class="math inline">\(t\)</span>-test?</p></li>
<li><p>How can the magnitude of differences (i.e., practical significance) be quantified when working with data measured on a continuous scale?</p></li>
<li><p>How can the magnitude of differences (i.e., practical significance) be quantified when working with data measured on an ordinal scale?</p></li>
<li><p>What null hypothesis does ANOVA test?</p></li>
<li><p>What are some ways to better understand the nature of statistical differences indicated in the output of ANOVA?</p></li>
</ol>
<!--chapter:end:r/09_analysis_differences.Rmd-->
</div>
</div>
<div id="lm" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Linear Regression</h1>
<p>It’s important to draw a distinction between inferential and predictive models. Inferential models are highly interpretable and their utility is largely in understanding the nature and magnitude of the effect variables have on outcomes. Inferential models also lend to quantifying the extent to which we can generalize the observed effects to the larger population from which the sample was drawn. The objective in predictive modeling is to also to learn from patterns in historical data but for the purpose of achieving the most accurate predictions for future events – even at the expense of interpretability. To be clear, this isn’t to say that predictive models cannot be interpreted – they certainly can – but there are relatively few applications for predictive modeling in people analytics because models generally need to be highly interpretable to support action planning.</p>
<p>This chapter is dedicated to inferential modeling to support a working understanding of how to interpret model output and communicate clear, data-driven narratives that respect the nuance and noise characteristic of people data. Chapter @ref(pred-mod) will provide an overview of predictive modeling frameworks.</p>
<p>Regression is perhaps the most important statistical learning technique for people analytics. If you have taken a statistics course at the undergraduate or graduate levels, you have surely already encountered it. Let’s first develop an intuitive understanding of the mechanics of regression.</p>
<p>Imagine we are sitting at a large public park in NYC on a nice fall afternoon. If asked to estimate the annual compensation of the next person to walk by, how would you estimate this in the absence of any additional information? Most would likely estimate the <em>average</em> annual compensation of everyone capable of walking by. Since this would include both residents and visitors, this would be a very large population of people! The obvious limitation with this approach is that among the large group of people capable of walking by, there is likely a significant range of annual compensation values. Many walking by may be children, unemployed, or retirees who earn no annual compensation, while others may be highly compensated senior executives at the pinnacle of their careers. Since the range of annual compensation could be zero to millions of dollars, estimating the average of such a large population is likely going to be highly inaccurate without more information.</p>
<p>Let’s consider that we are sitting outside on a weekday afternoon. Should this influence our annual compensation estimate? It is likely that we can eliminate a large segment of those likely to walk by, as we would expect most children to be in school on a typical fall weekday afternoon. It’s also unlikely that those who are employed and not on vacation will walk by on a fall weekday afternoon. Therefore, factoring in that it is a weekday should limit the size of the population which in turn may reduce the range of annual compensation values for our population of passerbys.</p>
<p>Let’s now consider that the park is open only to invited guests for a symposium on people analytics. Though it may be difficult to believe, a relatively small subset of the population is likely interested in attending such a symposium, so this information will likely be quite helpful in reducing the size of the population who could walk by. This should further reduce the range of annual compensation since we probably have a good idea of the profile of those most likely to attend. This probably also lessens (or altogether eliminates) the importance of the weekday factor in explaining why people vary in the amount of compensation they earn each year. That an important variable may become unimportant in the presence of another variable is a key feature of regression.</p>
<p>Furthermore, let’s consider that only those who reside in NYC and Boise were invited, and that the next person to walk by resides in Boise. Most companies apply a significant cost of living multiplier to the compensation for those in an expensive region such as NYC, resulting in a significant difference in compensation relative to those residing in a much less expensive city like Boise – all else being equal. Therefore, if we can partition attendees into two groups based on their geography, this should limit the range of annual compensation significantly <em>within each</em> – likely making the average compensation in each group a more nuanced and reasonable estimate.</p>
<p>What if we also learn the specific zip code in which the next passerby from Boise resides? The important information is likely captured at the larger city level (NYC vs. Boise), as the compensation for the specific zip codes within each city are unlikely to vary to a significant degree. Assuming this is true, it probably would not make sense to consider both the city name and zip code since they are effectively redundant pieces of information with regard to explaining differences in annual compensation.</p>
<p>What if we learn that the next person to walk by will be wearing a blue shirt? Does this influence your estimate? Unless there is research to suggest shirt color and earnings are related, this information will likely not contribute any significant information to our understanding of why people vary in the amount of compensation they earn and should, therefore, not be considered.</p>
<p>You can probably think of many relevant variables that would help further narrow the range of annual compensation. These may include job, level, years of experience, education, among other factors. The main thing to understand is that for each group of observations with the same characteristics – such as senior analysts with a graduate degree who reside in NYC – there is a distribution of annual compensation. This distribution reflects unexplained variance. That is, we do not have information to explain why the compensation for each and every person is not the same and in social science contexts, it simply is not practical to explain 100 percent of the variance in outcomes. For example, two people may be similar on dozens of factors (experience, education, skills) but one was simply a more effective negotiator when offered the same role and commanded a higher salary. It’s likely we do not have data on salary negotiation ability so this information would leave us with unexplained variance in compensation. The goal is simply to identify the variables that provide the most information in helping us tighten the distribution so that estimating the average value will generally be an accurate estimate for those in the larger population with the same characteristics.</p>
<p>While we can generally improve our estimates with more relevant information (not shirt color or residential zip code in this case), it is important to understand that samples which are too small (<span class="math inline">\(n\)</span> &lt; 30) lend to anomalies; modeling noise in sparse data can result in models that are unlikely to generalize beyond the sample data. For example, if the only people from Boise to attend the people analytics symposium happen to be two ultra wealthy tech entrepreneurs who earn millions each year, it would not be appropriate to use this as the basis for our estimates of all future attendees from Boise. This is a phenomenon known as overfitting that will be covered in Chapter @ref(pred-mod).</p>
<p>This is the essence of linear regression modeling: find a limited number of variables which independently and/or jointly provide significant information that helps explain (by reducing) variance around the average value. As illustrated in this example, adding additional variables (information) can impact the importance of other variables or may offer no incremental information at all. In this chapter, we will cover how to identify which variables are important and how to quantify the effect they have on an outcome.</p>
<p><strong>Assumptions &amp; Diagnostics</strong></p>
<p>First, the <strong>sample size</strong> needs to be large enough to model and detect significant associations of one or more predictors with the response variable. In practice, people analytics practitioners are often constrained by the data at hand, which is to say that one generally has little control over the amount of data that can be collected. For example, despite the most earnest participation campaigns, only a subset of invited employees are likely to complete a survey, so collecting additional data to achieve a larger sample is likely not a viable option. It is important to establish a minimum – and realistic – <span class="math inline">\(n\)</span>-count threshold during the planning stage of a project based on the research objectives and variables that need to be factored into the analysis.</p>
<p>Consistent with the assumptions of parametric tests covered in Chapter @ref(aod), there are several assumptions that need to be validated to determine if a linear model is appropriate for understanding relationships in the data. These assumptions largely relate to the residuals (<span class="math inline">\(\hat{y}\)</span> - <span class="math inline">\(y\)</span>):</p>
<ol style="list-style-type: decimal">
<li><strong>Independence</strong>: Residuals are independent of each other; consecutive residuals in time series data are unrelated</li>
<li><strong>Homoscedasticity</strong>: Variance of residuals is constant across values of <span class="math inline">\(X\)</span></li>
<li><strong>Normality</strong>: Residuals must be normally distributed (with mean of 0) across values of <span class="math inline">\(X\)</span></li>
<li><strong>Linearity</strong>: Relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> is linear</li>
</ol>
<p>Beyond these core assumptions for linear models, additional diagnostics are important to incorporate into the early data screening stage:</p>
<ol style="list-style-type: decimal">
<li><strong>High-Leverage Observations</strong>: Influential data that significantly changes the model fit</li>
<li><strong>Collinearity</strong>: Independent variables that are highly correlated (these should be <em>independent</em>)</li>
</ol>
<div id="sample-size" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Sample Size</h2>
<p>While a general rule-of-thumb for regression analysis is a minimum of a 20:1 ratio of observations to IVs, the power analysis section in Chapter @ref(inf-stats) covered a more rigorous approach to calculating the sample size needed to observe significant effects.</p>
<p>For linear regression, power analysis involves a comparison of model fit between a model with a full set of predictors relative to one with only a subset of the full model’s predictors. The function from the <code>pwr</code> library to call is <code>pwr.f2.test(u = , v = , f2 = , sig.level = , power = )</code>, where <code>u</code> and <code>v</code> are the numerator and denominator degrees of freedom, respectively, and <code>f2</code> is defined as:</p>
<p><span class="math display">\[ f^2 = \frac {R^2_{AB} - R^2_A}{1 - R^2_{AB}}, \]</span></p>
<p>where <span class="math inline">\(R^2_{AB}\)</span> represents the variance accounted for by a full model with all predictors, and <span class="math inline">\(R^2_A\)</span> represents the variance accounted for by a model containing only a subset of the full model’s predictors. For example, power analysis can be leveraged in determining the sample size needed for detecting the incremental main effects for a set of predictors beyond the variance accounted for by a set of controls.</p>
</div>
<div id="simple-linear-regression" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Simple Linear Regression</h2>
<p><strong>Simple linear regression</strong> is a simple technique for estimating the value of a quantitative DV, denoted as <span class="math inline">\(Y\)</span>, on the basis of a single IV, denoted as <span class="math inline">\(X\)</span>. It is assumed that there is an approximately linear relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. Often, this relationship is expressed as <em>regressing</em> <span class="math inline">\(Y\)</span> on <span class="math inline">\(X\)</span> and is defined mathematically as:</p>
<p><span class="math display">\[ Y = \beta_0 + \beta_1 X + \epsilon, \]</span></p>
<p>where <span class="math inline">\(\beta_0\)</span> is the expected value of <span class="math inline">\(Y\)</span> when <span class="math inline">\(X = 0\)</span> (the <em>intercept</em>), and <span class="math inline">\(\beta_1\)</span> represents the average change in <span class="math inline">\(Y\)</span> for a one-unit increase in <span class="math inline">\(X\)</span> (the <em>slope</em>). <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> are unknown <em>parameters</em> or <em>coefficients</em>. The error term, <span class="math inline">\(\epsilon\)</span>, acknowledges that there is variation in <span class="math inline">\(Y\)</span> not accounted for by this simple linear model. In other words, it is highly unlikely that there is a perfectly linear relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, as additional variables not included in the model are likely influencing <span class="math inline">\(Y\)</span>.</p>
<p>Once we estimate the unknown model coefficients, <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span>, we can estimate <span class="math inline">\(Y\)</span> for a particular value of <span class="math inline">\(X\)</span> by calculating:</p>
<p><span class="math display">\[ \hat{y_i} = \hat{\beta}_0 + \hat{\beta_1}x_i, \]</span></p>
<p>where <span class="math inline">\(\hat{y}\)</span> represents an estimate of <span class="math inline">\(Y\)</span> for the <span class="math inline">\(i\)</span>-ith value of <span class="math inline">\(X\)</span> equal to <span class="math inline">\(x\)</span>. The <span class="math inline">\(\hat{}\)</span> symbol is used to denote an estimated value of an unknown coefficient, parameter, or outcome.</p>
<p>The earliest form of linear regression is the <em>least squares</em> method, which was developed at the beginning of the nineteenth century and applied to astronomy problems (James, Witten, Hastie, &amp; Tibshirani, 2013). While there are several approaches to fitting a linear regression model, <strong>ordinary least squares (OLS)</strong> is the most common. OLS selects coefficients for <span class="math inline">\(\hat{\beta}_0\)</span> and <span class="math inline">\(\hat{\beta}_1\)</span> that minimize the residual sum of squares (RSS) defined by:</p>
<p><span class="math display">\[RSS = (y_1 - \hat{\beta}_0 - \hat{\beta}_1x_1)^2 + (y_2 - \hat{\beta}_0 - \hat{\beta}_1x_2)^2 + {...} + (y_n - \hat{\beta}_0 - \hat{\beta}_1x_n)^2\]</span></p>
<p>For each value of <span class="math inline">\(X\)</span>, OLS fits a model for which the squared difference between the predicted (<span class="math inline">\(\hat{\beta}_0 + \hat{\beta}_1x_i\)</span>) and actual (<span class="math inline">\(y_i\)</span>) values are as small as possible. Figure @ref(fig:lm-residuals) illustrates the result of minimizing <span class="math inline">\(RSS\)</span> using OLS:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/lm-residuals-1.png" alt="Minimizing RSS with Ordinary Least Squares (OLS) Fit" width="100%" />
<p class="caption">
(#fig:lm-residuals)Minimizing RSS with Ordinary Least Squares (OLS) Fit
</p>
</div>
<p>The minimizers for the least squares coefficient estimates are defined by:</p>
<p><span class="math display">\[\hat\beta_1 = \frac{\displaystyle\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y})} {\displaystyle\sum_{i=1}^{n}(x_i - \bar{x})^2}\]</span></p>
<p><span class="math display">\[\hat\beta_0 = \bar{y} - \hat{\beta}_1 \bar{x},\]</span></p>
<p>where <span class="math inline">\(\bar{x}\)</span> and <span class="math inline">\(\bar{y}\)</span> are sample means.</p>
<p>It is important to understand the role sample size plays in achieving accurate estimates of <span class="math inline">\(Y\)</span>. Figure @ref(fig:lm-fit-compare) illustrates the impact of fitting a model to too few observations. With <span class="math inline">\(n\)</span> = 2, it would be easy to fit a perfect model to the data; that is, one representing a line that connects the two data points. However, it is highly unlikely that these data points represent the best model for a larger sample, as there would likely be some distribution of <span class="math inline">\(Y\)</span> for each value of <span class="math inline">\(X\)</span>.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/lm-fit-compare-1.png" alt="Left: Least squares regression model fit to n = 2 observations. Right: Least squares regression model fit to n = 20 observations." width="100%" />
<p class="caption">
(#fig:lm-fit-compare)Left: Least squares regression model fit to n = 2 observations. Right: Least squares regression model fit to n = 20 observations.
</p>
</div>
<p>In R, we can build (or <em>fit</em>) a simple linear regression model using the <code>lm()</code> function. The syntax is <code>lm(Y ~ X, dataset)</code>:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb337-3"><a href="#cb337-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-4"><a href="#cb337-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb337-5"><a href="#cb337-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb337-6"><a href="#cb337-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-7"><a href="#cb337-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset employees data frame; leads are only applicable for those in sales positions</span></span>
<span id="cb337-8"><a href="#cb337-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, job_title <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Sales Executive&#39;</span>, <span class="st">&#39;Sales Representative&#39;</span>))</span>
<span id="cb337-9"><a href="#cb337-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-10"><a href="#cb337-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Regress YTD leads on engagement</span></span>
<span id="cb337-11"><a href="#cb337-11" aria-hidden="true" tabindex="-1"></a>slm.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(ytd_leads <span class="sc">~</span> engagement, data)</span></code></pre></div>
<p>In practice, linear assumptions are rarely – if ever – perfectly met, but there must be evidence that the assumptions are <em>generally</em> satisfied.</p>
<p>Before performing model diagnostics, it is important to note the following:</p>
<ol style="list-style-type: decimal">
<li>Collinearity diagnostics are only applicable in the context of multiple regression, as simple linear models have only one IV (this will be covered later in the chapter).</li>
<li>Outliers are not always an issue, as we discussed in Chapter @ref(data-mgmt-prep). Figure @ref(fig:high-leverage) illustrates differences between an outlier that does not influence the model fit (left) relative to one which has significant leverage on the model fit (right).</li>
</ol>
<pre><code>## 
## Call:
## lm(formula = Y ~ X)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.4332 -0.5482 -0.0275  0.2867  2.6413 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   0.4395     0.4084   1.076    0.296    
## X             3.1303     0.1515  20.659  5.5e-14 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.8829 on 18 degrees of freedom
## Multiple R-squared:  0.9595, Adjusted R-squared:  0.9573 
## F-statistic: 426.8 on 1 and 18 DF,  p-value: 5.498e-14</code></pre>
<pre><code>## 
## Call:
## lm(formula = Y.out ~ X.out)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.34746 -0.56288 -0.09021  0.29951  2.66197 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   0.5224     0.3399   1.537    0.141    
## X.out         3.0900     0.1077  28.703   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.863 on 19 degrees of freedom
## Multiple R-squared:  0.9775, Adjusted R-squared:  0.9763 
## F-statistic: 823.9 on 1 and 19 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre><code>## 
## Call:
## lm(formula = Y.lev ~ X.lev)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -10.3085  -1.8776   0.8556   2.0309   4.8048 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)   
## (Intercept)   3.9645     1.3559   2.924  0.00871 **
## X.lev         1.4180     0.4295   3.302  0.00375 **
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.443 on 19 degrees of freedom
## Multiple R-squared:  0.3646, Adjusted R-squared:  0.3311 
## F-statistic:  10.9 on 1 and 19 DF,  p-value: 0.00375</code></pre>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/high-leverage-1.png" alt="Left: Model fit with non-influential outlier. Right: Model fit with high leverage outlier. Outlier shown in red. Black solid line represents model fit without outliers. Red dashed line represents model fit with outliers." width="100%" />
<p class="caption">
(#fig:high-leverage)Left: Model fit with non-influential outlier. Right: Model fit with high leverage outlier. Outlier shown in red. Black solid line represents model fit without outliers. Red dashed line represents model fit with outliers.
</p>
</div>
<p>We can conveniently perform linear model diagnostics using the <code>plot()</code> function in conjunction with the object holding linear model results (<code>slm.fit</code>). This produces the following standard plots shown in Figure @ref(fig:slm-diagnostics):</p>
<ul>
<li><strong>Residuals vs Fitted</strong>: Shows how residuals (<span class="math inline">\(y\)</span>-axis) change across the range of fitted values (<span class="math inline">\(x\)</span>-axis)</li>
<li><strong>Normal Q-Q</strong>: Compares two probability distributions by plotting their quantiles (data partitioned into equal-sized groups) against each other</li>
<li><strong>Scale-Location</strong>: Shows how <em>standardized</em> residuals (<span class="math inline">\(y\)</span>-axis) change across the range of fitted values (<span class="math inline">\(x\)</span>-axis)</li>
<li><strong>Residuals vs Leverage</strong>: Shows the leverage of each data point (<span class="math inline">\(x\)</span>-axis) against their standardized residuals (<span class="math inline">\(y\)</span>-axis)</li>
</ul>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/slm-diagnostics-1.png" alt="Simple linear regression model diagnostics." width="100%" />
<p class="caption">
(#fig:slm-diagnostics)Simple linear regression model diagnostics.
</p>
</div>
<p>The <em>Residuals vs Fitted</em> and <em>Scale-Location</em> plots help evaluate assumptions of homoscedasticity, linearity, and normality – which are intricately linked. Data are heteroscedastic if there is a flarring or funnel patterning about the residuals across the range of fitted values. That is, there must be a constant variance about the residual errors in order for the assumption of homoscedasticity to be met. This occurs when there is a linear relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, in which case residuals will be normally distributed around a mean of 0. While the spread of residuals is greater for larger fitted values in this model, resulting in the lower standardized residual error for smaller fitted values indicated in the Scale-Location plot, the slope of the line in the Residuals vs Fitted plot is effectively flat which indicates that the model does not perform significantly better for certain fitted values relative to others.</p>
<p>Cook’s distance in the <em>Residuals vs Leverage</em> plot provides a measure of how much our model estimates for all observations change if high leverage observations are removed from the data. Higher numbers indicate stronger influence. R conveniently labels the three observations with the highest leverage, though the degree of leverage is only problematic for observations beyond the dashed Cook’s distance line. In this case, there are no observations with enough leverage for the dashed Cook’s distance line to show on the plot, so no action is warranted.</p>
<p>In addition to the visual inspection, we can perform the <strong>Breusch-Pagan test</strong> using the <code>bptest()</code> function from the <code>lmtest</code> library to test the null hypothesis that the data are homoscedastic. If <span class="math inline">\(p\)</span> &lt; .05 for the test statistic, we reject the null hypothesis and conclude that there is evidence of heteroscedasticity in the data.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the Breusch-Pagan test for evaluate homoscedasticity</span></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true" tabindex="-1"></a>lmtest<span class="sc">::</span><span class="fu">bptest</span>(slm.fit)</span></code></pre></div>
<pre><code>## 
##  studentized Breusch-Pagan test
## 
## data:  slm.fit
## BP = 0.07603, df = 1, p-value = 0.7828</code></pre>
<p>Since <span class="math inline">\(p\)</span> &gt; .05, we fail to reject the null hypothesis of homoscedasticity; therefore, this assumption is satisified. If this was not the case, a common approach to addressing heteroscedasticity is transforming the response variable by taking the natural logarithm (<code>log()</code>) or square root (<code>sqrt()</code>) of the raw data. While transformations may correct for violations of linear model assumptions, they also result in a less intuitive interpretation of model output relative to the raw untransformed data.</p>
<p>Let’s illustrate how to transform the response variable:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Square root transformation of YTD leads</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a>slm.fit.trans <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">sqrt</span>(ytd_leads) <span class="sc">~</span> engagement, data)</span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-4"><a href="#cb343-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Natural logarithmic transformation of YTD leads</span></span>
<span id="cb343-5"><a href="#cb343-5" aria-hidden="true" tabindex="-1"></a>slm.fit.trans <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(ytd_leads) <span class="sc">~</span> engagement, data)</span></code></pre></div>
<p>The <em>Normal Q-Q Plot</em> in Figure @ref(fig:slm-diagnostics) is used to test the assumption of normally distributed model residuals. A perfectly normal distribution of residuals will result in data lying along the line situated at 45-degrees from the <span class="math inline">\(x\)</span>-axis. Based on a visual inspection, our residuals appear to be normally distributed, as there are only a small number of minor departures in the upper and lower ends of the quantile range.</p>
<p>We can also visualize the distribution of model residuals using a histogram. In the majority of cases, the residual should be 0 – that is, in most cases the model correctly estimates YTD leads resulting in no difference between estimated and observed values (<span class="math inline">\(\hat{y}\)</span> - <span class="math inline">\(y\)</span> = 0).</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce histogram to visualize distribution of model residuals</span></span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb344-3"><a href="#cb344-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">aes</span>(slm.fit<span class="sc">$</span>residuals) <span class="sc">+</span> </span>
<span id="cb344-4"><a href="#cb344-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;YTD Leads Residuals&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb344-5"><a href="#cb344-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb344-6"><a href="#cb344-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb344-7"><a href="#cb344-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/slm-residuals-1.png" alt="Distribution of model residuals." width="672" />
<p class="caption">
(#fig:slm-residuals)Distribution of model residuals.
</p>
</div>
<p>Based on both the Normal Q-Q Plot and histogram, the residuals conform to the assumption of normality. We can confirm using the Shapiro-Wilk test, in which a non-significant test statistic is sufficient evidence of normality:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Shapiro-Wilk test of normality</span></span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(slm.fit<span class="sc">$</span>residuals)</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  slm.fit$residuals
## W = 0.99339, p-value = 0.07029</code></pre>
<p>Let’s use the <code>flextable</code> package to present our simple linear model results in an elegant tabular summary:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb347-2"><a href="#cb347-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb347-3"><a href="#cb347-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce tabular summary for model results using flextable</span></span>
<span id="cb347-4"><a href="#cb347-4" aria-hidden="true" tabindex="-1"></a>flextable<span class="sc">::</span><span class="fu">as_flextable</span>(slm.fit)</span></code></pre></div>
<template id="4d749b93-3a68-45d4-8d4e-2bdb3dd9e902"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-749151a6{}.cl-748794d6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-748794f4{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7487aa70{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7487aa84{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7487e90e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e92c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e936{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e937{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e940{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e94a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e94b{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e954{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e95e{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e968{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e969{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e972{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e97c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e986{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e990{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e991{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e99a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9a4{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9a5{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9ae{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9b8{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9b9{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9c2{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9cc{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7487e9cd{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-749151a6'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7487e9b9"><p class="cl-7487aa70"><span class="cl-748794d6"></span></p></td><td class="cl-7487e9b8"><p class="cl-7487aa84"><span class="cl-748794d6">Estimate</span></p></td><td class="cl-7487e9cd"><p class="cl-7487aa84"><span class="cl-748794d6">Standard Error</span></p></td><td class="cl-7487e9c2"><p class="cl-7487aa84"><span class="cl-748794d6">t value</span></p></td><td class="cl-7487e9c2"><p class="cl-7487aa84"><span class="cl-748794d6">Pr(&gt;|t|)</span></p></td><td class="cl-7487e9cc"><p class="cl-7487aa70"><span class="cl-748794d6"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7487e940"><p class="cl-7487aa70"><span class="cl-748794d6">(Intercept)</span></p></td><td class="cl-7487e937"><p class="cl-7487aa84"><span class="cl-748794d6">1.630</span></p></td><td class="cl-7487e90e"><p class="cl-7487aa84"><span class="cl-748794d6">0.997</span></p></td><td class="cl-7487e936"><p class="cl-7487aa84"><span class="cl-748794d6">1.635</span></p></td><td class="cl-7487e936"><p class="cl-7487aa84"><span class="cl-748794d6">0.1028</span></p></td><td class="cl-7487e92c"><p class="cl-7487aa70"><span class="cl-748794d6">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7487e95e"><p class="cl-7487aa70"><span class="cl-748794d6">engagement</span></p></td><td class="cl-7487e968"><p class="cl-7487aa84"><span class="cl-748794d6">20.065</span></p></td><td class="cl-7487e94a"><p class="cl-7487aa84"><span class="cl-748794d6">0.357</span></p></td><td class="cl-7487e94b"><p class="cl-7487aa84"><span class="cl-748794d6">56.193</span></p></td><td class="cl-7487e94b"><p class="cl-7487aa84"><span class="cl-748794d6">0.0000</span></p></td><td class="cl-7487e954"><p class="cl-7487aa70"><span class="cl-748794d6">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7487e969"><p class="cl-7487aa84"><span class="cl-748794f4">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7487e9a5"><p class="cl-7487aa70"><span class="cl-748794d6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7487e9a5"><p class="cl-7487aa70"><span class="cl-748794d6">Residual standard error: 5.095 on 407 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7487e9a5"><p class="cl-7487aa70"><span class="cl-748794d6">Multiple R-squared: 0.8858, Adjusted R-squared: 0.8855</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7487e9a5"><p class="cl-7487aa70"><span class="cl-748794d6">F-statistic: 3158 on 407 and 1 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="8313dd61-440a-4465-a5bf-03b9d83a22cf"></div>
<script>
var dest = document.getElementById("8313dd61-440a-4465-a5bf-03b9d83a22cf");
var template = document.getElementById("4d749b93-3a68-45d4-8d4e-2bdb3dd9e902");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>There are several important pieces of information in this output:</p>
<ul>
<li><code>Estimate</code>: <em>Unstandardized</em> Beta coefficient associated with the predictor</li>
<li><code>Standard Error</code>: Average distance between the observed and estimated values per the fitted regression line</li>
<li><code>t value</code>: <code>Estimate</code> / <code>Standard Error</code>. Larger values provide more evidence for a non-zero coefficient (relationship) in the population.</li>
<li><code>Pr(&gt;|t|)</code>: <span class="math inline">\(p\)</span>-value for evaluating whether there is sufficient evidence in the sample that the coefficient (relationship) between the respective predictor and response variable is not 0 in the population (i.e., <span class="math inline">\(x\)</span> has a relationship with <span class="math inline">\(y\)</span>)</li>
<li><code>Intercept</code>: Mean value of the response variable when all predictors are equal to 0. Note that the interpretation of the intercept is often nonsensical since many predictors cannot have 0 values (e.g., age, height, weight, IQ).</li>
<li><code>Signif. codes</code>: Symbols to quickly ascertain whether predictors are significant at key levels, such as <span class="math inline">\(p\)</span> &lt; .001, <span class="math inline">\(p\)</span> &lt; .01, or <span class="math inline">\(p\)</span> &lt; .05.</li>
<li><code>Residual standard error</code>: Measure of model fit which reflects the standard deviation of the residuals (<span class="math inline">\(\sqrt {\sum(y-\hat{y})^2 / df}\)</span>)</li>
<li><code>Degrees of freedom</code>: <span class="math inline">\(n\)</span> - <span class="math inline">\(p\)</span>, where <span class="math inline">\(n\)</span> is the number of observations and <span class="math inline">\(p\)</span> is the number of predictors</li>
<li><code>Multiple R-squared</code>: Percent of variance in <span class="math inline">\(y\)</span> (when multiplied by 100) explained by the predictors in the model. This is also known as the <strong>Coefficient of Determination</strong>. For simple linear regression, this is simply the squared value of Pearson’s <span class="math inline">\(r\)</span> for the bivariate relationship between the predictor and response (execute <code>cor(data$engagement, data$ytd_leads)^2</code> to validate).</li>
<li><code>Adjusted R-squared</code>: Modified version of <span class="math inline">\(R^2\)</span> that adjusts the estimate for non-significant predictors. A large delta between <span class="math inline">\(R^2\)</span> and Adjusted <span class="math inline">\(R^2\)</span> coefficients generally indicates a model containing a larger number of non-significant predictors relative to when <span class="math inline">\(R^2\)</span> and Adjusted <span class="math inline">\(R^2\)</span> values are similar.</li>
<li><code>F-statistic</code>: Statistic used in conjunction with the <code>p-value</code> for testing differences between the specified model and an intercept-only model (a model with no predictors). This test helps us evaluate whether our predictors are helpful in explaining variance in <span class="math inline">\(y\)</span>.</li>
</ul>
<p>The output of this simple linear regression model indicates that for each level increase in engagement, the average increase in YTD leads is about 20 (<span class="math inline">\(\beta\)</span> = 20.1, <span class="math inline">\(t\)</span>(407) = 56.2, <span class="math inline">\(p\)</span> &lt; .001). Had we transformed the response variable from its original unit of measurement, the interpretation would be expressed in the transformed units (e.g., <span class="math inline">\(\beta\)</span> is the square root or natural log of the average change in leads for a one-level increase in engagement).</p>
<p>Thanks to the properties of the CLT, which requires normally distributed <em>residuals</em>, we can be confident that the true relationship between engagement and YTD leads in the population is not 0 since the 95% CI (<span class="math inline">\(\beta\)</span> +/- 2<span class="math inline">\(SE\)</span>) does not include 0.</p>
<p>While it may be tempting to conclude that employee engagement has a significant influence on leads based on the model output, we know that bivariate relationships may be spurious; that is, engagement may be correlated with another variable that is actually influencing leads. In practice, a simple linear model is rarely sufficient for explaining a meaningful percent of variance in a response variable, and additional predictors are usually needed to capture the complex and nuanced relationships characteristic of people analytics problems.</p>
<p>The <span class="math inline">\(R^2\)</span> value indicates that 8.9% of the variance in leads can be explained by the variation in engagement levels. Put differently, this simple model does not account for 91.1% of variation in leads. Since a large portion of the variance in leads is unexplained, we need signal from additional predictors to understand the other dimensions along which leads vary.</p>
<p>Figure @ref(fig:slm-fit) illustrates how the regression equation for this simple linear model (<span class="math inline">\(y\)</span> = 20.1<span class="math inline">\(x\)</span> + 1.6) fits the data points for sales employees. The spread of leads at each engagement level indicates that there are other factors that explain variance in leads that need to be accounted for in the regression equation to achieve more accurate estimates. The reduction in the spread of leads for a combination of significant predictor values increases <span class="math inline">\(R^2\)</span> (explained variance in YTD leads).</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/slm-fit-1.png" alt="Simple Linear Model Fit Line for y = 20.1x + 1.6" width="100%" />
<p class="caption">
(#fig:slm-fit)Simple Linear Model Fit Line for y = 20.1x + 1.6
</p>
</div>
<p>We can use the <code>extract_eq()</code> function from the <code>equatiomatic</code> library to easily build a properly formatted LaTex regression equation from the model object:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(equatiomatic)</span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert model to LaTex regression equation</span></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a>equatiomatic<span class="sc">::</span><span class="fu">extract_eq</span>(slm.fit)</span></code></pre></div>
<p><span class="math display">\[
\operatorname{ytd\_leads} = \alpha + \beta_{1}(\operatorname{engagement}) + \epsilon
\]</span></p>
</div>
<div id="multiple-linear-regression" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Multiple Linear Regression</h2>
<p><strong>Multiple linear regression</strong> extends the simple linear model to one with two or more predictor variables. A multiple regression model generally explains more variance in the response relative to the simple linear model, and is defined by:</p>
<p><span class="math display">\[ Y = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + {...} + \beta_p X_p + \epsilon \]</span></p>
<p>Once we estimate the unknown model coefficients, <span class="math inline">\(\beta_0\)</span> through <span class="math inline">\(\beta_p\)</span>, we can estimate <span class="math inline">\(Y\)</span> for a particular combination of values for <span class="math inline">\(X_1\)</span> through <span class="math inline">\(X_p\)</span> by calculating:</p>
<p><span class="math display">\[ \hat{y_i} = \hat{\beta}_0 + \hat{\beta_1}x_{i1} + \hat{\beta_2}x_{i2} + {...} + \hat{\beta_p} x_{ip} \]</span></p>
<p><strong>Collinearity Diagnostics</strong></p>
<p>In addition to the assumptions we tested in the context of the simple linear model, multiple linear regression warrants collinearity diagnostics. <strong>Collinearity</strong> refers to situations in which predictors that are related to the response variable also have strong associations with one another. In practice, there is usually some level of collinearity between variables, so the goal of collinearity diagnostics is to identify and address <em>problematic</em> levels of collinearity.</p>
<p>Models should be built with predictors that have a strong association with the outcome but not with one another. If predictors are highly correlated with each other, it indicates that they are redundant and do not provide unique information. A large amount of collinearity can cause serious issues with the underlying calculus of a regression model, which can manifest in the form of effects of significant predictors being masked or suppressed or a negative sign/effect showing in the output when a positive association between the predictor and the response actually exists (or vice versa). As a result, it would be premature to fit a linear model before running collinearity diagnostics, as there may be false negatives – predictors that appear unimportant but are actually statistical drivers of the response. If problematic collinearity is not addressed, false conclusions may be drawn from the model output which may lead to bad business decisions.</p>
<p>Kuhn and Johnson (2013) recommend the simple procedure outlined below to identify and address problematic collinearity:</p>
<ol style="list-style-type: decimal">
<li>Determine the two predictors associated with the largest absolute pairwise correlation (whether they are positively or negatively related does not matter) – call them predictors A and B.</li>
<li>Determine the average absolute correlation between predictor A and the other variables. Do the same for predictor B.</li>
<li>If predictor A has a larger average absolute correlation, remove it; otherwise, remove predictor B. The exception to this rule is when predictors A and B have similar average absolute correlations with all other predictors but the predictor with the slightly higher correlation is a key variable that, if dropped, will prevent you from addressing one or more stated objectives or hypotheses.</li>
<li>Repeat steps 1-3 until <span class="math inline">\(|r|\)</span> &lt; .7.</li>
</ol>
<p>Let’s demonstrate the procedures and mechanics for multiple linear regression by estimating YTD sales using multiple predictor variables. While not appropriate in practice, we will select a subset of the available predictors from <code>data</code> to simplify the model and explanation. In Chapter @ref(pred-mod), we will discuss the use of machine learning (ML) models for more efficient and comprehensive variable selection.</p>
<p>We can leverage the <code>ggpairs()</code> function introduced in Chapter @ref(desc-stats) to efficiently compute bivariate correlations and visualize data distributions:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ggpairs-ytd-sales-1.png" alt="GGpairs bivariate correlations and data distributions." width="100%" />
<p class="caption">
(#fig:ggpairs-ytd-sales)GGpairs bivariate correlations and data distributions.
</p>
</div>
<p>Based on the correlations, <code>org_tenure</code> is highly correlated with both <code>job_tenure</code>, <code>mgr_tenure</code> and <code>work_exp</code>. These relationships indicate that job and manager changes for those in sales roles have been infrequent since joining the organization, and that a large portion of their work experience has been with this organization. Since <code>org_tenure</code> has the strongest relationship with our response, <code>ytd_sales</code>, we will drop <code>job_tenure</code>, <code>mgr_tenure</code>, and <code>work_exp</code>.</p>
<p>Since <span class="math inline">\(|r|\)</span> &lt; .7 for all pairwise relationships, let’s fit the more parsimonious multiple regression model using the resulting subset of predictors. We can include multiple predictors in the model using the <code>+</code> symbol in the <code>lm()</code> function:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Regress YTD sales on a combination of predictors</span></span>
<span id="cb349-2"><a href="#cb349-2" aria-hidden="true" tabindex="-1"></a>mlm.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(ytd_sales <span class="sc">~</span> engagement <span class="sc">+</span> job_lvl <span class="sc">+</span> stock_opt_lvl <span class="sc">+</span> org_tenure, data)</span></code></pre></div>
<p>While Kuhn and Johnson’s procedure is a good first step, this may not eliminate what is known as <strong>multicollinearity</strong>, which is collinearity among three or more predictors. It is possible for collinearity to exist between three or more variables, even in the absence of a strong correlation for a pair of variables. We can evaluate the <strong>Variance Inflation Factor (VIF)</strong> for the predictors that remain following the bivariate correlation review to ensure multicollinearity is not present. <span class="math inline">\(VIF\)</span> is defined by:</p>
<p><span class="math display">\[ VIF(\hat{\beta_j}) = \frac{1}{1 - R^2_{X_j|X_{-j}}}, \]</span></p>
<p>where the denominator, <span class="math inline">\(R^2_{X_j|X_{-j}}\)</span>, is the <span class="math inline">\(R^2\)</span> from regressing <span class="math inline">\(X_j\)</span> onto all other predictors. The smallest value of <span class="math inline">\(VIF\)</span> is 1, which indicates a complete absence of collinearity. Problematic collinearity exists if <span class="math inline">\(VIF\)</span> for any variable exceeds 5.</p>
<p>We can produce <span class="math inline">\(VIF\)</span> for each variable using the <code>vif()</code> function from the <code>car</code> library:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb350-3"><a href="#cb350-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-4"><a href="#cb350-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce VIF for each predictor</span></span>
<span id="cb350-5"><a href="#cb350-5" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">vif</span>(mlm.fit)</span></code></pre></div>
<pre><code>##    engagement       job_lvl stock_opt_lvl    org_tenure 
##      1.001459      1.407192      1.009435      1.395797</code></pre>
<p>Based on the output, <span class="math inline">\(VIF\)</span> &lt; 5 for each predictor, which indicates that multicollinearity is not an issue.</p>
<p>Next, let’s evaluate the linear model assumptions to validate that fitting a linear model to these data is appropriate:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/pre-mlm-diagnostics-1.png" alt="Multiple linear regression model diagnostics." width="100%" />
<p class="caption">
(#fig:pre-mlm-diagnostics)Multiple linear regression model diagnostics.
</p>
</div>
<p>Based on these visuals, there are obvious violations of linear model assumptions that need to first be addressed.</p>
<p>First, given the long right tail for the <code>ytd_sales</code> distribution shown in Figure @ref(fig:pre-mlm-diagnostics), let’s apply a square root transformation to the response variable:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Regress YTD sales on a combination of predictors</span></span>
<span id="cb352-2"><a href="#cb352-2" aria-hidden="true" tabindex="-1"></a>mlm.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">sqrt</span>(ytd_sales) <span class="sc">~</span> engagement <span class="sc">+</span> job_lvl <span class="sc">+</span> stock_opt_lvl <span class="sc">+</span> org_tenure, data)</span></code></pre></div>
<p>Additionally, the diagnostic plots indicate that there are data points with high leverage on the fit. Let’s address using Cook’s distance as the criterion:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove high leverage observations per Cook&#39;s distance</span></span>
<span id="cb353-2"><a href="#cb353-2" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">abs</span>(<span class="fu">rstudent</span>(mlm.fit)) <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> <span class="fu">abs</span>(<span class="fu">cooks.distance</span>(mlm.fit)) <span class="sc">&lt;</span> <span class="dv">4</span><span class="sc">/</span><span class="fu">nrow</span>(mlm.fit<span class="sc">$</span>model)</span>
<span id="cb353-3"><a href="#cb353-3" aria-hidden="true" tabindex="-1"></a>mlm.fit <span class="ot">&lt;-</span> <span class="fu">update</span>(mlm.fit, <span class="at">weights =</span> <span class="fu">as.numeric</span>(w))</span></code></pre></div>
<p>Now we can produce a refreshed set of diagnostic plots to evaluate the impact of transforming the response variable and removing high leverage observations:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/post-mlm-diagnostics-1.png" alt="Multiple linear regression model diagnostics (post-transformation)." width="100%" />
<p class="caption">
(#fig:post-mlm-diagnostics)Multiple linear regression model diagnostics (post-transformation).
</p>
</div>
<p>There is a clear improvement towards satisifying linear model assumptions.</p>
<p>Let’s perform the Breusch-Pagan test to validate that the assumption of homoscedasticity is met:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the Breusch-Pagan test for evaluate homoscedasticity</span></span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true" tabindex="-1"></a>lmtest<span class="sc">::</span><span class="fu">bptest</span>(mlm.fit)</span></code></pre></div>
<pre><code>## 
##  studentized Breusch-Pagan test
## 
## data:  mlm.fit
## BP = 2.2111, df = 4, p-value = 0.697</code></pre>
<p>Next, let’s ensure residuals are normally distributed around 0:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce histogram to visualize distribution of model residuals</span></span>
<span id="cb356-2"><a href="#cb356-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb356-3"><a href="#cb356-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">aes</span>(mlm.fit<span class="sc">$</span>residuals) <span class="sc">+</span> </span>
<span id="cb356-4"><a href="#cb356-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;YTD Leads Residuals&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb356-5"><a href="#cb356-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">&quot;#414141&quot;</span>) <span class="sc">+</span></span>
<span id="cb356-6"><a href="#cb356-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;#ADD8E6&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb356-7"><a href="#cb356-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/mlm-residuals-1.png" alt="Distribution of model residuals" width="672" />
<p class="caption">
(#fig:mlm-residuals)Distribution of model residuals
</p>
</div>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Shapiro-Wilk test of normality</span></span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(mlm.fit<span class="sc">$</span>residuals)</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  mlm.fit$residuals
## W = 0.99342, p-value = 0.07202</code></pre>
<p>Based on the diagnostic plots and statistical tests, our data satisify the requirements for building a multiple linear regression model.</p>
<p><strong>Variable Selection</strong></p>
<p>Next, we need to reduce our model to the subset of predictors with statistically significant relationships with the response variable. <strong>Backward Stepwise Selection</strong> is a common and simple variable selection procedure, and the steps are outlined below:</p>
<ol style="list-style-type: decimal">
<li>Remove the predictor with the highest <span class="math inline">\(p\)</span>-value greater than the critical value (<span class="math inline">\(\alpha\)</span> = .05).</li>
<li>Refit the model, and repeat step 1.</li>
<li>Stop when all <span class="math inline">\(p\)</span>-values are less than the critical value.</li>
</ol>
<p>Each predictor in our model has a statistically significant relationship with <code>ytd_sales</code> – indicating that the slope of the relationships with the response is unlikely 0 in the population – so further variable reduction is not required.</p>
<template id="19894161-a3c4-4c19-8acb-f9faafb307be"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-781c0fb4{}.cl-7816066e{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-78160682{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-78161762{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-78161776{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-78166834{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166848{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166852{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816685c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166866{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166870{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816687a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166884{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816688e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166898{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668a2{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668ac{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668b6{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668c0{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668ca{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668d4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668de{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668e8{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668f2{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781668fc{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166906{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166910{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816691a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166924{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816692e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166938{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166942{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816694c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166956{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166957{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166960{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816696a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166974{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816697e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166988{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78166992{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7816699c{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781669a6{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781669b0{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-781669ba{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-781c0fb4'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-781669b0"><p class="cl-78161762"><span class="cl-7816066e"></span></p></td><td class="cl-78166992"><p class="cl-78161776"><span class="cl-7816066e">Estimate</span></p></td><td class="cl-781669a6"><p class="cl-78161776"><span class="cl-7816066e">Standard Error</span></p></td><td class="cl-7816699c"><p class="cl-78161776"><span class="cl-7816066e">t value</span></p></td><td class="cl-7816699c"><p class="cl-78161776"><span class="cl-7816066e">Pr(&gt;|t|)</span></p></td><td class="cl-781669ba"><p class="cl-78161762"><span class="cl-7816066e"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-78166866"><p class="cl-78161762"><span class="cl-7816066e">(Intercept)</span></p></td><td class="cl-78166848"><p class="cl-78161776"><span class="cl-7816066e">125.981</span></p></td><td class="cl-7816685c"><p class="cl-78161776"><span class="cl-7816066e">6.903</span></p></td><td class="cl-78166834"><p class="cl-78161776"><span class="cl-7816066e">18.250</span></p></td><td class="cl-78166834"><p class="cl-78161776"><span class="cl-7816066e">0.0000</span></p></td><td class="cl-78166852"><p class="cl-78161762"><span class="cl-7816066e">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78166898"><p class="cl-78161762"><span class="cl-7816066e">engagement</span></p></td><td class="cl-78166884"><p class="cl-78161776"><span class="cl-7816066e">10.105</span></p></td><td class="cl-7816687a"><p class="cl-78161776"><span class="cl-7816066e">1.974</span></p></td><td class="cl-7816688e"><p class="cl-78161776"><span class="cl-7816066e">5.118</span></p></td><td class="cl-7816688e"><p class="cl-78161776"><span class="cl-7816066e">0.0000</span></p></td><td class="cl-78166870"><p class="cl-78161762"><span class="cl-7816066e">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-781668c0"><p class="cl-78161762"><span class="cl-7816066e">job_lvl</span></p></td><td class="cl-781668b6"><p class="cl-78161776"><span class="cl-7816066e">33.768</span></p></td><td class="cl-781668ac"><p class="cl-78161776"><span class="cl-7816066e">2.425</span></p></td><td class="cl-781668a2"><p class="cl-78161776"><span class="cl-7816066e">13.922</span></p></td><td class="cl-781668a2"><p class="cl-78161776"><span class="cl-7816066e">0.0000</span></p></td><td class="cl-781668ca"><p class="cl-78161762"><span class="cl-7816066e">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-781668e8"><p class="cl-78161762"><span class="cl-7816066e">stock_opt_lvl</span></p></td><td class="cl-781668d4"><p class="cl-78161776"><span class="cl-7816066e">5.166</span></p></td><td class="cl-781668fc"><p class="cl-78161776"><span class="cl-7816066e">1.621</span></p></td><td class="cl-781668f2"><p class="cl-78161776"><span class="cl-7816066e">3.187</span></p></td><td class="cl-781668f2"><p class="cl-78161776"><span class="cl-7816066e">0.0016</span></p></td><td class="cl-781668de"><p class="cl-78161762"><span class="cl-7816066e"> **</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78166906"><p class="cl-78161762"><span class="cl-7816066e">org_tenure</span></p></td><td class="cl-78166924"><p class="cl-78161776"><span class="cl-7816066e">6.812</span></p></td><td class="cl-7816692e"><p class="cl-78161776"><span class="cl-7816066e">0.341</span></p></td><td class="cl-78166910"><p class="cl-78161776"><span class="cl-7816066e">19.952</span></p></td><td class="cl-78166910"><p class="cl-78161776"><span class="cl-7816066e">0.0000</span></p></td><td class="cl-7816691a"><p class="cl-78161762"><span class="cl-7816066e">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78166942"><p class="cl-78161776"><span class="cl-78160682">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78166988"><p class="cl-78161762"><span class="cl-7816066e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78166988"><p class="cl-78161762"><span class="cl-7816066e">Residual standard error: 26.15 on 375 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78166988"><p class="cl-78161762"><span class="cl-7816066e">Multiple R-squared: 0.7783, Adjusted R-squared: 0.7759</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78166988"><p class="cl-78161762"><span class="cl-7816066e">F-statistic: 329.1 on 375 and 4 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="907b2719-0942-4fc4-a81e-8b0ca7af8124"></div>
<script>
var dest = document.getElementById("907b2719-0942-4fc4-a81e-8b0ca7af8124");
var template = document.getElementById("19894161-a3c4-4c19-8acb-f9faafb307be");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>We can view the multiple regression equation for estimating <code>sqrt(ytd_sales)</code> with these four predictors using the <code>extract_eq</code> function:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert model to LaTex regression equation</span></span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a>equatiomatic<span class="sc">::</span><span class="fu">extract_eq</span>(mlm.fit)</span></code></pre></div>
<p><span class="math display">\[
\operatorname{sqrt(ytd\_sales)} = \alpha + \beta_{1}(\operatorname{engagement}) + \beta_{2}(\operatorname{job\_lvl}) + \beta_{3}(\operatorname{stock\_opt\_lvl}) + \beta_{4}(\operatorname{org\_tenure}) + \epsilon
\]</span></p>
<p>Based on the model output, the combination of predictors explains about 78% of the variance in YTD sales (<span class="math inline">\(R^2\)</span> = .778). In people analytics settings, it is rare to explain three-quarters of the variance for an outcome given people data are especially noisy.</p>
<p>By default, the coefficients on the predictors are unstandardized; that is, they represent the average change in the square root transformed response for each one-unit increase for the respective predictor. Since the predictors have different units of measurement, such as <code>stock_opt_lvl</code> ranging from 0 to 3 and <code>org_tenure</code> ranging from 0 to 40, the unstandardized coefficients cannot be compared to determine which variable has the largest effect on YTD sales. We must standardize these coefficients and adjust for differences in the units of measurement for an apples-to-apples comparison.</p>
<p>We can scale variables by subtracting the variable’s mean from <span class="math inline">\(x\)</span> and dividing the difference into the variable’s standard deviation:</p>
<p><span class="math display">\[ x_{scaled} = \frac{x - \bar{x}} {s} \]</span></p>
<p>We can leverage the <code>scale()</code> function to standardize the predictors’ units of measurement and determine which has the largest effect on <code>ytd_sales</code>:</p>
<template id="e3cc7a79-7416-4a87-8717-aa6eadb3aff8"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7855ef40{}.cl-784fa1e4{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-784fa202{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-784faec8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-784faed2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-784fe528{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe546{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe550{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe55a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe564{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe565{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe56e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe578{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe582{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe58c{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe596{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5a0{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5a1{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5aa{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5b4{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5be{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5bf{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5c8{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5d2{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5d3{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5dc{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5e6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5f0{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5f1{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe5fa{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe604{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe605{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe60e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe618{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe622{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe623{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe62c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe636{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe637{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe640{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe64a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe654{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe65e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe668{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-784fe672{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7855ef40'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-784fe668"><p class="cl-784faec8"><span class="cl-784fa1e4"></span></p></td><td class="cl-784fe64a"><p class="cl-784faed2"><span class="cl-784fa1e4">Estimate</span></p></td><td class="cl-784fe65e"><p class="cl-784faed2"><span class="cl-784fa1e4">Standard Error</span></p></td><td class="cl-784fe654"><p class="cl-784faed2"><span class="cl-784fa1e4">t value</span></p></td><td class="cl-784fe654"><p class="cl-784faed2"><span class="cl-784fa1e4">Pr(&gt;|t|)</span></p></td><td class="cl-784fe672"><p class="cl-784faec8"><span class="cl-784fa1e4"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-784fe564"><p class="cl-784faec8"><span class="cl-784fa1e4">(Intercept)</span></p></td><td class="cl-784fe546"><p class="cl-784faed2"><span class="cl-784fa1e4">-0.000</span></p></td><td class="cl-784fe55a"><p class="cl-784faed2"><span class="cl-784fa1e4">0.026</span></p></td><td class="cl-784fe528"><p class="cl-784faed2"><span class="cl-784fa1e4">-0.000</span></p></td><td class="cl-784fe528"><p class="cl-784faed2"><span class="cl-784fa1e4">1.0000</span></p></td><td class="cl-784fe550"><p class="cl-784faec8"><span class="cl-784fa1e4">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-784fe58c"><p class="cl-784faec8"><span class="cl-784fa1e4">engagement</span></p></td><td class="cl-784fe578"><p class="cl-784faed2"><span class="cl-784fa1e4">0.125</span></p></td><td class="cl-784fe56e"><p class="cl-784faed2"><span class="cl-784fa1e4">0.026</span></p></td><td class="cl-784fe582"><p class="cl-784faed2"><span class="cl-784fa1e4">4.777</span></p></td><td class="cl-784fe582"><p class="cl-784faed2"><span class="cl-784fa1e4">0.0000</span></p></td><td class="cl-784fe565"><p class="cl-784faec8"><span class="cl-784fa1e4">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-784fe5aa"><p class="cl-784faec8"><span class="cl-784fa1e4">job_lvl</span></p></td><td class="cl-784fe5a1"><p class="cl-784faed2"><span class="cl-784fa1e4">0.385</span></p></td><td class="cl-784fe5a0"><p class="cl-784faed2"><span class="cl-784fa1e4">0.031</span></p></td><td class="cl-784fe596"><p class="cl-784faed2"><span class="cl-784fa1e4">12.423</span></p></td><td class="cl-784fe596"><p class="cl-784faed2"><span class="cl-784fa1e4">0.0000</span></p></td><td class="cl-784fe5b4"><p class="cl-784faec8"><span class="cl-784fa1e4">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-784fe5c8"><p class="cl-784faec8"><span class="cl-784fa1e4">stock_opt_lvl</span></p></td><td class="cl-784fe5be"><p class="cl-784faed2"><span class="cl-784fa1e4">0.068</span></p></td><td class="cl-784fe5d3"><p class="cl-784faed2"><span class="cl-784fa1e4">0.026</span></p></td><td class="cl-784fe5d2"><p class="cl-784faed2"><span class="cl-784fa1e4">2.589</span></p></td><td class="cl-784fe5d2"><p class="cl-784faed2"><span class="cl-784fa1e4">0.0100</span></p></td><td class="cl-784fe5bf"><p class="cl-784faec8"><span class="cl-784fa1e4"> **</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-784fe5dc"><p class="cl-784faec8"><span class="cl-784fa1e4">org_tenure</span></p></td><td class="cl-784fe5f1"><p class="cl-784faed2"><span class="cl-784fa1e4">0.564</span></p></td><td class="cl-784fe5fa"><p class="cl-784faed2"><span class="cl-784fa1e4">0.031</span></p></td><td class="cl-784fe5e6"><p class="cl-784faed2"><span class="cl-784fa1e4">18.285</span></p></td><td class="cl-784fe5e6"><p class="cl-784faed2"><span class="cl-784fa1e4">0.0000</span></p></td><td class="cl-784fe5f0"><p class="cl-784faec8"><span class="cl-784fa1e4">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-784fe605"><p class="cl-784faed2"><span class="cl-784fa202">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-784fe640"><p class="cl-784faec8"><span class="cl-784fa1e4"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-784fe640"><p class="cl-784faec8"><span class="cl-784fa1e4">Residual standard error: 0.527 on 404 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-784fe640"><p class="cl-784faec8"><span class="cl-784fa1e4">Multiple R-squared: 0.7249, Adjusted R-squared: 0.7222</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-784fe640"><p class="cl-784faec8"><span class="cl-784fa1e4">F-statistic: 266.2 on 404 and 4 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="93496cf6-2b3e-4864-8666-75ed9b9bf08e"></div>
<script>
var dest = document.getElementById("93496cf6-2b3e-4864-8666-75ed9b9bf08e");
var template = document.getElementById("e3cc7a79-7416-4a87-8717-aa6eadb3aff8");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Based on the standardized coefficients in Figure @ref(fig:mlm-scaled), <code>org_tenure</code> has the largest effect (<span class="math inline">\(\beta\)</span> = .56, <span class="math inline">\(t\)</span>(404) = 18.29, <span class="math inline">\(p\)</span> &lt; .001) and <code>job_lvl</code> has the second largest effect (<span class="math inline">\(\beta\)</span> = .39, <span class="math inline">\(t\)</span>(404) = 12.42, <span class="math inline">\(p\)</span> &lt; .001).</p>
</div>
<div id="moderation" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Moderation</h2>
<p>As discussed in Chapter @ref(measure-sampl), a moderating variable is a third variable which amplifies (strengthens) or attenuates (weakens) the relationship between an IV and the response. Accounting for a moderating variable in an linear model requires an <strong>interaction term</strong>, which is the product of the two variables (<span class="math inline">\(X_1\)</span> * <span class="math inline">\(X_2\)</span>).</p>
<p>Let’s examine whether <code>org_tenure</code> influences the strength of the relationship between <code>job_lvl</code> and <code>sqrt(ytd_sales)</code>. We would generally expect sales to increase as the job level of salespeople increases, and longer tenure may amplify the strength of this association. Step one is testing whether the interaction term is statistically significant, and step two is determining the nature of any observed statistical interaction. Including the interaction term in the model (<code>job_lvl</code> * <code>org_tenure</code>) will add the predictors independently <em>and</em> jointly:</p>
<template id="4723bc22-30c6-4e2e-93ae-e5d4f73c97ac"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-788ed2ba{}.cl-7887bafc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7887bb10{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7887cccc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7887cce0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-78880b1a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b2e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b38{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b42{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b4c{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b56{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b60{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b6a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b74{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b7e{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b7f{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b88{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b92{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880b9c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880ba6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bb0{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bba{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bc4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bce{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bd8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880be2{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880be3{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bec{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880bf6{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c00{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c0a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c0b{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c14{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c1e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c1f{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c28{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c32{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c3c{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c3d{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78880c46{width:108pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-788ed2ba'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-78880c46"><p class="cl-7887cccc"><span class="cl-7887bafc"></span></p></td><td class="cl-78880c28"><p class="cl-7887cce0"><span class="cl-7887bafc">Estimate</span></p></td><td class="cl-78880c3d"><p class="cl-7887cce0"><span class="cl-7887bafc">Standard Error</span></p></td><td class="cl-78880c3c"><p class="cl-7887cce0"><span class="cl-7887bafc">t value</span></p></td><td class="cl-78880c3c"><p class="cl-7887cce0"><span class="cl-7887bafc">Pr(&gt;|t|)</span></p></td><td class="cl-78880c32"><p class="cl-7887cccc"><span class="cl-7887bafc"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-78880b4c"><p class="cl-7887cccc"><span class="cl-7887bafc">(Intercept)</span></p></td><td class="cl-78880b2e"><p class="cl-7887cce0"><span class="cl-7887bafc">123.835</span></p></td><td class="cl-78880b1a"><p class="cl-7887cce0"><span class="cl-7887bafc">6.250</span></p></td><td class="cl-78880b38"><p class="cl-7887cce0"><span class="cl-7887bafc">19.815</span></p></td><td class="cl-78880b38"><p class="cl-7887cce0"><span class="cl-7887bafc">0.0000</span></p></td><td class="cl-78880b42"><p class="cl-7887cccc"><span class="cl-7887bafc">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78880b7e"><p class="cl-7887cccc"><span class="cl-7887bafc">job_lvl</span></p></td><td class="cl-78880b74"><p class="cl-7887cce0"><span class="cl-7887bafc">50.573</span></p></td><td class="cl-78880b6a"><p class="cl-7887cce0"><span class="cl-7887bafc">3.012</span></p></td><td class="cl-78880b56"><p class="cl-7887cce0"><span class="cl-7887bafc">16.791</span></p></td><td class="cl-78880b56"><p class="cl-7887cce0"><span class="cl-7887bafc">0.0000</span></p></td><td class="cl-78880b60"><p class="cl-7887cccc"><span class="cl-7887bafc">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78880b88"><p class="cl-7887cccc"><span class="cl-7887bafc">org_tenure</span></p></td><td class="cl-78880b7f"><p class="cl-7887cce0"><span class="cl-7887bafc">12.481</span></p></td><td class="cl-78880b9c"><p class="cl-7887cce0"><span class="cl-7887bafc">0.865</span></p></td><td class="cl-78880ba6"><p class="cl-7887cce0"><span class="cl-7887bafc">14.425</span></p></td><td class="cl-78880ba6"><p class="cl-7887cce0"><span class="cl-7887bafc">0.0000</span></p></td><td class="cl-78880b92"><p class="cl-7887cccc"><span class="cl-7887bafc">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78880bce"><p class="cl-7887cccc"><span class="cl-7887bafc">job_lvl:org_tenure</span></p></td><td class="cl-78880bc4"><p class="cl-7887cce0"><span class="cl-7887bafc">-2.514</span></p></td><td class="cl-78880bd8"><p class="cl-7887cce0"><span class="cl-7887bafc">0.300</span></p></td><td class="cl-78880bb0"><p class="cl-7887cce0"><span class="cl-7887bafc">-8.393</span></p></td><td class="cl-78880bb0"><p class="cl-7887cce0"><span class="cl-7887bafc">0.0000</span></p></td><td class="cl-78880bba"><p class="cl-7887cccc"><span class="cl-7887bafc">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78880c00"><p class="cl-7887cce0"><span class="cl-7887bb10">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78880c14"><p class="cl-7887cccc"><span class="cl-7887bafc"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78880c14"><p class="cl-7887cccc"><span class="cl-7887bafc">Residual standard error: 29.4 on 405 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78880c14"><p class="cl-7887cccc"><span class="cl-7887bafc">Multiple R-squared: 0.7412, Adjusted R-squared: 0.7393</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78880c14"><p class="cl-7887cccc"><span class="cl-7887bafc">F-statistic: 386.6 on 405 and 3 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="72fb6137-5e55-4105-8634-42c47d0b0576"></div>
<script>
var dest = document.getElementById("72fb6137-5e55-4105-8634-42c47d0b0576");
var template = document.getElementById("4723bc22-30c6-4e2e-93ae-e5d4f73c97ac");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The results show that both the main and interaction effects are statistically significant (<span class="math inline">\(p\)</span> &lt; .001).</p>
<p>Since interaction terms can be highly correlated with independent predictors, it is good to check for collinearity:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce VIF for each model term</span></span>
<span id="cb360-2"><a href="#cb360-2" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">vif</span>(mlm.fit.int)</span></code></pre></div>
<pre><code>##            job_lvl         org_tenure job_lvl:org_tenure 
##           2.189565           9.246489          12.308142</code></pre>
<p><span class="math inline">\(VIF\)</span> is greater than 5 for both <code>org_tenure</code> and the interaction term; therefore, there is a problematic level of collinearity between these variables.</p>
<p>A common method of addressing collinearity in the context of interaction testing is <strong>variable centering</strong>, in which each value of the predictor is subtracted from its mean (<span class="math inline">\(x - \bar{x}\)</span>). Unlike other transformations we have explored, centering does not impact the interpretation of model coefficients. Coefficients continue to represent the average change in the response for a one-unit change in a predictor, as the range of values for centered variables is consistent with the range for untransformed variables. However, the coefficients on centered variables may be considerably different relative to the model with untransformed variables due to the effects of high collinearity.</p>
<template id="9da53f0a-11d8-4643-b902-cf3524a50d3c"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-78c7f6bc{}.cl-78c18a98{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-78c18ab6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-78c19826{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-78c1983a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-78c1cd1e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd3c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd46{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd50{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd5a{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd5b{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd6e{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd6f{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd78{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd82{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd8c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd96{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cd97{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cda0{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdaa{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdb4{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdb5{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdbe{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdc8{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdd2{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdd3{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cddc{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cde6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cde7{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdf0{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdfa{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1cdfb{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce04{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce0e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce0f{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce18{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce22{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce23{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce2c{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce36{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce40{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce4a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce54{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce55{width:60.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce5e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce68{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-78c1ce69{width:169.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-78c7f6bc'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-78c1ce69"><p class="cl-78c19826"><span class="cl-78c18a98"></span></p></td><td class="cl-78c1ce4a"><p class="cl-78c1983a"><span class="cl-78c18a98">Estimate</span></p></td><td class="cl-78c1ce68"><p class="cl-78c1983a"><span class="cl-78c18a98">Standard Error</span></p></td><td class="cl-78c1ce55"><p class="cl-78c1983a"><span class="cl-78c18a98">t value</span></p></td><td class="cl-78c1ce5e"><p class="cl-78c1983a"><span class="cl-78c18a98">Pr(&gt;|t|)</span></p></td><td class="cl-78c1ce54"><p class="cl-78c19826"><span class="cl-78c18a98"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-78c1cd5a"><p class="cl-78c19826"><span class="cl-78c18a98">(Intercept)</span></p></td><td class="cl-78c1cd3c"><p class="cl-78c1983a"><span class="cl-78c18a98">276.561</span></p></td><td class="cl-78c1cd1e"><p class="cl-78c1983a"><span class="cl-78c18a98">1.565</span></p></td><td class="cl-78c1cd46"><p class="cl-78c1983a"><span class="cl-78c18a98">176.680</span></p></td><td class="cl-78c1cd5b"><p class="cl-78c1983a"><span class="cl-78c18a98">0.0000</span></p></td><td class="cl-78c1cd50"><p class="cl-78c19826"><span class="cl-78c18a98">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78c1cd96"><p class="cl-78c19826"><span class="cl-78c18a98">job_lvl_cntrd</span></p></td><td class="cl-78c1cd8c"><p class="cl-78c1983a"><span class="cl-78c18a98">34.043</span></p></td><td class="cl-78c1cd82"><p class="cl-78c1983a"><span class="cl-78c18a98">2.406</span></p></td><td class="cl-78c1cd6e"><p class="cl-78c1983a"><span class="cl-78c18a98">14.146</span></p></td><td class="cl-78c1cd6f"><p class="cl-78c1983a"><span class="cl-78c18a98">0.0000</span></p></td><td class="cl-78c1cd78"><p class="cl-78c19826"><span class="cl-78c18a98">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78c1cda0"><p class="cl-78c19826"><span class="cl-78c18a98">org_tenure_cntrd</span></p></td><td class="cl-78c1cd97"><p class="cl-78c1983a"><span class="cl-78c18a98">7.262</span></p></td><td class="cl-78c1cdb4"><p class="cl-78c1983a"><span class="cl-78c18a98">0.379</span></p></td><td class="cl-78c1cdbe"><p class="cl-78c1983a"><span class="cl-78c18a98">19.165</span></p></td><td class="cl-78c1cdb5"><p class="cl-78c1983a"><span class="cl-78c18a98">0.0000</span></p></td><td class="cl-78c1cdaa"><p class="cl-78c19826"><span class="cl-78c18a98">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-78c1cddc"><p class="cl-78c19826"><span class="cl-78c18a98">job_lvl_cntrd:org_tenure_cntrd</span></p></td><td class="cl-78c1cdd3"><p class="cl-78c1983a"><span class="cl-78c18a98">-2.514</span></p></td><td class="cl-78c1cde7"><p class="cl-78c1983a"><span class="cl-78c18a98">0.300</span></p></td><td class="cl-78c1cdc8"><p class="cl-78c1983a"><span class="cl-78c18a98">-8.393</span></p></td><td class="cl-78c1cde6"><p class="cl-78c1983a"><span class="cl-78c18a98">0.0000</span></p></td><td class="cl-78c1cdd2"><p class="cl-78c19826"><span class="cl-78c18a98">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78c1ce0f"><p class="cl-78c1983a"><span class="cl-78c18ab6">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78c1ce23"><p class="cl-78c19826"><span class="cl-78c18a98"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78c1ce23"><p class="cl-78c19826"><span class="cl-78c18a98">Residual standard error: 29.4 on 405 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78c1ce23"><p class="cl-78c19826"><span class="cl-78c18a98">Multiple R-squared: 0.7412, Adjusted R-squared: 0.7393</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-78c1ce23"><p class="cl-78c19826"><span class="cl-78c18a98">F-statistic: 386.6 on 405 and 3 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="a3944859-0534-4dd2-9352-6c9297a7fb8a"></div>
<script>
var dest = document.getElementById("a3944859-0534-4dd2-9352-6c9297a7fb8a");
var template = document.getElementById("9da53f0a-11d8-4643-b902-cf3524a50d3c");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce VIF for centered variables</span></span>
<span id="cb362-2"><a href="#cb362-2" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">vif</span>(mlm.fit.int)</span></code></pre></div>
<pre><code>##                  job_lvl_cntrd               org_tenure_cntrd 
##                       1.397803                       1.773279 
## job_lvl_cntrd:org_tenure_cntrd 
##                       1.337702</code></pre>
<p>After centering the variables, <span class="math inline">\(VIF\)</span> is well beneath the threshold of 5.</p>
<p>Comparing Figure @ref(fig:mlm-int) to Figure @ref(fig:mlm-int-cntrd), we can observe that the main effects for <code>job_lvl</code> and <code>org_tenure</code> are inflated – and population parameter estimates less precise (larger <span class="math inline">\(SE\)</span>) – when high collinearity is present.</p>
<p>To better understand the nature of the interaction effect (<span class="math inline">\(\beta\)</span> = -2.51, <span class="math inline">\(t\)</span>(405) = -8.39, <span class="math inline">\(p\)</span> &lt; .001), two equations can be built to evaluate changes in the slope of the relationship with high (<span class="math inline">\(\bar{x}\)</span> + 1<span class="math inline">\(s\)</span>) and low (<span class="math inline">\(\bar{x}\)</span> - 1<span class="math inline">\(s\)</span>) organization tenure:</p>
<ul>
<li><em>High organization tenure</em>: <span class="math inline">\(Y = -2.51 (6.57 + 5.12)X + 276.56\)</span></li>
<li><em>Low organization tenure</em>: <span class="math inline">\(Y = -2.51 (6.57 - 5.12)X + 276.56,\)</span></li>
</ul>
<p>where 6.57 is <code>mean(data$org_tenure)</code>, 5.12 is <code>sd(data$org_tenure)</code>, and <span class="math inline">\(X\)</span> is a vector of values for <code>job_lvl</code>.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/int-effects-1.png" alt="Regression of square root transformed YTD sales onto job level x organization tenure interaction term. High organization tenure (red line): Y = -2.51 (6.57 + 5.12)X + 276.56. Low organization tenure (blue line): Y = -2.51 (6.57 - 5.12)X + 276.56." width="100%" />
<p class="caption">
(#fig:int-effects)Regression of square root transformed YTD sales onto job level x organization tenure interaction term. High organization tenure (red line): Y = -2.51 (6.57 + 5.12)X + 276.56. Low organization tenure (blue line): Y = -2.51 (6.57 - 5.12)X + 276.56.
</p>
</div>
<p>As shown in Figure @ref(fig:int-effects), the slope of both regression lines is negative. However, the drop in sales is much more significant as job level increases for those with high (<span class="math inline">\(\bar{x} + 1s\)</span>) organization tenure relative to those with low (<span class="math inline">\(\bar{x} - 1s\)</span>) organization tenure. Perhaps those with longer tenure in the organization gain additional responsibilities beyond selling (e.g., mentoring junior salespeople) as they are promoted into higher job levels.</p>
</div>
<div id="mediation" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> Mediation</h2>
<p>As discussed in Chapter @ref(measure-sampl), mediating variables may fully or partially mediate the relationship between a predictor and response. Full mediation indicates that the mediator fully explains the effect; in other words, without the mediator in the model, there is no relationship between an IV and DV. Partial mediation indicates that the mediator partially explains the effect; that is, there is still a relationship between an IV and DV without the mediator in the model.</p>
<p>Baron and Kenny’s (1986) four-step approach involves several regression analyses to examine paths a, b, and c shown in Figure @ref(fig:med-paths).</p>
<div class="figure" style="text-align: center">
<img src="graphics/mediation_paths.png" alt="Paths for mediation analysis" width="75%" />
<p class="caption">
(#fig:med-paths)Paths for mediation analysis
</p>
</div>
<ul>
<li><strong>Step 1:</strong> Fit a simple linear regression model with <span class="math inline">\(X\)</span> predicting <span class="math inline">\(Y\)</span> (path c), <span class="math inline">\(Y = \beta_0 + \beta_1 X + \epsilon\)</span>.</li>
<li><strong>Step 2:</strong> Fit a simple linear regression model with <span class="math inline">\(X\)</span> predicting <span class="math inline">\(M\)</span> (path a), <span class="math inline">\(M = \beta_0 + \beta_1 X + \epsilon\)</span>.</li>
<li><strong>Step 3:</strong> Fit a simple linear regression model with <span class="math inline">\(M\)</span> predicting <span class="math inline">\(Y\)</span> (path b), <span class="math inline">\(Y = \beta_0 + \beta_1 M + \epsilon\)</span>.</li>
<li><strong>Step 4:</strong> Fit a multiple linear regression model with <span class="math inline">\(X\)</span> and <span class="math inline">\(M\)</span> predicting <span class="math inline">\(Y\)</span> (paths b and c), <span class="math inline">\(Y = \beta_0 + \beta_1 X + \beta_2 M + \epsilon\)</span>.</li>
</ul>
<p>The purpose of Steps 1-3 is to determine if zero-order relationships exist. If one or more of these relationships is nonsignificant, mediation is unlikely – though not impossible. Mediation exists if the relationship between <span class="math inline">\(M\)</span> and <span class="math inline">\(Y\)</span> (path b) remains significant after controlling for <span class="math inline">\(X\)</span> in Step 4. If <span class="math inline">\(X\)</span> is no longer significant in Step 4, support for full mediation exists; if <span class="math inline">\(X\)</span> remains significant, support for partial mediation exists.</p>
<p>Let’s illustrate the implementation of this approach in R by testing the following hypothesis: Job level mediates the relationship between education level and YTD sales. Stated differently, the relationship between job level and YTD sales exists because those with more education tend to have higher job levels, and those in higher job levels tend to have stronger sales performance.</p>
<template id="b74e1d2e-5a73-4703-951b-d10de91b556d"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7922cc4a{}.cl-791d64a8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-791d64c6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-791d74fc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-791d751a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-791dab7a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dab8e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dab98{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791daba2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791daba3{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabac{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabc0{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabca{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabcb{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabd4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabde{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabe8{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabf2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dabfc{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac06{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac10{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac1a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac24{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac2e{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac38{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac42{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac4c{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac56{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac60{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-791dac6a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7922cc4a'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-791dac4c"><p class="cl-791d74fc"><span class="cl-791d64a8"></span></p></td><td class="cl-791dac42"><p class="cl-791d751a"><span class="cl-791d64a8">Estimate</span></p></td><td class="cl-791dac6a"><p class="cl-791d751a"><span class="cl-791d64a8">Standard Error</span></p></td><td class="cl-791dac56"><p class="cl-791d751a"><span class="cl-791d64a8">t value</span></p></td><td class="cl-791dac56"><p class="cl-791d751a"><span class="cl-791d64a8">Pr(&gt;|t|)</span></p></td><td class="cl-791dac60"><p class="cl-791d74fc"><span class="cl-791d64a8"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-791daba3"><p class="cl-791d74fc"><span class="cl-791d64a8">(Intercept)</span></p></td><td class="cl-791daba2"><p class="cl-791d751a"><span class="cl-791d64a8">245.229</span></p></td><td class="cl-791dab7a"><p class="cl-791d751a"><span class="cl-791d64a8">8.472</span></p></td><td class="cl-791dab98"><p class="cl-791d751a"><span class="cl-791d64a8">28.945</span></p></td><td class="cl-791dab98"><p class="cl-791d751a"><span class="cl-791d64a8">0.0000</span></p></td><td class="cl-791dab8e"><p class="cl-791d74fc"><span class="cl-791d64a8">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-791dabcb"><p class="cl-791d74fc"><span class="cl-791d64a8">ed_lvl</span></p></td><td class="cl-791dabd4"><p class="cl-791d751a"><span class="cl-791d64a8">9.072</span></p></td><td class="cl-791dabac"><p class="cl-791d751a"><span class="cl-791d64a8">2.740</span></p></td><td class="cl-791dabc0"><p class="cl-791d751a"><span class="cl-791d64a8">3.311</span></p></td><td class="cl-791dabc0"><p class="cl-791d751a"><span class="cl-791d64a8">0.0010</span></p></td><td class="cl-791dabca"><p class="cl-791d74fc"><span class="cl-791d64a8"> **</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-791dabde"><p class="cl-791d751a"><span class="cl-791d64c6">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-791dac2e"><p class="cl-791d74fc"><span class="cl-791d64a8"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-791dac2e"><p class="cl-791d74fc"><span class="cl-791d64a8">Residual standard error: 56.89 on 407 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-791dac2e"><p class="cl-791d74fc"><span class="cl-791d64a8">Multiple R-squared: 0.02623, Adjusted R-squared: 0.02384</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-791dac2e"><p class="cl-791d74fc"><span class="cl-791d64a8">F-statistic: 10.96 on 407 and 1 DF, p-value: 0.0010</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="ed9e45fd-8082-4da0-9d56-6c1684742399"></div>
<script>
var dest = document.getElementById("ed9e45fd-8082-4da0-9d56-6c1684742399");
var template = document.getElementById("b74e1d2e-5a73-4703-951b-d10de91b556d");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="97cb6474-536e-40b2-8c6d-5cba862ecff0"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-795d10ee{}.cl-7957579e{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-795757bc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7957646e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-79576482{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7957952e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579542{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7957954c{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579556{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579560{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579561{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7957956a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579574{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7957957e{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579588{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579592{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579593{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7957959c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795a6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795b0{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795ba{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795c4{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795c5{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795ce{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795d8{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795e2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795ec{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795ed{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-795795f6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79579600{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-795d10ee'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-795795ec"><p class="cl-7957646e"><span class="cl-7957579e"></span></p></td><td class="cl-795795e2"><p class="cl-79576482"><span class="cl-7957579e">Estimate</span></p></td><td class="cl-79579600"><p class="cl-79576482"><span class="cl-7957579e">Standard Error</span></p></td><td class="cl-795795ed"><p class="cl-79576482"><span class="cl-7957579e">t value</span></p></td><td class="cl-795795ed"><p class="cl-79576482"><span class="cl-7957579e">Pr(&gt;|t|)</span></p></td><td class="cl-795795f6"><p class="cl-7957646e"><span class="cl-7957579e"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-79579560"><p class="cl-7957646e"><span class="cl-7957579e">(Intercept)</span></p></td><td class="cl-79579556"><p class="cl-79576482"><span class="cl-7957579e">1.747</span></p></td><td class="cl-7957952e"><p class="cl-79576482"><span class="cl-7957579e">0.105</span></p></td><td class="cl-7957954c"><p class="cl-79576482"><span class="cl-7957579e">16.605</span></p></td><td class="cl-7957954c"><p class="cl-79576482"><span class="cl-7957579e">0.0000</span></p></td><td class="cl-79579542"><p class="cl-7957646e"><span class="cl-7957579e">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7957957e"><p class="cl-7957646e"><span class="cl-7957579e">ed_lvl</span></p></td><td class="cl-79579588"><p class="cl-79576482"><span class="cl-7957579e">0.113</span></p></td><td class="cl-79579561"><p class="cl-79576482"><span class="cl-7957579e">0.034</span></p></td><td class="cl-7957956a"><p class="cl-79576482"><span class="cl-7957579e">3.311</span></p></td><td class="cl-7957956a"><p class="cl-79576482"><span class="cl-7957579e">0.0010</span></p></td><td class="cl-79579574"><p class="cl-7957646e"><span class="cl-7957579e"> **</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-79579592"><p class="cl-79576482"><span class="cl-795757bc">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-795795ce"><p class="cl-7957646e"><span class="cl-7957579e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-795795ce"><p class="cl-7957646e"><span class="cl-7957579e">Residual standard error: 0.7065 on 407 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-795795ce"><p class="cl-7957646e"><span class="cl-7957579e">Multiple R-squared: 0.02623, Adjusted R-squared: 0.02384</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-795795ce"><p class="cl-7957646e"><span class="cl-7957579e">F-statistic: 10.96 on 407 and 1 DF, p-value: 0.0010</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="4da82bdd-5fd6-49bc-a8d6-5e107479d56e"></div>
<script>
var dest = document.getElementById("4da82bdd-5fd6-49bc-a8d6-5e107479d56e");
var template = document.getElementById("97cb6474-536e-40b2-8c6d-5cba862ecff0");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="85858a50-ba4a-41b9-98e4-b5f5f36b6a04"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-79962942{}.cl-7990b994{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7990b9a8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7990c60a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7990c61e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7990faf8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb16{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb20{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb2a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb34{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb3e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb3f{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb48{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb52{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb5c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb5d{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb66{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb70{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb7a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb7b{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb84{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb8e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fb98{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fba2{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fbac{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fbad{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fbb6{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fbc0{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fbca{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7990fbd4{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-79962942'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7990fbb6"><p class="cl-7990c60a"><span class="cl-7990b994"></span></p></td><td class="cl-7990fbad"><p class="cl-7990c61e"><span class="cl-7990b994">Estimate</span></p></td><td class="cl-7990fbd4"><p class="cl-7990c61e"><span class="cl-7990b994">Standard Error</span></p></td><td class="cl-7990fbc0"><p class="cl-7990c61e"><span class="cl-7990b994">t value</span></p></td><td class="cl-7990fbc0"><p class="cl-7990c61e"><span class="cl-7990b994">Pr(&gt;|t|)</span></p></td><td class="cl-7990fbca"><p class="cl-7990c60a"><span class="cl-7990b994"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7990fb34"><p class="cl-7990c60a"><span class="cl-7990b994">(Intercept)</span></p></td><td class="cl-7990fb2a"><p class="cl-7990c61e"><span class="cl-7990b994">152.761</span></p></td><td class="cl-7990faf8"><p class="cl-7990c61e"><span class="cl-7990b994">6.156</span></p></td><td class="cl-7990fb20"><p class="cl-7990c61e"><span class="cl-7990b994">24.813</span></p></td><td class="cl-7990fb20"><p class="cl-7990c61e"><span class="cl-7990b994">0.0000</span></p></td><td class="cl-7990fb16"><p class="cl-7990c60a"><span class="cl-7990b994">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7990fb52"><p class="cl-7990c60a"><span class="cl-7990b994">job_lvl</span></p></td><td class="cl-7990fb5c"><p class="cl-7990c61e"><span class="cl-7990b994">57.294</span></p></td><td class="cl-7990fb3e"><p class="cl-7990c61e"><span class="cl-7990b994">2.804</span></p></td><td class="cl-7990fb3f"><p class="cl-7990c61e"><span class="cl-7990b994">20.430</span></p></td><td class="cl-7990fb3f"><p class="cl-7990c61e"><span class="cl-7990b994">0.0000</span></p></td><td class="cl-7990fb48"><p class="cl-7990c60a"><span class="cl-7990b994">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7990fb5d"><p class="cl-7990c61e"><span class="cl-7990b9a8">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7990fba2"><p class="cl-7990c60a"><span class="cl-7990b994"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7990fba2"><p class="cl-7990c60a"><span class="cl-7990b994">Residual standard error: 40.51 on 407 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7990fba2"><p class="cl-7990c60a"><span class="cl-7990b994">Multiple R-squared: 0.5063, Adjusted R-squared: 0.5051</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7990fba2"><p class="cl-7990c60a"><span class="cl-7990b994">F-statistic: 417.4 on 407 and 1 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="ef920c11-9619-4cd7-ba3a-e5ac323f245f"></div>
<script>
var dest = document.getElementById("ef920c11-9619-4cd7-ba3a-e5ac323f245f");
var template = document.getElementById("85858a50-ba4a-41b9-98e4-b5f5f36b6a04");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="ec896571-d98c-48fb-a32f-41b5cedb91a1"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-79d0d3c6{}.cl-79c8ed64{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-79c8ed82{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-79c8f9da{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-79c8f9ee{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-79c929c8{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c929dc{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c929e6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c929f0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c929f1{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c929fa{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a04{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a0e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a18{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a22{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a23{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a2c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a36{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a40{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a4a{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a54{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a5e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a68{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a72{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a7c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a7d{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a86{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a90{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a91{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92a9a{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92aa4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92aa5{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92aae{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92ab8{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-79c92ac2{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-79d0d3c6'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-79c92ac2"><p class="cl-79c8f9da"><span class="cl-79c8ed64"></span></p></td><td class="cl-79c92aa4"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">Estimate</span></p></td><td class="cl-79c92aae"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">Standard Error</span></p></td><td class="cl-79c92aa5"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">t value</span></p></td><td class="cl-79c92aa5"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">Pr(&gt;|t|)</span></p></td><td class="cl-79c92ab8"><p class="cl-79c8f9da"><span class="cl-79c8ed64"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-79c929c8"><p class="cl-79c8f9da"><span class="cl-79c8ed64">(Intercept)</span></p></td><td class="cl-79c929f0"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">146.220</span></p></td><td class="cl-79c929f1"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">7.805</span></p></td><td class="cl-79c929e6"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">18.734</span></p></td><td class="cl-79c929e6"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">0.0000</span></p></td><td class="cl-79c929dc"><p class="cl-79c8f9da"><span class="cl-79c8ed64">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-79c92a22"><p class="cl-79c8f9da"><span class="cl-79c8ed64">ed_lvl</span></p></td><td class="cl-79c92a04"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">2.688</span></p></td><td class="cl-79c92a18"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">1.975</span></p></td><td class="cl-79c929fa"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">1.361</span></p></td><td class="cl-79c929fa"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">0.1743</span></p></td><td class="cl-79c92a0e"><p class="cl-79c8f9da"><span class="cl-79c8ed64">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-79c92a4a"><p class="cl-79c8f9da"><span class="cl-79c8ed64">job_lvl</span></p></td><td class="cl-79c92a40"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">56.668</span></p></td><td class="cl-79c92a23"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">2.839</span></p></td><td class="cl-79c92a36"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">19.961</span></p></td><td class="cl-79c92a36"><p class="cl-79c8f9ee"><span class="cl-79c8ed64">0.0000</span></p></td><td class="cl-79c92a2c"><p class="cl-79c8f9da"><span class="cl-79c8ed64">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-79c92a72"><p class="cl-79c8f9ee"><span class="cl-79c8ed82">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-79c92a9a"><p class="cl-79c8f9da"><span class="cl-79c8ed64"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-79c92a9a"><p class="cl-79c8f9da"><span class="cl-79c8ed64">Residual standard error: 40.47 on 406 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-79c92a9a"><p class="cl-79c8f9da"><span class="cl-79c8ed64">Multiple R-squared: 0.5085, Adjusted R-squared: 0.5061</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-79c92a9a"><p class="cl-79c8f9da"><span class="cl-79c8ed64">F-statistic: 210 on 406 and 2 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="1842dd5d-8679-45ba-ab29-5d5dbad68988"></div>
<script>
var dest = document.getElementById("1842dd5d-8679-45ba-ab29-5d5dbad68988");
var template = document.getElementById("ec896571-d98c-48fb-a32f-41b5cedb91a1");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Output from these models show significant paths for Steps 1-3 but when adding both <code>ed_lvl</code> and <code>job_lvl</code> in the multiple regression model in Step 4, <code>ed_lvl</code> is no longer significant. Therefore, support for full mediation exists.</p>
</div>
<div id="review-questions-8" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What is Ordinary Least Squares (OLS) regression, and how does it work?</p></li>
<li><p>What assumptions must be satisifed to fit a linear model?</p></li>
<li><p>What does a statistically significant result for the Breusch-Pagan test indicate about linear model assumptions?</p></li>
<li><p>What does a statistically significant result for the Shapiro-Wilk test indicate about linear model assumptions?</p></li>
<li><p>In what ways can high collinearity among predictors impact the quality of model results?</p></li>
<li><p>When are outliers problematic for fitting a regression model?</p></li>
<li><p>How is unstandardized <span class="math inline">\(\beta\)</span> interpreted in the output of a linear model?</p></li>
<li><p>How does the delta between <span class="math inline">\(R^2\)</span> and Adjusted <span class="math inline">\(R^2\)</span> change as additional non-significant variables are included in a model?</p></li>
<li><p>How does the backward stepwise variable selection procedure work?</p></li>
<li><p>What is the purpose of interaction effects in a regression model?</p></li>
</ol>
<!--chapter:end:r/10_linear_regression.Rmd-->
</div>
</div>
<div id="lme" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Linear Model Extensions</h1>
<p>This chapter covers several techniques for expanding the linear regression framework covered in Chapter @ref(lm) to test hypotheses with more nuance and complexity.</p>
<div id="model-comparisons" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Model Comparisons</h2>
<p>Assuming it is warranted by the research objective, it is sometimes helpful to subset data and compare coefficients between models to determine how the strength of associations between predictors and the response compares between cohorts. This is a common approach in pay equity studies, as it clearly highlights differences in how a particular factor such as job level, job profile, or geography impacts compensation for male vs. female employees or across ethnic cohorts.</p>
<p>To illustrate, let’s fit a multiple linear regression model to understand drivers of YTD sales for salespeople with overtime relative to those without overtime.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb364-2"><a href="#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb364-3"><a href="#cb364-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-4"><a href="#cb364-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb364-5"><a href="#cb364-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb364-6"><a href="#cb364-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-7"><a href="#cb364-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset employees data frame; leads are only applicable for those in sales positions</span></span>
<span id="cb364-8"><a href="#cb364-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, job_title <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Sales Executive&#39;</span>, <span class="st">&#39;Sales Representative&#39;</span>))</span>
<span id="cb364-9"><a href="#cb364-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-10"><a href="#cb364-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Partition data into overtime and non-overtime groups</span></span>
<span id="cb364-11"><a href="#cb364-11" aria-hidden="true" tabindex="-1"></a>data_ot <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, overtime <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb364-12"><a href="#cb364-12" aria-hidden="true" tabindex="-1"></a>data_nonot <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, overtime <span class="sc">==</span> <span class="st">&#39;No&#39;</span>)</span>
<span id="cb364-13"><a href="#cb364-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-14"><a href="#cb364-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Regress transformed YTD sales on a combination of predictors for overtime and non-overtime groups</span></span>
<span id="cb364-15"><a href="#cb364-15" aria-hidden="true" tabindex="-1"></a>mlm.fit.ot <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">sqrt</span>(ytd_sales) <span class="sc">~</span> engagement <span class="sc">+</span> job_lvl <span class="sc">+</span> stock_opt_lvl <span class="sc">+</span> org_tenure, data_ot)</span>
<span id="cb364-16"><a href="#cb364-16" aria-hidden="true" tabindex="-1"></a>mlm.fit.nonot <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">sqrt</span>(ytd_sales) <span class="sc">~</span> engagement <span class="sc">+</span> job_lvl <span class="sc">+</span> stock_opt_lvl <span class="sc">+</span> org_tenure, data_nonot)</span></code></pre></div>
<template id="9659b50f-ad1c-469d-af60-2b3380c52c1e"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7a8f36ea{}.cl-7a893cea{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7a893cfe{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7a89499c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7a8949b0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7a897dae{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897dc2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897dcc{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897dd6{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897de0{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897dea{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897deb{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897df4{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897dfe{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e08{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e12{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e1c{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e26{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e30{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e3a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e44{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e4e{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e58{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e59{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e62{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e6c{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e80{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e8a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e8b{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e94{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897e9e{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897ea8{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897eb2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897ebc{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897ec6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897ed0{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897eda{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897ee4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897eee{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897ef8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f02{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f03{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f0c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f16{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f20{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f2a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f34{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f3e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f48{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f52{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f5c{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f66{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7a897f70{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7a8f36ea'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7a897f5c"><p class="cl-7a89499c"><span class="cl-7a893cea"></span></p></td><td class="cl-7a897f3e"><p class="cl-7a8949b0"><span class="cl-7a893cea">Estimate</span></p></td><td class="cl-7a897f52"><p class="cl-7a8949b0"><span class="cl-7a893cea">Standard Error</span></p></td><td class="cl-7a897f66"><p class="cl-7a8949b0"><span class="cl-7a893cea">t value</span></p></td><td class="cl-7a897f48"><p class="cl-7a8949b0"><span class="cl-7a893cea">Pr(&gt;|t|)</span></p></td><td class="cl-7a897f70"><p class="cl-7a89499c"><span class="cl-7a893cea"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7a897de0"><p class="cl-7a89499c"><span class="cl-7a893cea">(Intercept)</span></p></td><td class="cl-7a897dc2"><p class="cl-7a8949b0"><span class="cl-7a893cea">121.815</span></p></td><td class="cl-7a897dd6"><p class="cl-7a8949b0"><span class="cl-7a893cea">14.767</span></p></td><td class="cl-7a897dae"><p class="cl-7a8949b0"><span class="cl-7a893cea">8.249</span></p></td><td class="cl-7a897dea"><p class="cl-7a8949b0"><span class="cl-7a893cea">0.0000</span></p></td><td class="cl-7a897dcc"><p class="cl-7a89499c"><span class="cl-7a893cea">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7a897e1c"><p class="cl-7a89499c"><span class="cl-7a893cea">engagement</span></p></td><td class="cl-7a897dfe"><p class="cl-7a8949b0"><span class="cl-7a893cea">13.171</span></p></td><td class="cl-7a897df4"><p class="cl-7a8949b0"><span class="cl-7a893cea">4.569</span></p></td><td class="cl-7a897e12"><p class="cl-7a8949b0"><span class="cl-7a893cea">2.883</span></p></td><td class="cl-7a897e08"><p class="cl-7a8949b0"><span class="cl-7a893cea">0.0047</span></p></td><td class="cl-7a897deb"><p class="cl-7a89499c"><span class="cl-7a893cea"> **</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7a897e4e"><p class="cl-7a89499c"><span class="cl-7a893cea">job_lvl</span></p></td><td class="cl-7a897e44"><p class="cl-7a8949b0"><span class="cl-7a893cea">35.983</span></p></td><td class="cl-7a897e30"><p class="cl-7a8949b0"><span class="cl-7a893cea">4.754</span></p></td><td class="cl-7a897e26"><p class="cl-7a8949b0"><span class="cl-7a893cea">7.570</span></p></td><td class="cl-7a897e3a"><p class="cl-7a8949b0"><span class="cl-7a893cea">0.0000</span></p></td><td class="cl-7a897e58"><p class="cl-7a89499c"><span class="cl-7a893cea">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7a897e6c"><p class="cl-7a89499c"><span class="cl-7a893cea">stock_opt_lvl</span></p></td><td class="cl-7a897e59"><p class="cl-7a8949b0"><span class="cl-7a893cea">7.139</span></p></td><td class="cl-7a897e8b"><p class="cl-7a8949b0"><span class="cl-7a893cea">3.342</span></p></td><td class="cl-7a897e80"><p class="cl-7a8949b0"><span class="cl-7a893cea">2.136</span></p></td><td class="cl-7a897e8a"><p class="cl-7a8949b0"><span class="cl-7a893cea">0.0348</span></p></td><td class="cl-7a897e62"><p class="cl-7a89499c"><span class="cl-7a893cea">  *</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7a897e94"><p class="cl-7a89499c"><span class="cl-7a893cea">org_tenure</span></p></td><td class="cl-7a897eb2"><p class="cl-7a8949b0"><span class="cl-7a893cea">5.369</span></p></td><td class="cl-7a897ebc"><p class="cl-7a8949b0"><span class="cl-7a893cea">0.722</span></p></td><td class="cl-7a897e9e"><p class="cl-7a8949b0"><span class="cl-7a893cea">7.437</span></p></td><td class="cl-7a897ec6"><p class="cl-7a8949b0"><span class="cl-7a893cea">0.0000</span></p></td><td class="cl-7a897ea8"><p class="cl-7a89499c"><span class="cl-7a893cea">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7a897eda"><p class="cl-7a8949b0"><span class="cl-7a893cfe">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7a897f34"><p class="cl-7a89499c"><span class="cl-7a893cea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7a897f34"><p class="cl-7a89499c"><span class="cl-7a893cea">Residual standard error: 32.78 on 113 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7a897f34"><p class="cl-7a89499c"><span class="cl-7a893cea">Multiple R-squared: 0.688, Adjusted R-squared: 0.6769</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7a897f34"><p class="cl-7a89499c"><span class="cl-7a893cea">F-statistic: 62.29 on 113 and 4 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="bc6fc16e-00d6-430b-9c57-cfaf596d0a67"></div>
<script>
var dest = document.getElementById("bc6fc16e-00d6-430b-9c57-cfaf596d0a67");
var template = document.getElementById("9659b50f-ad1c-469d-af60-2b3380c52c1e");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="ec9315e8-19d1-4367-a29a-3fb6ba2fe460"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7aca09c8{}.cl-7ac2546c{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7ac25480{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7ac261b4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7ac261c8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7ac29a4e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a62{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a6c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a76{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a80{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a8a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a94{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29a9e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29aa8{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29ab2{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29abc{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29ac6{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29ad0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29ada{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29adb{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29ae4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29aee{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29af8{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29af9{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b02{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b0c{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b16{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b17{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b20{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b2a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b34{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b3e{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b48{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b52{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b5c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b66{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b67{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b70{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b7a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b84{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b8e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b98{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29b99{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29ba2{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ac29bac{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7aca09c8'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7ac29ba2"><p class="cl-7ac261b4"><span class="cl-7ac2546c"></span></p></td><td class="cl-7ac29b8e"><p class="cl-7ac261c8"><span class="cl-7ac2546c">Estimate</span></p></td><td class="cl-7ac29b99"><p class="cl-7ac261c8"><span class="cl-7ac2546c">Standard Error</span></p></td><td class="cl-7ac29b98"><p class="cl-7ac261c8"><span class="cl-7ac2546c">t value</span></p></td><td class="cl-7ac29b98"><p class="cl-7ac261c8"><span class="cl-7ac2546c">Pr(&gt;|t|)</span></p></td><td class="cl-7ac29bac"><p class="cl-7ac261b4"><span class="cl-7ac2546c"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7ac29a80"><p class="cl-7ac261b4"><span class="cl-7ac2546c">(Intercept)</span></p></td><td class="cl-7ac29a62"><p class="cl-7ac261c8"><span class="cl-7ac2546c">132.339</span></p></td><td class="cl-7ac29a76"><p class="cl-7ac261c8"><span class="cl-7ac2546c">8.669</span></p></td><td class="cl-7ac29a4e"><p class="cl-7ac261c8"><span class="cl-7ac2546c">15.265</span></p></td><td class="cl-7ac29a4e"><p class="cl-7ac261c8"><span class="cl-7ac2546c">0.0000</span></p></td><td class="cl-7ac29a6c"><p class="cl-7ac261b4"><span class="cl-7ac2546c">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ac29ab2"><p class="cl-7ac261b4"><span class="cl-7ac2546c">engagement</span></p></td><td class="cl-7ac29a9e"><p class="cl-7ac261c8"><span class="cl-7ac2546c">9.852</span></p></td><td class="cl-7ac29a94"><p class="cl-7ac261c8"><span class="cl-7ac2546c">2.472</span></p></td><td class="cl-7ac29aa8"><p class="cl-7ac261c8"><span class="cl-7ac2546c">3.985</span></p></td><td class="cl-7ac29aa8"><p class="cl-7ac261c8"><span class="cl-7ac2546c">0.0001</span></p></td><td class="cl-7ac29a8a"><p class="cl-7ac261b4"><span class="cl-7ac2546c">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ac29ada"><p class="cl-7ac261b4"><span class="cl-7ac2546c">job_lvl</span></p></td><td class="cl-7ac29ad0"><p class="cl-7ac261c8"><span class="cl-7ac2546c">33.140</span></p></td><td class="cl-7ac29ac6"><p class="cl-7ac261c8"><span class="cl-7ac2546c">3.001</span></p></td><td class="cl-7ac29abc"><p class="cl-7ac261c8"><span class="cl-7ac2546c">11.042</span></p></td><td class="cl-7ac29abc"><p class="cl-7ac261c8"><span class="cl-7ac2546c">0.0000</span></p></td><td class="cl-7ac29adb"><p class="cl-7ac261b4"><span class="cl-7ac2546c">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ac29af8"><p class="cl-7ac261b4"><span class="cl-7ac2546c">stock_opt_lvl</span></p></td><td class="cl-7ac29ae4"><p class="cl-7ac261c8"><span class="cl-7ac2546c">4.638</span></p></td><td class="cl-7ac29b02"><p class="cl-7ac261c8"><span class="cl-7ac2546c">2.159</span></p></td><td class="cl-7ac29af9"><p class="cl-7ac261c8"><span class="cl-7ac2546c">2.148</span></p></td><td class="cl-7ac29af9"><p class="cl-7ac261c8"><span class="cl-7ac2546c">0.0325</span></p></td><td class="cl-7ac29aee"><p class="cl-7ac261b4"><span class="cl-7ac2546c">  *</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ac29b0c"><p class="cl-7ac261b4"><span class="cl-7ac2546c">org_tenure</span></p></td><td class="cl-7ac29b20"><p class="cl-7ac261c8"><span class="cl-7ac2546c">6.043</span></p></td><td class="cl-7ac29b2a"><p class="cl-7ac261c8"><span class="cl-7ac2546c">0.404</span></p></td><td class="cl-7ac29b16"><p class="cl-7ac261c8"><span class="cl-7ac2546c">14.964</span></p></td><td class="cl-7ac29b16"><p class="cl-7ac261c8"><span class="cl-7ac2546c">0.0000</span></p></td><td class="cl-7ac29b17"><p class="cl-7ac261b4"><span class="cl-7ac2546c">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ac29b3e"><p class="cl-7ac261c8"><span class="cl-7ac25480">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ac29b84"><p class="cl-7ac261b4"><span class="cl-7ac2546c"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ac29b84"><p class="cl-7ac261b4"><span class="cl-7ac2546c">Residual standard error: 29.98 on 286 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ac29b84"><p class="cl-7ac261b4"><span class="cl-7ac2546c">Multiple R-squared: 0.7332, Adjusted R-squared: 0.7295</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ac29b84"><p class="cl-7ac261b4"><span class="cl-7ac2546c">F-statistic: 196.5 on 286 and 4 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="cb482a45-afd3-4f63-b614-9216edbf659f"></div>
<script>
var dest = document.getElementById("cb482a45-afd3-4f63-b614-9216edbf659f");
var template = document.getElementById("ec9315e8-19d1-4367-a29a-3fb6ba2fe460");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Since we are comparing two models, we need not scale the variables since comparing a specific predictor’s relationship with the response in the overtime model can be juxtaposed against the same predictor in the non-overtime model using the original units of measurement.</p>
<p>Based on the output shown in figures in Figure @ref(fig:mlm-ot) and in Figure @ref(fig:mlm-nonot), the model for salespeople who worked overtime explains more variance in square root transformed <code>ytd_sales</code> (<span class="math inline">\(R^2\)</span> = .73) relative to the model for salespeople without overtime (<span class="math inline">\(R^2\)</span> = .69).</p>
<p>We can see that <code>engagement</code> has a larger effect on the transformed response among salespeople who worked overtime (<span class="math inline">\(\beta\)</span> = 13.17, <span class="math inline">\(t\)</span>(113) = 2.88, <span class="math inline">\(p\)</span> &lt; .01) relative to those who worked no overtime (<span class="math inline">\(\beta\)</span> = 9.85, <span class="math inline">\(t\)</span>(286) = 3.99, <span class="math inline">\(p\)</span> &lt; .001). In addition, <code>job_lvl</code> has a stronger association with the response in the overtime group (<span class="math inline">\(\beta\)</span> = 35.98, <span class="math inline">\(t\)</span>(113) = 7.57, <span class="math inline">\(p\)</span> &lt; .01) relative to the non-overtime group (<span class="math inline">\(\beta\)</span> = 33.14, <span class="math inline">\(t\)</span>(286) = 11.04, <span class="math inline">\(p\)</span> &lt; .001). Given that the intercept (average square root of <code>ytd_sales</code> when the values of all predictors are set to 0) is higher for the non-overtime group (<span class="math inline">\(\beta\)</span> = 132.34, <span class="math inline">\(t\)</span>(286) = 15.27, <span class="math inline">\(p\)</span> &lt; .001) than for the overtime group (<span class="math inline">\(\beta\)</span> = 121.82, <span class="math inline">\(t\)</span>(113) = 8.25, <span class="math inline">\(p\)</span> &lt; .001), differences in the coefficients on <code>job_lvl</code> may indicate that one’s job level is a proxy for skill and capacity to sell more in fewer hours.</p>
</div>
<div id="hierarchical-regression" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Hierarchical Regression</h2>
<p>A multiple model approach can also be useful for understanding the incremental value a given variable – or set of variables – provides above and beyond a set of control variables. <strong>Hierarchical regression</strong> is a method by which variables are added to the model in steps and changes in model statistics are evaluated after each step. Let’s use hierarchical regression to test the hypothesis below.</p>
<p><strong>H1:</strong> Among salespeople who work overtime, engagement has a significant positive relationship with YTD sales after controlling for job level, stock option level, and organization tenure.</p>
<template id="c6012862-d1e1-4ec2-8961-bd2699d9b377"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7b01818c{}.cl-7afbc274{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7afbc292{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7afbd818{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7afbd82c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7afc0e6e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0e8c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0e96{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0ea0{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0eaa{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0eb4{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0ebe{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0ec8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0ed2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0edc{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0edd{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0ee6{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0ef0{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0efa{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f04{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f0e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f0f{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f22{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f23{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f2c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f40{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f41{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f4a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f54{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f5e{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f5f{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f68{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f72{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f73{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f7c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f86{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f90{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f91{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0f9a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7afc0fa4{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7b01818c'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7afc0fa4"><p class="cl-7afbd818"><span class="cl-7afbc274"></span></p></td><td class="cl-7afc0f86"><p class="cl-7afbd82c"><span class="cl-7afbc274">Estimate</span></p></td><td class="cl-7afc0f9a"><p class="cl-7afbd82c"><span class="cl-7afbc274">Standard Error</span></p></td><td class="cl-7afc0f91"><p class="cl-7afbd82c"><span class="cl-7afbc274">t value</span></p></td><td class="cl-7afc0f91"><p class="cl-7afbd82c"><span class="cl-7afbc274">Pr(&gt;|t|)</span></p></td><td class="cl-7afc0f90"><p class="cl-7afbd818"><span class="cl-7afbc274"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7afc0eaa"><p class="cl-7afbd818"><span class="cl-7afbc274">(Intercept)</span></p></td><td class="cl-7afc0e8c"><p class="cl-7afbd82c"><span class="cl-7afbc274">154.697</span></p></td><td class="cl-7afc0e6e"><p class="cl-7afbd82c"><span class="cl-7afbc274">9.676</span></p></td><td class="cl-7afc0e96"><p class="cl-7afbd82c"><span class="cl-7afbc274">15.988</span></p></td><td class="cl-7afc0e96"><p class="cl-7afbd82c"><span class="cl-7afbc274">0.0000</span></p></td><td class="cl-7afc0ea0"><p class="cl-7afbd818"><span class="cl-7afbc274">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7afc0edc"><p class="cl-7afbd818"><span class="cl-7afbc274">job_lvl</span></p></td><td class="cl-7afc0ed2"><p class="cl-7afbd82c"><span class="cl-7afbc274">37.572</span></p></td><td class="cl-7afc0ec8"><p class="cl-7afbd82c"><span class="cl-7afbc274">4.871</span></p></td><td class="cl-7afc0eb4"><p class="cl-7afbd82c"><span class="cl-7afbc274">7.714</span></p></td><td class="cl-7afc0eb4"><p class="cl-7afbd82c"><span class="cl-7afbc274">0.0000</span></p></td><td class="cl-7afc0ebe"><p class="cl-7afbd818"><span class="cl-7afbc274">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7afc0ee6"><p class="cl-7afbd818"><span class="cl-7afbc274">stock_opt_lvl</span></p></td><td class="cl-7afc0edd"><p class="cl-7afbd82c"><span class="cl-7afbc274">5.240</span></p></td><td class="cl-7afc0efa"><p class="cl-7afbd82c"><span class="cl-7afbc274">3.379</span></p></td><td class="cl-7afc0f04"><p class="cl-7afbd82c"><span class="cl-7afbc274">1.550</span></p></td><td class="cl-7afc0f04"><p class="cl-7afbd82c"><span class="cl-7afbc274">0.1238</span></p></td><td class="cl-7afc0ef0"><p class="cl-7afbd818"><span class="cl-7afbc274">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7afc0f23"><p class="cl-7afbd818"><span class="cl-7afbc274">org_tenure</span></p></td><td class="cl-7afc0f22"><p class="cl-7afbd82c"><span class="cl-7afbc274">5.493</span></p></td><td class="cl-7afc0f2c"><p class="cl-7afbd82c"><span class="cl-7afbc274">0.743</span></p></td><td class="cl-7afc0f0e"><p class="cl-7afbd82c"><span class="cl-7afbc274">7.389</span></p></td><td class="cl-7afc0f0e"><p class="cl-7afbd82c"><span class="cl-7afbc274">0.0000</span></p></td><td class="cl-7afc0f0f"><p class="cl-7afbd818"><span class="cl-7afbc274">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7afc0f5e"><p class="cl-7afbd82c"><span class="cl-7afbc292">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7afc0f72"><p class="cl-7afbd818"><span class="cl-7afbc274"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7afc0f72"><p class="cl-7afbd818"><span class="cl-7afbc274">Residual standard error: 33.81 on 114 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7afc0f72"><p class="cl-7afbd818"><span class="cl-7afbc274">Multiple R-squared: 0.665, Adjusted R-squared: 0.6562</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7afc0f72"><p class="cl-7afbd818"><span class="cl-7afbc274">F-statistic: 75.44 on 114 and 3 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="99ae6fad-15df-400a-bba1-34609b62e599"></div>
<script>
var dest = document.getElementById("99ae6fad-15df-400a-bba1-34609b62e599");
var template = document.getElementById("c6012862-d1e1-4ec2-8961-bd2699d9b377");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="337f4741-fec5-4883-874d-89e8c4fb8c28"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7b3f64ac{}.cl-7b377c1a{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b377c38{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b3788b8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b3788cc{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b37c102{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c116{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c12a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c134{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c13e{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c13f{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c152{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c15c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c15d{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c166{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c170{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c17a{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c184{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c18e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c198{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1a2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1ac{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1b6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1c0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1c1{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1ca{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1d4{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1de{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1e8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1f2{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c1fc{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c206{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c210{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c21a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c224{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c22e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c238{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c242{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c24c{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c256{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c257{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c26a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c26b{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c274{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c27e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c288{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c292{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c29c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c2a6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c2a7{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c2b0{width:84.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c2ba{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b37c2c4{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7b3f64ac'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7b37c2b0"><p class="cl-7b3788b8"><span class="cl-7b377c1a"></span></p></td><td class="cl-7b37c29c"><p class="cl-7b3788cc"><span class="cl-7b377c1a">Estimate</span></p></td><td class="cl-7b37c2a7"><p class="cl-7b3788cc"><span class="cl-7b377c1a">Standard Error</span></p></td><td class="cl-7b37c2ba"><p class="cl-7b3788cc"><span class="cl-7b377c1a">t value</span></p></td><td class="cl-7b37c2a6"><p class="cl-7b3788cc"><span class="cl-7b377c1a">Pr(&gt;|t|)</span></p></td><td class="cl-7b37c2c4"><p class="cl-7b3788b8"><span class="cl-7b377c1a"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7b37c13e"><p class="cl-7b3788b8"><span class="cl-7b377c1a">(Intercept)</span></p></td><td class="cl-7b37c116"><p class="cl-7b3788cc"><span class="cl-7b377c1a">121.815</span></p></td><td class="cl-7b37c134"><p class="cl-7b3788cc"><span class="cl-7b377c1a">14.767</span></p></td><td class="cl-7b37c102"><p class="cl-7b3788cc"><span class="cl-7b377c1a">8.249</span></p></td><td class="cl-7b37c13f"><p class="cl-7b3788cc"><span class="cl-7b377c1a">0.0000</span></p></td><td class="cl-7b37c12a"><p class="cl-7b3788b8"><span class="cl-7b377c1a">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b37c17a"><p class="cl-7b3788b8"><span class="cl-7b377c1a">engagement</span></p></td><td class="cl-7b37c15d"><p class="cl-7b3788cc"><span class="cl-7b377c1a">13.171</span></p></td><td class="cl-7b37c15c"><p class="cl-7b3788cc"><span class="cl-7b377c1a">4.569</span></p></td><td class="cl-7b37c170"><p class="cl-7b3788cc"><span class="cl-7b377c1a">2.883</span></p></td><td class="cl-7b37c166"><p class="cl-7b3788cc"><span class="cl-7b377c1a">0.0047</span></p></td><td class="cl-7b37c152"><p class="cl-7b3788b8"><span class="cl-7b377c1a"> **</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b37c1ac"><p class="cl-7b3788b8"><span class="cl-7b377c1a">job_lvl</span></p></td><td class="cl-7b37c1a2"><p class="cl-7b3788cc"><span class="cl-7b377c1a">35.983</span></p></td><td class="cl-7b37c18e"><p class="cl-7b3788cc"><span class="cl-7b377c1a">4.754</span></p></td><td class="cl-7b37c184"><p class="cl-7b3788cc"><span class="cl-7b377c1a">7.570</span></p></td><td class="cl-7b37c198"><p class="cl-7b3788cc"><span class="cl-7b377c1a">0.0000</span></p></td><td class="cl-7b37c1b6"><p class="cl-7b3788b8"><span class="cl-7b377c1a">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b37c1ca"><p class="cl-7b3788b8"><span class="cl-7b377c1a">stock_opt_lvl</span></p></td><td class="cl-7b37c1c0"><p class="cl-7b3788cc"><span class="cl-7b377c1a">7.139</span></p></td><td class="cl-7b37c1e8"><p class="cl-7b3788cc"><span class="cl-7b377c1a">3.342</span></p></td><td class="cl-7b37c1d4"><p class="cl-7b3788cc"><span class="cl-7b377c1a">2.136</span></p></td><td class="cl-7b37c1de"><p class="cl-7b3788cc"><span class="cl-7b377c1a">0.0348</span></p></td><td class="cl-7b37c1c1"><p class="cl-7b3788b8"><span class="cl-7b377c1a">  *</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b37c1f2"><p class="cl-7b3788b8"><span class="cl-7b377c1a">org_tenure</span></p></td><td class="cl-7b37c210"><p class="cl-7b3788cc"><span class="cl-7b377c1a">5.369</span></p></td><td class="cl-7b37c21a"><p class="cl-7b3788cc"><span class="cl-7b377c1a">0.722</span></p></td><td class="cl-7b37c1fc"><p class="cl-7b3788cc"><span class="cl-7b377c1a">7.437</span></p></td><td class="cl-7b37c224"><p class="cl-7b3788cc"><span class="cl-7b377c1a">0.0000</span></p></td><td class="cl-7b37c206"><p class="cl-7b3788b8"><span class="cl-7b377c1a">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7b37c238"><p class="cl-7b3788cc"><span class="cl-7b377c38">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7b37c292"><p class="cl-7b3788b8"><span class="cl-7b377c1a"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7b37c292"><p class="cl-7b3788b8"><span class="cl-7b377c1a">Residual standard error: 32.78 on 113 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7b37c292"><p class="cl-7b3788b8"><span class="cl-7b377c1a">Multiple R-squared: 0.688, Adjusted R-squared: 0.6769</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7b37c292"><p class="cl-7b3788b8"><span class="cl-7b377c1a">F-statistic: 62.29 on 113 and 4 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="85d8834e-53fe-401c-919f-9eb9730fda22"></div>
<script>
var dest = document.getElementById("85d8834e-53fe-401c-919f-9eb9730fda22");
var template = document.getElementById("337f4741-fec5-4883-874d-89e8c4fb8c28");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Comparing Figure @ref(fig:hier-ctrl) to Figure @ref(fig:hier-main), we can determine that the addition of <code>engagement</code> to the control set explains an additional 2% of the variance in YTD sales (<span class="math inline">\(\Delta R^2 = .69 - .67 = .02\)</span>).</p>
<p>In addition, Figure @ref(fig:hier-ctrl) shows that without <code>engagement</code> in the model, <code>stock_opt_lvl</code> is not significant. This is a good reminder that regression does not examine bivariate relationships of each predictor with the response <em>independent of other variables</em>; rather, the relationships among all variables in the model impact which predictors emerge as having a statistical association with the response.</p>
</div>
<div id="multilevel-models" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Multilevel Models</h2>
<p>The models covered thus far have focused only on observation-level effects. That is, there has been an inherent assumption that predictor variables have <em>fixed</em> effects on the outcome and these effects do not vary based on group(s) to which the observations belong. These models are sometimes referred to as <strong>fixed effects</strong> models.</p>
<p>It is often the case, however, that the strength and nature of predictors’ effects on an outcome vary across categorical dimensions. For example, estimating the number of requisitions that can be filled by a Talent Acquisition team over a certain period may require inputs such as the number of recruiters and position backfill expectations based on attrition assumptions. However, the model should probably account for how these factors impact recruiter productivity at the intersections of group-level factors such as geography, job family, and job level as well. Estimates for recruiters focused on filling executive-level positions in geographies with a limited talent pool or fiercely competitive labor market will look quite different relative to recruiters focused on entry-level, low-skilled positions that are location agnostic. Failure to incorporate these group-level effects may result in inaccurate estimates or incorrectly concluding that variables are not significant in explaining why recruiters vary in the number of requisitions they can fill.</p>
<p>You may wonder how this concept is different from simply including dummy-coded variables in the model to reflect the groups to which individual observations belong. The difference is that the average value of <span class="math inline">\(Y\)</span> when all predictors are set to 0 – namely the <span class="math inline">\(Y\)</span>-intercept <span class="math inline">\(\beta_0\)</span> – does not vary by group with dummy-coded categorical variables. In a multilevel model, the intercept is <em>random</em> rather than <em>fixed</em> for each group. Group-level effects can also be modeled for select – or all – <span class="math inline">\(X\)</span> variables in addition to varying <span class="math inline">\(\beta_0\)</span> for each group.</p>
<p>Consider a linear model constructed to test hypothesized relationships of every <span class="math inline">\(X\)</span> variable with an outcome <span class="math inline">\(Y\)</span>. This is the equivalent of building <span class="math inline">\(G\)</span> independent models, where <span class="math inline">\(G\)</span> is the number of groups, using data subsetted for the respective group:</p>
<p><span class="math display">\[ Y_G = \beta_{G0} + \beta_{G1} X_1 + \beta_{G2} X_2 + {...} + \beta_{Gp} X_p + \epsilon \]</span></p>
<p>In this case, it is easy to consider wrapping the <code>lm()</code> function within a <code>for</code> loop that iterates through each <span class="math inline">\(G\)</span> group, filtering to each of the respective group’s data in turn. However, if we hypothesize that the effects of only <em>certain</em> variables depend on the <span class="math inline">\(G\)</span> group, we need to estimate both group-level <em>and</em> observation-level effects within the same model. A multilevel model featuring this mixture of fixed and random effects is known as a <strong>mixed effects</strong> model. This is also known as <strong>Hierarchical Linear Modeling (HLM)</strong>, which is materially different from Hierarchical Linear Regression (HLR) covered in the prior section, which compared nested regression models.</p>
<p>A model in which group-level effects are hypothesized for <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(X_1\)</span> and observation-level effects are hypothesized for all other predictors is expressed as:</p>
<p><span class="math display">\[ Y_G = \beta_{G0} + \beta_{G1} X_1 + \beta_2 X_2 + {...} + \beta_p X_p + \epsilon \]</span></p>
<p>To fit a linear mixed effects model in R, we can leverage the <code>lmer()</code> function from the <code>lmerTest</code> package. Let’s demonstrate how to fit a model to understand the random effects of <code>stock_opt_lvl</code> and fixed effects of <code>engagement</code>, <code>job_lvl</code>, and <code>org_tenure</code> on <code>sqrt(ytd_sales)</code>:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmerTest)</span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-4"><a href="#cb365-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit linear mixed model</span></span>
<span id="cb365-5"><a href="#cb365-5" aria-hidden="true" tabindex="-1"></a>lme.fit <span class="ot">&lt;-</span> lmerTest<span class="sc">::</span><span class="fu">lmer</span>(<span class="fu">sqrt</span>(ytd_sales) <span class="sc">~</span> engagement <span class="sc">+</span> job_lvl <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> stock_opt_lvl) <span class="sc">+</span> org_tenure, data_ot)</span>
<span id="cb365-6"><a href="#cb365-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-7"><a href="#cb365-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize model results</span></span>
<span id="cb365-8"><a href="#cb365-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lme.fit)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [
## lmerModLmerTest]
## Formula: sqrt(ytd_sales) ~ engagement + job_lvl + (1 | stock_opt_lvl) +  
##     org_tenure
##    Data: data_ot
## 
## REML criterion at convergence: 1141.3
## 
## Scaled residuals: 
##      Min       1Q   Median       3Q      Max 
## -2.52388 -0.63661  0.00411  0.61215  3.13684 
## 
## Random effects:
##  Groups        Name        Variance Std.Dev.
##  stock_opt_lvl (Intercept)   51.16   7.152  
##  Residual                  1069.27  32.700  
## Number of obs: 118, groups:  stock_opt_lvl, 4
## 
## Fixed effects:
##             Estimate Std. Error       df t value Pr(&gt;|t|)    
## (Intercept) 133.6129    14.5677  88.8995   9.172 1.67e-14 ***
## engagement   12.0038     4.5140 113.9662   2.659  0.00896 ** 
## job_lvl      35.8950     4.7470 112.4054   7.562 1.17e-11 ***
## org_tenure    5.2542     0.7265 113.5918   7.232 5.94e-11 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##            (Intr) enggmn jb_lvl
## engagement -0.727              
## job_lvl    -0.445 -0.110       
## org_tenure  0.046 -0.054 -0.463</code></pre>
<p>The results of <code>lmer()</code> contain sections for both fixed and random effects. Consistent with the interpretation of general linear model output, we can see that the fixed effects of each predictor are statistically significant. The key difference here is that the variance shown for the intercept of the random effects model is large. This indicates that there are meaningful differences in the relationships between predictors and <code>sqrt(ytd_sales)</code> across the levels of <code>stock_opt_lvl</code> that would be missed without a mixed model that accounts for these group-level effects.</p>
<p>For a more comprehensive treatment on multilevel models, see Gelman and Hill (2006).</p>
</div>
<div id="polynomial-regression" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Polynomial Regression</h2>
<p>Linear regression is a powerful approach to understanding the relative strength of predictors’ associations with a response variable. While linear models have advantages in interpretation, inference, and implementation simplicity, the linearity assumption often limits predictive power since this assumption is often a poor approximation of actual relationships in the data. In this section, we will discuss how to extend the linear regression framework and relax linear model assumptions to handle non-linear relationships.</p>
<p>In a people analytics context, many data sets are cross-sectional and time-invariant, meaning they represent data collected at a single point in time. However, data collected across multiple points in time (time series data) are needed for forecasting future values of a dependent variable (e.g., workforce planning model that estimates hires by month).</p>
<p>There is often a seasonality element inherent in the relationship between time and the outcome that is being estimated, which requires accounting for time-variant features (e.g., monthly attrition rate assumptions). <strong>Seasonality</strong> is the variation that occurs at regular intervals within a year. For example, companies with an annual bonus often experience a seasonal spike in voluntary attrition following bonus payouts (beginning in March for many organizations). Accounting for seasonality in models helps reduce error, but it requires estimating a more complex set of model coefficients relative to a more naive linear projection.</p>
<p>The simple linear regression equation, <span class="math inline">\(Y = \beta_0 + \beta_1 X + \epsilon\)</span>, can be easily extended to include higher order polynomial terms and achieve a more flexible fit. This is known as <strong>polynomial regression</strong>.</p>
<ul>
<li>Quadratic (2nd Order Polynomial) Regression Equation: <span class="math inline">\(Y = \beta_0 + \beta_1 X + \beta_2 X^2 + \epsilon\)</span></li>
<li>Cubic (3nd Order Polynomial) Regression Equation: <span class="math inline">\(Y = \beta_0 + \beta_1 X + \beta_2 X^2 + \beta_3 X^3 + \epsilon\)</span></li>
</ul>
<p>Figure @ref(fig:poly-fun) illustrates how higher-order polynomial functions can fit more curvilinear trends relative to a simple linear projection.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/poly-fun-1.png" alt="Left: Linear turnover trend for $y = .75x + 3.5$. Middle: Quadratic turnover trend for $y = 7.3x - .53x^2 - 6.97$. Right: Cubic turnover trend for $y = -12.48x + 2.47x^2 - .13x^3 + 31.01$." width="100%" />
<p class="caption">
(#fig:poly-fun)Left: Linear turnover trend for <span class="math inline">\(y = .75x + 3.5\)</span>. Middle: Quadratic turnover trend for <span class="math inline">\(y = 7.3x - .53x^2 - 6.97\)</span>. Right: Cubic turnover trend for <span class="math inline">\(y = -12.48x + 2.47x^2 - .13x^3 + 31.01\)</span>.
</p>
</div>
<p>It is important to note that adding higher order terms to the regression equation usually increases <span class="math inline">\(R^2\)</span> due to a more flexible fit to the data, but the additional coefficients are not necessarily significant. <span class="math inline">\(R^2\)</span> will approach 1 as the power of <span class="math inline">\(x\)</span> approaches <span class="math inline">\(n-1\)</span> since the fit line will connect every data point. However, a model that results in a perfect – or near perfect – fit is likely too flexible to generalize well to other data. This problem is known as overfitting and will be covered in Chapter @ref(pred-mod). As a general rule, it is best not to add polynomial terms beyond the second or third orders to protect against overfitting the model.</p>
<p>Comparing the Adjusted <span class="math inline">\(R^2\)</span> for models with higher-order terms to one with only linear terms will help in determining whether higher-order polynomials add value to the model in explaining incremental variance in the response. Evaluating whether the coefficients on higher-order polynomials are statistically significant is important in determining <em>which variables</em> are contributing to any observed increases in Adjusted <span class="math inline">\(R^2\)</span>.</p>
<p>Let’s demonstrate how to fit a regression model with polynomial terms in R using the <code>turnover_trends</code> dataset. First, we will subset this data frame to level 4 People Scientists who work remotely, based on the notion that turnover varies by <code>level</code> and <code>remote</code>, and then visualize the turnover trend to understand month-over-month variation across years.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ps-turnover-trends-1.png" alt="Year 1-5 turnover trends for level 4 People Scientists, stratified by remote (dark grey line) vs. non-remote (light grey line)." width="100%" />
<p class="caption">
(#fig:ps-turnover-trends)Year 1-5 turnover trends for level 4 People Scientists, stratified by remote (dark grey line) vs. non-remote (light grey line).
</p>
</div>
<p>As we can see in Figure @ref(fig:ps-turnover-trends), the relationship between month and turnover rate is non-linear, and level 4 People Scientists who work remotely leave at lower rates relative to those who do not work remotely. There is a clear seasonal pattern that is consistent across all five years as well as remote vs. non-remote groups; namely, there is a spike in turnover between March and June as well as later in the year (November/December). Fitting a model to these data will require non-linear terms.</p>
<p>Adding polynomial terms requires an indicator variable <code>I()</code> in which the value of <span class="math inline">\(x\)</span> is raised to the desired order (e.g., <span class="math inline">\(x^2\)</span> = <code>I(x^2)</code>). Let’s start by fitting linear, quadratic, and cubic regression models (to compare performance) using only <code>month</code> as a predictor. Notice that the shape of the trends resemble the cubic function shown in Figure @ref(fig:poly-fun) in that there are two discernible inflection points at which the trend reverses directions.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit linear, quadratic, and cubic models to ps_turnover data</span></span>
<span id="cb367-2"><a href="#cb367-2" aria-hidden="true" tabindex="-1"></a>ps.lin.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(turnover_rate <span class="sc">~</span> month, <span class="at">data =</span> ps_turnover)</span>
<span id="cb367-3"><a href="#cb367-3" aria-hidden="true" tabindex="-1"></a>ps.quad.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(turnover_rate <span class="sc">~</span> month <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> ps_turnover)</span>
<span id="cb367-4"><a href="#cb367-4" aria-hidden="true" tabindex="-1"></a>ps.cube.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(turnover_rate <span class="sc">~</span> month <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">3</span>), <span class="at">data =</span> ps_turnover)</span></code></pre></div>
<template id="1de6baf9-179f-412c-8022-5483ce8b0df1"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7e18338e{}.cl-7e1295aa{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7e1295be{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7e12a284{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7e12a28e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7e12d27c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d290{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d29a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2a4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2ae{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2b8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2b9{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2c2{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2cc{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2d6{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2e0{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2ea{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2f4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2f5{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d2fe{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d308{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d309{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d312{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d31c{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d31d{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d326{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d33a{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d33b{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d344{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e12d34e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7e18338e'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7e12d33a"><p class="cl-7e12a284"><span class="cl-7e1295aa"></span></p></td><td class="cl-7e12d326"><p class="cl-7e12a28e"><span class="cl-7e1295aa">Estimate</span></p></td><td class="cl-7e12d34e"><p class="cl-7e12a28e"><span class="cl-7e1295aa">Standard Error</span></p></td><td class="cl-7e12d33b"><p class="cl-7e12a28e"><span class="cl-7e1295aa">t value</span></p></td><td class="cl-7e12d33b"><p class="cl-7e12a28e"><span class="cl-7e1295aa">Pr(&gt;|t|)</span></p></td><td class="cl-7e12d344"><p class="cl-7e12a284"><span class="cl-7e1295aa"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7e12d2ae"><p class="cl-7e12a284"><span class="cl-7e1295aa">(Intercept)</span></p></td><td class="cl-7e12d2a4"><p class="cl-7e12a28e"><span class="cl-7e1295aa">4.851</span></p></td><td class="cl-7e12d27c"><p class="cl-7e12a28e"><span class="cl-7e1295aa">0.350</span></p></td><td class="cl-7e12d29a"><p class="cl-7e12a28e"><span class="cl-7e1295aa">13.840</span></p></td><td class="cl-7e12d29a"><p class="cl-7e12a28e"><span class="cl-7e1295aa">0.0000</span></p></td><td class="cl-7e12d290"><p class="cl-7e12a284"><span class="cl-7e1295aa">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7e12d2cc"><p class="cl-7e12a284"><span class="cl-7e1295aa">month</span></p></td><td class="cl-7e12d2d6"><p class="cl-7e12a28e"><span class="cl-7e1295aa">0.040</span></p></td><td class="cl-7e12d2b8"><p class="cl-7e12a28e"><span class="cl-7e1295aa">0.048</span></p></td><td class="cl-7e12d2b9"><p class="cl-7e12a28e"><span class="cl-7e1295aa">0.840</span></p></td><td class="cl-7e12d2b9"><p class="cl-7e12a28e"><span class="cl-7e1295aa">0.4026</span></p></td><td class="cl-7e12d2c2"><p class="cl-7e12a284"><span class="cl-7e1295aa">   </span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e12d2e0"><p class="cl-7e12a28e"><span class="cl-7e1295be">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e12d31c"><p class="cl-7e12a284"><span class="cl-7e1295aa"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e12d31c"><p class="cl-7e12a284"><span class="cl-7e1295aa">Residual standard error: 1.801 on 118 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e12d31c"><p class="cl-7e12a284"><span class="cl-7e1295aa">Multiple R-squared: 0.005944, Adjusted R-squared: -0.00248</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e12d31c"><p class="cl-7e12a284"><span class="cl-7e1295aa">F-statistic: 0.7056 on 118 and 1 DF, p-value: 0.4026</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="50fe68fe-d494-46b6-85e0-d82e10dcadc3"></div>
<script>
var dest = document.getElementById("50fe68fe-d494-46b6-85e0-d82e10dcadc3");
var template = document.getElementById("1de6baf9-179f-412c-8022-5483ce8b0df1");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="fd26f377-b6ab-4d77-939f-2579d9e6d3b5"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7e4ced90{}.cl-7e4784ea{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7e478508{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7e479174{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7e47917e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7e47c5f4{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c608{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c612{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c61c{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c61d{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c626{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c630{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c63a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c644{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c64e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c658{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c662{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c663{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c66c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c676{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c680{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c68a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c694{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c695{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c69e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6a8{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6b2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6bc{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6c6{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6d0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6da{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6db{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6e4{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6ee{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c6f8{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c702{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c70c{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c70d{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c716{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c720{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e47c72a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7e4ced90'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7e47c720"><p class="cl-7e479174"><span class="cl-7e4784ea"></span></p></td><td class="cl-7e47c702"><p class="cl-7e47917e"><span class="cl-7e4784ea">Estimate</span></p></td><td class="cl-7e47c70d"><p class="cl-7e47917e"><span class="cl-7e4784ea">Standard Error</span></p></td><td class="cl-7e47c70c"><p class="cl-7e47917e"><span class="cl-7e4784ea">t value</span></p></td><td class="cl-7e47c72a"><p class="cl-7e47917e"><span class="cl-7e4784ea">Pr(&gt;|t|)</span></p></td><td class="cl-7e47c716"><p class="cl-7e479174"><span class="cl-7e4784ea"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7e47c5f4"><p class="cl-7e479174"><span class="cl-7e4784ea">(Intercept)</span></p></td><td class="cl-7e47c61d"><p class="cl-7e47917e"><span class="cl-7e4784ea">4.244</span></p></td><td class="cl-7e47c626"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.587</span></p></td><td class="cl-7e47c61c"><p class="cl-7e47917e"><span class="cl-7e4784ea">7.231</span></p></td><td class="cl-7e47c612"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.0000</span></p></td><td class="cl-7e47c608"><p class="cl-7e479174"><span class="cl-7e4784ea">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7e47c662"><p class="cl-7e479174"><span class="cl-7e4784ea">month</span></p></td><td class="cl-7e47c63a"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.300</span></p></td><td class="cl-7e47c658"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.208</span></p></td><td class="cl-7e47c644"><p class="cl-7e47917e"><span class="cl-7e4784ea">1.445</span></p></td><td class="cl-7e47c630"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.1511</span></p></td><td class="cl-7e47c64e"><p class="cl-7e479174"><span class="cl-7e4784ea">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7e47c694"><p class="cl-7e479174"><span class="cl-7e4784ea">I(month^2)</span></p></td><td class="cl-7e47c68a"><p class="cl-7e47917e"><span class="cl-7e4784ea">-0.020</span></p></td><td class="cl-7e47c663"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.016</span></p></td><td class="cl-7e47c676"><p class="cl-7e47917e"><span class="cl-7e4784ea">-1.287</span></p></td><td class="cl-7e47c680"><p class="cl-7e47917e"><span class="cl-7e4784ea">0.2008</span></p></td><td class="cl-7e47c66c"><p class="cl-7e479174"><span class="cl-7e4784ea">   </span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e47c6bc"><p class="cl-7e47917e"><span class="cl-7e478508">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e47c6f8"><p class="cl-7e479174"><span class="cl-7e4784ea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e47c6f8"><p class="cl-7e479174"><span class="cl-7e4784ea">Residual standard error: 1.796 on 117 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e47c6f8"><p class="cl-7e479174"><span class="cl-7e4784ea">Multiple R-squared: 0.01981, Adjusted R-squared: 0.003058</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e47c6f8"><p class="cl-7e479174"><span class="cl-7e4784ea">F-statistic: 1.182 on 117 and 2 DF, p-value: 0.3101</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="1ef66edc-e680-4ead-bc17-9382e267d9e0"></div>
<script>
var dest = document.getElementById("1ef66edc-e680-4ead-bc17-9382e267d9e0");
var template = document.getElementById("fd26f377-b6ab-4d77-939f-2579d9e6d3b5");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="ecf1c429-4143-477c-b13f-46633a653ff4"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7e7fcfda{}.cl-7e7a4650{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7e7a4664{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7e7a5370{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7e7a537a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7e7a87c8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a87dc{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a87e6{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a87fa{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a87fb{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8804{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a880e{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8818{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8819{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8822{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a882c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8836{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8840{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a884a{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8854{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a885e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8868{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8872{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a887c{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a887d{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8886{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8890{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a889a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88a4{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88ae{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88af{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88b8{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88c2{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88cc{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88cd{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88d6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88e0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88ea{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88f4{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88f5{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a88fe{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8908{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8912{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a891c{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8926{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8930{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7e7a8931{width:72.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7e7fcfda'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7e7a8931"><p class="cl-7e7a5370"><span class="cl-7e7a4650"></span></p></td><td class="cl-7e7a8908"><p class="cl-7e7a537a"><span class="cl-7e7a4650">Estimate</span></p></td><td class="cl-7e7a8930"><p class="cl-7e7a537a"><span class="cl-7e7a4650">Standard Error</span></p></td><td class="cl-7e7a891c"><p class="cl-7e7a537a"><span class="cl-7e7a4650">t value</span></p></td><td class="cl-7e7a8926"><p class="cl-7e7a537a"><span class="cl-7e7a4650">Pr(&gt;|t|)</span></p></td><td class="cl-7e7a8912"><p class="cl-7e7a5370"><span class="cl-7e7a4650"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7e7a87fb"><p class="cl-7e7a5370"><span class="cl-7e7a4650">(Intercept)</span></p></td><td class="cl-7e7a87dc"><p class="cl-7e7a537a"><span class="cl-7e7a4650">1.514</span></p></td><td class="cl-7e7a87c8"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.874</span></p></td><td class="cl-7e7a87e6"><p class="cl-7e7a537a"><span class="cl-7e7a4650">1.732</span></p></td><td class="cl-7e7a8804"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.0859</span></p></td><td class="cl-7e7a87fa"><p class="cl-7e7a5370"><span class="cl-7e7a4650">  .</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7e7a8836"><p class="cl-7e7a5370"><span class="cl-7e7a4650">month</span></p></td><td class="cl-7e7a882c"><p class="cl-7e7a537a"><span class="cl-7e7a4650">2.410</span></p></td><td class="cl-7e7a8822"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.559</span></p></td><td class="cl-7e7a880e"><p class="cl-7e7a537a"><span class="cl-7e7a4650">4.313</span></p></td><td class="cl-7e7a8818"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.0000</span></p></td><td class="cl-7e7a8819"><p class="cl-7e7a5370"><span class="cl-7e7a4650">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7e7a884a"><p class="cl-7e7a5370"><span class="cl-7e7a4650">I(month^2)</span></p></td><td class="cl-7e7a8840"><p class="cl-7e7a537a"><span class="cl-7e7a4650">-0.410</span></p></td><td class="cl-7e7a885e"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.098</span></p></td><td class="cl-7e7a8872"><p class="cl-7e7a537a"><span class="cl-7e7a4650">-4.189</span></p></td><td class="cl-7e7a8868"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.0001</span></p></td><td class="cl-7e7a8854"><p class="cl-7e7a5370"><span class="cl-7e7a4650">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7e7a8890"><p class="cl-7e7a5370"><span class="cl-7e7a4650">I(month^3)</span></p></td><td class="cl-7e7a8886"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.020</span></p></td><td class="cl-7e7a88a4"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.005</span></p></td><td class="cl-7e7a887c"><p class="cl-7e7a537a"><span class="cl-7e7a4650">4.030</span></p></td><td class="cl-7e7a889a"><p class="cl-7e7a537a"><span class="cl-7e7a4650">0.0001</span></p></td><td class="cl-7e7a887d"><p class="cl-7e7a5370"><span class="cl-7e7a4650">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e7a88cd"><p class="cl-7e7a537a"><span class="cl-7e7a4664">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e7a88ea"><p class="cl-7e7a5370"><span class="cl-7e7a4650"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e7a88ea"><p class="cl-7e7a5370"><span class="cl-7e7a4650">Residual standard error: 1.689 on 116 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e7a88ea"><p class="cl-7e7a5370"><span class="cl-7e7a4650">Multiple R-squared: 0.1402, Adjusted R-squared: 0.1179</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7e7a88ea"><p class="cl-7e7a5370"><span class="cl-7e7a4650">F-statistic: 6.304 on 116 and 3 DF, p-value: 0.0005</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="d1648bca-7baf-4a61-9a7a-f3d3b4d8773c"></div>
<script>
var dest = document.getElementById("d1648bca-7baf-4a61-9a7a-f3d3b4d8773c");
var template = document.getElementById("ecf1c429-4143-477c-b13f-46633a653ff4");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The linear (<span class="math inline">\(F(1,118)\)</span> = .71, <span class="math inline">\(p\)</span> = .40) and quadratic (<span class="math inline">\(F(2,117)\)</span> = 1.18, <span class="math inline">\(p\)</span> = .31) models are not significant. However, as expected based on the shape of the turnover trend, the cubic model is significant (<span class="math inline">\(F(3,116)\)</span> = 6.30, <span class="math inline">\(p\)</span> &lt; .001) and the linear (<code>month</code>), quadratic (<code>I(month^2)</code>), and cubic (<code>I(month^3)</code>) terms all provide significant information in estimating turnover rates (<span class="math inline">\(p\)</span> &lt; .001).</p>
<p>While the cubic model achieved statistical significance at the <span class="math inline">\(p\)</span> &lt; .001 level, 86% of the variance in monthly turnover rates remains unexplained (1 - <span class="math inline">\(R^2\)</span> = .86). To improve the performance of the model, our model needs to reflect the fact that turnover varies as a function of <code>year</code> and <code>remote</code> in addition to <code>month</code>.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/turnover-pred-1.png" alt="Linear, quadratic, and cubic model fit (red dashed line) to remote (dark grey points) and non-remote (light grey points) groups." width="100%" />
<p class="caption">
(#fig:turnover-pred)Linear, quadratic, and cubic model fit (red dashed line) to remote (dark grey points) and non-remote (light grey points) groups.
</p>
</div>
<p>As shown in Figure @ref(fig:turnover-pred), the multidimensional data vary widely around estimates produced by the two-dimensional models (i.e., <code>turnover_rate</code> predicted on the basis of <code>month</code>). While the cubic regression model reflects the seasonality in month-over-month turnover, there are notable differences between remote and non-remote turnover rates as well as differences across years.</p>
<p>Let’s add <code>remote</code> to the cubic regression model to see how performance changes.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit linear, quadratic, and cubic models to ps_turnover df</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a>ps.cube.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(turnover_rate <span class="sc">~</span> month <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">3</span>) <span class="sc">+</span> remote, <span class="at">data =</span> ps_turnover)</span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb368-4"><a href="#cb368-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce tabular summary of regression model output</span></span>
<span id="cb368-5"><a href="#cb368-5" aria-hidden="true" tabindex="-1"></a>flextable<span class="sc">::</span><span class="fu">as_flextable</span>(ps.cube.fit)</span></code></pre></div>
<template id="014328de-94f0-4a69-a274-b0efca487526"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7f23970a{}.cl-7f1dafe8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7f1daffc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7f1dbc86{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7f1dbc9a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7f1df106{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df11a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df124{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df125{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df12e{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df138{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df139{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df142{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df14c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df14d{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df156{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df160{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df161{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df16a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df174{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df17e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df17f{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df188{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df192{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df193{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df19c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1a6{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1a7{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1b0{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1ba{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1bb{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1c4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1ce{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1d8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1e2{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1e3{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1ec{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1f6{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df1f7{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df200{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df20a{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df20b{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df214{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df21e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df228{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df229{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f1df232{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7f23970a'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7f1df228"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8"></span></p></td><td class="cl-7f1df20b"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">Estimate</span></p></td><td class="cl-7f1df21e"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">Standard Error</span></p></td><td class="cl-7f1df229"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">t value</span></p></td><td class="cl-7f1df214"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">Pr(&gt;|t|)</span></p></td><td class="cl-7f1df232"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7f1df12e"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">(Intercept)</span></p></td><td class="cl-7f1df11a"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">2.334</span></p></td><td class="cl-7f1df125"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.775</span></p></td><td class="cl-7f1df106"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">3.011</span></p></td><td class="cl-7f1df138"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.0032</span></p></td><td class="cl-7f1df124"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8"> **</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f1df160"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">month</span></p></td><td class="cl-7f1df14c"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">2.410</span></p></td><td class="cl-7f1df142"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.488</span></p></td><td class="cl-7f1df156"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">4.938</span></p></td><td class="cl-7f1df14d"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.0000</span></p></td><td class="cl-7f1df139"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f1df17f"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">I(month^2)</span></p></td><td class="cl-7f1df17e"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">-0.410</span></p></td><td class="cl-7f1df16a"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.085</span></p></td><td class="cl-7f1df161"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">-4.796</span></p></td><td class="cl-7f1df174"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.0000</span></p></td><td class="cl-7f1df188"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f1df17f"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">I(month^3)</span></p></td><td class="cl-7f1df17e"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.020</span></p></td><td class="cl-7f1df16a"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.004</span></p></td><td class="cl-7f1df161"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">4.614</span></p></td><td class="cl-7f1df174"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.0000</span></p></td><td class="cl-7f1df188"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f1df192"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">remoteYes</span></p></td><td class="cl-7f1df1a6"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">-1.640</span></p></td><td class="cl-7f1df1a7"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.269</span></p></td><td class="cl-7f1df193"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">-6.089</span></p></td><td class="cl-7f1df1b0"><p class="cl-7f1dbc9a"><span class="cl-7f1dafe8">0.0000</span></p></td><td class="cl-7f1df19c"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f1df1bb"><p class="cl-7f1dbc9a"><span class="cl-7f1daffc">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f1df20a"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f1df20a"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">Residual standard error: 1.475 on 115 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f1df20a"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">Multiple R-squared: 0.3498, Adjusted R-squared: 0.3272</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f1df20a"><p class="cl-7f1dbc86"><span class="cl-7f1dafe8">F-statistic: 15.47 on 115 and 4 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="48bc24c5-8de2-41c2-ac4d-fb6e2acf089b"></div>
<script>
var dest = document.getElementById("48bc24c5-8de2-41c2-ac4d-fb6e2acf089b");
var template = document.getElementById("014328de-94f0-4a69-a274-b0efca487526");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>As shown in Figure @ref(fig:ps-cube-mnthrem-output), accounting for remote status increases explained variance by 21% (.35 - .14). In addition to the change in explained variance <span class="math inline">\(\Delta R^2\)</span>, the coefficient on <code>remote</code> is statistically significant (<span class="math inline">\(\beta\)</span> = -1.64, <span class="math inline">\(t\)</span>(115) = -6.09, <span class="math inline">\(p\)</span> &lt; .001). On average, the turnover rate for remote People Scientists is 1.64% lower than the turnover rate for non-remote People Scientists.</p>
<p>Next, let’s include <code>year</code> in the model since turnover rates also vary along this dimension.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit linear, quadratic, and cubic models to ps_turnover df</span></span>
<span id="cb369-2"><a href="#cb369-2" aria-hidden="true" tabindex="-1"></a>ps.cube.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(turnover_rate <span class="sc">~</span> year <span class="sc">+</span> month <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">3</span>) <span class="sc">+</span> remote, <span class="at">data =</span> ps_turnover)</span>
<span id="cb369-3"><a href="#cb369-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-4"><a href="#cb369-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce tabular summary of regression model output</span></span>
<span id="cb369-5"><a href="#cb369-5" aria-hidden="true" tabindex="-1"></a>flextable<span class="sc">::</span><span class="fu">as_flextable</span>(ps.cube.fit)</span></code></pre></div>
<template id="47ce4946-f78b-41f2-9cb8-9da260f3c5b2"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7f80680e{}.cl-7f7aa310{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7f7aa324{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7f7aaf54{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7f7aaf68{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7f7ae154{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae168{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae172{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae17c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae186{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae190{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae191{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae19a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1a4{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1ae{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1b8{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1c2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1cc{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1cd{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1e0{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1e1{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1ea{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1f4{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1fe{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae1ff{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae208{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae212{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae213{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae21c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae226{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae230{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae23a{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae23b{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae244{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae24e{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae258{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae262{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae26c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae26d{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae276{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae280{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae28a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae294{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae29e{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae29f{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2a8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2b2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2b3{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2bc{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2c6{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2d0{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2da{width:52.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7f7ae2db{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7f80680e'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae2bc"><p class="cl-7f7aaf54"><span class="cl-7f7aa310"></span></p></td><td class="cl-7f7ae2db"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">Estimate</span></p></td><td class="cl-7f7ae2d0"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">Standard Error</span></p></td><td class="cl-7f7ae2da"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">t value</span></p></td><td class="cl-7f7ae2c6"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">Pr(&gt;|t|)</span></p></td><td class="cl-7f7ae2b3"><p class="cl-7f7aaf54"><span class="cl-7f7aa310"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae190"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">(Intercept)</span></p></td><td class="cl-7f7ae154"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.369</span></p></td><td class="cl-7f7ae17c"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.637</span></p></td><td class="cl-7f7ae172"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.580</span></p></td><td class="cl-7f7ae186"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.5632</span></p></td><td class="cl-7f7ae168"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae1ae"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">year</span></p></td><td class="cl-7f7ae1c2"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.655</span></p></td><td class="cl-7f7ae191"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.073</span></p></td><td class="cl-7f7ae1a4"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">8.926</span></p></td><td class="cl-7f7ae1b8"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.0000</span></p></td><td class="cl-7f7ae19a"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae1e1"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">month</span></p></td><td class="cl-7f7ae1ea"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">2.410</span></p></td><td class="cl-7f7ae1e0"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.376</span></p></td><td class="cl-7f7ae1f4"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">6.408</span></p></td><td class="cl-7f7ae1cd"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.0000</span></p></td><td class="cl-7f7ae1cc"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae208"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">I(month^2)</span></p></td><td class="cl-7f7ae21c"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">-0.410</span></p></td><td class="cl-7f7ae1fe"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.066</span></p></td><td class="cl-7f7ae1ff"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">-6.224</span></p></td><td class="cl-7f7ae212"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.0000</span></p></td><td class="cl-7f7ae213"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae208"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">I(month^3)</span></p></td><td class="cl-7f7ae21c"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.020</span></p></td><td class="cl-7f7ae1fe"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.003</span></p></td><td class="cl-7f7ae1ff"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">5.988</span></p></td><td class="cl-7f7ae212"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.0000</span></p></td><td class="cl-7f7ae213"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7f7ae24e"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">remoteYes</span></p></td><td class="cl-7f7ae23b"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">-1.640</span></p></td><td class="cl-7f7ae230"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.208</span></p></td><td class="cl-7f7ae244"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">-7.902</span></p></td><td class="cl-7f7ae23a"><p class="cl-7f7aaf68"><span class="cl-7f7aa310">0.0000</span></p></td><td class="cl-7f7ae226"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f7ae276"><p class="cl-7f7aaf68"><span class="cl-7f7aa324">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f7ae29f"><p class="cl-7f7aaf54"><span class="cl-7f7aa310"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f7ae29f"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">Residual standard error: 1.137 on 114 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f7ae29f"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">Multiple R-squared: 0.6173, Adjusted R-squared: 0.6005</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7f7ae29f"><p class="cl-7f7aaf54"><span class="cl-7f7aa310">F-statistic: 36.77 on 114 and 5 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="429e4414-42cc-4032-a975-bab8cb0ddfe7"></div>
<script>
var dest = document.getElementById("429e4414-42cc-4032-a975-bab8cb0ddfe7");
var template = document.getElementById("47ce4946-f78b-41f2-9cb8-9da260f3c5b2");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Explained variance increases to 62% by adding <code>year</code> to the model. While the coefficient on <code>year</code> is statistically significant (<span class="math inline">\(\beta\)</span> = .66, <span class="math inline">\(t\)</span>(114) = 8.93, <span class="math inline">\(p\)</span> &lt; .001), the change in attrition by year is not linear. Visualizing the distribution of turnover rates by year will provide evidence that a linear year-over-year growth factor will result in some large residuals since it will not capture the more complex trend present in these data.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ps-turnover-yrly-dist-1.png" alt="Turnover rate distribution by year for remote (left) and non-remote (right) groups. Red dashed line reflects linear relationship between year and turnover rate, with $y$-intercept lowered by 1.64 for remote group." width="100%" />
<p class="caption">
(#fig:ps-turnover-yrly-dist)Turnover rate distribution by year for remote (left) and non-remote (right) groups. Red dashed line reflects linear relationship between year and turnover rate, with <span class="math inline">\(y\)</span>-intercept lowered by 1.64 for remote group.
</p>
</div>
<p>Given the cubic nature of the change in turnover year-over-year, let’s add quadratic and cubic terms for <code>year</code> to examine changes in model performance:</p>
<template id="5ce8fa08-5a13-4509-9780-47439d13a2e1"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-7ff9580e{}.cl-7ff3c484{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7ff3c4a2{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7ff3d10e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7ff3d122{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7ff4084a{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4085e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40868{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40872{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4087c{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40886{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40890{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4089a{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408a4{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408ae{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408b8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408c2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408c3{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408cc{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408d6{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408e0{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408ea{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408f4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff408fe{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40908{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40912{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4091c{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40926{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40930{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4093a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40944{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4094e{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40958{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40962{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40963{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40976{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40980{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40981{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4098a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff40994{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff4099e{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409a8{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409b2{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409bc{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409c6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409c7{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409d0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409da{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409e4{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409e5{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409ee{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409f8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7ff409f9{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7ff9580e'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7ff409f9"><p class="cl-7ff3d10e"><span class="cl-7ff3c484"></span></p></td><td class="cl-7ff409da"><p class="cl-7ff3d122"><span class="cl-7ff3c484">Estimate</span></p></td><td class="cl-7ff409f8"><p class="cl-7ff3d122"><span class="cl-7ff3c484">Standard Error</span></p></td><td class="cl-7ff409ee"><p class="cl-7ff3d122"><span class="cl-7ff3c484">t value</span></p></td><td class="cl-7ff409e4"><p class="cl-7ff3d122"><span class="cl-7ff3c484">Pr(&gt;|t|)</span></p></td><td class="cl-7ff409e5"><p class="cl-7ff3d10e"><span class="cl-7ff3c484"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7ff4084a"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">(Intercept)</span></p></td><td class="cl-7ff40886"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-1.866</span></p></td><td class="cl-7ff4085e"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.002</span></p></td><td class="cl-7ff40868"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-995.212</span></p></td><td class="cl-7ff4087c"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff40872"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff4089a"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">year</span></p></td><td class="cl-7ff408c2"><p class="cl-7ff3d122"><span class="cl-7ff3c484">5.906</span></p></td><td class="cl-7ff408b8"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.002</span></p></td><td class="cl-7ff408ae"><p class="cl-7ff3d122"><span class="cl-7ff3c484">2,710.664</span></p></td><td class="cl-7ff40890"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff408a4"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff408c3"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">I(year^2)</span></p></td><td class="cl-7ff408f4"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-2.712</span></p></td><td class="cl-7ff408cc"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.001</span></p></td><td class="cl-7ff408d6"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-3,353.442</span></p></td><td class="cl-7ff408ea"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff408e0"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff408c3"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">I(year^3)</span></p></td><td class="cl-7ff408f4"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.363</span></p></td><td class="cl-7ff408cc"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.000</span></p></td><td class="cl-7ff408d6"><p class="cl-7ff3d122"><span class="cl-7ff3c484">4,060.000</span></p></td><td class="cl-7ff408ea"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff408e0"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff4089a"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">month</span></p></td><td class="cl-7ff408c2"><p class="cl-7ff3d122"><span class="cl-7ff3c484">2.410</span></p></td><td class="cl-7ff408b8"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.001</span></p></td><td class="cl-7ff408ae"><p class="cl-7ff3d122"><span class="cl-7ff3c484">4,388.687</span></p></td><td class="cl-7ff40890"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff408a4"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff4091c"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">I(month^2)</span></p></td><td class="cl-7ff40930"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-0.410</span></p></td><td class="cl-7ff40912"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.000</span></p></td><td class="cl-7ff408fe"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-4,262.757</span></p></td><td class="cl-7ff40926"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff40908"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff4091c"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">I(month^3)</span></p></td><td class="cl-7ff40930"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.020</span></p></td><td class="cl-7ff40912"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.000</span></p></td><td class="cl-7ff408fe"><p class="cl-7ff3d122"><span class="cl-7ff3c484">4,100.829</span></p></td><td class="cl-7ff40926"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff40908"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7ff40944"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">remoteYes</span></p></td><td class="cl-7ff40963"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-1.640</span></p></td><td class="cl-7ff4093a"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.000</span></p></td><td class="cl-7ff4094e"><p class="cl-7ff3d122"><span class="cl-7ff3c484">-5,411.724</span></p></td><td class="cl-7ff40962"><p class="cl-7ff3d122"><span class="cl-7ff3c484">0.0000</span></p></td><td class="cl-7ff40958"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ff40976"><p class="cl-7ff3d122"><span class="cl-7ff3c4a2">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ff409a8"><p class="cl-7ff3d10e"><span class="cl-7ff3c484"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ff409a8"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">Residual standard error: 0.00166 on 112 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ff409a8"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">Multiple R-squared: 1, Adjusted R-squared: 1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-7ff409a8"><p class="cl-7ff3d10e"><span class="cl-7ff3c484">F-statistic: 1.996e+07 on 112 and 7 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="722f23dd-5312-4b55-95ff-7924ec78d63d"></div>
<script>
var dest = document.getElementById("722f23dd-5312-4b55-95ff-7924ec78d63d");
var template = document.getElementById("5ce8fa08-5a13-4509-9780-47439d13a2e1");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The inclusion of higher-order polynomials on <code>year</code> result in a perfect fit to these data (<span class="math inline">\(R^2\)</span> = 1). This indicates that the slope of the relationship between <code>month</code> and <code>turnover_rate</code> is perfectly consistent across years and within remote and non-remote groups.</p>
<p>Our resulting equation for estimating <code>turnover_rate</code> on the basis of a combination of linear and non-linear values of <code>year</code>, <code>month</code>, and <code>remote</code> is defined by:</p>
<p><span class="math display">\[ \hat y = -1.87 + 5.91year - 2.71year^2 + .36year^3 + 2.41month - .41month^2 + .02month^3 - 1.64remote + \epsilon \]</span></p>
<p>The performance of this model may initially seem like a cause for celebration, but the probability is low that this model would estimate future turnover with such a high degree of accuracy. While these data were generated with a goal to simplify illustrations and facilitate a working knowledge of polynomial regression mechanics, data which conform to such a constant pattern of seasonality across multiple years is a highly improbable situation in practice. As stated earlier in this chapter, a model that results in a perfect fit is likely too flexible to generalize well to other data, and methods of evaluating how well models are likely to perform on future data will be covered in Chapter @ref(pred-mod).</p>
</div>
<div id="review-questions-9" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What are some people analytics applications for comparing output from several regression models?</p></li>
<li><p>What modeling technique is appropriate for understanding an independent variable’s contribution to a model’s <span class="math inline">\(R^2\)</span> beyond a set of control variables?</p></li>
<li><p>In the context of Hierarchical Linear Regression, what is the indicator that <span class="math inline">\(\Delta{R^2}\)</span> is statistically significant when evaluating whether a particular independent variable provides meaningful information beyond a set of controls?</p></li>
<li><p>What are some examples of hypotheses that would warrant a linear mixed effects model over a general linear model?</p></li>
<li><p>What are the differences between Hierarchical Linear Modeling (HLM), which is also referred to as multilevel or mixed effects modeling, and Hierarchical Linear Regression (HLR)?</p></li>
<li><p>In what ways does polynomial regression differ from linear regression?</p></li>
<li><p>Why is it important to evaluate the nature of relationships at various levels of a categorical or time variable?</p></li>
<li><p>What shape characterizes a quadratic function?</p></li>
<li><p>If the coefficient on the cubic term is not statistically significant (<span class="math inline">\(p\)</span> &gt;= .05) in a cubic regression model, but the linear and quadratic terms are statistically significant (<span class="math inline">\(p\)</span> &lt; .05), what does this indicate about the model’s fit to the data?</p></li>
<li><p>Why might adding higher-order polynomial terms to a model be problematic, even though the additional terms increase the model’s <span class="math inline">\(R^2\)</span>?</p></li>
</ol>
<!--chapter:end:r/11_linear_extensions.Rmd-->
</div>
</div>
<div id="log" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Logistic Regression</h1>
<p><strong>Logistic regression</strong> is a type of <strong>generalized linear model</strong>, which is a family of models for which key linear assumptions are relaxed. Logistic regression is an excellent tool for modeling relationships with outcomes that are not measured on a continuous scale (a key requirement for linear regression). Logistic regression is often leveraged to model the probability of observations belonging to different classes of a categorical outcome, and this type of modeling is known as <strong>classification</strong>. The context for classification can be binomial for two classes (e.g., active/inactive, promoted/not promoted), multinomial for multiple unordered classes (e.g., job family, location), or ordinal for multiple ordered classes (e.g., survey items measured on a Likert scale, performance level, education level). Regardless of the outcome variable’s classes, logistic regression is in fact a type of <em>regression</em> analysis which uses a link function to generalize the linear model for non-continuous outcomes.</p>
<p>You may be wondering why linear regression cannot be implemented when the categorical outcome is dummy coded as outlined in Chapter @ref(data-mgmt-prep). In a binary case, in which the categorical response has been coded as 1/0, least squares regression would produce an estimate for <span class="math inline">\(\hat\beta X\)</span> that represents the estimated probability of the outcome coded as 1 given <span class="math inline">\(X\)</span>. For example, if attrition is the binary outcome and <span class="math inline">\(Y = 1\)</span> for employees who left and <span class="math inline">\(Y = 0\)</span> for employees who stayed, <span class="math inline">\(\hat Y &gt; .5\)</span> could lend to a termination prediction assuming this is an appropriate probability threshold. Linear regression may produce estimates lower than 0 and higher than 1, however, which complicates the interpretation of estimates as probabilities.</p>
<p>This issue is not limited to binary categorical outcomes. Response variables with more than 2 categories cannot naturally be converted into quantitative values that are appropriate for linear regression. Instead of modeling the response directly as in linear regression, logistic regression models the probability of an outcome’s class given values for one or more predictors. For example, we can leverage our <code>employees</code> dataset to model the probability of <code>active</code> given a value for <code>interview_rating</code>, which would be written as <span class="math inline">\(Pr\)</span>(<code>active</code> = Yes | <code>interview_rating</code>) or simply, <span class="math inline">\(p\)</span>(<code>inteview_rating</code>). A probability of <code>active</code> = Yes will be estimated for a given value of <code>interview_rating</code>, and the probability threshold for determining the predicted class needs to be defined based on the business context. If we want to minimize false positives (i.e., incorrectly flagging at-risk employees who do not actually leave), we may set the threshold to something north of .5 (e.g., .7) to gain more confidence that those classified into the termination class are highly likely to exit.</p>
<div id="binomial-logistic-regression" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Binomial Logistic Regression</h2>
<p>Since estimating a binary outcome using linear regression can result in <span class="math inline">\(p(X)\)</span> &lt; 0 for some values of <span class="math inline">\(X\)</span> and <span class="math inline">\(p\)</span>(<span class="math inline">\(X\)</span>) &gt; 1 for others, we need a function that constrains the output to a [0,1] interval. For logistic regression, the <em>logistic</em> function is used. This function converts the linear model, <span class="math inline">\(p(X) = \beta_0 + \beta_1 X\)</span>, to the following form:</p>
<p><span class="math display">\[ p(X) = \frac{e^{\beta_0 + \beta_1 X}}{1+e^{\beta_0 + \beta_1 X}} \]</span></p>
<p>Irrespective of the value of <span class="math inline">\(X\)</span>, the logistic function will always produce a sigmoidal (<em>S-shaped</em>) curve.</p>
<p>Taking the ratio of <span class="math inline">\(\frac {p(X)}{1 - p(X)}\)</span> will give the odds of the outcome, which ranges between 0 (very low) and <span class="math inline">\(\infty\)</span> (very high). The logarithm of this ratio, <span class="math inline">\(\log(\frac {p(X)}{1 - p(X)})\)</span>, is known as the <em>log odds</em> or <em>logit</em>, and is fundamental to logistic regression. Log odds is a <em>monotonic transformation</em>, meaning the greater the odds, the greater the log of odds (and vice versa).</p>
<p>Recall that in linear regression, the coefficient <span class="math inline">\(\beta\)</span> on a predictor is interpreted as the average change in <span class="math inline">\(Y\)</span> for a one-unit increase in the respective predictor’s value. In logistic regression, the interpretation is similar but rather than <span class="math inline">\(\beta\)</span> representing the average change in <span class="math inline">\(Y\)</span>, it represents the average unit change in the <em>log of the odds</em> for a one-unit increase in the predictor’s value.</p>
<p>In R, the <code>glm()</code> function is used in conjunction with the <code>family = binomial</code> argument to fit a logistic regression model. Recall from Chapter @ref(inf-stats) that discrete probability distributions can be leveraged to model different types of nominal variables, and that the binomial distribution is appropriate for a sequence of independent observations with only two outcomes – such as our <code>active</code> variable featuring only <em>yes</em> and <em>no</em> values. Therefore, we need to pass the <code>family = binomial</code> argument into the <code>glm()</code> function. The formula passed into the function is structured consistent with the <code>lm()</code> function used for linear regression: <code>glm(y ~ x, data)</code>.</p>
<template id="43f1be77-f437-4230-bf16-fb3bcdc0a18a"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-8050f140{}.cl-804bd818{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-804bd82c{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-804be4b6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-804be4ca{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-804c11e8{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c11fc{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1206{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1210{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c121a{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1224{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1225{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c122e{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1238{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1242{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1243{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c124c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1256{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1260{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1261{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c126a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1274{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1275{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c127e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1288{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c1292{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c129c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c129d{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12a6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12b0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12ba{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12bb{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12c4{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12ce{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-804c12d8{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-8050f140'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-804c12ba"><p class="cl-804be4b6"><span class="cl-804bd818"></span></p></td><td class="cl-804c12b0"><p class="cl-804be4ca"><span class="cl-804bd818">Estimate</span></p></td><td class="cl-804c12ce"><p class="cl-804be4ca"><span class="cl-804bd818">Standard Error</span></p></td><td class="cl-804c12bb"><p class="cl-804be4ca"><span class="cl-804bd818">z value</span></p></td><td class="cl-804c12d8"><p class="cl-804be4ca"><span class="cl-804bd818">Pr(&gt;|z|)</span></p></td><td class="cl-804c12c4"><p class="cl-804be4b6"><span class="cl-804bd818"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-804c121a"><p class="cl-804be4b6"><span class="cl-804bd818">(Intercept)</span></p></td><td class="cl-804c1210"><p class="cl-804be4ca"><span class="cl-804bd818">-74.486</span></p></td><td class="cl-804c11e8"><p class="cl-804be4ca"><span class="cl-804bd818">10.333</span></p></td><td class="cl-804c1206"><p class="cl-804be4ca"><span class="cl-804bd818">-7.208</span></p></td><td class="cl-804c1224"><p class="cl-804be4ca"><span class="cl-804bd818">0.0000</span></p></td><td class="cl-804c11fc"><p class="cl-804be4b6"><span class="cl-804bd818">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-804c1243"><p class="cl-804be4b6"><span class="cl-804bd818">interview_rating</span></p></td><td class="cl-804c124c"><p class="cl-804be4ca"><span class="cl-804bd818">21.963</span></p></td><td class="cl-804c1225"><p class="cl-804be4ca"><span class="cl-804bd818">2.997</span></p></td><td class="cl-804c1242"><p class="cl-804be4ca"><span class="cl-804bd818">7.329</span></p></td><td class="cl-804c122e"><p class="cl-804be4ca"><span class="cl-804bd818">0.0000</span></p></td><td class="cl-804c1238"><p class="cl-804be4b6"><span class="cl-804bd818">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-804c1256"><p class="cl-804be4ca"><span class="cl-804bd82c">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-804c129d"><p class="cl-804be4b6"><span class="cl-804bd818"> </span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-804c129d"><p class="cl-804be4b6"><span class="cl-804bd818">(Dispersion parameter for binomial family taken to be 1)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-804c129d"><p class="cl-804be4b6"><span class="cl-804bd818">Null deviance: 1299 on 1469 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-804c129d"><p class="cl-804be4b6"><span class="cl-804bd818">Residual deviance: 103.3 on 1468 degrees of freedom</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="0dc6cb15-a772-4bec-b2c8-0e45462c686d"></div>
<script>
var dest = document.getElementById("0dc6cb15-a772-4bec-b2c8-0e45462c686d");
var template = document.getElementById("43f1be77-f437-4230-bf16-fb3bcdc0a18a");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The output shown in Figure @ref(fig:glm-rating) has some differences relative to the output of a linear regression model.</p>
<ul>
<li><code>Estimate</code>: Average change in the log of odds for each one-unit increase in the value of the predictor</li>
<li><code>z value</code>: Ratio of Estimate / Standard Error. Assuming <span class="math inline">\(\alpha\)</span> = .05, a <span class="math inline">\(z\)</span>-value of 2 is a good rule of thumb for achieving statistical significance (<span class="math inline">\(p\)</span> &lt; .05) per the properties of the normal distribution.</li>
<li><code>Null deviance</code>: Measure of how well the response can be predicted by a model with only an intercept term; the lower the number, the better the fit.</li>
<li><code>Residual deviance</code>: Measure of how well the response can be predicted by a model with <span class="math inline">\(p\)</span> predictors; the lower the number, the better the fit. The larger the delta between residual and null deviance, the better the model with <span class="math inline">\(p\)</span> predictors relative to the intercept-only model.</li>
</ul>
<p>Given the positive coefficient on <code>interview_rating</code>, we can interpret this to mean that for each one-unit increase in the average interviewer rating during the onsite stage of the employee’s recruiting process, the log of the odds of the employee staying with the organization (<code>active</code> status of <code>Yes</code> coded as <span class="math inline">\(1\)</span>) increases by 21.96.</p>
<p>To illustrate why the logistic function is necessary, let’s demonstrate differences in applying linear and logistic regression models by regressing a binary outcome <code>active</code> onto <code>interview_rating</code>.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/lm-glm-compare-1.png" alt="Linear (left) and logistic (right) functions applied to models regressing active status (1/0) onto median interviewer rating." width="100%" />
<p class="caption">
(#fig:lm-glm-compare)Linear (left) and logistic (right) functions applied to models regressing active status (1/0) onto median interviewer rating.
</p>
</div>
<p>Figure @ref(fig:lm-glm-compare) illustrates that for high values of <code>interview_rating</code>, a linear model would estimate probabilities for <code>active</code> that are greater than 1. Since probabilities range from 0 (impossible) to 1 (certain), anything outside the [0,1] interval does not make sense. On the other hand, the logistic function produces the <em>S-shaped</em> curve described previously. Using the logistic function, the probabilities are constrained to the [0,1] interval, and the visual reflects the fact that <code>active</code> can be perfectly predicted for low and high values of <code>interview_rating</code> but it is a mixed bag for values in the middle of the range (3.3 - 3.6).</p>
<p>It is often helpful to explain the relationship between a predictor and binary outcome in terms of a percentage increase or decrease. When <span class="math inline">\(\beta = 1\)</span>, this indicates that the likelihood of the outcome is identical between the two groups of the predictor. If we exponentiate the coefficients, we can convert the log odds into odds ratios to facilitate a more intuitive interpretation. Therefore, <span class="math inline">\((exp(\beta) - 1) * 100\)</span> will provide the percentage increase or decrease in the odds of the <em>included</em> group relative to the <em>omitted</em> group.</p>
<p>For example, Figure @ref(fig:glm-ot-lvl) provides the log odds for <code>active</code> regressed onto two binary predictors: <code>overtime</code> and <code>job_lvl2plus</code>.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy-coded variable for job level 2+</span></span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>job_lvl2plus <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(employees<span class="sc">$</span>job_lvl <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-4"><a href="#cb370-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a logistic regression model</span></span>
<span id="cb370-5"><a href="#cb370-5" aria-hidden="true" tabindex="-1"></a>glm.fit <span class="ot">&lt;-</span> <span class="fu">glm</span>(active <span class="sc">~</span> overtime <span class="sc">+</span> job_lvl2plus, <span class="at">data =</span> employees, <span class="at">family =</span> <span class="st">&#39;binomial&#39;</span>)</span>
<span id="cb370-6"><a href="#cb370-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-7"><a href="#cb370-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce tabular summary for model results using flextable</span></span>
<span id="cb370-8"><a href="#cb370-8" aria-hidden="true" tabindex="-1"></a>flextable<span class="sc">::</span><span class="fu">as_flextable</span>(glm.fit)</span></code></pre></div>
<template id="eea641ad-a092-400a-9387-ea53a7e2fb66"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-8109c738{}.cl-8103315c{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-81033170{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-81033dbe{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-81033dc8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-81037590{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375a4{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375a5{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375ae{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375b8{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375c2{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375c3{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375d6{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375e0{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375e1{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375ea{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375f4{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-810375fe{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037608{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037609{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037612{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103761c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103761d{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037626{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037630{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103763a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103763b{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037644{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103764e{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037658{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037659{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037662{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103766c{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103766d{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037676{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037680{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037681{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103768a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81037694{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103769e{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8103769f{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-8109c738'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-8103769e"><p class="cl-81033dbe"><span class="cl-8103315c"></span></p></td><td class="cl-81037680"><p class="cl-81033dc8"><span class="cl-8103315c">Estimate</span></p></td><td class="cl-8103768a"><p class="cl-81033dc8"><span class="cl-8103315c">Standard Error</span></p></td><td class="cl-81037681"><p class="cl-81033dc8"><span class="cl-8103315c">z value</span></p></td><td class="cl-8103769f"><p class="cl-81033dc8"><span class="cl-8103315c">Pr(&gt;|z|)</span></p></td><td class="cl-81037694"><p class="cl-81033dbe"><span class="cl-8103315c"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-81037590"><p class="cl-81033dbe"><span class="cl-8103315c">(Intercept)</span></p></td><td class="cl-810375b8"><p class="cl-81033dc8"><span class="cl-8103315c">1.516</span></p></td><td class="cl-810375c2"><p class="cl-81033dc8"><span class="cl-8103315c">0.119</span></p></td><td class="cl-810375ae"><p class="cl-81033dc8"><span class="cl-8103315c">12.718</span></p></td><td class="cl-810375a5"><p class="cl-81033dc8"><span class="cl-8103315c">0.0000</span></p></td><td class="cl-810375a4"><p class="cl-81033dbe"><span class="cl-8103315c">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-810375f4"><p class="cl-81033dbe"><span class="cl-8103315c">overtimeYes</span></p></td><td class="cl-810375d6"><p class="cl-81033dc8"><span class="cl-8103315c">-1.396</span></p></td><td class="cl-810375ea"><p class="cl-81033dc8"><span class="cl-8103315c">0.152</span></p></td><td class="cl-810375e0"><p class="cl-81033dc8"><span class="cl-8103315c">-9.176</span></p></td><td class="cl-810375c3"><p class="cl-81033dc8"><span class="cl-8103315c">0.0000</span></p></td><td class="cl-810375e1"><p class="cl-81033dbe"><span class="cl-8103315c">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8103761d"><p class="cl-81033dbe"><span class="cl-8103315c">job_lvl2plus</span></p></td><td class="cl-8103761c"><p class="cl-81033dc8"><span class="cl-8103315c">1.227</span></p></td><td class="cl-810375fe"><p class="cl-81033dc8"><span class="cl-8103315c">0.152</span></p></td><td class="cl-81037609"><p class="cl-81033dc8"><span class="cl-8103315c">8.055</span></p></td><td class="cl-81037612"><p class="cl-81033dc8"><span class="cl-8103315c">0.0000</span></p></td><td class="cl-81037608"><p class="cl-81033dbe"><span class="cl-8103315c">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-81037644"><p class="cl-81033dc8"><span class="cl-81033170">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-81037676"><p class="cl-81033dbe"><span class="cl-8103315c"> </span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-81037676"><p class="cl-81033dbe"><span class="cl-8103315c">(Dispersion parameter for binomial family taken to be 1)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-81037676"><p class="cl-81033dbe"><span class="cl-8103315c">Null deviance: 1299 on 1469 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-81037676"><p class="cl-81033dbe"><span class="cl-8103315c">Residual deviance: 1150 on 1467 degrees of freedom</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="0455fe1a-f009-4e4f-9c69-09aa66767540"></div>
<script>
var dest = document.getElementById("0455fe1a-f009-4e4f-9c69-09aa66767540");
var template = document.getElementById("eea641ad-a092-400a-9387-ea53a7e2fb66");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>We can convert these coefficients into odds ratios by exponentiating the coefficients:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return exponentiated coefficients</span></span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">coef</span>(glm.fit))</span></code></pre></div>
<pre><code>##  (Intercept)  overtimeYes job_lvl2plus 
##    4.5551147    0.2474668    3.4108303</code></pre>
<p>The exponentiated coefficient on <code>overtime</code> is <span class="math inline">\(exp(\beta) = .25\)</span>, so there is a <span class="math inline">\((1 - .25) * 100 = 75%\)</span> percent <em>decrease</em> in the odds of being active for employees who work overtime (since <code>overtime = Yes</code> is the included group) relative to those who do not work overtime. The exponentiated coefficient on <code>job_lvl2plus</code> is <span class="math inline">\(exp(\beta) = 3.41\)</span>, so there is a <span class="math inline">\((3.41 - 1) * 100 = 241%\)</span> percent <em>increase</em> in the odds of being active for those with a job level of 2 or greater relative to those with a job level of 1 (i.e., attrition is a larger concern for level 1 employees).</p>
<p>Generalized linear mixed models can be fitted using the <code>glmer()</code> function from the <code>lme4</code> library. The syntax is identical to the illustration of <code>lmer()</code> for multilevel linear models in Chapter @ref(lm) with the exception of needing to define <code>family</code> as an additional argument.</p>
<p>A juxtaposition of <code>glm()</code> and <code>glmer()</code> fits for logistic regression is shown in the following block of code. The mixed model example features an additional random (group-level) effect on <code>business_travel</code> via <code>1 | business_travel</code>, and fixed (observation-level) effects on remaining predictors which are consistent with the standard logistic regression model:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb373-2"><a href="#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb373-3"><a href="#cb373-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-4"><a href="#cb373-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Logistic model</span></span>
<span id="cb373-5"><a href="#cb373-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glm</span>(active <span class="sc">~</span> overtime <span class="sc">+</span> job_lvl2plus, <span class="at">data =</span> employees, <span class="at">family =</span> <span class="st">&#39;binomial&#39;</span>)</span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = active ~ overtime + job_lvl2plus, family = &quot;binomial&quot;, 
##     data = employees)
## 
## Coefficients:
##  (Intercept)   overtimeYes  job_lvl2plus  
##        1.516        -1.396         1.227  
## 
## Degrees of Freedom: 1469 Total (i.e. Null);  1467 Residual
## Null Deviance:       1299 
## Residual Deviance: 1150  AIC: 1156</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Logistic mixed model</span></span>
<span id="cb375-2"><a href="#cb375-2" aria-hidden="true" tabindex="-1"></a>lme4<span class="sc">::</span><span class="fu">glmer</span>(active <span class="sc">~</span> overtime <span class="sc">+</span> job_lvl2plus <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> business_travel), <span class="at">data =</span> employees, <span class="at">family =</span> <span class="st">&#39;binomial&#39;</span>)</span></code></pre></div>
<pre><code>## Generalized linear mixed model fit by maximum likelihood (Laplace
##   Approximation) [glmerMod]
##  Family: binomial  ( logit )
## Formula: active ~ overtime + job_lvl2plus + (1 | business_travel)
##    Data: employees
##       AIC       BIC    logLik  deviance  df.resid 
## 1148.0596 1169.2317 -570.0298 1140.0596      1466 
## Random effects:
##  Groups          Name        Std.Dev.
##  business_travel (Intercept) 0.4351  
## Number of obs: 1470, groups:  business_travel, 3
## Fixed Effects:
##  (Intercept)   overtimeYes  job_lvl2plus  
##        1.546        -1.382         1.223</code></pre>
</div>
<div id="multinomial-logistic-regression" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Multinomial Logistic Regression</h2>
<p><strong>Multinomial logistic regression</strong> is used to estimate the probability of an unordered categorical response with <span class="math inline">\(K&gt;2\)</span> classes. With an understanding of binomial logistic regression, extending the binomial model to a multinomial logistic regression model should be relatively intuitive.</p>
<p>To extend the binomial model to a multinomial context, we need to first identify a reference level. This decision may be arbitrary or guided by the research question or hypothesis, but the decision is nonetheless important as it impacts how the model coefficients are interpreted – always relative to the reference level. With the reference level defined, we can then express the multinomial logistic regression model as:</p>
<p><span class="math display">\[ Pr(Y = k | X = x) = \frac{e^{\beta_{k0} + \beta_{k1} x_1 + ... + \beta_{kp} x_p}}{1+ \displaystyle\sum_{j=1}^{K-1} e^{\beta_{j0} + \beta_{j1} x_1 + ... + \beta_{jp} x_p}}, \]</span></p>
<p>where <span class="math inline">\(K\)</span> is the reference class, <span class="math inline">\(j\)</span> is a <span class="math inline">\(K-1\)</span> non-reference level, and <span class="math inline">\(k\)</span> is the specified class for which the probability is being estimated on the basis of values for one or more <span class="math inline">\(X\)</span> predictors.</p>
<p>Consider <code>dept</code> from our <code>employees</code> data, which has values of <code>Research &amp; Development</code>, <code>Sales</code>, and <code>Human Resources</code>. This is a nominal variable because differences in these levels are not ordered in the same way job levels ranging from 1 to 10 or Likert scales ranging from 1 to 5 are. Employees in the Sales department may be greater in number relative to employees in the Human Resources department, for example, but it would not be appropriate to assign to the Sales department a numeric value that indicates it is <em>higher</em> or <em>better</em> relative to the Human Resources department.</p>
<p>Multinomial models are essentially a collection of binomial models which compare the log-odds of each non-reference category to the specified reference category. If the Human Resources department is identified as the reference category <span class="math inline">\(K\)</span>, then <span class="math inline">\(\beta_{k0}\)</span> for <span class="math inline">\(k = Sales\)</span> can be interpreted as the log odds of Sales department membership relative to Human Resources department membership in the following equation:</p>
<p><span class="math display">\[ log(\frac{Pr(Y = k | X = x)} {Pr(Y = K | X = x)}) = \beta_{k0} + \beta_{k1}x_1 + ... + \beta_{xp}x_p \]</span></p>
<p>Depending on the research objective, it may be appropriate to compute the odds of one category relative to all other categories. This can actually be accomplished using binomial regression if the category of interest is coded as 1 and all other categories are coded as 0. In this case, the reference for the binomial model is a <em>collection</em> of <span class="math inline">\(K-1\)</span> categories. If understanding the odds of <em>each category</em> relative to a reference category is more appropriate based on the research objective, multinomial logistic regression is the proper model.</p>
<p>Let’s illustrate how to implement multinomial logistic regression by determining how variables in the <code>employees</code> dataset help in classifying employees into departments. To build this model in R, we will use the <code>multinom</code> function from the <code>nnet</code> package. It is important that the nominal response variable is defined as a factor before implementing multinomial logistic regression, so we will first convert the data type of <code>dept</code> from its native character type to a factor. We also need to identify the reference department against which the probability of each of the other departments will be evaluated; we will define this using the <code>ref</code> argument within the <code>relevel()</code> function:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nnet)</span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4"><a href="#cb377-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert dept to factor</span></span>
<span id="cb377-5"><a href="#cb377-5" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>dept <span class="ot">&lt;-</span> <span class="fu">factor</span>(employees<span class="sc">$</span>dept)</span>
<span id="cb377-6"><a href="#cb377-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-7"><a href="#cb377-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify reference level</span></span>
<span id="cb377-8"><a href="#cb377-8" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>dept <span class="ot">&lt;-</span> <span class="fu">relevel</span>(employees<span class="sc">$</span>dept, <span class="at">ref =</span> <span class="st">&quot;Human Resources&quot;</span>)</span>
<span id="cb377-9"><a href="#cb377-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-10"><a href="#cb377-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit multinomial logistic regression model</span></span>
<span id="cb377-11"><a href="#cb377-11" aria-hidden="true" tabindex="-1"></a><span class="co"># An omitted group for categorical variables is defined by default</span></span>
<span id="cb377-12"><a href="#cb377-12" aria-hidden="true" tabindex="-1"></a>multinom.fit <span class="ot">&lt;-</span> <span class="fu">multinom</span>(dept <span class="sc">~</span> overtime <span class="sc">+</span> ed_field, <span class="at">data =</span> employees)</span></code></pre></div>
<pre><code>## # weights:  24 (14 variable)
## initial  value 1614.960064 
## iter  10 value 887.448722
## iter  20 value 833.883230
## iter  30 value 833.513790
## final  value 833.513639 
## converged</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize results from model object</span></span>
<span id="cb379-2"><a href="#cb379-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(multinom.fit)</span></code></pre></div>
<pre><code>## Call:
## multinom(formula = dept ~ overtime + ed_field, data = employees)
## 
## Coefficients:
##                        (Intercept) overtimeYes ed_fieldLife Sciences
## Research &amp; Development   -18.92857   0.1674815              22.19842
## Sales                    -19.40948   0.1602262              21.60505
##                        ed_fieldMarketing ed_fieldMedical ed_fieldOther
## Research &amp; Development          25.72879        22.21217      21.93577
## Sales                           37.42515        21.27842      20.96823
##                        ed_fieldTechnical Degree
## Research &amp; Development                  22.0455
## Sales                                   21.5113
## 
## Std. Errors:
##                        (Intercept) overtimeYes ed_fieldLife Sciences
## Research &amp; Development    1.808496   0.3917603              1.817514
## Sales                     1.810390   0.4071887              1.819982
##                        ed_fieldMarketing ed_fieldMedical ed_fieldOther
## Research &amp; Development          8.991934        1.820007      1.864206
## Sales                           8.996707        1.823207      1.874536
##                        ed_fieldTechnical Degree
## Research &amp; Development                  1.84963
## Sales                                   1.85451
## 
## Residual Deviance: 1667.027 
## AIC: 1695.027</code></pre>
<p>Notice the output from the <code>multinom()</code> function is quite limited relative to <code>glm()</code> and <code>lm()</code>. Coefficients and standard errors are provided, but <span class="math inline">\(p\)</span>-values are not available in the output so we will need to calculate them separately.</p>
<p>A new statistical measure is included in the output of this model, <strong>Akaike Information Criterion (AIC)</strong>, which is a score that is helpful for model selection. AIC is calculated by:</p>
<p><span class="math display">\[ AIC = -2\frac{\ell}{n} + 2\frac{k}{n}, \]</span>
where <span class="math inline">\(n\)</span> is the number of observations, <span class="math inline">\(k\)</span> is the number of parameters (predictors + intercept), and <span class="math inline">\(\ell\)</span> is the log likelihood function where:</p>
<p><span class="math display">\[ \ell = -\frac{n}{2}(1 + ln(2\pi) + ln(\frac{1}{n} \displaystyle\sum_{i=1}^{n}(y_i - \hat{y}_i)^2))  \]</span></p>
<p>Just as we compared <span class="math inline">\(R^2\)</span> across linear regression models in Chapter @ref(lm), AIC can be compared across models to determine which one is a better fit to the data; lower AIC values indicate better fit. Consistent with how the Adjusted <span class="math inline">\(R^2\)</span> statistic adjusts for variables that do not provide information, AIC penalizes models that use more parameters. Therefore, if two models explain the same amount of variance in the response, the model with fewer parameters will feature a lower AIC score.</p>
<p>At the time of this writing, the <code>as_flextable()</code> function used to format the output of <code>glm()</code> and <code>lm()</code> is not compatible with objects in which <code>multinom()</code> results are stored. Therefore, we will construct a basic data frame that improves readability.</p>
<p>To determine whether the coefficients are statistically significant, we need to perform an additional step to compute <span class="math inline">\(p\)</span>-values using <span class="math inline">\(z\)</span> scores:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate z-scores</span></span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true" tabindex="-1"></a>z_scores <span class="ot">&lt;-</span> <span class="fu">summary</span>(multinom.fit)<span class="sc">$</span>coefficients <span class="sc">/</span> <span class="fu">summary</span>(multinom.fit)<span class="sc">$</span>standard.errors</span>
<span id="cb381-3"><a href="#cb381-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb381-4"><a href="#cb381-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce p-values</span></span>
<span id="cb381-5"><a href="#cb381-5" aria-hidden="true" tabindex="-1"></a>p_values <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">abs</span>(z_scores))) <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb381-6"><a href="#cb381-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb381-7"><a href="#cb381-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Transpose and display rounded p-values </span></span>
<span id="cb381-8"><a href="#cb381-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">t</span>(<span class="fu">round</span>(p_values, <span class="dv">3</span>)))</span></code></pre></div>
<pre><code>##                          Research...Development Sales
## (Intercept)                               0.000 0.000
## overtimeYes                               0.669 0.694
## ed_fieldLife Sciences                     0.000 0.000
## ed_fieldMarketing                         0.004 0.000
## ed_fieldMedical                           0.000 0.000
## ed_fieldOther                             0.000 0.000
## ed_fieldTechnical Degree                  0.000 0.000</code></pre>
<p>These <span class="math inline">\(p\)</span>-values indicate that those who work overtime are not significantly more likely to work in either the Research &amp; Development or Sales departments relative to the Human Resources department. In other words, a considerable portion of employees in all three departments work overtime, so this variable is not helpful in classifying employees into their correct departments. This is evident in Figure @ref(fig:ot-dept).</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ot-dept-1.png" alt="Department distribution by overtime status." width="100%" />
<p class="caption">
(#fig:ot-dept)Department distribution by overtime status.
</p>
</div>
<p>The <span class="math inline">\(p\)</span>-values indicate that educational background is a strong predictor of department. This is evidenced in Figure @ref(fig:ed-field-dept), which shows that each educational field is generally dominated by a single department. This means that we can achieve strong departmental <em>purity</em> on the basis of <code>ed_field</code> alone. All employees who studied Marketing work in Sales and all employees who studied HR work in said department. However, those who work in R&amp;D have a variety of educational backgrounds, so the signal is not as clear for these cases and additional variables would be needed to more accurately assign these employees to the correct departments.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ed-field-dept-1.png" alt="Department distribution by educational field." width="100%" />
<p class="caption">
(#fig:ed-field-dept)Department distribution by educational field.
</p>
</div>
<p>As we did for binomial logistic regression, we can compute the exponential of model coefficients for the multinomial logistic regression model to convert the log-odds to more intuitive odds ratios:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return exponentiated coefficients from model object</span></span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Transpose rows to columns for improved readability</span></span>
<span id="cb383-3"><a href="#cb383-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">t</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(multinom.fit))))</span></code></pre></div>
<pre><code>##                          Research...Development        Sales
## (Intercept)                        6.017654e-09 3.720234e-09
## overtimeYes                        1.182323e+00 1.173776e+00
## ed_fieldLife Sciences              4.371726e+09 2.415207e+09
## ed_fieldMarketing                  1.492349e+11 1.792819e+16
## ed_fieldMedical                    4.432226e+09 1.742213e+09
## ed_fieldOther                      3.361886e+09 1.277572e+09
## ed_fieldTechnical Degree           3.751786e+09 2.199075e+09</code></pre>
<p>Consistent with our approach for binomial logistic regression, we can interpret these exponentiated coefficients in terms of having greater or lesser odds. Importantly, in the multinomial context the odds are <em>relative to the reference category</em> – the Human Resources department in this case.</p>
<p>For example, the odds ratio associated with a Medical educational field is <span class="math inline">\(exp(\beta) = 4.43\)</span> for Research &amp; Development and <span class="math inline">\(exp(\beta) = 1.74\)</span> for Sales. Therefore, those with a Medical education have <span class="math inline">\((4.43 - 1) * 100 = 343%\)</span> greater odds of being in the Research &amp; Development department and <span class="math inline">\((1.74 - 1) * 100 = 74%\)</span> greater odds of being in the Sales department relative to the Human Resources department. We can ignore the odds ratios associated with <code>overtime</code> since this variable does not provide significant information.</p>
</div>
<div id="ordinal-logistic-regression" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Ordinal Logistic Regression</h2>
<p>Many projects in people analytics involve understanding how variables influence ordinal outcomes, such as performance ratings or survey items measured on a Likert scale. Stepwise changes in the levels of ordinal outcomes may or may not be consistent. For example, it may be easy for one to be promoted from job level 1 to 2 but relatively difficult to progress from 5 to 6. Linear regression should not be used in these settings, as linear assumptions are designed for data measured on a continuous scale and will not hold for ordinal data. This section will cover <strong>ordinal logistic regression</strong>, which is a modeling technique designed for understanding how variables influence stepwise changes in a multi-class ordinal outcome.</p>
<p>Beyond the universal data screening procedures we have covered, such as ensuring problematic collinearity is not present, ordinal logistic regression features a unique <strong>proportional odds assumption</strong> that must be satisfied. This assumption, also known as the <strong>parallel regression assumption</strong>, requires that each independent variable has an equal effect at each level of the ordinal outcome. If the effect varies across levels of the outcome, separate models are needed to accurately reflect the associations with each pair of levels.</p>
<p>Though other approaches exist for modeling ordinal outcomes, the proportional-odds model based on cumulative distribution probabilities is the most common. Its intercepts are dependent on the <span class="math inline">\(j\)</span> levels but slopes are equal as defined by:</p>
<p><span class="math display">\[ log(\frac{Pr(Y \le j)} {Pr(Y &gt; j)}) = \beta_{j0} - \displaystyle\sum_{i=1}^{n} \beta_{1i} x_{1i} + ... + \beta_{pi} x_{pi} \]</span></p>
<p>The implementation of ordinal logistic regression will be demonstrated by evaluating the statistical drivers of engagement. First, we need to define <code>engagement</code> as an ordered factor:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define ordered factor</span></span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>engagement <span class="ot">&lt;-</span> <span class="fu">ordered</span>(employees<span class="sc">$</span>engagement, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify structure of engagement variable</span></span>
<span id="cb385-5"><a href="#cb385-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(employees<span class="sc">$</span>engagement)</span></code></pre></div>
<pre><code>##  Ord.factor w/ 5 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 3 2 2 3 3 3 4 3 2 3 ...</code></pre>
<p>Next, the proportional odds assumption will be checked using the <strong>Brant test</strong>. The Brant test is a set of comparisons of the separate binary logistic models underlying the overall model (Brant, 1990). This test evaluates whether <span class="math inline">\(\beta_{j1}\)</span> through <span class="math inline">\(\beta_{jp}\)</span> are consistent across each of the <span class="math inline">\(j\)</span> levels. This is done via a <span class="math inline">\(\chi^2\)</span> test to compare coefficients and determine whether observed differences are larger departures from what we would expect by chance. The null hypothesis states that coefficients are not statistically different across the <span class="math inline">\(j\)</span> levels; therefore, <span class="math inline">\(p &lt; .05\)</span> indicates that significant differences in effects are present across the <span class="math inline">\(j\)</span> levels and, thus, the proportional odds assumption is violated.</p>
<p>We can leverage the <code>brant</code> package in R for this, which is compatible with the <code>polr()</code> function from the <code>MASS</code> package that will be used to perform ordinal logistic regression. Since we will be evaluating model statistics, rather than merely using the model for prediction (the subject of Chapter @ref(pred-mod)), we need to specify the <code>Hess = TRUE</code> argument in the <code>polr()</code> function to include the <em>Hessian matrix</em> (observed information matrix) in the output.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb387-3"><a href="#cb387-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(brant)</span>
<span id="cb387-4"><a href="#cb387-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb387-5"><a href="#cb387-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a ordinal logistic regression model</span></span>
<span id="cb387-6"><a href="#cb387-6" aria-hidden="true" tabindex="-1"></a>ord.fit <span class="ot">&lt;-</span> <span class="fu">polr</span>(engagement <span class="sc">~</span> org_tenure, <span class="at">data =</span> employees, <span class="at">Hess =</span> <span class="cn">TRUE</span>)</span>
<span id="cb387-7"><a href="#cb387-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb387-8"><a href="#cb387-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Test proportional odds assumption using the Brant test</span></span>
<span id="cb387-9"><a href="#cb387-9" aria-hidden="true" tabindex="-1"></a>brant<span class="sc">::</span><span class="fu">brant</span>(ord.fit)</span></code></pre></div>
<pre><code>## -------------------------------------------- 
## Test for X2  df  probability 
## -------------------------------------------- 
## Omnibus      0.39    2   0.82
## org_tenure   0.39    2   0.82
## -------------------------------------------- 
## 
## H0: Parallel Regression Assumption holds</code></pre>
<p>Notice the line in the output for the omnibus test, which shows an identical <span class="math inline">\(\chi^2\)</span>, <span class="math inline">\(df\)</span>, and <span class="math inline">\(p\)</span>-value to the line associated with <code>org_tenure</code>. <strong>Omnibus tests</strong> are statistical tests which test for the significance of several parameters in a model at once. For example, a one-way ANOVA evaluating differences in mean commute time across three locations is an omnibus test since it has more than two parameters. As we covered in Chapter @ref(aod), the null hypothesis is rejected in the context of ANOVA if there is at least <em>one</em> difference in complex contrasts – even if the mean commute time is not significantly different between <em>all</em> groups. Test statistics are identical for this ordinal logistic regression model because there is a single predictor, but Brant’s omnibus test investigates equality of coefficients for all predictors jointly in the case of more than two parameters (Martin, 2022). The null and alternative hypotheses for Brant’s omnibus test are:</p>
<p><span class="math inline">\(H_0\)</span>: The odds are proportional for all predictors in the model.
<span class="math inline">\(H_A\)</span>: The odds are non-proportional for at least one predictor.</p>
<p>The results of Brant’s test indicate that we fail to reject <span class="math inline">\(H_0\)</span> since <span class="math inline">\(p = .82\)</span> for the omnibus test, so the proportional odds assumption holds for these data. If the model featured more than one predictor, we could also evaluate the statistics on individual predictors – but only to determine for which predictor(s) the proportional odds assumption is violated <em>if</em> <span class="math inline">\(p &lt; .05\)</span> for the omnibus test. As the number of variables and tests increases, so too does our risk of incorrectly rejecting the proportional odds assumption; therefore, decisions regarding the proportional odds assumption should not be based on statistics for individual predictors alone. Even if the odds are truly proportional for each predictor independently, with 20 predictors we would expect to find one by chance for which <span class="math inline">\(p &lt; .05\)</span> since our tolerance for a Type I error is 1 in 20 with <span class="math inline">\(\alpha = .05\)</span>.</p>
<p>Since the proportional odds assumption holds, let’s review the model output:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize ordinal logistic regression model</span></span>
<span id="cb389-2"><a href="#cb389-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ord.fit)</span></code></pre></div>
<pre><code>## Call:
## polr(formula = engagement ~ org_tenure, data = employees, Hess = TRUE)
## 
## Coefficients:
##                Value Std. Error t value
## org_tenure -0.006965   0.008032 -0.8671
## 
## Intercepts:
##     Value      Std. Error t value   
## 1|2    -2.8661     0.1271   -22.5423
## 2|3    -0.8419     0.0804   -10.4703
## 3|4     2.1711     0.1036    20.9479
## 4|5  4122.5567     0.1036 39776.9095
## 
## Residual Deviance: 3084.592 
## AIC: 3094.592</code></pre>
<p>The output provides the average effect of a one-unit increase in <code>org_tenure</code> (Coefficients section) as well as intercepts on each pair of levels for <code>engagement</code> (Intercepts section). The effect of a one-unit increase in <code>org_tenure</code> in moving <code>engagement</code> from one ordinal level to the next is quite small (<span class="math inline">\(\beta = -.007\)</span>). The intercepts are often referred to as cutpoints and can be roughly translated as thresholds. While the intercepts for each cutpoint vary, note that the single coefficient on <code>org_tenure</code> is only possible because our proportional odds assumption holds and the effect is consistent (proportional) across levels of our ordered factor, <code>engagement</code>.</p>
<p>Consistent with the default output from the <code>multinom()</code> function used for multinomial logistic regression, <span class="math inline">\(p\)</span>-values are not provided in the standard output from the <code>polr()</code> function. However, we can calculate them for reasonably large samples by comparing the <span class="math inline">\(t\)</span>-values against the standard normal distribution:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store coefficients to df</span></span>
<span id="cb391-2"><a href="#cb391-2" aria-hidden="true" tabindex="-1"></a>coef_df <span class="ot">&lt;-</span> <span class="fu">coef</span>(<span class="fu">summary</span>(ord.fit))</span>
<span id="cb391-3"><a href="#cb391-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb391-4"><a href="#cb391-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce p-values</span></span>
<span id="cb391-5"><a href="#cb391-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(<span class="fu">abs</span>(coef_df[, <span class="st">&quot;t value&quot;</span>]), <span class="at">lower.tail =</span> <span class="cn">FALSE</span>) <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb391-6"><a href="#cb391-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb391-7"><a href="#cb391-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine p values with coefficients df</span></span>
<span id="cb391-8"><a href="#cb391-8" aria-hidden="true" tabindex="-1"></a>coef_df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(coef_df, <span class="st">&quot;p value&quot;</span> <span class="ot">=</span> p)</span>
<span id="cb391-9"><a href="#cb391-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb391-10"><a href="#cb391-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Display df contents</span></span>
<span id="cb391-11"><a href="#cb391-11" aria-hidden="true" tabindex="-1"></a>coef_df</span></code></pre></div>
<pre><code>##                    Value  Std. Error      t value       p value
## org_tenure   -0.00696485 0.008032275    -0.867108  3.858828e-01
## 1|2          -2.86612408 0.127144280   -22.542297 1.598105e-112
## 2|3          -0.84185679 0.080404351   -10.470289  1.182814e-25
## 3|4           2.17107818 0.103641956    20.947870  1.962145e-97
## 4|5        4122.55669611 0.103641956 39776.909511  0.000000e+00</code></pre>
<p>We can now estimate the likelihood of a particular observation having a specified level of <span class="math inline">\(Y\)</span>, such as <span class="math inline">\(Y \le 3\)</span>, as follows:</p>
<p><span class="math display">\[ log(\frac{Pr(Y \le 3)} {Pr(Y &gt; 3)}) =  2.17 - .007 x_{orgtenure} \]</span></p>
</div>
<div id="review-questions-10" class="section level2" number="12.4">
<h2><span class="header-section-number">12.4</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>Why can’t linear regression be used when outcome variables are measured on a non-continuous scale?</p></li>
<li><p>What are some examples of hypotheses for which logistic regression would be an appropriate model?</p></li>
<li><p>Why is it helpful to calculate the exponential of log-odds in a logistic regression model?</p></li>
<li><p>What does an odds ratio of 1.25 indicate in a binomial context?</p></li>
<li><p>What does an odds ratio of 0.75 indicate in a multinomial context?</p></li>
<li><p>How does Akaike Information Criterion (AIC) compare to <span class="math inline">\(R^2\)</span> with respect to its purpose and function?</p></li>
<li><p>In what type of R object do ordinal data need to be stored in order to implement ordinal logistic regression?</p></li>
<li><p>Why can’t linear regression be used to understand associations of predictors with an ordinal outcome?</p></li>
<li><p>What does the proportional odds (or parallel regression) assumption assume about model coefficients?</p></li>
<li><p>Why is it important to evaluate Brant’s omnibus test – over the test statistics on independent predictors alone – when determining whether the proportional odds assumption for ordinal logistic regression holds?</p></li>
</ol>
<!--chapter:end:r/12_logistic_regression.Rmd-->
</div>
</div>
<div id="pred-mod" class="section level1" number="13">
<h1><span class="header-section-number">13</span> Predictive Modeling</h1>
<p>In people analytics, inferential models like those covered in Chapters @ref(lm) and @ref(lme) are generally warranted by the research objectives. However, there are times when we need to go beyond interpreting coefficients to understand relative influences of predictors on an outcome and leverage the models to estimate or <em>predict</em> the most likely future values. This type of modeling is often referred to as <strong>predictive analytics</strong> and is the subject of this chapter.</p>
<p>A branch of <strong>Artificial Intelligence (AI)</strong> known as <strong>Machine Learning (ML)</strong> is often associated with predictive modeling. ML is a set of methods which aim to improve performance on a set of tasks by learning from data (Mitchell, 1997). ML applications can be found in medical diagnostics, autonomous vehicles, speech recognition, automated securities trading, lending decisions, marketing, and many other domains. The difference between statistics and ML is largely philosophical. Logistic regression, for example, is covered in both statistics and ML textbooks. While statistics focuses more on modeling, and ML is more algorithmic, both can be used for prediction. The broader field of <strong>data science</strong> often further confounds distinctions between these disciplines, though data science represents the entire end-to-end process – from data extraction and engineering to modeling and analysis.</p>
<p>A good use case for a predictive model in people analytics is data restatement to adjust for reorganizations over time. In this case, accuracy may be more important than the explainability of the model. A predictive model may be used to predict and assign a current functional executive to historical records to support leader-wise trending analyses. For example, consider a scenario in which the current VP of Product Marketing was hired six months ago to replace the former VP of Product Marketing who was in the role for the prior five year period. If the new VP wants to see monthly termination counts for their organization over the past three years, term records prior to the VP’s start date need to be associated with the <em>current</em> – rather than former – VP of Product Marketing to accomplish this. A model can be trained to learn from patterns in the combinations of current workers’ department, leader, and job attributes that can be used to assign current executives to past data such as historical termination events or month-end worker snapshots.</p>
<p>It is important to note that while there are AI/ML applications for people analytics, feeding data to black box models without an understanding of how the underlying algorithms work is generally a bad idea. Despite the glamour predictive analytics has seen in recent years due to the allure of a magical elixir that can portend the future, more times than not inferential statistical approaches are more appropriate in a people analytics setting. Unfortunately, the hype has given rise to AI snake oil to justify a premium price point for modern HR tech solutions, which are often little more than the descriptive statistics covered in Chapter @ref(desc-stats).</p>
<p>It is both a blessing and a curse that a predictive model can be built with a single line of code in R, and it is dangerous to blindly make recommendations on the basis of the output. A simpler model that you can understand and explain is generally a better option than a more complex one that you cannot. There is a high probability that stakeholders will ask deeper questions about <em>why</em> a particular segment of the workforce is predicted to exit at higher rates, for example, and answering these questions requires a deeper understanding of the factors that led to them being classified as such.</p>
<p>People data are messy, and understanding why people vary in attitudes, perceptions, and behaviors is an inherently difficult endeavor. Spoiler alert: There is no crystal ball that will soften this reality.</p>
<div class="figure" style="text-align: center">
<img src="graphics/stats_ml_satire.png" alt="Satirical illustration based on the viral meme of 2019 which depicts the enduring popularity and utility of linear regression, even in light of the billions companies invest in ML each year." width="75%" />
<p class="caption">
(#fig:stats-ml-satire)Satirical illustration based on the viral meme of 2019 which depicts the enduring popularity and utility of linear regression, even in light of the billions companies invest in ML each year.
</p>
</div>
<div id="cross-validation" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Cross-Validation</h2>
<p>Predictive modeling involves training a model on a data set referred to as a <strong>training set</strong> and using the model to make predictions for observations on a separate data set known as the <strong>test set</strong> or <strong>validation set</strong> to evaluate model performance.</p>
<p>A model is blind to data in the test set, since only data in the training set are used to <em>train</em> the model. Therefore, the test set provides a convenient way to compare the actual known values to the predicted values and estimate how well the model will generalize to other data. Evaluating model performance on the basis of training data would be akin to having students take an exam after providing them the answers. Strong performance on the training data is almost a certainty, so the value of a model rests on its performance on data not used to build it.</p>
<p>This partitioning procedure is known as <strong>cross-validation (CV)</strong>. While there are many methods of splitting data into training and test sets, a common feature among all is that the partitioning strategy is random. Without randomization, the model may learn patterns characteristic of the training set that result in inaccurate predictions for other data which do not feature such patterning.</p>
<p>This section will explore a few of the most common CV methods.</p>
<p><strong>Validation Set Approach</strong></p>
<p>The <strong>validation set approach</strong> is the most basic form of CV. This approach involves defining proportions by which to partition data into training and test sets – usually 2/3 and 1/3, respectively. The model is trained on the training set and then differences between actual <span class="math inline">\(y\)</span> and predicted <span class="math inline">\(\hat y\)</span> values are calculated on the test set to evaluate model performance.</p>
<p><strong>Leave-One-Out</strong></p>
<p><strong>Leave-one out</strong> CV fits a model using <span class="math inline">\(n-1\)</span> observations <span class="math inline">\(n\)</span> times. The test error is then evaluated by calculating differences between actual <span class="math inline">\(y\)</span> and predicted <span class="math inline">\(\hat y\)</span> values for all omitted observations.</p>
<p><span class="math inline">\(\textbf k\)</span><strong>-Fold</strong></p>
<p><span class="math inline">\(\textbf k\)</span><strong>-fold</strong> CV randomly partitions observations into <span class="math inline">\(k\)</span> groups, or <em>folds</em>, that are approximately equal in size. The first fold is treated as the test set, and the model is trained on the remaining <span class="math inline">\(k-1\)</span> folds. This procedure is repeated <span class="math inline">\(k\)</span> times, each with a different set of observations (<em>fold</em>) as the test set. The test error is then evaluated by calculating differences between actual <span class="math inline">\(y\)</span> and predicted <span class="math inline">\(\hat y\)</span> values across all test sets.</p>
</div>
<div id="model-performance" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Model Performance</h2>
<p>There are several methods of quantifying how well models perform on test data in order to assess the extent to which the model will generalize. Predicting modeling applications will be categorized as either <em>classification</em> or <em>forecasting</em> to reflect the families of use cases germane to people analytics.</p>
<p><strong>Classification</strong></p>
<p>In a classification setting, predictions are either right or wrong. Therefore, calculating the overall error rate across test data is straightforward:</p>
<p><span class="math display">\[ \frac{1}{n} \displaystyle\sum_{i=1}^{n} I(y_i \ne \hat y_i), \]</span></p>
<p>where <span class="math inline">\(I\)</span> is an indicator variable equal to <span class="math inline">\(1\)</span> if <span class="math inline">\(y_i \ne \hat y_i\)</span> and <span class="math inline">\(0\)</span> if <span class="math inline">\(y_i = \hat y_i\)</span>.</p>
<p>A <strong>confusion matrix</strong> is often used in classification to parse the overall model accuracy rate into component parts and understand whether the model performs at a level appropriate to a defined tolerance level per the research objective. In an attrition project, it may be more important to correctly predict high performers who leave than to correctly predict those who stay, as prediction errors for the former are likely far more costly. Several performance metrics are provided by the confusion matrix to aid in a more granular understanding of model performance, which are outlined in Figure @ref(fig:confusion-mtx):</p>
<ul>
<li><strong>True Positive</strong>: Number of correct true predictions</li>
<li><strong>True Negative</strong>: Number of correct false predictions</li>
<li><strong>False Positive</strong>: Number of incorrect true predictions (type 1 error)</li>
<li><strong>False Negative</strong>: Number of incorrect false predictions (type 2 error)</li>
<li><strong>Accuracy</strong>: Rate of correct predictions overall</li>
<li><strong>Sensitivity</strong>: Rate of actual true cases predicted correctly (also known as <strong>Recall</strong>)</li>
<li><strong>Specificity</strong>: Rate of actual false cases predicted correctly</li>
<li><strong>Precision</strong>: Rate of correct predictions among all cases predicted true</li>
<li><strong>Negative Predictive Value</strong>: Rate of correct predictions among all cases predicted false</li>
</ul>
<div class="figure" style="text-align: center">
<img src="graphics/confusion_matrix.png" alt="Confusion Matrix" width="100%" />
<p class="caption">
(#fig:confusion-mtx)Confusion Matrix
</p>
</div>
<p><strong>Forecasting</strong></p>
<p>While predictions are either right or wrong in a classification context, evaluating model performance in a forecasting context involves assessing the <em>magnitude</em> of differences between actual <span class="math inline">\(y\)</span> and predicted <span class="math inline">\(\hat y\)</span> values – usually across time periods. There are many methods for assessing forecasting model performance, and we will focus on some of the most common.</p>
<ul>
<li>Mean absolute deviation (MAD): Average absolute difference between actual <span class="math inline">\(y\)</span> and predicted <span class="math inline">\(\hat y\)</span> values</li>
</ul>
<p><span class="math display">\[ \frac{\sum|y_i - \hat y_i|}{n} \]</span></p>
<ul>
<li>Mean square error (MSE): Average squared difference between actual <span class="math inline">\(y\)</span> and predicted <span class="math inline">\(\hat y\)</span> values</li>
</ul>
<p><span class="math display">\[ \frac{\sum(y_i - \hat y_i)^2}{n} \]</span></p>
<p>Squaring differences accomplishes two key objectives: (1) converts negative differences to positive consistent with the MAD approach, and (2) imposes a greater penalty on larger differences, which causes error rates to increase at an exponential rather than linear rate (e.g., <span class="math inline">\(1^2 = 1\)</span>, <span class="math inline">\(2^2 = 4\)</span>, <span class="math inline">\(3^2 = 9\)</span>, <span class="math inline">\(4^2 = 16\)</span>). MSE is perhaps the most pervasive model performance measure in predictive modeling.</p>
<ul>
<li>Mean absolute percentage error (MAPE): Average absolute difference expressed as a percentage</li>
</ul>
<p><span class="math display">\[ (\frac{100}{n})\sum|\frac{y_i - \hat y_i}{y_i}| \]</span></p>
</div>
<div id="bias-variance-tradeoff" class="section level2" number="13.3">
<h2><span class="header-section-number">13.3</span> Bias-Variance Tradeoff</h2>
<p><strong>Bias-variance tradeoff</strong> refers to the important endeavor of minimizing two sources of error that prevent models from generalizing beyond their training data: <em>bias</em> and <em>variance</em>.</p>
<ul>
<li><strong>Bias</strong>: Error from erroneous assumptions in the model. High bias results from models that are too simplistic to accurately capture the relationships between predictors and the outcome; this is known as <strong>underfitting</strong>.</li>
<li><strong>Variance</strong>: Error from sensitivity to small fluctuations in training data. High variance results from models that capture random noise rather than the significant patterns in the training data; this is known as <strong>overfitting</strong>.</li>
</ul>
<p>As a general rule, the more flexible the model, the more variance and less bias. As shown in Figure @ref(fig:bias-var-tradeoff), minimizing test error by achieving a model with optimal fit to the data requires limiting both bias and variance.</p>
<div class="figure" style="text-align: center">
<img src="graphics/bias_variance_tradeoff.png" alt="Bias-variance tradeoff. Dashed line represents optimal model performance." width="75%" />
<p class="caption">
(#fig:bias-var-tradeoff)Bias-variance tradeoff. Dashed line represents optimal model performance.
</p>
</div>
</div>
<div id="tree-based-algorithms" class="section level2" number="13.4">
<h2><span class="header-section-number">13.4</span> Tree-Based Algorithms</h2>
<p>While there are many flexible ML algorithms, such as <strong>Extreme Gradient Boosting (XGBoost)</strong>, <strong>Artificial Neural Networks (ANN)</strong>, and <strong>Support Vector Machines (SVM)</strong>, that tend to perform well across a range of prediction problems, these will not be covered as we will focus on more <em>interpretable</em> tree-based algorithms that are more suitable for people analytics.</p>
<p><strong>Decision Trees</strong></p>
<p>In addition to the inferential models covered in previous chapters, <strong>decision trees</strong> are also excellent tools that lend to simple and effective narratives about factors influencing outcomes in either a regression or classification setting. As illustrated in Figure @ref(fig:decision-tree), decision trees resemble a tree that depicts a set of decisions as well as consequences of those decisions. The top-level <code>Department</code> variable is known as a root node, and the remaining <code>Tenure</code>, <code>Performance Rating</code>, and <code>Remote</code> nodes are known as interior nodes. Decisions represented in <code>Active</code> and <code>Inactive</code> boxes are referred to as leaf, terminal, or end nodes.</p>
<p>As evidenced by the inactive status prediction in the leaf node, this decision tree shows that employees in the Engineering department are unlikely to stick around for two or more years. In addition, employees in other departments terminate if they are low performers or if they are high performers who do not work remotely. It’s important to note that in practice, it is rare to achieve complete purity in leaf nodes, as there is usually a mix of results in a given node – though a more frequent class or range of values is expected. If leaf nodes for a classification problem, for example, are comprised of a single class, it may be evidence of overfitting (especially if the <span class="math inline">\(n\)</span>-count is small).</p>
<div class="figure" style="text-align: center">
<img src="graphics/decision_tree.png" alt="Conceptual decision tree for employee attrition prediction." width="75%" />
<p class="caption">
(#fig:decision-tree)Conceptual decision tree for employee attrition prediction.
</p>
</div>
<p>The accuracy of predictions based on a deep tree with an excessive number of partitions and few observations will likely be unacceptable beyond the training data. The goal of decision trees is to arrive at a set of decisions that best delineate one class or range of values from others by identifying patterns and natural cutpoints among a reasonably large subset of the data at each level. There must be signal in the features used to partition the data such that predictions are an improvement on random guessing (e.g., 50/50 chance in a binary classification setting).</p>
<p><strong>Random Forests</strong></p>
<p>A <strong>random forest (RF)</strong> is a natural extension of the decision tree. As the name implies, a random forest is a large number (forest) of individual decision trees that operate as an ensemble. The process of fitting multiple models on different subsets of training data and then combining predictions across all models is referred to as <strong>bagging</strong>. This is a case of <em>wisdom of the crowd</em> decision-making in which a large number of uncorrelated trees (models) functioning as a committee should outperform individual trees.</p>
<p>To understand the mechanics of a random forest, consider an investment strategy in which you diversify an investment portfolio by spreading investments across different assets. By investing in assets that are uncorrelated, there is a lower likelihood that the portfolio’s value will be negatively impacted by a negative event impacting a single holding. In the same way, a random forest constructs an ensemble of trees that are each based on different randomized subsets of data and combinations of features to amalgamate the information and arrive at more accurate predictions. The potential for poor performance from a single tree is mitigated by the many trees working in concert with one another.</p>
<p>Though random forests combine information from many decision trees, there are still intuitive ways of understanding which features are most important in segmenting employees to understand drivers of various outcomes.</p>
</div>
<div id="predictive-modeling" class="section level2" number="13.5">
<h2><span class="header-section-number">13.5</span> Predictive Modeling</h2>
<p>We will now integrate these concepts into attrition classification and forecasting examples. The high-level prediction workflow will follow four steps:</p>
<ul>
<li><strong>Step 1</strong>: Partition data into training and test sets for cross-validation.</li>
<li><strong>Step 2</strong>: Build models using training data.</li>
<li><strong>Step 3</strong>: Use models to make predictions on test data.</li>
<li><strong>Step 4</strong>: Evaluate model performance.</li>
</ul>
<p><strong>Classification</strong></p>
<p>To demonstrate the prediction workflow steps for classification, we will leverage our <code>employees</code> data set:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb393-2"><a href="#cb393-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb393-3"><a href="#cb393-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb393-4"><a href="#cb393-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb393-5"><a href="#cb393-5" aria-hidden="true" tabindex="-1"></a>prediction_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb393-6"><a href="#cb393-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb393-7"><a href="#cb393-7" aria-hidden="true" tabindex="-1"></a><span class="co"># One-hot encode active outcome variable, setting inactives to 1 and actives to 0</span></span>
<span id="cb393-8"><a href="#cb393-8" aria-hidden="true" tabindex="-1"></a>prediction_dat<span class="sc">$</span>active <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(prediction_dat<span class="sc">$</span>active <span class="sc">==</span> <span class="st">&#39;No&#39;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<ul>
<li><strong>Step 1</strong>: Partition data into training and test sets for cross-validation.</li>
</ul>
<p>For this example, we will implement the validation set approach for CV.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible training and test sets</span></span>
<span id="cb394-2"><a href="#cb394-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">9876</span>)</span>
<span id="cb394-3"><a href="#cb394-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-4"><a href="#cb394-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly select 2/3 of employees for the training set</span></span>
<span id="cb394-5"><a href="#cb394-5" aria-hidden="true" tabindex="-1"></a>training_ids <span class="ot">&lt;-</span> <span class="fu">sample</span>(prediction_dat<span class="sc">$</span>employee_id, <span class="at">size =</span> <span class="fu">nrow</span>(prediction_dat) <span class="sc">*</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb394-6"><a href="#cb394-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-7"><a href="#cb394-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create training data</span></span>
<span id="cb394-8"><a href="#cb394-8" aria-hidden="true" tabindex="-1"></a>training_dat <span class="ot">&lt;-</span> prediction_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(employee_id <span class="sc">%in%</span> training_ids)</span>
<span id="cb394-9"><a href="#cb394-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-10"><a href="#cb394-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test data using remaining 1/3 of observations</span></span>
<span id="cb394-11"><a href="#cb394-11" aria-hidden="true" tabindex="-1"></a>test_dat <span class="ot">&lt;-</span> prediction_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>employee_id <span class="sc">%in%</span> training_ids)</span>
<span id="cb394-12"><a href="#cb394-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-13"><a href="#cb394-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Return Boolean to validate that all observations are accounted for</span></span>
<span id="cb394-14"><a href="#cb394-14" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(training_dat) <span class="sc">+</span> <span class="fu">nrow</span>(test_dat) <span class="sc">==</span> <span class="fu">nrow</span>(prediction_dat)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<ul>
<li><strong>Step 2</strong>: Build models using training data.</li>
</ul>
<p>Machine learning (ML) algorithms are sensitive to imbalanced classes. That is, when there is not an equal representation of each class we wish to predict in the data (e.g., employees who left and employees who did not), it can adversely impact our results. In the case of our <code>employees</code> data set, there are 1,233 observations for active employees but only 237 observations for inactive employees. Therefore, we will introduce a popular technique to address this known as <strong>Synthetic Minority Oversampling Technique (SMOTE)</strong>, which will be important for the RF model we will train. This technique takes random samples with replacement (i.e., each observation may be chosen more than once) from the minority class to augment the class’s representation in the dataset and achieve balanced classes.</p>
<p>While functions exist for implementing SMOTE, such as the <code>SMOTE()</code> function from the <code>DMwR</code> library, in the spirit of demystifying black box ML approaches we will step through this procedure without the use of an available function:</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate class representation delta in training data</span></span>
<span id="cb396-2"><a href="#cb396-2" aria-hidden="true" tabindex="-1"></a>training_class_delta <span class="ot">&lt;-</span> <span class="fu">nrow</span>(training_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="dv">0</span>)) <span class="sc">-</span> <span class="fu">nrow</span>(training_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb396-3"><a href="#cb396-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb396-4"><a href="#cb396-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy training data to separate data frame for oversampling</span></span>
<span id="cb396-5"><a href="#cb396-5" aria-hidden="true" tabindex="-1"></a>training_dat_os <span class="ot">&lt;-</span> training_dat</span>
<span id="cb396-6"><a href="#cb396-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb396-7"><a href="#cb396-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducible results</span></span>
<span id="cb396-8"><a href="#cb396-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">9876</span>)</span>
<span id="cb396-9"><a href="#cb396-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb396-10"><a href="#cb396-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Oversample the underrepresented inactive class by training_class_delta to align observation counts with active class</span></span>
<span id="cb396-11"><a href="#cb396-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: A loop is not the most efficient -- especially with large data sets -- but it is leveraged here to simplify instruction on SMOTE mechanics</span></span>
<span id="cb396-12"><a href="#cb396-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>training_class_delta){</span>
<span id="cb396-13"><a href="#cb396-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb396-14"><a href="#cb396-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sample employee id from underrepresented class</span></span>
<span id="cb396-15"><a href="#cb396-15" aria-hidden="true" tabindex="-1"></a>  oversampled_id <span class="ot">&lt;-</span> <span class="fu">sample</span>(training_dat_os[training_dat_os<span class="sc">$</span>active <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&#39;employee_id&#39;</span>], <span class="at">size =</span> <span class="dv">1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb396-16"><a href="#cb396-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb396-17"><a href="#cb396-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store observation for sampled employee id</span></span>
<span id="cb396-18"><a href="#cb396-18" aria-hidden="true" tabindex="-1"></a>  new_obs <span class="ot">&lt;-</span> <span class="fu">unique</span>(training_dat_os <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(employee_id <span class="sc">==</span> oversampled_id))</span>
<span id="cb396-19"><a href="#cb396-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb396-20"><a href="#cb396-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Append sampled observation to training data frame</span></span>
<span id="cb396-21"><a href="#cb396-21" aria-hidden="true" tabindex="-1"></a>  training_dat_os <span class="ot">&lt;-</span> <span class="fu">rbind</span>(training_dat_os, new_obs)</span>
<span id="cb396-22"><a href="#cb396-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb396-23"><a href="#cb396-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb396-24"><a href="#cb396-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Return Boolean to validate that classes are equal in the training data</span></span>
<span id="cb396-25"><a href="#cb396-25" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(training_dat_os <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="dv">0</span>)) <span class="sc">==</span> <span class="fu">nrow</span>(training_dat_os <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Next, we will fit a binomial logistic regression model using a subset of predictors from the oversampled training data. For comparison, let’s summarize a model using original and oversampled data.</p>
<template id="cfc494ee-4da2-4f71-b8c5-532853605e52"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-841a0230{}.cl-8413d9fa{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8413da18{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8413e68e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8413e698{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84141a0a{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a1e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a1f{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a28{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a32{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a3c{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a46{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a50{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a5a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a64{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a65{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a6e{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a6f{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a78{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a82{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a8c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a96{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141a97{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141aa0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141aaa{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141ab4{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141abe{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141ac8{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141ac9{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141ad2{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141adc{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141ae6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141ae7{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141af0{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141afa{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b04{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b0e{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b0f{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b18{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b22{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b23{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b2c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b36{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b37{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b40{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b4a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b54{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b5e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b68{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b72{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b7c{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b86{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84141b87{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-841a0230'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-84141b7c"><p class="cl-8413e68e"><span class="cl-8413d9fa"></span></p></td><td class="cl-84141b5e"><p class="cl-8413e698"><span class="cl-8413d9fa">Estimate</span></p></td><td class="cl-84141b72"><p class="cl-8413e698"><span class="cl-8413d9fa">Standard Error</span></p></td><td class="cl-84141b86"><p class="cl-8413e698"><span class="cl-8413d9fa">z value</span></p></td><td class="cl-84141b68"><p class="cl-8413e698"><span class="cl-8413d9fa">Pr(&gt;|z|)</span></p></td><td class="cl-84141b87"><p class="cl-8413e68e"><span class="cl-8413d9fa"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-84141a32"><p class="cl-8413e68e"><span class="cl-8413d9fa">(Intercept)</span></p></td><td class="cl-84141a1e"><p class="cl-8413e698"><span class="cl-8413d9fa">85.759</span></p></td><td class="cl-84141a28"><p class="cl-8413e698"><span class="cl-8413d9fa">16.459</span></p></td><td class="cl-84141a0a"><p class="cl-8413e698"><span class="cl-8413d9fa">5.210</span></p></td><td class="cl-84141a3c"><p class="cl-8413e698"><span class="cl-8413d9fa">0.0000</span></p></td><td class="cl-84141a1f"><p class="cl-8413e68e"><span class="cl-8413d9fa">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84141a6e"><p class="cl-8413e68e"><span class="cl-8413d9fa">overtimeYes</span></p></td><td class="cl-84141a5a"><p class="cl-8413e698"><span class="cl-8413d9fa">2.516</span></p></td><td class="cl-84141a50"><p class="cl-8413e698"><span class="cl-8413d9fa">0.877</span></p></td><td class="cl-84141a65"><p class="cl-8413e698"><span class="cl-8413d9fa">2.870</span></p></td><td class="cl-84141a64"><p class="cl-8413e698"><span class="cl-8413d9fa">0.0041</span></p></td><td class="cl-84141a46"><p class="cl-8413e68e"><span class="cl-8413d9fa"> **</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84141a96"><p class="cl-8413e68e"><span class="cl-8413d9fa">job_lvl</span></p></td><td class="cl-84141a8c"><p class="cl-8413e698"><span class="cl-8413d9fa">-0.137</span></p></td><td class="cl-84141a78"><p class="cl-8413e698"><span class="cl-8413d9fa">0.480</span></p></td><td class="cl-84141a6f"><p class="cl-8413e698"><span class="cl-8413d9fa">-0.285</span></p></td><td class="cl-84141a82"><p class="cl-8413e698"><span class="cl-8413d9fa">0.7753</span></p></td><td class="cl-84141a97"><p class="cl-8413e68e"><span class="cl-8413d9fa">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84141ab4"><p class="cl-8413e68e"><span class="cl-8413d9fa">engagement</span></p></td><td class="cl-84141aa0"><p class="cl-8413e698"><span class="cl-8413d9fa">-0.684</span></p></td><td class="cl-84141ac9"><p class="cl-8413e698"><span class="cl-8413d9fa">0.630</span></p></td><td class="cl-84141abe"><p class="cl-8413e698"><span class="cl-8413d9fa">-1.086</span></p></td><td class="cl-84141ac8"><p class="cl-8413e698"><span class="cl-8413d9fa">0.2775</span></p></td><td class="cl-84141aaa"><p class="cl-8413e68e"><span class="cl-8413d9fa">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84141ad2"><p class="cl-8413e68e"><span class="cl-8413d9fa">interview_rating</span></p></td><td class="cl-84141ae7"><p class="cl-8413e698"><span class="cl-8413d9fa">-24.918</span></p></td><td class="cl-84141af0"><p class="cl-8413e698"><span class="cl-8413d9fa">4.767</span></p></td><td class="cl-84141adc"><p class="cl-8413e698"><span class="cl-8413d9fa">-5.227</span></p></td><td class="cl-84141afa"><p class="cl-8413e698"><span class="cl-8413d9fa">0.0000</span></p></td><td class="cl-84141ae6"><p class="cl-8413e68e"><span class="cl-8413d9fa">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84141b0e"><p class="cl-8413e698"><span class="cl-8413da18">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84141b54"><p class="cl-8413e68e"><span class="cl-8413d9fa"> </span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84141b54"><p class="cl-8413e68e"><span class="cl-8413d9fa">(Dispersion parameter for binomial family taken to be 1)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84141b54"><p class="cl-8413e68e"><span class="cl-8413d9fa">Null deviance: 869 on 979 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84141b54"><p class="cl-8413e68e"><span class="cl-8413d9fa">Residual deviance: 44.47 on 975 degrees of freedom</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="a384274c-db11-4fe3-84d9-0f73c79ba1f5"></div>
<script>
var dest = document.getElementById("a384274c-db11-4fe3-84d9-0f73c79ba1f5");
var template = document.getElementById("cfc494ee-4da2-4f71-b8c5-532853605e52");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<template id="74b3375c-0073-4e18-8f51-8f0ba4c877c9"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-844843ca{}.cl-84421c20{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84421c34{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-844228a0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-844228b4{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84425b72{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425b86{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425b9a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425b9b{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425ba4{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bae{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bb8{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bc2{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bcc{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bd6{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425be0{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bea{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bf4{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425bfe{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c08{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c12{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c1c{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c26{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c30{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c3a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c3b{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c44{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c4e{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c58{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c62{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c6c{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c76{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c80{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c8a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425c94{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d2a{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d34{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d3e{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d48{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d52{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d5c{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d66{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d70{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d7a{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d84{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d8e{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425d98{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425da2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425dac{width:56.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425db6{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425dc0{width:97.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425dca{width:55.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84425dd4{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-844843ca'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-84425dc0"><p class="cl-844228a0"><span class="cl-84421c20"></span></p></td><td class="cl-84425da2"><p class="cl-844228b4"><span class="cl-84421c20">Estimate</span></p></td><td class="cl-84425db6"><p class="cl-844228b4"><span class="cl-84421c20">Standard Error</span></p></td><td class="cl-84425dca"><p class="cl-844228b4"><span class="cl-84421c20">z value</span></p></td><td class="cl-84425dac"><p class="cl-844228b4"><span class="cl-84421c20">Pr(&gt;|z|)</span></p></td><td class="cl-84425dd4"><p class="cl-844228a0"><span class="cl-84421c20"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-84425ba4"><p class="cl-844228a0"><span class="cl-84421c20">(Intercept)</span></p></td><td class="cl-84425b86"><p class="cl-844228b4"><span class="cl-84421c20">131.129</span></p></td><td class="cl-84425b9b"><p class="cl-844228b4"><span class="cl-84421c20">19.566</span></p></td><td class="cl-84425b72"><p class="cl-844228b4"><span class="cl-84421c20">6.702</span></p></td><td class="cl-84425bae"><p class="cl-844228b4"><span class="cl-84421c20">0.0000</span></p></td><td class="cl-84425b9a"><p class="cl-844228a0"><span class="cl-84421c20">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84425bea"><p class="cl-844228a0"><span class="cl-84421c20">overtimeYes</span></p></td><td class="cl-84425bcc"><p class="cl-844228b4"><span class="cl-84421c20">2.271</span></p></td><td class="cl-84425bc2"><p class="cl-844228b4"><span class="cl-84421c20">0.676</span></p></td><td class="cl-84425be0"><p class="cl-844228b4"><span class="cl-84421c20">3.359</span></p></td><td class="cl-84425bd6"><p class="cl-844228b4"><span class="cl-84421c20">0.0008</span></p></td><td class="cl-84425bb8"><p class="cl-844228a0"><span class="cl-84421c20">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84425c1c"><p class="cl-844228a0"><span class="cl-84421c20">job_lvl</span></p></td><td class="cl-84425c12"><p class="cl-844228b4"><span class="cl-84421c20">0.048</span></p></td><td class="cl-84425bfe"><p class="cl-844228b4"><span class="cl-84421c20">0.367</span></p></td><td class="cl-84425bf4"><p class="cl-844228b4"><span class="cl-84421c20">0.130</span></p></td><td class="cl-84425c08"><p class="cl-844228b4"><span class="cl-84421c20">0.8962</span></p></td><td class="cl-84425c26"><p class="cl-844228a0"><span class="cl-84421c20">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84425c3b"><p class="cl-844228a0"><span class="cl-84421c20">engagement</span></p></td><td class="cl-84425c30"><p class="cl-844228b4"><span class="cl-84421c20">-0.412</span></p></td><td class="cl-84425c58"><p class="cl-844228b4"><span class="cl-84421c20">0.427</span></p></td><td class="cl-84425c44"><p class="cl-844228b4"><span class="cl-84421c20">-0.964</span></p></td><td class="cl-84425c4e"><p class="cl-844228b4"><span class="cl-84421c20">0.3353</span></p></td><td class="cl-84425c3a"><p class="cl-844228a0"><span class="cl-84421c20">   </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-84425c62"><p class="cl-844228a0"><span class="cl-84421c20">interview_rating</span></p></td><td class="cl-84425c80"><p class="cl-844228b4"><span class="cl-84421c20">-37.875</span></p></td><td class="cl-84425c8a"><p class="cl-844228b4"><span class="cl-84421c20">5.646</span></p></td><td class="cl-84425c6c"><p class="cl-844228b4"><span class="cl-84421c20">-6.708</span></p></td><td class="cl-84425c94"><p class="cl-844228b4"><span class="cl-84421c20">0.0000</span></p></td><td class="cl-84425c76"><p class="cl-844228a0"><span class="cl-84421c20">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84425d34"><p class="cl-844228b4"><span class="cl-84421c34">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84425d98"><p class="cl-844228a0"><span class="cl-84421c20"> </span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84425d98"><p class="cl-844228a0"><span class="cl-84421c20">(Dispersion parameter for binomial family taken to be 1)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84425d98"><p class="cl-844228a0"><span class="cl-84421c20">Null deviance: 2276 on 1641 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-84425d98"><p class="cl-844228a0"><span class="cl-84421c20">Residual deviance: 88.66 on 1637 degrees of freedom</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="1d443c07-6bd8-4a4d-aedb-0e935a4ccc85"></div>
<script>
var dest = document.getElementById("1d443c07-6bd8-4a4d-aedb-0e935a4ccc85");
var template = document.getElementById("74b3375c-0073-4e18-8f51-8f0ba4c877c9");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>As we can see, results of the two binomial logistic regression models are consistent in the sense that only <code>overtime</code> and <code>interview_rating</code> emerge as significant in classifying employees into active and inactive classes. Since the oversampled data has a larger <span class="math inline">\(n\)</span>-count, there is greater power to detect effects, and we see this reflected in the larger coefficients and lower standard errors.</p>
<p>Using a similar syntax, we can fit a RF using the <code>randomForest()</code> function from the package by the same name:</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb398-2"><a href="#cb398-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb398-3"><a href="#cb398-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-4"><a href="#cb398-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Train RF model using original data</span></span>
<span id="cb398-5"><a href="#cb398-5" aria-hidden="true" tabindex="-1"></a>rf.fit <span class="ot">&lt;-</span> randomForest<span class="sc">::</span><span class="fu">randomForest</span>(active <span class="sc">~</span> overtime <span class="sc">+</span> job_lvl <span class="sc">+</span> engagement <span class="sc">+</span> interview_rating, <span class="at">data =</span> training_dat)</span>
<span id="cb398-6"><a href="#cb398-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-7"><a href="#cb398-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Train RF model using oversampled data</span></span>
<span id="cb398-8"><a href="#cb398-8" aria-hidden="true" tabindex="-1"></a>rf.os.fit <span class="ot">&lt;-</span> randomForest<span class="sc">::</span><span class="fu">randomForest</span>(active <span class="sc">~</span> overtime <span class="sc">+</span> job_lvl <span class="sc">+</span> engagement <span class="sc">+</span> interview_rating, <span class="at">data =</span> training_dat_os)</span></code></pre></div>
<p>While RFs generally offer a significant lift in performance beyond a single decision tree, we could also apply <em>tuning wrappers</em> around the <code>randomForest()</code> function to tune the model’s hyperparameters. Experimenting with a range of values for parameters, such as <code>mtry</code> for the number of variables to randomly sample and <code>ntree</code> for the number of trees to grow, may further improve model performance. Hyperparameter tuning is beyond the scope of this book, but Kuhn and Johnson (2013) is an excellent resource for a more exhaustive treatment on ML models.</p>
<ul>
<li><strong>Step 3</strong>: Use models to make predictions on test data.</li>
</ul>
<p>While there are packages in R which provide performance metrics for predictive models, we will create a function for greater visibility into how each metric is calculated:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Develop function that returns a data frame of classification model performance statistics</span></span>
<span id="cb399-2"><a href="#cb399-2" aria-hidden="true" tabindex="-1"></a>classifier.perf <span class="ot">&lt;-</span> <span class="cf">function</span>(actual, predicted){</span>
<span id="cb399-3"><a href="#cb399-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb399-4"><a href="#cb399-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check for missing values; metrics will be computed on non-missing values only</span></span>
<span id="cb399-5"><a href="#cb399-5" aria-hidden="true" tabindex="-1"></a>  predicted <span class="ot">&lt;-</span> predicted[<span class="sc">!</span><span class="fu">is.na</span>(actual)]</span>
<span id="cb399-6"><a href="#cb399-6" aria-hidden="true" tabindex="-1"></a>  actual <span class="ot">&lt;-</span> actual[<span class="sc">!</span><span class="fu">is.na</span>(actual)]</span>
<span id="cb399-7"><a href="#cb399-7" aria-hidden="true" tabindex="-1"></a>  actual <span class="ot">&lt;-</span> actual[<span class="sc">!</span><span class="fu">is.na</span>(predicted)]</span>
<span id="cb399-8"><a href="#cb399-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb399-9"><a href="#cb399-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Produce counts for model performance metrics</span></span>
<span id="cb399-10"><a href="#cb399-10" aria-hidden="true" tabindex="-1"></a>  TP <span class="ot">&lt;-</span> <span class="fu">sum</span>(actual <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> predicted <span class="sc">==</span> <span class="dv">1</span>) <span class="co"># true positives</span></span>
<span id="cb399-11"><a href="#cb399-11" aria-hidden="true" tabindex="-1"></a>  TN <span class="ot">&lt;-</span> <span class="fu">sum</span>(actual <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> predicted <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># true negatives</span></span>
<span id="cb399-12"><a href="#cb399-12" aria-hidden="true" tabindex="-1"></a>  FP <span class="ot">&lt;-</span> <span class="fu">sum</span>(actual <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> predicted <span class="sc">==</span> <span class="dv">1</span>) <span class="co"># false positives</span></span>
<span id="cb399-13"><a href="#cb399-13" aria-hidden="true" tabindex="-1"></a>  FN <span class="ot">&lt;-</span> <span class="fu">sum</span>(actual <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> predicted <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># false negatives</span></span>
<span id="cb399-14"><a href="#cb399-14" aria-hidden="true" tabindex="-1"></a>  P <span class="ot">&lt;-</span> TP <span class="sc">+</span> FN <span class="co"># total positives</span></span>
<span id="cb399-15"><a href="#cb399-15" aria-hidden="true" tabindex="-1"></a>  N <span class="ot">&lt;-</span> FP <span class="sc">+</span> TN <span class="co"># total negatives</span></span>
<span id="cb399-16"><a href="#cb399-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb399-17"><a href="#cb399-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store rates to variables</span></span>
<span id="cb399-18"><a href="#cb399-18" aria-hidden="true" tabindex="-1"></a>  accuracy <span class="ot">&lt;-</span> <span class="fu">signif</span>(<span class="dv">100</span> <span class="sc">*</span> (<span class="fu">sum</span>(actual <span class="sc">==</span> predicted) <span class="sc">/</span> <span class="fu">length</span>(actual)), <span class="dv">3</span>)</span>
<span id="cb399-19"><a href="#cb399-19" aria-hidden="true" tabindex="-1"></a>  sensitivity <span class="ot">&lt;-</span> <span class="fu">signif</span>(<span class="dv">100</span> <span class="sc">*</span> (TP <span class="sc">/</span> (TP <span class="sc">+</span> FN)), <span class="dv">3</span>)</span>
<span id="cb399-20"><a href="#cb399-20" aria-hidden="true" tabindex="-1"></a>  specificity <span class="ot">&lt;-</span> <span class="fu">signif</span>(<span class="dv">100</span> <span class="sc">*</span> (TN <span class="sc">/</span> (TN <span class="sc">+</span> FP)), <span class="dv">3</span>)</span>
<span id="cb399-21"><a href="#cb399-21" aria-hidden="true" tabindex="-1"></a>  precision <span class="ot">&lt;-</span> <span class="fu">signif</span>(<span class="dv">100</span> <span class="sc">*</span> (TP <span class="sc">/</span> (TP <span class="sc">+</span> FP)), <span class="dv">3</span>)</span>
<span id="cb399-22"><a href="#cb399-22" aria-hidden="true" tabindex="-1"></a>  neg_pred_val <span class="ot">&lt;-</span> <span class="fu">signif</span>(<span class="dv">100</span> <span class="sc">*</span> (TN <span class="sc">/</span> (TN <span class="sc">+</span> FN)), <span class="dv">3</span>)</span>
<span id="cb399-23"><a href="#cb399-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb399-24"><a href="#cb399-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Format output</span></span>
<span id="cb399-25"><a href="#cb399-25" aria-hidden="true" tabindex="-1"></a>  stat_nm <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;accuracy&quot;</span>, <span class="st">&quot;sensitivity&quot;</span>, <span class="st">&quot;specificity&quot;</span>, <span class="st">&quot;precision&quot;</span>, <span class="st">&quot;neg_pred_val&quot;</span>)</span>
<span id="cb399-26"><a href="#cb399-26" aria-hidden="true" tabindex="-1"></a>  stat_vl <span class="ot">&lt;-</span> <span class="fu">c</span>(accuracy, sensitivity, specificity, precision, neg_pred_val)</span>
<span id="cb399-27"><a href="#cb399-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb399-28"><a href="#cb399-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return model performance statistics in a data frame</span></span>
<span id="cb399-29"><a href="#cb399-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">data.frame</span>(stat_nm, stat_vl))</span>
<span id="cb399-30"><a href="#cb399-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb399-31"><a href="#cb399-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can use the <code>predict()</code> function in conjunction with the object holding the trained model to predict class values for our test data. For classification, we need to define a probability threshold for classifying observations into one class versus the other. This is an important consideration since we want to avoid investing in retention strategies for employees who are not actually going to leave (minimizing false positives), while ensuring employees who are truly at risk are flagged as such (maximizing true positives).</p>
<p>We will predict the class using both binomial logistic regression and RF models, trained on both balanced (SMOTE) and imbalanced class data, and store performance metrics in a single data frame for easy comparison:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize empty data frame for model performance stats</span></span>
<span id="cb400-2"><a href="#cb400-2" aria-hidden="true" tabindex="-1"></a>class.perf.metrics <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb400-3"><a href="#cb400-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-4"><a href="#cb400-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set probability threshold for classification</span></span>
<span id="cb400-5"><a href="#cb400-5" aria-hidden="true" tabindex="-1"></a>prob_threshold <span class="ot">&lt;-</span> .<span class="dv">7</span></span>
<span id="cb400-6"><a href="#cb400-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-7"><a href="#cb400-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict with logistic regression model</span></span>
<span id="cb400-8"><a href="#cb400-8" aria-hidden="true" tabindex="-1"></a>class.perf.metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(class.perf.metrics, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb400-9"><a href="#cb400-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">model =</span> <span class="fu">rep</span>(<span class="st">&quot;GLM&quot;</span>, <span class="fu">nrow</span>(test_dat)),</span>
<span id="cb400-10"><a href="#cb400-10" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">classifier.perf</span>(</span>
<span id="cb400-11"><a href="#cb400-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">actual =</span> test_dat<span class="sc">$</span>active,</span>
<span id="cb400-12"><a href="#cb400-12" aria-hidden="true" tabindex="-1"></a>                      <span class="at">predicted =</span> <span class="fu">ifelse</span>(<span class="fu">predict</span>(glm.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>) <span class="sc">&gt;=</span> prob_threshold, <span class="dv">1</span>, <span class="dv">0</span>))))</span>
<span id="cb400-13"><a href="#cb400-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-14"><a href="#cb400-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict with logistic regression model (SMOTE)</span></span>
<span id="cb400-15"><a href="#cb400-15" aria-hidden="true" tabindex="-1"></a>class.perf.metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(class.perf.metrics, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb400-16"><a href="#cb400-16" aria-hidden="true" tabindex="-1"></a>                      <span class="at">model =</span> <span class="fu">rep</span>(<span class="st">&quot;GLM (SMOTE)&quot;</span>, <span class="fu">nrow</span>(test_dat)),</span>
<span id="cb400-17"><a href="#cb400-17" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">classifier.perf</span>(</span>
<span id="cb400-18"><a href="#cb400-18" aria-hidden="true" tabindex="-1"></a>                      <span class="at">actual =</span> test_dat<span class="sc">$</span>active,</span>
<span id="cb400-19"><a href="#cb400-19" aria-hidden="true" tabindex="-1"></a>                      <span class="at">predicted =</span> <span class="fu">ifelse</span>(<span class="fu">predict</span>(glm.os.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>) <span class="sc">&gt;=</span> prob_threshold, <span class="dv">1</span>, <span class="dv">0</span>))))</span>
<span id="cb400-20"><a href="#cb400-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-21"><a href="#cb400-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict with RF model</span></span>
<span id="cb400-22"><a href="#cb400-22" aria-hidden="true" tabindex="-1"></a>class.perf.metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(class.perf.metrics, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb400-23"><a href="#cb400-23" aria-hidden="true" tabindex="-1"></a>                      <span class="at">model =</span> <span class="fu">rep</span>(<span class="st">&quot;RF&quot;</span>, <span class="fu">nrow</span>(test_dat)),</span>
<span id="cb400-24"><a href="#cb400-24" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">classifier.perf</span>(</span>
<span id="cb400-25"><a href="#cb400-25" aria-hidden="true" tabindex="-1"></a>                      <span class="at">actual =</span> test_dat<span class="sc">$</span>active,</span>
<span id="cb400-26"><a href="#cb400-26" aria-hidden="true" tabindex="-1"></a>                      <span class="at">predicted =</span> <span class="fu">ifelse</span>(<span class="fu">predict</span>(rf.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>) <span class="sc">&gt;=</span> prob_threshold, <span class="dv">1</span>, <span class="dv">0</span>))))</span>
<span id="cb400-27"><a href="#cb400-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-28"><a href="#cb400-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict with RF model (SMOTE)</span></span>
<span id="cb400-29"><a href="#cb400-29" aria-hidden="true" tabindex="-1"></a>class.perf.metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(class.perf.metrics, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb400-30"><a href="#cb400-30" aria-hidden="true" tabindex="-1"></a>                      <span class="at">model =</span> <span class="fu">rep</span>(<span class="st">&quot;RF (SMOTE)&quot;</span>, <span class="fu">nrow</span>(test_dat)),</span>
<span id="cb400-31"><a href="#cb400-31" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">classifier.perf</span>(</span>
<span id="cb400-32"><a href="#cb400-32" aria-hidden="true" tabindex="-1"></a>                      <span class="at">actual =</span> test_dat<span class="sc">$</span>active,</span>
<span id="cb400-33"><a href="#cb400-33" aria-hidden="true" tabindex="-1"></a>                      <span class="at">predicted =</span> <span class="fu">ifelse</span>(<span class="fu">predict</span>(rf.os.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>) <span class="sc">&gt;=</span> prob_threshold, <span class="dv">1</span>, <span class="dv">0</span>))))</span></code></pre></div>
<ul>
<li><strong>Step 4</strong>: Evaluate model performance.</li>
</ul>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/class-mdl-perf-1.png" alt="Classification performance for binomial logistic regression and RF models using balanced (SMOTE) and imbalanced classes." width="100%" />
<p class="caption">
(#fig:class-mdl-perf)Classification performance for binomial logistic regression and RF models using balanced (SMOTE) and imbalanced classes.
</p>
</div>
<p>As we can see in Figure @ref(fig:class-mdl-perf), with our stringent probability threshold set at <code>.7</code> for class delineation, all models had perfect specificity (correctly predicting those who stay) and precision (all employees who were predicted to attrit did). However, we see notable differences in sensitivity across the model types, and this is generally a very important performance measure in a predictive attrition project since the cost of not flagging employees who attrit can be costly. Sensitivity for the RF model trained on balanced classes (SMOTE) performed much better than its imbalanced RF counterpart (<code>95.6%</code> vs. <code>71.6%</code>), reinforcing that ML models are sensitive (no pun intended) to imbalanced classes.</p>
<p>The results also show that there is likely no benefit to compromising model interpretability by using a flexible ML model like RF since our trusty binomial logistic regression model performs just as well on these data. Nevertheless, we can construct what is known as a <strong>Variable Importance Plot</strong> on RF output using the <code>varImpPlot()</code> function from the <code>randomForest</code> library to understand the relative importance of each predictor in the model.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/var-imp-plot-1.png" alt="Variable importance plot for RF model." width="100%" />
<p class="caption">
(#fig:var-imp-plot)Variable importance plot for RF model.
</p>
</div>
<p>Variable importance plots are based on the mean decrease in <strong>Gini importance</strong>. Gini importance measures the average gain of purity by splits of a given variable. In other words, if a variable is useful it tends to split mixed labeled nodes (nodes with both employees who separated and employees who stayed) into pure single class nodes. The most important variables are at the top of the variable importance plot, indicating that without these variables nodes will not be as pure and as a result, classification performance will not be as strong.</p>
<p>Figure @ref(fig:var-imp-plot) shows that <code>interview_rating</code> is far more important than the second most important predictor, <code>overtime</code>. This is consistent with what we observed in the results of the binomial logistic regression models too.</p>
<p>Let’s compare the information from the RF’s Variable Importance Plot to a single decision tree built on training data with balanced classes. We can build and visualize a decision tree in R using the <code>rpart()</code> and <code>rpart.plot()</code> functions. <code>rpart</code> is an acronym for <em>recursive partitioning and regression trees</em>:</p>
<pre><code>## Warning: package &#39;rpart&#39; was built under R version 4.0.5</code></pre>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/rpart-tree-1.png" alt="Decision tree for employee attrition prediction using training data with balanced classes (SMOTE)." width="75%" />
<p class="caption">
(#fig:rpart-tree)Decision tree for employee attrition prediction using training data with balanced classes (SMOTE).
</p>
</div>
<p>As shown in Figure @ref(fig:rpart-tree), the most important predictor for splitting the data is <code>interview_rating</code> when using a single decision tree. At the root node, there is a 50 percent chance of leaving and staying, which is expected given we balanced the classes using SMOTE. A prediction that is no better than a fair coin toss is of course not helpful. Walking down to the leaf nodes, we can see that for the 50% of employees with <code>interview_rating &gt;= 3.5</code>, the algorithm predicts they will stay (<code>status = 0</code>); for the 50% of employees with <code>interview_rating &lt; 3.5</code>, the algorithm predicts they will leave (<code>status = 1</code>). Given what we observed in the results of the binomial logistic regression output, additional partitioning by <code>overtime</code> may further increase node purity on the test data since classes are mixed for those with interview ratings between <code>3.3</code> and <code>3.6</code>. However, given the strong performance splitting data only on <code>interview_rating</code>, further partitioning will likely result in modeling noise and overfitting.</p>
<p><strong>Forecasting</strong></p>
<p>To demonstrate the prediction workflow steps for forecasting, we will leverage our <code>turnover_trends</code> data set:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb402-2"><a href="#cb402-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb402-3"><a href="#cb402-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb402-4"><a href="#cb402-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb402-5"><a href="#cb402-5" aria-hidden="true" tabindex="-1"></a>forecasting_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/turnover_trends.csv&quot;</span>)</span></code></pre></div>
<ul>
<li><strong>Step 1</strong>: Partition data into training and test sets for cross-validation.</li>
</ul>
<p>Since we have 60 months of data for each combination of <code>job</code>, <code>level</code>, and <code>remote</code> in the data, we will select a combination for which <code>turnover_rate</code> can be projected for future months. To simplify, we will train a model using data for the first 48 months and test using the final 12 months.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create training data</span></span>
<span id="cb403-2"><a href="#cb403-2" aria-hidden="true" tabindex="-1"></a>train_dat <span class="ot">&lt;-</span> forecasting_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(job <span class="sc">==</span> <span class="st">&#39;People Scientist&#39;</span> <span class="sc">&amp;</span> level <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb403-3"><a href="#cb403-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb403-4"><a href="#cb403-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test data</span></span>
<span id="cb403-5"><a href="#cb403-5" aria-hidden="true" tabindex="-1"></a>test_dat <span class="ot">&lt;-</span> forecasting_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(job <span class="sc">==</span> <span class="st">&#39;People Scientist&#39;</span> <span class="sc">&amp;</span> level <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> remote <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">5</span>)</span></code></pre></div>
<ul>
<li><strong>Step 2</strong>: Build models using training data.</li>
</ul>
<p>Given the significant quadratic and cubic terms identified in Chapter @ref(lme), we will fit a cubic regression model on the training data.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit cubic model</span></span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true" tabindex="-1"></a>train.cube.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(turnover_rate <span class="sc">~</span> year <span class="sc">+</span> month <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">I</span>(month<span class="sc">^</span><span class="dv">3</span>) <span class="sc">+</span> remote, <span class="at">data =</span> train_dat)</span>
<span id="cb404-3"><a href="#cb404-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb404-4"><a href="#cb404-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce tabular summary of regression model output</span></span>
<span id="cb404-5"><a href="#cb404-5" aria-hidden="true" tabindex="-1"></a>flextable<span class="sc">::</span><span class="fu">as_flextable</span>(train.cube.fit)</span></code></pre></div>
<template id="da1b590b-1c1e-4771-a600-785b9ba41e85"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-858549b8{}.cl-857e7ac0{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-857e7afc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-857e9352{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-857e9370{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-857ed7f4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed808{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed812{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed81c{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed826{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed830{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed83a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed844{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed84e{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed84f{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed858{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed862{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed86c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed876{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed880{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed881{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed894{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed89e{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed89f{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8b2{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8b3{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8bc{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8c6{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8d0{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8da{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8db{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8e4{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8ee{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed8f8{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed902{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed903{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed90c{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed916{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed920{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed92a{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed92b{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed934{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed93e{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed948{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed949{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed952{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed95c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed966{width:28.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed970{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed971{width:54.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed97a{width:92.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed984{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-857ed985{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-858549b8'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-857ed970"><p class="cl-857e9352"><span class="cl-857e7ac0"></span></p></td><td class="cl-857ed985"><p class="cl-857e9370"><span class="cl-857e7ac0">Estimate</span></p></td><td class="cl-857ed97a"><p class="cl-857e9370"><span class="cl-857e7ac0">Standard Error</span></p></td><td class="cl-857ed984"><p class="cl-857e9370"><span class="cl-857e7ac0">t value</span></p></td><td class="cl-857ed971"><p class="cl-857e9370"><span class="cl-857e7ac0">Pr(&gt;|t|)</span></p></td><td class="cl-857ed966"><p class="cl-857e9352"><span class="cl-857e7ac0"></span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-857ed830"><p class="cl-857e9352"><span class="cl-857e7ac0">(Intercept)</span></p></td><td class="cl-857ed7f4"><p class="cl-857e9370"><span class="cl-857e7ac0">2.765</span></p></td><td class="cl-857ed81c"><p class="cl-857e9370"><span class="cl-857e7ac0">0.159</span></p></td><td class="cl-857ed812"><p class="cl-857e9370"><span class="cl-857e7ac0">17.343</span></p></td><td class="cl-857ed826"><p class="cl-857e9370"><span class="cl-857e7ac0">0.0000</span></p></td><td class="cl-857ed808"><p class="cl-857e9352"><span class="cl-857e7ac0">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-857ed84f"><p class="cl-857e9352"><span class="cl-857e7ac0">year</span></p></td><td class="cl-857ed862"><p class="cl-857e9370"><span class="cl-857e7ac0">-0.113</span></p></td><td class="cl-857ed83a"><p class="cl-857e9370"><span class="cl-857e7ac0">0.023</span></p></td><td class="cl-857ed84e"><p class="cl-857e9370"><span class="cl-857e7ac0">-4.893</span></p></td><td class="cl-857ed858"><p class="cl-857e9370"><span class="cl-857e7ac0">0.0000</span></p></td><td class="cl-857ed844"><p class="cl-857e9352"><span class="cl-857e7ac0">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-857ed881"><p class="cl-857e9352"><span class="cl-857e7ac0">month</span></p></td><td class="cl-857ed894"><p class="cl-857e9370"><span class="cl-857e7ac0">2.410</span></p></td><td class="cl-857ed880"><p class="cl-857e9370"><span class="cl-857e7ac0">0.094</span></p></td><td class="cl-857ed89e"><p class="cl-857e9370"><span class="cl-857e7ac0">25.753</span></p></td><td class="cl-857ed876"><p class="cl-857e9370"><span class="cl-857e7ac0">0.0000</span></p></td><td class="cl-857ed86c"><p class="cl-857e9352"><span class="cl-857e7ac0">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-857ed8b3"><p class="cl-857e9352"><span class="cl-857e7ac0">I(month^2)</span></p></td><td class="cl-857ed8d0"><p class="cl-857e9370"><span class="cl-857e7ac0">-0.410</span></p></td><td class="cl-857ed89f"><p class="cl-857e9370"><span class="cl-857e7ac0">0.016</span></p></td><td class="cl-857ed8b2"><p class="cl-857e9370"><span class="cl-857e7ac0">-25.014</span></p></td><td class="cl-857ed8bc"><p class="cl-857e9370"><span class="cl-857e7ac0">0.0000</span></p></td><td class="cl-857ed8c6"><p class="cl-857e9352"><span class="cl-857e7ac0">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-857ed8b3"><p class="cl-857e9352"><span class="cl-857e7ac0">I(month^3)</span></p></td><td class="cl-857ed8d0"><p class="cl-857e9370"><span class="cl-857e7ac0">0.020</span></p></td><td class="cl-857ed89f"><p class="cl-857e9370"><span class="cl-857e7ac0">0.001</span></p></td><td class="cl-857ed8b2"><p class="cl-857e9370"><span class="cl-857e7ac0">24.064</span></p></td><td class="cl-857ed8bc"><p class="cl-857e9370"><span class="cl-857e7ac0">0.0000</span></p></td><td class="cl-857ed8c6"><p class="cl-857e9352"><span class="cl-857e7ac0">***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-857ed902"><p class="cl-857e9352"><span class="cl-857e7ac0">remoteYes</span></p></td><td class="cl-857ed8ee"><p class="cl-857e9370"><span class="cl-857e7ac0">-1.640</span></p></td><td class="cl-857ed8db"><p class="cl-857e9370"><span class="cl-857e7ac0">0.052</span></p></td><td class="cl-857ed8f8"><p class="cl-857e9370"><span class="cl-857e7ac0">-31.756</span></p></td><td class="cl-857ed8e4"><p class="cl-857e9370"><span class="cl-857e7ac0">0.0000</span></p></td><td class="cl-857ed8da"><p class="cl-857e9352"><span class="cl-857e7ac0">***</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-857ed92a"><p class="cl-857e9370"><span class="cl-857e7afc">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-857ed949"><p class="cl-857e9352"><span class="cl-857e7ac0"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-857ed949"><p class="cl-857e9352"><span class="cl-857e7ac0">Residual standard error: 0.253 on 90 degrees of freedom</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-857ed949"><p class="cl-857e9352"><span class="cl-857e7ac0">Multiple R-squared: 0.9499, Adjusted R-squared: 0.9471</span></p></td></tr><tr style="overflow-wrap:break-word;"><td  colspan="6"class="cl-857ed949"><p class="cl-857e9352"><span class="cl-857e7ac0">F-statistic: 341.4 on 90 and 5 DF, p-value: 0.0000</span></p></td></tr></tfoot></table></div></template>
<div class="flextable-shadow-host" id="3e31f12e-fcd5-40db-bb62-ad4aec0bb738"></div>
<script>
var dest = document.getElementById("3e31f12e-fcd5-40db-bb62-ad4aec0bb738");
var template = document.getElementById("da1b590b-1c1e-4771-a600-785b9ba41e85");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>All linear, quadratic, and cubic terms on <code>month</code> are statistically significant at the <span class="math inline">\(p &lt; .001\)</span> level.</p>
<ul>
<li><strong>Step 3</strong>: Use models to make predictions on test data.</li>
</ul>
<p>We will again build a function to evaluate the performance of the fitted models applied to test data rather than using delivered functions. The following function will return <em>mean absolute deviation (MAD)</em>, <em>mean squared error (MSE)</em>, and <em>mean absolute percentage error (MAPE)</em>:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Develop function that returns a data frame of forecasting model performance statistics</span></span>
<span id="cb405-2"><a href="#cb405-2" aria-hidden="true" tabindex="-1"></a>forecast.perf <span class="ot">&lt;-</span> <span class="cf">function</span>(actual, predicted){</span>
<span id="cb405-3"><a href="#cb405-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb405-4"><a href="#cb405-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check for missing values; metrics will be computed on non-missing values only</span></span>
<span id="cb405-5"><a href="#cb405-5" aria-hidden="true" tabindex="-1"></a>  predicted <span class="ot">&lt;-</span> predicted[<span class="sc">!</span><span class="fu">is.na</span>(actual)]</span>
<span id="cb405-6"><a href="#cb405-6" aria-hidden="true" tabindex="-1"></a>  actual <span class="ot">&lt;-</span> actual[<span class="sc">!</span><span class="fu">is.na</span>(actual)]</span>
<span id="cb405-7"><a href="#cb405-7" aria-hidden="true" tabindex="-1"></a>  actual <span class="ot">&lt;-</span> actual[<span class="sc">!</span><span class="fu">is.na</span>(predicted)]</span>
<span id="cb405-8"><a href="#cb405-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb405-9"><a href="#cb405-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store rates to variables</span></span>
<span id="cb405-10"><a href="#cb405-10" aria-hidden="true" tabindex="-1"></a>  mad <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">abs</span>(actual <span class="sc">-</span> predicted)), <span class="dv">2</span>)</span>
<span id="cb405-11"><a href="#cb405-11" aria-hidden="true" tabindex="-1"></a>  mse <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>((actual <span class="sc">-</span> predicted)<span class="sc">^</span><span class="dv">2</span>), <span class="dv">2</span>)</span>
<span id="cb405-12"><a href="#cb405-12" aria-hidden="true" tabindex="-1"></a>  mape <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">abs</span>((actual <span class="sc">-</span> predicted) <span class="sc">/</span> actual)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb405-13"><a href="#cb405-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb405-14"><a href="#cb405-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return model performance statistics in a data frame</span></span>
<span id="cb405-15"><a href="#cb405-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">data.frame</span>(mad, mse, mape))</span>
<span id="cb405-16"><a href="#cb405-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb405-17"><a href="#cb405-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>For this forecast, we will also produce a prediction interval. A <strong>prediction interval</strong> is a range of values that is likely to contain the outcome value for a single new observation given a set of predictors. For example, a 95% prediction interval of <code>[10 15]</code> indicates that we can be 95% confident that the observation for which a prediction is being made will have an actual outcome value between <code>10</code> and <code>15</code>. Note that this is very different from a confidence interval in inferential statistics, which is a range of values that likely contains the value of an unknown population parameter.</p>
<p>We can produce a prediction interval by passing an additional <code>interval = 'predict'</code> argument into the <code>predict()</code> function:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize empty data frames for model predictions and performance stats</span></span>
<span id="cb406-2"><a href="#cb406-2" aria-hidden="true" tabindex="-1"></a>forecast.metrics <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb406-3"><a href="#cb406-3" aria-hidden="true" tabindex="-1"></a>forecast.err.rates <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb406-4"><a href="#cb406-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb406-5"><a href="#cb406-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on test_dat</span></span>
<span id="cb406-6"><a href="#cb406-6" aria-hidden="true" tabindex="-1"></a>forecast.metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(forecast.metrics, <span class="fu">cbind.data.frame</span>(</span>
<span id="cb406-7"><a href="#cb406-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">month =</span> test_dat<span class="sc">$</span>month,</span>
<span id="cb406-8"><a href="#cb406-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">actual =</span> test_dat<span class="sc">$</span>turnover_rate,</span>
<span id="cb406-9"><a href="#cb406-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">predicted =</span> <span class="fu">predict</span>(train.cube.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>),</span>
<span id="cb406-10"><a href="#cb406-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">lwr_bound =</span> <span class="fu">as.data.frame</span>(<span class="fu">predict</span>(train.cube.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>, <span class="at">interval =</span> <span class="st">&quot;predict&quot;</span>))<span class="sc">$</span>lwr,</span>
<span id="cb406-11"><a href="#cb406-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">upr_bound =</span> <span class="fu">as.data.frame</span>(<span class="fu">predict</span>(train.cube.fit, test_dat, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>, <span class="at">interval =</span> <span class="st">&quot;predict&quot;</span>))<span class="sc">$</span>upr))</span></code></pre></div>
<ul>
<li><strong>Step 4</strong>: Evaluate model performance.</li>
</ul>
<p>Next, we can pass a vector of actual and corresponding predicted values into the <code>forecast.perf()</code> function to return MAD, MSE, and MAPE performance metrics for the fitted model applied to year 5 data.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate error rates for year 5 forecast</span></span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true" tabindex="-1"></a><span class="fu">forecast.perf</span>(<span class="at">actual =</span> forecast.metrics<span class="sc">$</span>actual, <span class="at">predicted =</span> forecast.metrics<span class="sc">$</span>predicted)</span></code></pre></div>
<pre><code>##    mad   mse  mape
## 1 3.84 14.75 48.39</code></pre>
<p>Given 95% of the variance in turnover rates was explained by the cubic regression model fitted to our training data (<span class="math inline">\(R^2 = .95)\)</span>, these error rates are surprisingly high for the test data.</p>
<p>Evaluating the average turnover rate by year will help in reconciling the high <span class="math inline">\(R^2\)</span> on the training data with the high error rates on the test data:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate year-wise turnover rate mean</span></span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true" tabindex="-1"></a>yr1_avg <span class="ot">&lt;-</span> train_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(remote <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(turnover_rate))</span>
<span id="cb409-3"><a href="#cb409-3" aria-hidden="true" tabindex="-1"></a>yr2_avg <span class="ot">&lt;-</span> train_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(remote <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(turnover_rate))</span>
<span id="cb409-4"><a href="#cb409-4" aria-hidden="true" tabindex="-1"></a>yr3_avg <span class="ot">&lt;-</span> train_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(remote <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(turnover_rate))</span>
<span id="cb409-5"><a href="#cb409-5" aria-hidden="true" tabindex="-1"></a>yr4_avg <span class="ot">&lt;-</span> train_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(remote <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(turnover_rate))</span>
<span id="cb409-6"><a href="#cb409-6" aria-hidden="true" tabindex="-1"></a>yr5_avg <span class="ot">&lt;-</span> test_dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(turnover_rate))</span>
<span id="cb409-7"><a href="#cb409-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb409-8"><a href="#cb409-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Display year-wise turnover rate mean</span></span>
<span id="cb409-9"><a href="#cb409-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">c</span>(yr1_avg, yr2_avg, yr3_avg, yr4_avg, yr5_avg))</span></code></pre></div>
<pre><code>## $Mean
## [1] 4.506667
## 
## $Mean
## [1] 4.816667
## 
## $Mean
## [1] 4.046667
## 
## $Mean
## [1] 4.386667
## 
## $Mean
## [1] 7.996667</code></pre>
<p>There is clearly a significant difference in average turnover for year 5 (test data) relative to years 1-4 (training data). Since the fitted model had no visibility into year 5 data, it did not account for the spike in turnover beyond year 4.</p>
<p>Differences are further evidenced in Figure @ref(fig:mdl-yr4-5), in which actual values for year 5 are far and away outside the 95% prediction interval.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/mdl-yr4-5-1.png" alt="Left: Fitted model (red dashed line) with good fit to year 4 training data (black dots). Right: Fitted model (red dashed line) with poor fit to year 5 test data (black dots). 95 percent prediction interval is represented by the red shaded area around the fit line." width="100%" />
<p class="caption">
(#fig:mdl-yr4-5)Left: Fitted model (red dashed line) with good fit to year 4 training data (black dots). Right: Fitted model (red dashed line) with poor fit to year 5 test data (black dots). 95 percent prediction interval is represented by the red shaded area around the fit line.
</p>
</div>
<p>This is an important lesson that highlights the centrality of cross-validation in evaluating whether predictive models will generalize beyond the available data. We can easily fit a model that performs well on training data and claim that the model has exceptional accuracy. However, what matters in predictive modeling is how well the model performs on data it has not seen as part of the training process.</p>
</div>
<div id="review-questions-11" class="section level2" number="13.6">
<h2><span class="header-section-number">13.6</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What factors influence the balance between model interpretability and flexibility?</p></li>
<li><p>How does cross-validation (CV) help improve the performance of predictive models?</p></li>
<li><p>What is bias-variance tradeoff?</p></li>
<li><p>In a classification setting, what performance metrics are available in a confusion matrix?</p></li>
<li><p>What are some measures used to evaluate the performance of a forecast?</p></li>
<li><p>What is Synthetic Minority Oversampling Technique (SMOTE), and how does it help improve the performance of machine learning (ML) models?</p></li>
<li><p>How is the stack ranking of predictors in a variable importance plot determined?</p></li>
<li><p>How does a prediction interval differ from a confidence interval?</p></li>
<li><p>How can a prediction interval be calculated in R?</p></li>
<li><p>What does high <span class="math inline">\(R^2\)</span> on training data and high <span class="math inline">\(MSE\)</span> on test data indicate about the utility of a predictive model?</p></li>
</ol>
<!--chapter:end:r/13_predictive_modeling.Rmd-->
</div>
</div>
<div id="unsup-lrn" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Unsupervised Learning</h1>
<p>The inferential and predictive models covered thus far can be categorized as <strong>supervised learning</strong> models. For each observation <span class="math inline">\(x_i\)</span> in the data, there is an associated response <span class="math inline">\(y_i\)</span> in a supervised learning setting, and the goal is to fit a model that relates <span class="math inline">\(y\)</span> to one or more predictors to understand relationships or predict future values on the basis of the identified associations. However, in an <strong>unsupervised learning</strong> setting, no response <span class="math inline">\(y_i\)</span> is associated with <span class="math inline">\(x_i\)</span>. As a result, we cannot <em>supervise</em> the analysis and are limited to understanding how observations cluster or group together based on patterns across the available <span class="math inline">\(p\)</span> attributes.</p>
<p>People analytics often involves the unique challenge of analyzing high-dimensional data with a large number of <span class="math inline">\(p\)</span> attributes but relatively few <span class="math inline">\(n\)</span> observations – a phenomenon often referred to as the <em>curse of dimensionality</em>. Given the sample size requirements covered in previous chapters, we ideally want <span class="math inline">\(n\)</span> to be an order of magnitude larger than <span class="math inline">\(p\)</span> to support statistical power and increase our chances of detecting meaningful patterns and population effects in sample data. Since people data sets are often wide and short, <strong>dimension reduction</strong> is important for reducing the dimensions to a limited subset that captures the majority of the information and optimizes the <span class="math inline">\(n:p\)</span> ratio.</p>
<p>Consider a case in which a colleague uses verbose rhetoric to convey a simple message that could be effectively communicated with fewer words. The superfluous language is unnecessary and does not provide additional information or value. This is analogous to dimension reduction in that we are interested in identifying a limited set of meaningful attributes and discarding redundant and unimportant information that does not contribute to the analysis objectives.</p>
<p>Dimensionality reduction techniques project data onto a lower-dimensional subspace that retains the majority of the variance in the data points. If we take a picture of a group of colleagues during a team outing, for example, we would lose some 3D information by encoding the information into a 2D image. This 2D representation is a <em>subspace</em> of the 3D coordinates. While we would not know how far one person is from another in the 2D representation, we would see that people in the back appear smaller than people in the front. Therefore, the perspective in the 2D image would still capture <em>some</em> information about distance. The limited information loss in moving from three to two dimensions is likely acceptable given the benefit of capturing the memory of the team in a photograph.</p>
<p>Dimension reduction is particularly important in survey research because longer surveys are costly and may result in lower response rates due to the increased completion time requirements. Survey instrumentation with strong psychometric properties features highly correlated survey items for constructs that are relatively uncorrelated with survey items used to measure other independent constructs. Intuitively, we know that highly correlated variables do not capture unique information, as one is a sufficient proxy to capture the available signal in the larger number of features. As we have covered, models with highly correlated variables can create problems due to multicollinearity, and dimension reduction is an alternative approach to variable selection techniques such as the backward stepwise procedure covered in Chapter @ref(lm).</p>
<p>This chapter will cover dimension reduction fundamentals as well as technical implementations.</p>
<div id="factor-analysis" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Factor Analysis</h2>
<p>The development of survey instrumentation, whether a single item or a larger multidimensional scale, begins with a good theory. The theory provides conceptual support for the construct – the particular dimensions that characterize the construct, the antecedent variables which theoretically influence it, and the outcomes it will likely drive. With a strong theoretical framework, the researcher can begin proposing ways of <em>operationalizing</em> the conceptual scheme into a measurement approach.</p>
<p>There are clear measurement approaches for business metrics such as leads generated, new business growth, cNPS, and net revenue but in the social sciences, we often need indicators of latent constructs that are difficult – or impossible – to directly measure. If we want to understand the extent to which employees are engaged in their work, we need a comprehensive measure that captures facets of the theoretical frame. For example, vigor, absorption, and dedication are dimensions of Schaufeli, Bakker, and Salanova’s (2006) conception of work engagement which were operationalized in the Utrecht Work Engagement Scale (UWES).</p>
<p>Quantifying the energy levels one brings to work (vigor), the extent to which one feels time passes quickly while working (absorption), and the level of one’s commitment to seeing tasks through to completion (dedication) is challenging since we cannot leverage transactional data or digital exhaust to directly quantify this as we can with operational business metrics. We need a comprehensive – yet parsimonious – set of survey items that function as indicators of the dimensions of the latent work engagement construct. Constructing a larger aggregate measure from the individual indicators, such as the average or sum of all survey items, enables us to reduce the number of variables and optimize the <span class="math inline">\(n:p\)</span> ratio in supervised learning settings.</p>
<div id="exploratory-factor-analysis-efa" class="section level3" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Exploratory Factor Analysis (EFA)</h3>
<p><strong>Exploratory factor analysis (EFA)</strong> is a variable reduction technique by which factors are extracted from data – usually as part of the development process for new survey instruments.</p>
<p>A researcher may work with a panel of experts in a particular domain to develop an inventory of items that tap various aspects of the construct per the theoretical framework that underpins it. Based on how the items cluster together, the empirical data will be reconciled against the theoretical conception to define dimensions of the measure. Within a cluster of highly correlated items for a particular dimension, the researcher needs to decide which items are essential and which are redundant and eligible for removal. Aside from the principal clusters (or factors), remaining items also need to be evaluated for their relevance and support for the underlying theory. If items are believed to be members of the theoretical dimensions but do not cluster together with other similar items, it may be indicative of poorly written items that have different interpretations among survey takers. EFA is the empirical process that supports these objectives.</p>
<p>To illustrate the steps for EFA, we will leverage the <code>survey_responses</code> data.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb411-2"><a href="#cb411-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb411-3"><a href="#cb411-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb411-4"><a href="#cb411-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load survey response data</span></span>
<span id="cb411-5"><a href="#cb411-5" aria-hidden="true" tabindex="-1"></a>survey_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/survey_responses.csv&quot;</span>)</span>
<span id="cb411-6"><a href="#cb411-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb411-7"><a href="#cb411-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Show dimensions of survey data</span></span>
<span id="cb411-8"><a href="#cb411-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(survey_dat)</span></code></pre></div>
<pre><code>## [1] 400  12</code></pre>
<p>EFA is implemented via a three-step procedure:</p>
<ol style="list-style-type: decimal">
<li>Assess the factorability of the data.</li>
<li>Extract the factors.</li>
<li>Rotate and interpret the factors.</li>
</ol>
<p><strong>Step 1: Factorability Assessment</strong></p>
<p>With respect to factorability, there needs to be some correlation among variables in order for a dimension reduction technique to collapse variables into linear combinations that capture a large portion of the variance in the data. The data feature sufficient factorability if we achieve a <strong>Kaiser-Meyer-Olkin (KMO)</strong> statistic of at least <span class="math inline">\(.60\)</span> (Kaiser, 1974) and <strong>Bartlett’s Test of Sphericity</strong> reaches statistical significance (Bartlett, 1954). The KMO statistic estimates the proportion of variance that may be common variance; the lower the proportion, the greater the factorability. Bartlett’s test essentially measures the degree of redundancy in the data, where the null hypothesis states that the variables are orthogonal (uncorrelated); rejecting this null hypothesis indicates that there is sufficient correlation for dimension reduction.</p>
<p>The <code>KMO()</code> and <code>cortest.bartlett()</code> functions from the <code>psych</code> library can be used for the KMO statistic and Bartlett’s test, respectively:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb413-2"><a href="#cb413-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb413-3"><a href="#cb413-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb413-4"><a href="#cb413-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Kaiser-Meyer-Olkin (KMO) statistic</span></span>
<span id="cb413-5"><a href="#cb413-5" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">KMO</span>(survey_dat)</span></code></pre></div>
<pre><code>## Kaiser-Meyer-Olkin factor adequacy
## Call: psych::KMO(r = survey_dat)
## Overall MSA =  0.9
## MSA for each item = 
##  belong  effort    incl   eng_1   eng_2   eng_3    happ psafety   ret_1   ret_2 
##    0.94    0.86    0.86    0.86    0.89    0.89    0.92    0.90    0.91    0.89 
##   ret_3  ldrshp 
##    0.90    0.93</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bartlett&#39;s Test of Sphericity</span></span>
<span id="cb415-2"><a href="#cb415-2" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">cortest.bartlett</span>(<span class="fu">cor</span>(survey_dat), <span class="fu">nrow</span>(survey_dat))</span></code></pre></div>
<pre><code>## $chisq
## [1] 2933.161
## 
## $p.value
## [1] 0
## 
## $df
## [1] 66</code></pre>
<p>Data satisfy the factorability requirements since <span class="math inline">\(KMO = .90\)</span> (<code>Overall MSA</code>) and Bartlett’s test is significant at the <span class="math inline">\(p &lt; .001\)</span> level.</p>
<p><strong>Step 2: Factor Extraction</strong></p>
<p>For the second step, we will visually inspect a <strong>scree plot</strong> and determine how many factors are necessary to explain most of the variance in the data. A scree plot is a line plot that helps visualize the portion of the total variance explained by each factor using <strong>eigenvalues</strong>. While the linear algebraic underpinnings are out of scope for this book, it is important to understand that <strong>eigenvectors</strong> are vectors of a linear transformation which have corresponding eigenvalues <span class="math inline">\(\lambda\)</span> that represent factors by which the vectors are scaled. As a general rule, factors with <span class="math inline">\(\lambda \ge 1\)</span> are extracted when running a factor analysis.</p>
<p>The <code>scree()</code> function from the <code>psych</code> library can be used to generate a scree plot:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce scree plot</span></span>
<span id="cb417-2"><a href="#cb417-2" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">scree</span>(survey_dat, <span class="at">pc =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/scree-plot-1.png" alt="Scree plot showing eigenvalues by factor relative to the extraction threshold (horizontal line)." width="100%" />
<p class="caption">
(#fig:scree-plot)Scree plot showing eigenvalues by factor relative to the extraction threshold (horizontal line).
</p>
</div>
<p>Based on Figure @ref(fig:scree-plot), factors 1 and 2 appear to provide relatively outsized information gain as <span class="math inline">\(\lambda &gt; 1\)</span> for both.</p>
<p>You may notice the <code>pc = FALSE</code> argument in the <code>scree()</code> function call. This relates to <strong>principal components analysis (PCA)</strong>, which is an alternative method of dimension reduction. Principal components are new independent variables that represent linear transformations of scaled (<span class="math inline">\((x - \bar{x}) / s\)</span>) versions of the observed variables. While we will focus on factor analysis and PCA in this section, which are most common in the social sciences, there are additional dimension reduction techniques one could explore (e.g., <strong>parallel analysis</strong>).</p>
<p>While there are similarities between factor analysis and PCA, the mathematics are fundamentally different. PCA approaches dimension reduction by creating one or more index variables (linear combinations of original variables) from a larger set of measured variables; these new index variables are referred to as components. On the other hand, factor analysis can be viewed as a set of regression equations with weighted relationships that represent the measurement of a latent variable. Most variables are latent in social psychology contexts since we cannot directly measure constructs like motivation or belonging, so we instead measure indicators of the latent variables using question sets on surveys.</p>
<p>To illustrate how to extract principal components, we can use base R’s <code>prcomp()</code> function:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb418-2"><a href="#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb418-3"><a href="#cb418-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-4"><a href="#cb418-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform PCA</span></span>
<span id="cb418-5"><a href="#cb418-5" aria-hidden="true" tabindex="-1"></a>pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(survey_dat, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span>
<span id="cb418-6"><a href="#cb418-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-7"><a href="#cb418-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate explained variance for each principal component</span></span>
<span id="cb418-8"><a href="#cb418-8" aria-hidden="true" tabindex="-1"></a>pca_var <span class="ot">=</span> (pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="fu">sum</span>(pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb418-9"><a href="#cb418-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-10"><a href="#cb418-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scree plot</span></span>
<span id="cb418-11"><a href="#cb418-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">qplot</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pca_var), pca_var) <span class="sc">+</span> </span>
<span id="cb418-12"><a href="#cb418-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb418-13"><a href="#cb418-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pca_var)) <span class="sc">+</span></span>
<span id="cb418-14"><a href="#cb418-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Principal Component&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Variance Explained (%)&quot;</span>) <span class="sc">+</span></span>
<span id="cb418-15"><a href="#cb418-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/pca-var-plot-1.png" alt="Plot showing the percent of total variance explained by 12 principal components." width="100%" />
<p class="caption">
(#fig:pca-var-plot)Plot showing the percent of total variance explained by 12 principal components.
</p>
</div>
<p>Note that while we can theoretically have as many factors as we have variables (<span class="math inline">\(p = 12\)</span>), this defeats the purpose of dimension reduction – whether PCA or factor analysis. The objective of dimension reduction is to obtain a smaller number of factors (or components) that capture the majority of the information in the data.</p>
<p>As shown in Figure @ref(fig:pca-var-plot), principal components are sorted in descending order according to the percent of total variance they explain. The first principal component alone explains nearly half of the total variance in the data. We are looking for the <em>elbow</em> to ascertain the inflection point at which explained variance plateaus. It is clear that the slope of the line begins to flatten beyond the third principal component, indicating that components 4-12 provide relatively little information. Put differently, we could extract only the first three components without sacrificing much information and gain the benefit of fewer more meaningful variables.</p>
<p>As an aside, in a supervised learning context we could insert these principal components as predictors in a regression model in lieu of a larger number of original variables. This is known as <strong>principal components regression (PCR)</strong>. However, given the importance of explaining models in a people analytics setting, PCR will not be covered since inserting index variables as predictors in the model compromises interpretability.</p>
<p><strong>Step 3: Factor Rotation &amp; Interpretation</strong></p>
<p>For the third step, we will use an oblimin method to rotate the factor matrix. The oblimin rotation is an oblique – rather than orthogonal – rotation and is selected here since it is best suited when underlying dimensions are assumed to be correlated (Hair et al., 2006).</p>
<p>The <code>fa()</code> (factor analysis) function from the <code>psych</code> package can be used for the implementation in R. Based on the scree on PCA plots, we will specify three factors for this analysis. Note that the oblimin rotation is the default for factor analysis, while a varimax (orthogonal) rotation is the default for PCA. Many other rotations can be implemented based on the nature of data and <span class="math inline">\(n\)</span>-count.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Principal axis factoring using 3 factors and oblimin rotation</span></span>
<span id="cb419-2"><a href="#cb419-2" aria-hidden="true" tabindex="-1"></a>efa.fit <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">fa</span>(survey_dat, <span class="at">nfactors =</span> <span class="dv">3</span>, <span class="at">rotate =</span> <span class="st">&#39;oblimin&#39;</span>)</span>
<span id="cb419-3"><a href="#cb419-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb419-4"><a href="#cb419-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display factor loadings</span></span>
<span id="cb419-5"><a href="#cb419-5" aria-hidden="true" tabindex="-1"></a>efa.fit<span class="sc">$</span>loadings</span></code></pre></div>
<pre><code>## 
## Loadings:
##         MR1    MR2    MR3   
## belong   0.283         0.456
## effort  -0.114  0.869       
## incl                   0.747
## eng_1           0.886       
## eng_2    0.172  0.782       
## eng_3           0.799       
## happ     0.558         0.355
## psafety                0.609
## ret_1    0.791              
## ret_2    0.922        -0.111
## ret_3    0.822              
## ldrshp   0.556         0.276
## 
##                  MR1   MR2   MR3
## SS loadings    2.906 2.817 1.363
## Proportion Var 0.242 0.235 0.114
## Cumulative Var 0.242 0.477 0.590</code></pre>
<p>The sum of squared loadings (<code>SS loadings</code>) are the eigenvalues for each factor. It is also helpful to review the percent of total variance explained by each factor (<code>Proportion Var</code>) along with the cumulative percent of total variance (<code>Cumulative Var</code>). We can see that the three factors have <span class="math inline">\(\lambda \ge 1\)</span>, which together explain 59 percent of the total variance in the data.</p>
<p>By reviewing the factor loadings, we gain an understanding of which variables are part of each factor (i.e., highly correlated variables which cluster together). Factor loadings represent the correlation of each item with the respective factor. While there is not a consensus on thresholds, a general rule of thumb is that <em>absolute</em> factor loadings should be at least <span class="math inline">\(.5\)</span>. Items with lower factor loadings should be removed from the measurement model.</p>
<p>For the first factor <code>MR1</code>, the three retention items cluster together with happiness and leadership (after rounding). This indicates that happier employees who have more favorable perceptions of leadership are less likely to leave the organization.</p>
<p>Loadings for the second factor <code>MR2</code> indicate that the three engagement items cluster together with discretionary effort. This makes intuitive sense, as we would expect highly engaged employees to contribute higher levels of effort towards their work.</p>
<p>Loadings for the third factor <code>MR3</code> show that belonging, inclusion, and psychological safety cluster together. In other words, employees who feel a stronger sense of belonging and perceive the environment to be more inclusive tend to experience a more favorable climate with respect to psychological safety.</p>
<p>We can visualize this information using the <code>fa.diagram()</code> function from the <code>psych</code> library:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">fa.diagram</span>(efa.fit)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/fct-ld-diagram-1.png" alt="Diagram showing factor loadings (correlations) for each item with the respective factor." width="100%" />
<p class="caption">
(#fig:fct-ld-diagram)Diagram showing factor loadings (correlations) for each item with the respective factor.
</p>
</div>
</div>
<div id="confirmatory-factor-analysis-cfa" class="section level3" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> Confirmatory Factor Analysis (CFA)</h3>
<p><strong>Confirmatory factor analysis (CFA)</strong> is used to test how well data aligns with a theoretical factor structure.</p>
<p>We expect items associated with a given construct to be highly correlated with one another but relatively uncorrelated with items associated with independent constructs. Consider engagement and retention, which are two independent – yet likely correlated – constructs. If multiple items are needed to measure the theoretical dimensions of both engagement and retention, we would expect the engagement items to be more highly correlated with one another than with the retention items. Theory may suggest that retention likelihood increases as engagement increases, but there are many other factors which also drive one’s decision to leave an organization beyond engagement, so we would not expect changes in engagement levels to <em>always</em> be associated with a commensurate change in retention.</p>
<p>We can illustrate using our <code>survey_responses</code> data, which contains three items for both engagement and retention. Let’s first evaluate pairwise relationships between the items:</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/ggpairs-eng-ret-1.png" alt="Bivariate correlations and data distributions for engagement and retention survey items." width="100%" />
<p class="caption">
(#fig:ggpairs-eng-ret)Bivariate correlations and data distributions for engagement and retention survey items.
</p>
</div>
<p>As expected, <code>eng_1</code>, <code>eng_2</code>, and <code>eng_3</code> have stronger correlations with each other (<span class="math inline">\(r \ge .70\)</span>) than with <code>ret_1</code>, <code>ret_2</code>, or <code>ret_3</code> (<span class="math inline">\(r \le .52\)</span>).</p>
<p>CFA enables us to move beyond inter-item correlations to quantify the extent to which latent variables in our data fit an expected theoretical model. We can leverage the <code>lavaan</code> package in R to perform CFA, which is implemented via a three-step procedure:</p>
<ol style="list-style-type: decimal">
<li>Define the model.</li>
<li>Fit the model.</li>
<li>Interpret the output.</li>
</ol>
<p><strong>Step 1: Model Definition</strong></p>
<p>Step one is defining the model within a string per the syntax required by <code>lavaan</code>:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lavaan)</span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification; each line represents a separate latent factor</span></span>
<span id="cb422-5"><a href="#cb422-5" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;engagement =~ eng_1 + eng_2 + eng_3</span></span>
<span id="cb422-6"><a href="#cb422-6" aria-hidden="true" tabindex="-1"></a><span class="st">                retention =~ ret_1 + ret_2 + ret_3&#39;</span>)</span></code></pre></div>
<p><strong>Step 2: Model Fitting</strong></p>
<p>Step two is fitting the model to the data using the <code>cfa()</code> function from the <code>lavaan</code> package:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model</span></span>
<span id="cb423-2"><a href="#cb423-2" aria-hidden="true" tabindex="-1"></a>cfa.fit <span class="ot">&lt;-</span> lavaan<span class="sc">::</span><span class="fu">cfa</span>(model, <span class="at">data =</span> survey_dat)</span></code></pre></div>
<p>We can also create what is known as a <strong>path diagram</strong> to assist with understanding the CFA model. A path diagram is a symbolic visualization of the measurement model, with circles depicting latent variables (factors), rectangles representing observed indicators (survey items), and arrows indicating paths (relationships) between variables. The measurement model (CFA) together with the structural (path) model is known as <strong>structural equation modeling (SEM)</strong>; CFA is a subset of the SEM umbrella.</p>
<p>The <code>lavaanPlot()</code> package can be used to create and visualize path diagrams in R:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lavaanPlot)</span>
<span id="cb424-3"><a href="#cb424-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-4"><a href="#cb424-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize path diagram</span></span>
<span id="cb424-5"><a href="#cb424-5" aria-hidden="true" tabindex="-1"></a>lavaanPlot<span class="sc">::</span><span class="fu">lavaanPlot</span>(<span class="at">model =</span> cfa.fit, <span class="at">coefs =</span> <span class="cn">TRUE</span>, <span class="at">stand =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<div id="htmlwidget-b7ffb5ab7faad80aaa10" style="width:100%;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-b7ffb5ab7faad80aaa10">{"x":{"diagram":" digraph plot { \n graph [ overlap = true, fontsize = 10 ] \n node [ shape = box ] \n node [shape = box] \n eng_1; eng_2; eng_3; ret_1; ret_2; ret_3 \n node [shape = oval] \n engagement; retention \n \n edge [ color = black ] \n  engagement->eng_1 [label = \"0.86\"] engagement->eng_2 [label = \"0.85\"] engagement->eng_3 [label = \"0.83\"] retention->ret_1 [label = \"0.81\"] retention->ret_2 [label = \"0.93\"] retention->ret_3 [label = \"0.82\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
(#fig:path-diagram)Path diagram showing survey items as indicators of latent engagement and retention factors.
</p>
</div>
<p>Factor loadings are shown for each indicator of the latent variable in Figure @ref(fig:path-diagram). All are well above the <em>absolute</em> threshold of at least <span class="math inline">\(.5\)</span>.</p>
<p><strong>Step 3: Model Interpretation</strong></p>
<p>Step three is interpreting the output of the fitted model:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a>cfa.fit <span class="ot">&lt;-</span> lavaan<span class="sc">::</span><span class="fu">cfa</span>(model, <span class="at">data =</span> survey_dat)</span>
<span id="cb425-2"><a href="#cb425-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb425-3"><a href="#cb425-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the model</span></span>
<span id="cb425-4"><a href="#cb425-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cfa.fit, <span class="at">fit.measures =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## lavaan 0.6-7 ended normally after 25 iterations
## 
##   Estimator                                         ML
##   Optimization method                           NLMINB
##   Number of free parameters                         13
##                                                       
##   Number of observations                           400
##                                                       
## Model Test User Model:
##                                                       
##   Test statistic                                35.477
##   Degrees of freedom                                 8
##   P-value (Chi-square)                           0.000
## 
## Model Test Baseline Model:
## 
##   Test statistic                              1495.174
##   Degrees of freedom                                15
##   P-value                                        0.000
## 
## User Model versus Baseline Model:
## 
##   Comparative Fit Index (CFI)                    0.981
##   Tucker-Lewis Index (TLI)                       0.965
## 
## Loglikelihood and Information Criteria:
## 
##   Loglikelihood user model (H0)              -2456.223
##   Loglikelihood unrestricted model (H1)      -2438.484
##                                                       
##   Akaike (AIC)                                4938.446
##   Bayesian (BIC)                              4990.335
##   Sample-size adjusted Bayesian (BIC)         4949.085
## 
## Root Mean Square Error of Approximation:
## 
##   RMSEA                                          0.093
##   90 Percent confidence interval - lower         0.063
##   90 Percent confidence interval - upper         0.125
##   P-value RMSEA &lt;= 0.05                          0.011
## 
## Standardized Root Mean Square Residual:
## 
##   SRMR                                           0.040
## 
## Parameter Estimates:
## 
##   Standard errors                             Standard
##   Information                                 Expected
##   Information saturated (h1) model          Structured
## 
## Latent Variables:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##   engagement =~                                       
##     eng_1             1.000                           
##     eng_2             0.880    0.044   19.827    0.000
##     eng_3             0.963    0.050   19.355    0.000
##   retention =~                                        
##     ret_1             1.000                           
##     ret_2             0.799    0.039   20.384    0.000
##     ret_3             0.699    0.038   18.562    0.000
## 
## Covariances:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##   engagement ~~                                       
##     retention         0.406    0.051    7.932    0.000
## 
## Variances:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .eng_1             0.235    0.027    8.839    0.000
##    .eng_2             0.188    0.021    9.013    0.000
##    .eng_3             0.265    0.027    9.820    0.000
##    .ret_1             0.482    0.044   10.952    0.000
##    .ret_2             0.095    0.018    5.145    0.000
##    .ret_3             0.215    0.020   10.571    0.000
##     engagement        0.649    0.064   10.188    0.000
##     retention         0.917    0.097    9.458    0.000</code></pre>
<p>The <code>lavaan</code> package provides many fit measures, but we will focus only on the most common for evaluating how well the data fit the measurement model.</p>
<ul>
<li>Model Chi-Square (<span class="math inline">\(\chi^2\)</span>): Tests whether the covariance matrix derived from the model represents the population covariance (Test Statistic under the Model Test User Model section of the <code>lavaan</code> output)</li>
<li>Comparative Fit Index (CFI): Values range from 0 to 1, with <span class="math inline">\(CFI &gt; .95\)</span> indicating good fit</li>
<li>Tucker Lewis Index (TLI): Values range from 0 to 1, with <span class="math inline">\(TLI &gt; .95\)</span> indicating good fit</li>
<li>Root Mean Square Error of Approximation (RMSEA): Values of <span class="math inline">\(.01\)</span>, <span class="math inline">\(.05\)</span>, and <span class="math inline">\(.08\)</span> indicate excellent, good, and mediocre fit, respectively (though some texts suggest <span class="math inline">\(.10\)</span> is an adequate threshold for mediocre fit)</li>
<li>Standardized Root Mean Square Residual (SRMR): Square root of the difference between residuals of the sample covariance matrix and the hypothesized model, with <span class="math inline">\(SRMR &lt; .08\)</span> indicating good fit</li>
</ul>
<p>Given data sets are often small in people analytics, it is important to note that RMSEA often exceeds thresholds with small <span class="math inline">\(df\)</span> and <span class="math inline">\(n\)</span> – even when the model is correctly specified (Kenny, Kaniskan, &amp; McCoach, 2015). Therefore, it is important to index more on fit indices such as <span class="math inline">\(CFI\)</span> and <span class="math inline">\(LTI\)</span> in determining how well the data fit the measurement model.</p>
<p>The <span class="math inline">\(\chi^2\)</span> statistic is sometimes referred to a ‘badness of fit’ measure since rejecting the null hypothesis (<span class="math inline">\(p &lt; .05\)</span>) indicates a lack of fit. Though <span class="math inline">\(\chi^2\)</span> is significant (<span class="math inline">\(p &lt; .001\)</span>), both CFI (<span class="math inline">\(.98\)</span>) and TLI (<span class="math inline">\(.97\)</span>) are above the <span class="math inline">\(.95\)</span> threshold for good fit. In addition, <span class="math inline">\(SRMR = .04\)</span> is beneath the threshold of <span class="math inline">\(.08\)</span> and <span class="math inline">\(RMSEA = .09\)</span> is between the mediocre fit threshold range of <span class="math inline">\(.08\)</span> and <span class="math inline">\(.10\)</span>. Therefore, the indicators (survey items) in these data adequately fit the two latent constructs defined by this measurement model.</p>
<p>For more extensive coverage of SEM, Kline (2005) is an excellent resource.</p>
</div>
</div>
<div id="clustering" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Clustering</h2>
<p><strong>Clustering</strong> is a ML technique that groups observations into clusters which have similar characteristics but different characteristics relative to the observations in other clusters. Clustering is similar to factor analysis in that it is also unsupervised since there is not a response variable, but it differs in that it does not seek to find a low-dimensional representation of observations that capture a large portion of variance in the data; clustering aims to find homogeneous subgroups among observations.</p>
<p>Clustering is common in marketing in which it is implemented to create customer segments with shared characteristics. By grouping customers based on attributes such as income, household size, occupation, and geography, companies can tailor marketing campaigns to each segment based on what is most likely to appeal to the unique needs of each.</p>
<p>In people analytics, clustering has important applications as well. For example, clustering can be implemented to define personas based on unique talent development needs (e.g., early tech career, newly promoted people leaders) or attrition risk (e.g, rising stars with hot skills, low performers in high churn roles, high performers in specialized roles). Data privacy regulations often prevent assigning a predictive score to individuals; therefore, grouping employees based on relative attrition risk levels can support action planning at the segment level.</p>
<p>This section will cover two popular clustering techniques: <span class="math inline">\(k\)</span><em>-means</em> and <em>hierarchical</em> clustering.</p>
<div id="k-means-clustering" class="section level3" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> <span class="math inline">\(K\)</span>-Means Clustering</h3>
<p><span class="math inline">\(\textbf K\)</span><strong>-means clustering</strong> is a simple approach to grouping observations into <span class="math inline">\(K\)</span> distinct clusters. <span class="math inline">\(K\)</span>-means clustering is implemented via a four-step process:</p>
<ol style="list-style-type: decimal">
<li>Define <span class="math inline">\(K\)</span>.</li>
<li>Randomly assign observations to one of <span class="math inline">\(K\)</span> clusters.</li>
<li>For each of the <span class="math inline">\(K\)</span> clusters, compute the cluster centroid.</li>
<li>Assign each observation to the cluster with the closet centroid (middle).</li>
</ol>
<p>To assign observations to the cluster with the nearest centroid, a distance metric needs to be selected in order to measure the distance between each observation and cluster centroids. While calculating the distance between observations in two dimensions is simple, distance in higher dimensional space is more challenging. We will focus on the most common distance metric, <strong>Euclidean distance</strong>, though there are many others (e.g., Manhattan, Jaccard, Minkowski, Cosine). The Euclidean distance between two data points is the straight line distance based on the observations’ coordinates using the <strong>Pythagorean theorem</strong>:</p>
<p><span class="math display">\[ a^2 + b^2 = c^2, \]</span></p>
<p>where <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are sides of a triangle that intersect to form a right angle, and <span class="math inline">\(c\)</span> is the hypotenuse (the side opposite the right angle).</p>
<p>Let’s implement <span class="math inline">\(K\)</span>-means clustering using numeric variables in the <code>employees</code> data. Since the scale of variables matters when comparing distances between observations and cluster centers, we will first scale the variables to have <span class="math inline">\(\bar{x} = 0\)</span> and <span class="math inline">\(s = 1\)</span> in support of a consistent, apples-to-apples comparison:</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load employee data</span></span>
<span id="cb427-2"><a href="#cb427-2" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb427-3"><a href="#cb427-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb427-4"><a href="#cb427-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter employee data to numeric variables</span></span>
<span id="cb427-5"><a href="#cb427-5" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">sapply</span>(employees, is.numeric)) <span class="co"># store indices of numeric variables</span></span>
<span id="cb427-6"><a href="#cb427-6" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> employees[, idx] <span class="co"># filter df using indices</span></span>
<span id="cb427-7"><a href="#cb427-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb427-8"><a href="#cb427-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop unimportant and sparsely populated sales variables</span></span>
<span id="cb427-9"><a href="#cb427-9" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(employee_id, standard_hrs, ytd_leads, ytd_sales))</span>
<span id="cb427-10"><a href="#cb427-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb427-11"><a href="#cb427-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Center and scale data</span></span>
<span id="cb427-12"><a href="#cb427-12" aria-hidden="true" tabindex="-1"></a>employees_trans <span class="ot">&lt;-</span> <span class="fu">scale</span>(employees, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Next, we need to define <span class="math inline">\(K\)</span>. One way to determine the optimal number of clusters is to leverage the <code>fviz_nbclust()</code> function from the <code>factoextra</code> library to visualize the sum of squared differences between observations and cluster centers against the range of clusters:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine optimal number of clusters</span></span>
<span id="cb428-5"><a href="#cb428-5" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_nbclust</span>(employees_trans, kmeans, <span class="at">method =</span> <span class="st">&quot;wss&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/kmeans-elbow-plot-1.png" alt="Total within sum of squares (WSS) across cluster count." width="100%" />
<p class="caption">
(#fig:kmeans-elbow-plot)Total within sum of squares (WSS) across cluster count.
</p>
</div>
<p>When interpreting Figure @ref(fig:kmeans-elbow-plot), we are looking for the <em>elbow</em> which marks the inflection point at which the sum of squares begins to level off. The goal is to achieve the fewest number of clusters, optimizing for subgroups that are distinctly different <em>between</em> and highly similar <em>within</em>. The elbow indicates the optimal number of clusters, as additional clusters beyond the elbow do not offer a meaningful improvement in achieving homogeneous subgroups of the observations.</p>
<p>There is a discernible elbow at three clusters in Figure @ref(fig:kmeans-elbow-plot). Intuitively, fewer clusters promotes action taking in people analytics since clusters need to be defined, and this becomes increasingly challenging as the number of clusters increases. With a large number of clusters, it may be difficult to meaningfully tailor career development or retention strategies, for example, to the unique needs of employees assigned to each cluster as the distinction between each subgroup becomes more opaque.</p>
<p>We can now implement <span class="math inline">\(K\)</span>-means clustering, with <span class="math inline">\(K = 3\)</span>, using the <code>kmeans()</code> function in base R:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform K-means clustering</span></span>
<span id="cb429-2"><a href="#cb429-2" aria-hidden="true" tabindex="-1"></a>km <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(employees_trans, <span class="at">centers =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return n-count of clusters</span></span>
<span id="cb430-2"><a href="#cb430-2" aria-hidden="true" tabindex="-1"></a>km<span class="sc">$</span>size</span></code></pre></div>
<pre><code>## [1] 592 603 275</code></pre>
<p>Of the 1,470 employees in our <code>employees</code> data, the <span class="math inline">\(n\)</span> distribution across the <span class="math inline">\(K = 3\)</span> clusters is 592, 603, and 275.</p>
<p>We can calculate the mean (and other descriptives) for each variable by cluster to better understand cluster distinctions:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean of each cluster using original data</span></span>
<span id="cb432-2"><a href="#cb432-2" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(employees, <span class="at">by =</span> <span class="fu">list</span>(<span class="at">cluster =</span> km<span class="sc">$</span>cluster), mean)</span></code></pre></div>
<pre><code>##   cluster stock_opt_lvl trainings      age commute_dist   ed_lvl engagement
## 1       1     0.7787162  2.805743 35.31757     8.907095 2.880068   2.685811
## 2       2     0.7860697  2.781095 35.38474     9.646766 2.854063   2.792703
## 3       3     0.8436364  2.825455 43.75636     8.810909 3.112727   2.687273
##    job_lvl hourly_rate daily_comp monthly_comp annual_comp salary_hike_pct
## 1 1.834459    47.09291   376.7432      8162.77    97953.24        15.26520
## 2 1.724710    83.51078   668.0862     14475.20   173702.42        15.24876
## 3 3.301818    67.72364   541.7891     11738.76   140865.16        15.00364
##   perf_rating prior_emplr_cnt  env_sat  job_sat  rel_sat wl_balance  work_exp
## 1    3.148649        2.668919 2.746622 2.859797 2.673986   1.824324  9.315878
## 2    3.159204        2.645108 2.666667 2.665008 2.706468   1.852405  8.684909
## 3    3.152727        2.850909 2.789091 2.585455 2.807273   1.854545 21.196364
##   org_tenure job_tenure last_promo mgr_tenure interview_rating
## 1   5.146959   3.452703   1.467905   3.300676         3.979730
## 2   4.552239   2.827529   1.077944   2.878939         3.952570
## 3  16.527273   8.974545   6.170909   8.621818         4.090545</code></pre>
<p>We can see that relative to the first two clusters, the third cluster has – on average – an older demographic with more education and a higher job level. In addition, employees in the first cluster earn significantly lower compensation, on average, which may be correlated with categorical variables that were initially dropped such as <code>dept</code> or <code>job_title</code>.</p>
<p>We can also add a new column in the <code>employees</code> data frame with the cluster assignment from <span class="math inline">\(K\)</span>-means to facilitate further analysis:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add cluster assignment to df</span></span>
<span id="cb434-2"><a href="#cb434-2" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">cbind</span>(employees, <span class="at">km_cluster =</span> km<span class="sc">$</span>cluster)</span></code></pre></div>
<p>While <span class="math inline">\(K\)</span>-means clustering is a simple and efficient algorithm (even for large datasets), an a priori specification of <span class="math inline">\(K\)</span> is not always ideal. <span class="math inline">\(K\)</span>-means clustering will create <span class="math inline">\(K\)</span> clusters – even if they are nonsensical – so caution must be exercised. Plotting WSS against cluster count as shown in Figure @ref(fig:kmeans-elbow-plot) can be helpful in defining <span class="math inline">\(K\)</span>, but alternative clustering algorithms exist that do not require <span class="math inline">\(K\)</span> to be manually defined.</p>
</div>
<div id="hierarchical-clustering" class="section level3" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> Hierarchical Clustering</h3>
<p>Like <span class="math inline">\(K\)</span>-means clustering, <strong>hierarchical clustering</strong> seeks to group observations into clusters which have similar characteristics but different characteristics relative to the observations in other clusters. However, unlike <span class="math inline">\(K\)</span>-means, the number of clusters is not specified prior to implementing the algorithm with hierarchical clustering. The optimal number of clusters is determined using a <strong>dendrogram</strong>, which is a tree diagram visualizing the hierarchical relationships in data.</p>
<p>One key difference between <span class="math inline">\(K\)</span>-means and hierarchical clustering is that hierarchical clustering involves linkage methods to measure cluster similarity. There is not a one-size-fits-all option for linkage, as the performance of a given linkage technique can vary based on the structure of the data. Outlined below are the five most common types of linkage in hierarchical clustering:</p>
<ol style="list-style-type: decimal">
<li>Complete Linkage: distance between two clusters is defined as the maximum distance between any individual data point in cluster <span class="math inline">\(A\)</span> and any individual data point in cluster <span class="math inline">\(B\)</span></li>
<li>Single Linkage: distance between two clusters is defined as the minimum distance between any individual data point in cluster <span class="math inline">\(A\)</span> and any individual data point in cluster <span class="math inline">\(B\)</span></li>
<li>Average Linkage: distance between two clusters is defined as the average distance between data points in cluster <span class="math inline">\(A\)</span> and data points in cluster <span class="math inline">\(B\)</span></li>
<li>Centroid Method: distance between two clusters is defined as the distance between the centroid of cluster <span class="math inline">\(A\)</span> and the centroid of cluster <span class="math inline">\(B\)</span></li>
<li>Ward’s Method: ANOVA-based approach in which the distance between clusters <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> is based on how the sum of squared distances increases when the clusters are merged</li>
</ol>
<p>To implement hierarchical clustering, we will leverage the same centered and scaled data used for <span class="math inline">\(K\)</span>-means clustering in the prior section. Note that the <code>km_cluster</code> column was only added to the original <code>employees</code> data; if this column was present in <code>employees_trans</code>, we would need to drop it so that the hierarchical clustering algorithm is not influenced by results of another clustering technique (<span class="math inline">\(K\)</span>-means).</p>
<p>Since we do not know what linkage method will work best for these data, we will also develop a function that enables us to try a range of techniques and select the one that performs best. The <code>agnes()</code> function from the <code>cluster</code> library is used to implement hierarchical clustering:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb435-3"><a href="#cb435-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-4"><a href="#cb435-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define linkage methods</span></span>
<span id="cb435-5"><a href="#cb435-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: centroid is not available for forthcoming agnes() function</span></span>
<span id="cb435-6"><a href="#cb435-6" aria-hidden="true" tabindex="-1"></a>methods <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;complete&quot;</span>, <span class="st">&quot;single&quot;</span>, <span class="st">&quot;average&quot;</span>, <span class="st">&quot;ward&quot;</span>)</span>
<span id="cb435-7"><a href="#cb435-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(methods) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;complete&quot;</span>, <span class="st">&quot;single&quot;</span>, <span class="st">&quot;average&quot;</span>, <span class="st">&quot;ward&quot;</span>)</span>
<span id="cb435-8"><a href="#cb435-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-9"><a href="#cb435-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create function to compute agglomerative coefficient</span></span>
<span id="cb435-10"><a href="#cb435-10" aria-hidden="true" tabindex="-1"></a>agg_coeff <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb435-11"><a href="#cb435-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-12"><a href="#cb435-12" aria-hidden="true" tabindex="-1"></a>  cluster<span class="sc">::</span><span class="fu">agnes</span>(employees_trans, <span class="at">method =</span> x)<span class="sc">$</span>ac</span>
<span id="cb435-13"><a href="#cb435-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb435-14"><a href="#cb435-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-15"><a href="#cb435-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute agglomerative coefficient for each linkage method</span></span>
<span id="cb435-16"><a href="#cb435-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(methods, agg_coeff)</span></code></pre></div>
<pre><code>##  complete    single   average      ward 
## 0.7990373 0.6248688 0.7582732 0.9571736</code></pre>
<p>Agglomerative coefficients closer to 1 indicate stronger clustering performance. Therefore, Ward’s distance measure performs best on these data, so we will implement hierarchical clustering using this linkage option.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform hierarchical clustering using Ward&#39;s linkage method</span></span>
<span id="cb437-2"><a href="#cb437-2" aria-hidden="true" tabindex="-1"></a>hclust <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">agnes</span>(employees_trans, <span class="at">method =</span> <span class="st">&quot;ward&quot;</span>)</span></code></pre></div>
<p>To produce a dendrogram, the <code>pltree()</code> function from the <code>cluster</code> library can be used in conjunction with the <code>hclust</code> object holding the clustering results:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true" tabindex="-1"></a>cluster<span class="sc">::</span><span class="fu">pltree</span>(hclust, <span class="at">main =</span> <span class="st">&quot;Dendrogram&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/hclust-dendrogram-1.png" alt="Dendrogram for hierarchical clustering of employees using Ward linkage method." width="100%" />
<p class="caption">
(#fig:hclust-dendrogram)Dendrogram for hierarchical clustering of employees using Ward linkage method.
</p>
</div>
<p>At the bottom of the denogram shown in Figure @ref(fig:hclust-dendrogram), each leaf of the tree represents an individual observation. Since <span class="math inline">\(n = 1,470\)</span>, the bottom of the tree is too congested to interpret. As we move up the tree, individual observations are fused together based on the degree of similarity as defined by Ward’s linkage method.</p>
<p>To aid in determining the optimal number of clusters, a <strong>gap statistic</strong> can be calculated, which compares the within-cluster variation for different <span class="math inline">\(K\)</span> values to reference values for a random uniform distribution with no clustering. We will use the <code>clusGap()</code> function from the <code>cluster</code> library to calculate the gap statistic, and then visualize using the <code>fviz_gap_stat()</code> function from the <code>factoextra</code> library:</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate gap statistic across 1-10 clusters</span></span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true" tabindex="-1"></a>gap_stat <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">clusGap</span>(employees_trans, <span class="at">FUN =</span> hcut, <span class="at">nstart =</span> <span class="dv">25</span>, <span class="at">K.max =</span> <span class="dv">10</span>, <span class="at">B =</span> <span class="dv">50</span>)</span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-4"><a href="#cb439-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate plot of gap statistic against cluster count</span></span>
<span id="cb439-5"><a href="#cb439-5" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_gap_stat</span>(gap_stat)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/hclust-gap-stat-1.png" alt="Plot of gap statistic against cluster count for hierarchical clustering." width="100%" />
<p class="caption">
(#fig:hclust-gap-stat)Plot of gap statistic against cluster count for hierarchical clustering.
</p>
</div>
<p>We ideally want to select the value of <span class="math inline">\(K\)</span> that maximizes the gap statistic. In practice, however, balancing cluster parsimony with maximization of the gap statistic is not always straightforward. Figure @ref(fig:hclust-gap-stat) indicates that the gap statistic increase is fairly constant across the range of <span class="math inline">\(K = 1\)</span> to <span class="math inline">\(K = 10\)</span> clusters. In this case, we may look to select a value of <span class="math inline">\(K\)</span> based on an inflection point at which the trajectory of increase in the gap statistic begins to slow. Based on this approach, we may select <span class="math inline">\(K = 7\)</span>.</p>
<p>We can now cut the dendrogram into 7 clusters using the <code>cutree()</code> function, and then append the cluster to each observation in our original <code>employees</code> data:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute distance matrix</span></span>
<span id="cb440-2"><a href="#cb440-2" aria-hidden="true" tabindex="-1"></a>d_matrix <span class="ot">&lt;-</span> <span class="fu">dist</span>(employees_trans, <span class="at">method =</span> <span class="st">&quot;euclidean&quot;</span>)</span>
<span id="cb440-3"><a href="#cb440-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-4"><a href="#cb440-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform hierarchical clustering using Ward&#39;s method</span></span>
<span id="cb440-5"><a href="#cb440-5" aria-hidden="true" tabindex="-1"></a>hclust_final <span class="ot">&lt;-</span> <span class="fu">hclust</span>(d_matrix, <span class="at">method =</span> <span class="st">&quot;ward.D2&quot;</span> )</span>
<span id="cb440-6"><a href="#cb440-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-7"><a href="#cb440-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the dendrogram into 7 clusters</span></span>
<span id="cb440-8"><a href="#cb440-8" aria-hidden="true" tabindex="-1"></a>groups <span class="ot">&lt;-</span> <span class="fu">cutree</span>(hclust_final, <span class="at">k =</span> <span class="dv">7</span>)</span>
<span id="cb440-9"><a href="#cb440-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-10"><a href="#cb440-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Append cluster labels to original data</span></span>
<span id="cb440-11"><a href="#cb440-11" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">cbind</span>(employees, <span class="at">hier_cluster =</span> groups)</span></code></pre></div>
</div>
</div>
<div id="review-questions-12" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>How can high dimensional data create problems in analytics, and how do dimension reduction techniques remediate these issues?</p></li>
<li><p>What is the difference between Exploratory Factor Analysis (EFA) and Confirmatory Factor Analysis (CFA)?</p></li>
<li><p>What is the difference between Exploratory Factor Analysis (EFA) and Principal Components Analysis (PCA)?</p></li>
<li><p>What is Structural Equation Modeling (SEM), and what are some use cases for it in people analytics?</p></li>
<li><p>How can we test whether data satisfy the eligibility criteria for factor analysis?</p></li>
<li><p>How are factor loadings interpreted to ascertain which variables are members of each factor?</p></li>
<li><p>What is a data-informed approach to selecting the optimal value of <span class="math inline">\(K\)</span> in <span class="math inline">\(K\)</span>-means clustering?</p></li>
<li><p>What is Euclidean distance, and what is its function in clustering?</p></li>
<li><p>How is a dendrogram interpreted in the context of hierarchical clustering?</p></li>
<li><p>When optimizing for both cluster parsimony and gap statistic maximization is not feasible, how can the optimal value of <span class="math inline">\(K\)</span> be determined in hierarchical clustering?</p></li>
</ol>
<!--chapter:end:r/14_unsupervised_learning.Rmd-->
</div>
</div>
<div id="data-viz" class="section level1" number="15">
<h1><span class="header-section-number">15</span> Data Visualization</h1>
<p>Unlike content in the preceding chapters, data visualization is more of an <em>art</em> than a <em>science</em>. Data visualization is heavily dependent on the type of data being presented, key messages that need to be conveyed, the unique characteristics of the audience to whom information needs to be communicated, and various contextual features germane to a proper interpretation and understanding of material.</p>
<p>This chapter will provide general best practices as well as strategies specific to various types of data that will promote success when communicating data to technical and non-technical stakeholders alike. Since there is a considerable amount of code required to construct the plethora of graphics in this chapter, only the data prep code will be included. You can reference Chapter @ref(appendix) for a curated set of fully reproducible code for each data visualization provided in this chapter.</p>
<div id="best-practices" class="section level2" number="15.1">
<h2><span class="header-section-number">15.1</span> Best Practices</h2>
<p>While the type of visual depends on the nature of data being presented, there are general best practices for effectively communicating information that are applicable for all data types, audiences, and contexts.</p>
<div id="color-palette" class="section level3" number="15.1.1">
<h3><span class="header-section-number">15.1.1</span> Color Palette</h3>
<p>There are several important considerations when choosing colors for data visualization.</p>
<p><strong>Color has meaning.</strong></p>
<p>The meaning of color is not consistent across the world. For example, in Western cultures red generally has unfavorable connotations (e.g., off track, danger) while green signals a favorable status (e.g., on track, cash flow positive). However, in Asian cultures red indicates success.</p>
<p>It is important to understand what color indicates in the contexts in which information is shared to ensure color choices are consistent with the messages that need to be conveyed.</p>
<p><strong>Respect color blindness.</strong></p>
<p>Most estimates indicate that 1 in 12 men (8%) and 1 in 200 women (0.5%) are colorblind (~4.5% of the world population). Males are more likely to be colorblind because the X chromosome contains the genes responsible for the most common forms of color blindness. Trouble distinguishing between red and green is the most common manifestation of colorblindness (Gordon, 1998).</p>
<p>This has important implications for data visualization, and it is generally best to avoid the use of red and green. One alternative is to leverage orange to indicate unfavorable data points and blue for favorable. This strategy will be implemented throughout this chapter.</p>
<p><strong>Adhere to brand colors.</strong></p>
<p>In most organizations, the marketing team defines a color palette consistent with the branding used for consumer products and services. In this case, analysts may be constrained to the use of colors within the branding palette.</p>
<p>Be sure to consult with marketing colleagues and adhere to any color palette requirements.</p>
<p><strong>Use color consistently.</strong></p>
<p>To support a correct interpretation of information, it is important to use a consistent color scheme across the various visuals in dashboards, slides, and documents. For example, if blue is assigned to highlight how the Engineering department compares to other departments in a particular view, blue should be assigned to the Engineering department in every view in which department is a grouping dimension.</p>
<p>The consistent use of color requires the audience to wield less effort to understand information, which in turn reduces the risk of incorrect interpretation.</p>
</div>
<div id="chart-borders" class="section level3" number="15.1.2">
<h3><span class="header-section-number">15.1.2</span> Chart Borders</h3>
<p>The goal in data visualization is to enable the most important data to take center stage. Formatting should support – not detract – from this objective. Chart borders are a usual suspect and prime example of formatting that can divert focus away from the data.</p>
<p>Figure @ref(fig:chart-borders) illustrates the use of heavy and light borders for a tabular presentation of data. Formatting takes center stage in the first table due to heavy borders, while formatting is not the focus in the second table given the minimal light grey border.</p>
<div class="figure" style="text-align: center">
<img src="graphics/light_heavy_borders.png" alt="Comparison of data tables with heavy (left) and light (right) borders." width="75%" />
<p class="caption">
(#fig:chart-borders)Comparison of data tables with heavy (left) and light (right) borders.
</p>
</div>
</div>
<div id="zero-baseline" class="section level3" number="15.1.3">
<h3><span class="header-section-number">15.1.3</span> Zero Baseline</h3>
<p>The use of a non-zero baseline can exaggerate differences in metrics, resulting in misleading conclusions.</p>
<p>Figure @ref(fig:baseline-compare) illustrates how minor differences are exaggerated when a non-zero baseline is applied to the <span class="math inline">\(y\)</span>-axis. Given that the average hires across these four years is <code>1,000</code>, there is actually little variation in hire volume YoY, and this is accurately reflected in the bar chart with a zero baseline.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/baseline-compare-1.png" alt="Hires by year with zero baseline (left) and non-zero baseline (right)." width="100%" />
<p class="caption">
(#fig:baseline-compare)Hires by year with zero baseline (left) and non-zero baseline (right).
</p>
</div>
</div>
<div id="intuitive-layout" class="section level3" number="15.1.4">
<h3><span class="header-section-number">15.1.4</span> Intuitive Layout</h3>
<p>When visualizing data, it is best not to deviate from the way in which the audience will naturally interpret the data. Outlined below are a few important considerations:</p>
<ul>
<li>Numbers lower on a <span class="math inline">\(y\)</span>-axis will naturally be interpreted to be smaller than numbers higher on the <span class="math inline">\(y\)</span>-axis.</li>
<li>When there are both positive and negative numbers along an <span class="math inline">\(x\)</span>-axis, negative metrics are best placed on the left and positive on the right since people naturally consume content from left to right.</li>
<li>Rotated axis labels require more time to read and interpret. If labels must be rotated to fit along an axis, a 45-degree angle is generally preferred over a more extreme 90-degree rotation.</li>
</ul>
<p>Figure @ref(fig:flipped-axis-viz) shows murders committed using firearms in Florida across time. This visual has an inverted <span class="math inline">\(y\)</span>-axis, which is highly misleading since it suggests spikes in murders are dips. Irrespective of whether this was politically motivated or simply a failed attempt at creativity, this is a deceptive data visualization.</p>
<div class="figure" style="text-align: center">
<img src="graphics/bad_viz-flipped_y_axis.png" alt="Misleading inverted y-axis." width="75%" />
<p class="caption">
(#fig:flipped-axis-viz)Misleading inverted y-axis.
</p>
</div>
</div>
<div id="preattentive-attributes" class="section level3" number="15.1.5">
<h3><span class="header-section-number">15.1.5</span> Preattentive Attributes</h3>
<p><strong>Preattentive attributes</strong> signal where to look and help our audience focus on content we wish to emphasize (Knaflic, 2015).</p>
<p>It is important to remember that data do not always need to be visualized with a chart. Sometimes communicating with text is a sufficient and effective way to convey information. In the case of text, preattentive attributes are often implemented using bold text and/or contrasting colors for keywords and phrases that need to take center stage. <strong>Bolded</strong> text is generally more effective than <em>italizing</em> or , as it highlights the chosen elements without unnecessary noise and compromised legibility.</p>
<p>Grey is an important color in the implementation of preattentive attributes as it facilitates a move of less important data and design elements to the background to make room for more predominate colors to highlight the most important information. Figure @ref(fig:pre-attr-1) illustrates the application of preattentive attributes to emphasize the key message in a sentence. This is accomplished by pushing the less important content to the background using grey text and using bold orange text to highlight the labor cost increase.</p>
<div class="figure" style="text-align: center">
<img src="graphics/preattentive_attributes.png" alt="The application of preattentive attributes to highlight labor costs as a key driver of operating cost increases." width="75%" />
<p class="caption">
(#fig:pre-attr-1)The application of preattentive attributes to highlight labor costs as a key driver of operating cost increases.
</p>
</div>
<p>Preattentive attributes can also be applied to data visualizations to focus the audience’s attention. Figure @ref(fig:pre-attr-2) illustrates the use of preattentive attributes by assigning a different color (orange) to the labor cost for the current year and muting the labor costs associated with prior years using a less predominate grey.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/pre-attr-2-1.png" alt="The application of preattentive attributes to highlight labor costs for the current year relative to prior years." width="100%" />
<p class="caption">
(#fig:pre-attr-2)The application of preattentive attributes to highlight labor costs for the current year relative to prior years.
</p>
</div>
<p>Simply put, if something is <strong>really important</strong>, make sure it is different from other content on the page, slide, or section.</p>
</div>
</div>
<div id="step-by-step-visual-upgrade" class="section level2" number="15.2">
<h2><span class="header-section-number">15.2</span> Step-by-Step Visual Upgrade</h2>
<p>Software knows neither what we wish to highlight nor the audience to whom we intend to communicate the information. Therefore, regardless of the software, design defaults are rarely best.</p>
<p>This section will implement data visualization best practices step-by-step beginning with the design defaults for the <code>ggplot2</code> library.</p>
<div id="step-1-build-bar-chart-with-defaults" class="section level3" number="15.2.1">
<h3><span class="header-section-number">15.2.1</span> Step 1: Build Bar Chart with Defaults</h3>
<p>We will begin by building a bar chart that shows the distribution of active employees’ educational backgrounds. To simplify the data structure for data visualization, let’s ingest our <code>employees</code> data and create an aggregated cube with counts by <code>ed_field</code> for active employees:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb441-2"><a href="#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb441-3"><a href="#cb441-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-4"><a href="#cb441-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb441-5"><a href="#cb441-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb441-6"><a href="#cb441-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-7"><a href="#cb441-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for active employees</span></span>
<span id="cb441-8"><a href="#cb441-8" aria-hidden="true" tabindex="-1"></a>smmry_ed_field <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb441-9"><a href="#cb441-9" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb441-10"><a href="#cb441-10" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">count</span>(ed_field)</span></code></pre></div>
<p>A bar chart can be created using the <code>geom_bar()</code> function, and we will start with the <code>ggplot2</code> library’s design defaults:</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_1.png" alt="Step 1: Bar chart with defaults." width="100%" />
<p class="caption">
(#fig:barchart-1)Step 1: Bar chart with defaults.
</p>
</div>
</div>
<div id="step-2-remove-legend" class="section level3" number="15.2.2">
<h3><span class="header-section-number">15.2.2</span> Step 2: Remove Legend</h3>
<p>Since the legend is not necessary for interpreting the education field to which each bar corresponds, we will remove it using <code>theme(legend.position = "none")</code>. Eliminating the legend also provides more real estate for the chart, which helps make the x-axis values more legible.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_2.png" alt="Step 2: Remove legend." width="100%" />
<p class="caption">
(#fig:barchart-2)Step 2: Remove legend.
</p>
</div>
</div>
<div id="step-3-assign-colors-strategically" class="section level3" number="15.2.3">
<h3><span class="header-section-number">15.2.3</span> Step 3: Assign Colors Strategically</h3>
<p>There is a lot competing for attention due to this vibrant color palette. Let’s assume that the objective is to highlight the education field pursued by the largest number of employees. Preattentive attributes lends well to this, and we can assign specific hex color codes to the education categories.</p>
<p>Since Life Sciences was the field pursued by the most employees, let’s highlight the corresponding bar in blue and move the remaining bars to the background through the assignment of light grey. One method of accomplishing this is via the following explicit category assignments:</p>
<p><code>scale_fill_manual(values = c("Human Resources" = "#BFBFBF", "Life Sciences" = "#0070C0", "Marketing" = "#BFBFBF", "Medical" = "#BFBFBF", "Other" = "#BFBFBF", Technical Degree" = "#BFBFBF"))</code></p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_3.png" alt="Step 3: Assign colors strategically." width="100%" />
<p class="caption">
(#fig:barchart-3)Step 3: Assign colors strategically.
</p>
</div>
</div>
<div id="step-4-add-axis-titles-and-margins" class="section level3" number="15.2.4">
<h3><span class="header-section-number">15.2.4</span> Step 4: Add Axis Titles and Margins</h3>
<p>Axis titles are the column names by default, which is usually not the most user-friendly option. We can assign new mixed case axis titles by chaining <code>labs(x = 'Education Field', y = 'Headcount')</code> to the visualization code.</p>
<p>Spacing can also be added between the axis titles and labels to improve upon the default formatting and reduce text congestion. The <code>ggplot2::element_text(margin = margin(t = 0, r = 0, b = 0, l = 0))</code> parameter can be defined for the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> axes via <code>axis.title.x</code> and <code>axis.title.y</code>, respectively, where:</p>
<ul>
<li><strong>t</strong> = space on the top of axis title</li>
<li><strong>r</strong> = space on the right of axis title</li>
<li><strong>b</strong> = space on the bottom of axis title</li>
<li><strong>l</strong> = space on the left of axis title</li>
</ul>
<p>Let’s create a margin of white space above the <span class="math inline">\(x\)</span>-axis title and to the right of the <span class="math inline">\(y\)</span>-axis title by defining the following parameters:</p>
<ul>
<li><code>axis.title.x = ggplot2::element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))</code></li>
<li><code>axis.title.y = ggplot2::element_text(margin = margin(t = 0, r = 10, b = 0, l = 0))</code></li>
</ul>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_4.png" alt="Step 4: Add mixed case axis titles." width="100%" />
<p class="caption">
(#fig:barchart-4)Step 4: Add mixed case axis titles.
</p>
</div>
</div>
<div id="step-5-add-left-justified-title" class="section level3" number="15.2.5">
<h3><span class="header-section-number">15.2.5</span> Step 5: Add Left-Justified Title</h3>
<p>We can add a chart title via <code>labs(title = 'This is a chart title.')</code>. This title can be centered via <code>theme(plot.title = ggplot2::element_text(hjust = 0.5)</code>, left justified via <code>theme(plot.title = ggplot2::element_text(hjust = 0)</code>, or right justified via <code>theme(plot.title = ggplot2::element_text(hjust = 1)</code>.</p>
<p>It is a best practice to left justify titles since readers consume information beginning with the left side of the page (like reading a book), and left justifying the title increases the probability that the audience will read the title and understand its purpose before engaging with the visual. Left justification is the default for <code>ggplot2</code> titles.</p>
<p>It is also a best practice to assign a descriptive title to charts to highlight the key message(s) we want to convey to the audience through the visual. For longer titles, the new line character <code>\n</code> can be used to break titles into multiple lines.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_5.png" alt="Step 5: Add title." width="100%" />
<p class="caption">
(#fig:barchart-5)Step 5: Add title.
</p>
</div>
</div>
<div id="step-6-remove-background" class="section level3" number="15.2.6">
<h3><span class="header-section-number">15.2.6</span> Step 6: Remove Background</h3>
<p>The default grey background is a distraction from the data we need to take center stage. We can remove this background using <code>panel.background = element_blank()</code> to achieve a cleaner aesthetic and allow the bars in this chart to become more pronounced.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_6.png" alt="Step 6: Remove background." width="100%" />
<p class="caption">
(#fig:barchart-6)Step 6: Remove background.
</p>
</div>
</div>
<div id="step-7-remove-axis-ticks" class="section level3" number="15.2.7">
<h3><span class="header-section-number">15.2.7</span> Step 7: Remove Axis Ticks</h3>
<p>Axis ticks add noise to this visual and are not necessary to ascertain to which values along the axes the data align. Axis ticks can be removed for each axis independently with <code>axis.ticks.x = element_blank()</code> for the x-axis and <code>axis.ticks.y = element_blank()</code> for the y-axis.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_7.png" alt="Step 7: Remove axis ticks." width="100%" />
<p class="caption">
(#fig:barchart-7)Step 7: Remove axis ticks.
</p>
</div>
</div>
<div id="step-8-mute-titles" class="section level3" number="15.2.8">
<h3><span class="header-section-number">15.2.8</span> Step 8: Mute Titles</h3>
<p>While the chart and axis titles are important for clarifying what information is represented in the visual, these should not be the focus. Just as we pushed the less important education categories to the background using grey text, we can mute the chart and axis titles with grey text to help draw attention to the data.</p>
<p>We can change the color of the chart title to light grey with <code>plot.title = ggplot2::element_text(colour = "#404040")</code>. The axis titles can be changed to the same color using <code>axis.title.x = ggplot2::element_text(colour = "#404040")</code> for the x-axis and <code>axis.title.y = ggplot2::element_text(colour = "#404040")</code> for the y-axis.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_8.png" alt="Step 8: Mute titles." width="100%" />
<p class="caption">
(#fig:barchart-8)Step 8: Mute titles.
</p>
</div>
</div>
<div id="step-9-flip-axes" class="section level3" number="15.2.9">
<h3><span class="header-section-number">15.2.9</span> Step 9: Flip Axes</h3>
<p>Flipping the coordinates of axes to convert the default vertical bar chart into a horizontal bar chart allows the audience to more easily scan down the right side of the visual to quickly identify and understand the relative frequencies of education categories.</p>
<p>Coordinates can be flipped using <code>coord_flip()</code>:</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_9.png" alt="Step 9: Flip axis." width="100%" />
<p class="caption">
(#fig:barchart-9)Step 9: Flip axis.
</p>
</div>
</div>
<div id="step-10-sort-data" class="section level3" number="15.2.10">
<h3><span class="header-section-number">15.2.10</span> Step 10: Sort Data</h3>
<p>This visual can be further simplified by sorting the bars from highest to lowest value. With sorted bars, the audience can more easily ascertain the relative ranking of each education field.</p>
<p>We can pass <code>reorder(ed_field, n)</code> into the <code>aes()</code> function to sort the education field bars from highest to lowest <span class="math inline">\(n\)</span>-count. If we needed to sort in the opposite direction, <code>reorder(ed_field, -n)</code> will reverse the sort direction.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_step_10.png" alt="Step 10: Sort data." width="100%" />
<p class="caption">
(#fig:barchart-10)Step 10: Sort data.
</p>
</div>
<p>The final visual is a marked improvement over the design defaults in step 1.</p>
<div class="figure" style="text-align: center">
<img src="graphics/viz_pre_post.png" alt="Enhanced design (top). Design defaults (bottom)." width="100%" />
<p class="caption">
(#fig:pre-post-declutter)Enhanced design (top). Design defaults (bottom).
</p>
</div>
</div>
</div>
<div id="visualization-types" class="section level2" number="15.3">
<h2><span class="header-section-number">15.3</span> Visualization Types</h2>
<p>There are some highly advanced and interactive data visualizations that can be built using JavaScript (JS) libraries such as D3. With some exceptions, JS libraries are generally out of scope for this book. <code>ggplot2</code> is capable of building very elegant data visualizations, and this will be the tool used to implement most of the data visualizations in this chapter.</p>
<p>All visuals will have a set of common parameters for design aesthetics, consistent with the themes used to produce the enhanced chart design shown in Figure @ref(fig:pre-post-declutter). Therefore, each section will highlight the differences needed to achieve the respective data visualization. For production applications with many visualizations, it may be helpful to wrap common <code>ggplot2</code> design elements in a function to simplify chart building.</p>
<div id="tables" class="section level3" number="15.3.1">
<h3><span class="header-section-number">15.3.1</span> Tables</h3>
<p><strong>Tables</strong> are the most basic way to organize data. Since tables generally contain many metrics, they are usually better situated as reference material in the Appendix of a doc/deck or within a metric drill-through in dashboards rather than occupying prime real estate that should be leveraged strategically to focus the audience’s attention on key messages.</p>
<p>A simple cube containing employee counts by department and tenure band will be constructed for demonstrating how to display tabular output.</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb442-2"><a href="#cb442-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb442-3"><a href="#cb442-3" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb442-4"><a href="#cb442-4" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb442-5"><a href="#cb442-5" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb442-6"><a href="#cb442-6" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb442-7"><a href="#cb442-7" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb442-8"><a href="#cb442-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb442-9"><a href="#cb442-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-10"><a href="#cb442-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb442-11"><a href="#cb442-11" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb442-12"><a href="#cb442-12" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb442-13"><a href="#cb442-13" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb442-14"><a href="#cb442-14" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb442-15"><a href="#cb442-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-16"><a href="#cb442-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb442-17"><a href="#cb442-17" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span></code></pre></div>
<p>The default display of a tibble (data frame produced by <code>dplyr</code>) is very basic:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display output using default settings</span></span>
<span id="cb443-2"><a href="#cb443-2" aria-hidden="true" tabindex="-1"></a>dept_tenure</span></code></pre></div>
<pre><code>## # A tibble: 14 × 3
## # Groups:   dept [3]
##    dept                   tenure_band     cnt
##    &lt;chr&gt;                  &lt;ord&gt;         &lt;int&gt;
##  1 Human Resources        1-2 Years         7
##  2 Human Resources        3-5 Years        19
##  3 Human Resources        6-10 Years       17
##  4 Human Resources        Over 10 Years     8
##  5 Research &amp; Development 1-2 Years       148
##  6 Research &amp; Development 3-5 Years       262
##  7 Research &amp; Development 6-10 Years      252
##  8 Research &amp; Development Over 10 Years   148
##  9 Research &amp; Development Under 1 Year     18
## 10 Sales                  1-2 Years        57
## 11 Sales                  3-5 Years        93
## 12 Sales                  6-10 Years      124
## 13 Sales                  Over 10 Years    70
## 14 Sales                  Under 1 Year     10</code></pre>
<p>While these data could easily be copied and pasted into presentation software for formatting, additional libraries exist in R for formatting tables. For example, R Markdown scripts can leverage the <code>DT</code> package to provide filtering, pagination, sorting, search, and other interactive features for HTML output. Field names can also be changed to proper case via the <code>dplyr::rename()</code> function.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign proper case field names</span></span>
<span id="cb445-2"><a href="#cb445-2" aria-hidden="true" tabindex="-1"></a>dept_tenure_proper <span class="ot">&lt;-</span> dept_tenure <span class="sc">%&gt;%</span></span>
<span id="cb445-3"><a href="#cb445-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="st">&#39;Department&#39;</span> <span class="ot">=</span> dept,</span>
<span id="cb445-4"><a href="#cb445-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Tenure&#39;</span> <span class="ot">=</span> tenure_band,</span>
<span id="cb445-5"><a href="#cb445-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Count&#39;</span> <span class="ot">=</span> cnt)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graphics/data_table.png" alt="Data table" width="100%" />
<p class="caption">
(#fig:table)Data table
</p>
</div>
</div>
<div id="heatmaps" class="section level3" number="15.3.2">
<h3><span class="header-section-number">15.3.2</span> Heatmaps</h3>
<p><strong>Heatmaps</strong> use a shading scheme to highlight the relative magnitude of numbers in a tabular format.</p>
<p>The <code>geom_tile()</code> function can be used to build a heatmap with <code>ggplot2</code>. The range of colors can be specified via the <code>scale_fill_continuous(low = 'minimum value color', high = 'maximum value color')</code> function since the fill variable defined by <code>aes(fill = cnt)</code> is measured on a continuous scale:</p>
<div class="figure" style="text-align: center">
<img src="graphics/heatmap.png" alt="Heatmap showing the concentration of employees within departments and tenure bands." width="100%" />
<p class="caption">
(#fig:heatmap)Heatmap showing the concentration of employees within departments and tenure bands.
</p>
</div>
<p>This heatmap is excellent for focusing attention on the department + tenure segments with highest and lowest employee counts. However, if the specific employee counts are required, complimenting this heatmap with a basic table of metrics is a good option to avoid cluttering the heatmap with <span class="math inline">\(3*5 = 15\)</span> additional numbers.</p>
</div>
<div id="scatterplots" class="section level3" number="15.3.3">
<h3><span class="header-section-number">15.3.3</span> Scatterplots</h3>
<p><strong>Scatterplots</strong> are useful for visualizing relationships between numeric variables.</p>
<p>A scatterplot will be used to visualize the relationship between <code>work_exp</code> and <code>ytd_sales</code>, with a goal of focusing the audience’s attention on salespeople whose <code>ytd_sales</code> meet or exceed the full year sales quota of <span class="math inline">\(150,000\)</span> USD. Let’s first subset <code>employees</code> data to active salespeople and append a flag to indicate sales quota attainment for use in shading data points in the scatterplot.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset df to active sales employees</span></span>
<span id="cb446-2"><a href="#cb446-2" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, dept <span class="sc">==</span> <span class="st">&#39;Sales&#39;</span> <span class="sc">&amp;</span> active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb446-3"><a href="#cb446-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-4"><a href="#cb446-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set quote attainment flag for data viz coloring</span></span>
<span id="cb446-5"><a href="#cb446-5" aria-hidden="true" tabindex="-1"></a>sales<span class="sc">$</span>quota_flg <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sales<span class="sc">$</span>ytd_sales <span class="sc">&gt;=</span> <span class="dv">150000</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<p>The <code>geom_point()</code> function is used to create a scatterplot. The <code>scale_y_continuous()</code> function can be used in conjunction with the <code>scales</code> library to override the default scale for the <code>y</code>-axis (scientific notation) with more intuitive values.</p>
<div class="figure" style="text-align: center">
<img src="graphics/scatterplot_1.png" alt="Scatterplot showing the relationship between work experience and YTD sales for active salespeople." width="100%" />
<p class="caption">
(#fig:scatterplot-1)Scatterplot showing the relationship between work experience and YTD sales for active salespeople.
</p>
</div>
<p>While the basic scatterplot in Figure @ref(fig:scatterplot-1) is effective in visualizing the relationship between <code>work_exp</code> and <code>ytd_sales</code>, additional design elements are needed to highlight the data points that meet or exceed the full year sales quota of <span class="math inline">\(150,000\)</span> USD.</p>
<p>The <code>color</code> argument for the <code>geom_point()</code> function is used to apply preattentive attributes to this visual by specifying the field used for conditional data point shading. We can define the color for each of the field’s values using the <code>scale_color_manual()</code> function. Additionally, the <code>geom_hline()</code> function is used to add a dotted horizontal line at a specified position on the <span class="math inline">\(y\)</span>-axis (at <span class="math inline">\(150,000\)</span> USD), and annotation is added at a specified pair of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> coordinates using the <code>annotate()</code> function.</p>
<div class="figure" style="text-align: center">
<img src="graphics/scatterplot_2.png" alt="Scatterplot with data points colored relative to the full year sales quota of USD 150k." width="100%" />
<p class="caption">
(#fig:scatterplot-2)Scatterplot with data points colored relative to the full year sales quota of USD 150k.
</p>
</div>
</div>
<div id="line-graphs" class="section level3" number="15.3.4">
<h3><span class="header-section-number">15.3.4</span> Line Graphs</h3>
<p><strong>Line graphs</strong> are used for visualizing continuous data across time.</p>
<p>When visualizing trended data, it is important to avoid cumulative trends because they suggest an upward trajectory (positive slope) even when the corresponding non-cumulative metrics indicate a declining trend.</p>
<p>Consider the following data frame with decreasing hire counts by year:</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print hires df</span></span>
<span id="cb447-2"><a href="#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(hires_dat[<span class="fu">order</span>(hires_dat<span class="sc">$</span>year, <span class="at">decreasing =</span> <span class="cn">FALSE</span>), ])</span></code></pre></div>
<pre><code>##   year hires cum_hires
## 4 2019  1020       980
## 3 2020  1010      1970
## 2 2021   990      2980
## 1 2022   980      4000</code></pre>
<p>Figure @ref(fig:cum-hires-trend) juxtaposes a trended line chart with hires by year (left) against a cumulative version of the same (right). Since hires at each year are additive in the cumulative line chart, the slope is positive and misleading.</p>
<div class="figure" style="text-align: center">
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/cum-hires-trend-1.png" alt="Hires by year (left) and cumulative hires by year (right)." width="100%" />
<p class="caption">
(#fig:cum-hires-trend)Hires by year (left) and cumulative hires by year (right).
</p>
</div>
<p>Figure @ref(fig:cum-iphone-sales) shows a deceptive cumulative graph of iPhone sales. Superimposing a bar chart with non-cumulative quarterly sales atop an overall cumulative trend that occupies far more real estate and dominates the screen can lend to the audience drawing invalid conclusions from the data.</p>
<div class="figure" style="text-align: center">
<img src="graphics/bad_viz-cumulative_trend.png" alt="Deceiving cumulative sales trend." width="75%" />
<p class="caption">
(#fig:cum-iphone-sales)Deceiving cumulative sales trend.
</p>
</div>
<p><strong>Single Series</strong></p>
<p>The most basic type of line graph is a <strong>single series line graph</strong>, which reflects a trend for a single group.</p>
<p>Let’s generate some attrition data for illustrating various types of line graphs:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb449-2"><a href="#cb449-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb449-3"><a href="#cb449-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb449-4"><a href="#cb449-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb449-5"><a href="#cb449-5" aria-hidden="true" tabindex="-1"></a>months <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span></span>
<span id="cb449-6"><a href="#cb449-6" aria-hidden="true" tabindex="-1"></a>eng_rt <span class="ot">=</span> <span class="dv">5</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="fl">2.7</span>, <span class="fl">2.9</span>) <span class="sc">+</span> <span class="fl">2.41</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">41</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> .<span class="dv">02</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb449-7"><a href="#cb449-7" aria-hidden="true" tabindex="-1"></a>fin_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">15</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb449-8"><a href="#cb449-8" aria-hidden="true" tabindex="-1"></a>ppl_rt <span class="ot">=</span> <span class="dv">3</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">12</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">4</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb449-9"><a href="#cb449-9" aria-hidden="true" tabindex="-1"></a>prd_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">13</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb449-10"><a href="#cb449-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb449-11"><a href="#cb449-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine dimensions and metrics within df</span></span>
<span id="cb449-12"><a href="#cb449-12" aria-hidden="true" tabindex="-1"></a>attrition_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="fu">rep</span>(months, <span class="dv">4</span>),</span>
<span id="cb449-13"><a href="#cb449-13" aria-hidden="true" tabindex="-1"></a>                            <span class="at">dept =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="fu">length</span>(months)), </span>
<span id="cb449-14"><a href="#cb449-14" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Finance&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb449-15"><a href="#cb449-15" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;People&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb449-16"><a href="#cb449-16" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Product&#39;</span>, <span class="fu">length</span>(months))),</span>
<span id="cb449-17"><a href="#cb449-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">rate =</span> <span class="fu">c</span>(eng_rt,</span>
<span id="cb449-18"><a href="#cb449-18" aria-hidden="true" tabindex="-1"></a>                                     fin_rt,</span>
<span id="cb449-19"><a href="#cb449-19" aria-hidden="true" tabindex="-1"></a>                                     ppl_rt,</span>
<span id="cb449-20"><a href="#cb449-20" aria-hidden="true" tabindex="-1"></a>                                     prd_rt))</span></code></pre></div>
<p>Line graphs can be constructed using the <code>geom_line()</code> function in <code>ggplot2</code>. Figure @ref(fig:single-line-graph) shows a single series line graph built in <code>ggplot2</code>.</p>
<div class="figure" style="text-align: center">
<img src="graphics/line_graph_single.png" alt="Single series line graph" width="100%" />
<p class="caption">
(#fig:single-line-graph)Single series line graph
</p>
</div>
<p><strong>Two Series</strong></p>
<p>A <strong>two series line graph</strong> reflects trends for two groups, as shown in Figure @ref(fig:dbl-line-graph).</p>
<p>The <code>aes(color = group)</code> parameter defines the group by which lines are stratified.</p>
<div class="figure" style="text-align: center">
<img src="graphics/line_graph_double.png" alt="Two series line graph" width="100%" />
<p class="caption">
(#fig:dbl-line-graph)Two series line graph
</p>
</div>
<p><strong>Multiple Series</strong></p>
<p>A <strong>multiple series line graph</strong> reflects trends for three or more groups.</p>
<p>Note the preattentive attributes applied in Figure @ref(fig:multi-line-graph). If the focus is on how a single group (Engineering in this case) compares to two or more other groups, there is no need to differentiate the other groups with respect to color – only label.</p>
<div class="figure" style="text-align: center">
<img src="graphics/line_graph_multi.png" alt="Multiple series line graph" width="100%" />
<p class="caption">
(#fig:multi-line-graph)Multiple series line graph
</p>
</div>
</div>
<div id="slopegraphs" class="section level3" number="15.3.5">
<h3><span class="header-section-number">15.3.5</span> Slopegraphs</h3>
<p><strong>Slopegraphs</strong> are helpful in illustrating relative changes between two points in time.</p>
<p>Common applications for slopegraphs in people analytics include survey variable score changes between two time periods, pre/post changes to outcome variables in an experimental context, and various metrics (e.g., headcount, TTM attrition) for which changes need to be evaluated MoM, QoQ, or YoY when data points between the start and end points are unimportant.</p>
<p>The data structure needed to support a slopegraph is consistent with a line graph. To illustrate how to construct a slopegraph in R, a data frame will be constructed that holds engagement scores for two points in time for both a treatment and control group.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true" tabindex="-1"></a>prepost_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Time 1&#39;</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">&#39;Time 2&#39;</span>, <span class="dv">2</span>)),</span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Treatment&#39;</span>, <span class="st">&#39;Control&#39;</span>), <span class="dv">2</span>),</span>
<span id="cb450-4"><a href="#cb450-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">score =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">53</span>, <span class="dv">75</span>, <span class="dv">56</span>))</span></code></pre></div>
<p>In <code>ggplot2</code>, a slopegraph is simply a line graph with only two values on the <span class="math inline">\(x\)</span>-axis and some additional formatting including annotations and <span class="math inline">\(y\)</span>-axis removal. Figure @ref(fig:slopegraph) is a slopegraph comparing the engagement score changes for treatment and control groups over the observation period, with preattentive attributes applied to focus attention on the treatment group.</p>
<div class="figure" style="text-align: center">
<img src="graphics/slopegraph.png" alt="Slopegraph" width="100%" />
<p class="caption">
(#fig:slopegraph)Slopegraph
</p>
</div>
</div>
<div id="bar-charts" class="section level3" number="15.3.6">
<h3><span class="header-section-number">15.3.6</span> Bar Charts</h3>
<p><strong>Bar charts</strong> are used to display categorical data. The three main types of bar charts are <em>vertical</em>, <em>horizontal</em>, and <em>stacked</em>.</p>
<p><strong>Vertical</strong></p>
<p>A <strong>vertical bar chart</strong> is the most basic and pervasive method of visualizing categorical data. Like line charts, bar charts can be single series, two series, or multiple series based on the data that need to be displayed.</p>
<p>To demonstrate how to build bar charts, departmental engagement data will be simulated with some rank variables to support preattentive attributes.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb451-2"><a href="#cb451-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-3"><a href="#cb451-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb451-4"><a href="#cb451-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb451-5"><a href="#cb451-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-6"><a href="#cb451-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate favorability distributions</span></span>
<span id="cb451-7"><a href="#cb451-7" aria-hidden="true" tabindex="-1"></a>fav_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb451-8"><a href="#cb451-8" aria-hidden="true" tabindex="-1"></a>neu_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb451-9"><a href="#cb451-9" aria-hidden="true" tabindex="-1"></a>unfav_pct <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> fav_pct <span class="sc">-</span> neu_pct</span>
<span id="cb451-10"><a href="#cb451-10" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(fav_pct, neu_pct, unfav_pct)</span>
<span id="cb451-11"><a href="#cb451-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-12"><a href="#cb451-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Average top box (favorable) score</span></span>
<span id="cb451-13"><a href="#cb451-13" aria-hidden="true" tabindex="-1"></a>topbox_avg <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(fav_pct), <span class="dv">0</span>)</span>
<span id="cb451-14"><a href="#cb451-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-15"><a href="#cb451-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb451-16"><a href="#cb451-16" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">dept =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>), <span class="dv">3</span>),</span>
<span id="cb451-17"><a href="#cb451-17" aria-hidden="true" tabindex="-1"></a>                                <span class="at">favorability =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Favorable&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Neutral&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Unfavorable&#39;</span>, <span class="dv">7</span>)),</span>
<span id="cb451-18"><a href="#cb451-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">pct =</span> scores)</span>
<span id="cb451-19"><a href="#cb451-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-20"><a href="#cb451-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank departments by top box score to support sorting</span></span>
<span id="cb451-21"><a href="#cb451-21" aria-hidden="true" tabindex="-1"></a>dept_rank <span class="ot">&lt;-</span> engagement_scores <span class="sc">%&gt;%</span></span>
<span id="cb451-22"><a href="#cb451-22" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">filter</span>(favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb451-23"><a href="#cb451-23" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb451-24"><a href="#cb451-24" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(pct))) <span class="sc">%&gt;%</span></span>
<span id="cb451-25"><a href="#cb451-25" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">select</span>(dept, rank)</span>
<span id="cb451-26"><a href="#cb451-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-27"><a href="#cb451-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag top department records in df to support conditional coloring</span></span>
<span id="cb451-28"><a href="#cb451-28" aria-hidden="true" tabindex="-1"></a>engagement_scores<span class="sc">$</span>top_score <span class="ot">=</span> <span class="fu">ifelse</span>(engagement_scores<span class="sc">$</span>dept <span class="sc">==</span> dept_rank[<span class="dv">1</span>, <span class="st">&#39;dept&#39;</span>], <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb451-29"><a href="#cb451-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-30"><a href="#cb451-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add department rank based on top box scores</span></span>
<span id="cb451-31"><a href="#cb451-31" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">left_join</span>(engagement_scores, dept_rank, <span class="at">by =</span> <span class="st">&quot;dept&quot;</span>)</span></code></pre></div>
<p>The <code>geom_bar()</code> function can be leveraged to construct a bar chart using <code>ggplot2</code>. The <code>geom_hline()</code> and <code>annotate()</code> functions can be added to include a reference line with the average top box score. Preattentive attributes can also be applied by setting the derived <code>top_score</code> variable as the <code>fill</code> parameter in the <code>aes()</code> function.</p>
<div class="figure" style="text-align: center">
<img src="graphics/vertical_bar_chart.png" alt="Vertical bar chart" width="100%" />
<p class="caption">
(#fig:vbar-chart)Vertical bar chart
</p>
</div>
<p><strong>Horizontal</strong></p>
<p>The <strong>horizontal bar cart</strong> is a horizontal version of the vertical bar chart, and it tends to be easier to read.</p>
<p>The vertical bar chart can be converted to a horizontal bar chart by adding <code>coord_flip()</code> to swap the axes.</p>
<div class="figure" style="text-align: center">
<img src="graphics/horizontal_bar_chart_1.png" alt="Horizontal bar chart" width="100%" />
<p class="caption">
(#fig:hbar-chart)Horizontal bar chart
</p>
</div>
<p><strong>Stacked</strong></p>
<p>The <strong>stacked bar chart</strong> is useful for illustrating the relative contribution of subcomponents to a whole. In a people analytics setting, a 100% stacked bar chart is an excellent tool for visualizing the favorability distribution across survey items and various categorical dimensions (e.g., departments, locations, job profiles).</p>
<p>The only adjustment needed to build a stacked area chart is to specify the variable containing the favorability categories as an ordered factor for the <code>fill</code> parameter. Colors can be specified for each favorability category via the <code>scale_fill_manual()</code> parameter.</p>
<div class="figure" style="text-align: center">
<img src="graphics/stacked_bar_chart.png" alt="100 percent stacked bar chart" width="100%" />
<p class="caption">
(#fig:sbar-chart)100 percent stacked bar chart
</p>
</div>
</div>
<div id="combination-charts" class="section level3" number="15.3.7">
<h3><span class="header-section-number">15.3.7</span> Combination Charts</h3>
<p><strong>Combination charts</strong> display data using different types of visualizations within the same chart.</p>
<p>In a people analytics context, we may wish to highlight differences between regrettable (bad) and non-regrettable (good) turnover trends relative to total voluntary turnover rates. It is usually more difficult to compare the magnitude of regrettable and non-regrettable rates across time using a stacked bar chart, and a combination chart is often a more intuitive method of presenting this information.</p>
<p>As illustrated in Figure @ref(fig:combo-chart), we can leverage a two-series line chart for monthly regrettable and non-regrettable rates relative to the total voluntary turnover rate visualized with a light grey vertical bar chart in the background.</p>
<div class="figure" style="text-align: center">
<img src="graphics/combo_chart.png" alt="Combination chart" width="100%" />
<p class="caption">
(#fig:combo-chart)Combination chart
</p>
</div>
</div>
<div id="waterfall-charts" class="section level3" number="15.3.8">
<h3><span class="header-section-number">15.3.8</span> Waterfall Charts</h3>
<p><strong>Waterfall charts</strong> are alternatives to stacked bar charts that aid in understanding events between two points in time that explain a change in a starting and ending period value. Explaining drivers of headcount changes over time is a common use case for waterfall charts in people analytics.</p>
<p>Building a waterfall chart requires a bit more data prep relative to data structure requirements for a stacked bar chart. Unlike a bar chart, a waterfall chart needs a start and end value for each event type so that each bar beyond the first begins where the previous bar ends.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate headcount data with id field to define bar order</span></span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true" tabindex="-1"></a>hc_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb452-3"><a href="#cb452-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">event =</span> <span class="fu">c</span>(<span class="st">&quot;Starting HC&quot;</span>, <span class="st">&quot;Hires&quot;</span>, <span class="st">&quot;Transfers In&quot;</span>, <span class="st">&quot;Transfers Out&quot;</span>, <span class="st">&quot;Exits&quot;</span>, <span class="st">&quot;Ending HC&quot;</span>),</span>
<span id="cb452-4"><a href="#cb452-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Headcount&quot;</span>),</span>
<span id="cb452-5"><a href="#cb452-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="dv">130</span>),</span>
<span id="cb452-6"><a href="#cb452-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">start =</span> <span class="cn">NA</span>,</span>
<span id="cb452-7"><a href="#cb452-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">end =</span> <span class="cn">NA</span>)</span>
<span id="cb452-8"><a href="#cb452-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-9"><a href="#cb452-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and end values to support waterfall chart</span></span>
<span id="cb452-10"><a href="#cb452-10" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(hc_dat<span class="sc">$</span>count)</span>
<span id="cb452-11"><a href="#cb452-11" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>), <span class="dv">0</span>)</span>
<span id="cb452-12"><a href="#cb452-12" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>start <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb452-13"><a href="#cb452-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-14"><a href="#cb452-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap start/end values for last record (Ending HC)</span></span>
<span id="cb452-15"><a href="#cb452-15" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;end&quot;</span>] <span class="ot">&lt;-</span> hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>]</span>
<span id="cb452-16"><a href="#cb452-16" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<p>With data properly structured, we can use the <code>geom_rect()</code> function to build the waterfall chart. Strategies such as labeling only the Beginning HC and Ending HC reduces clutter and lends to a cleaner design aesthetic.</p>
<div class="figure" style="text-align: center">
<img src="graphics/waterfall_chart.png" alt="Waterfall chart" width="100%" />
<p class="caption">
(#fig:waterfl-chart)Waterfall chart
</p>
</div>
</div>
<div id="waffle-charts" class="section level3" number="15.3.9">
<h3><span class="header-section-number">15.3.9</span> Waffle Charts</h3>
<p><strong>Waffle charts</strong>, also known as <strong>square area charts</strong>, are well-suited for illustrating parts of a whole.</p>
<p>A common application in people analytics is illustrating candidate movement through the recruiting funnel. It is often helpful to visualize a normalized applicant pool (e.g., per 100 applicants) to identify where bottlenecks exist across funnel stages and how pass-through rates compare across business areas.</p>
<p>Waffle charts require some data prep to visualize:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create df with TA funnel metrics</span></span>
<span id="cb453-2"><a href="#cb453-2" aria-hidden="true" tabindex="-1"></a>ta_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">stage =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span>, <span class="st">&quot;Phone Screen&quot;</span>, <span class="st">&quot;Interview&quot;</span>, <span class="st">&quot;Offer Extend&quot;</span>, <span class="st">&quot;Offer Accept&quot;</span>),</span>
<span id="cb453-3"><a href="#cb453-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb453-4"><a href="#cb453-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-5"><a href="#cb453-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Set depth of waffle chart (# of y-axis rows)</span></span>
<span id="cb453-6"><a href="#cb453-6" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb453-7"><a href="#cb453-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-8"><a href="#cb453-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Each observation needs an x and y coordinate, and y needs to be specified first for a waffle chart with horizontal accumulation</span></span>
<span id="cb453-9"><a href="#cb453-9" aria-hidden="true" tabindex="-1"></a>waffle_dat <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span>depth,</span>
<span id="cb453-10"><a href="#cb453-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="fu">ceiling</span>(<span class="fu">sum</span>(ta_dat<span class="sc">$</span>cnt) <span class="sc">/</span> depth)))</span>
<span id="cb453-11"><a href="#cb453-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-12"><a href="#cb453-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Expand the applicant counts into a vector of stage labels</span></span>
<span id="cb453-13"><a href="#cb453-13" aria-hidden="true" tabindex="-1"></a>stages <span class="ot">&lt;-</span> <span class="fu">rep</span>(ta_dat<span class="sc">$</span>stage, ta_dat<span class="sc">$</span>cnt)</span>
<span id="cb453-14"><a href="#cb453-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-15"><a href="#cb453-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate stages and fill any extra tiles with NA</span></span>
<span id="cb453-16"><a href="#cb453-16" aria-hidden="true" tabindex="-1"></a>waffle_dat<span class="sc">$</span>stage <span class="ot">&lt;-</span> <span class="fu">c</span>(stages, <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">nrow</span>(waffle_dat) <span class="sc">-</span> <span class="fu">length</span>(stages)))</span></code></pre></div>
<p>With this data structure, a waffle chart can be produced using the <code>geom_tile()</code> function from <code>ggplot2</code>.</p>
<p>The waffle chart in Figure @ref(fig:waffle-chart) illustrates how candidates for a set of filled requisitions move from application through the phone screen, interview, offer extend, and offer acceptance stages of the recruiting lifecycle. Based on this chart, 60% of applicants are rejected without a conversation, 40% receive a phone screen, 20% land an interview, 10% receive an offer, and 4% accept an offer.</p>
<div class="figure" style="text-align: center">
<img src="graphics/waffle_chart.png" alt="Waffle chart visualizing pass-through rates across recruitment stages per 100 job applicants." width="100%" />
<p class="caption">
(#fig:waffle-chart)Waffle chart visualizing pass-through rates across recruitment stages per 100 job applicants.
</p>
</div>
</div>
<div id="sankey-diagrams" class="section level3" number="15.3.10">
<h3><span class="header-section-number">15.3.10</span> Sankey Diagrams</h3>
<p><strong>Sankey diagrams</strong>, or alternatives such as <strong>chord diagrams</strong> and <strong>alluvial plots</strong>, are flow diagrams that are particularly effective in depicting a many-to-many relationship between two domains.</p>
<p>Sankey diagrams have many applications in people analytics. For example, sankeys may be used to understand internal transfers over a period of time (i.e., inflows and outflows among departments) or recruiting sources by which employees in various departments have been hired.
To demonstrate how to implement a sankey diagram, let’s use the <code>sankeyNetwork()</code> function from the <code>networkD3</code> library to visualize employee transfers between departments. D3 is an advanced JavaScript framework for creating interactive visualizations, and the <code>networkD3</code> library provides an easy interface for constructing sankey diagrams with interactive components. Building a sankey diagram using <code>networkD3</code> requires data to be structured within two data frames:</p>
<ul>
<li><strong>nodes</strong>: Defines the source and destination node names (i.e., the departments employees transfer into and out of)</li>
<li><strong>links</strong>: Connections between pairs of source and destination nodes using an index beginning at 0 to represent the corresponding node from the nodes data frame</li>
</ul>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb454-2"><a href="#cb454-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb454-3"><a href="#cb454-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-4"><a href="#cb454-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create nodes df</span></span>
<span id="cb454-5"><a href="#cb454-5" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>, <span class="co"># source</span></span>
<span id="cb454-6"><a href="#cb454-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>)) <span class="co"># destination</span></span>
<span id="cb454-7"><a href="#cb454-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-8"><a href="#cb454-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create links df</span></span>
<span id="cb454-9"><a href="#cb454-9" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">source =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">target =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">13</span>)</span>
<span id="cb454-10"><a href="#cb454-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-11"><a href="#cb454-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Append employee transfer counts per department pair to links df</span></span>
<span id="cb454-12"><a href="#cb454-12" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>source <span class="sc">==</span> links<span class="sc">$</span>target<span class="dv">-7</span>, <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">150</span>, <span class="dv">50</span>), <span class="dv">0</span>), <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">30</span>, <span class="dv">5</span>), <span class="dv">0</span>))</span></code></pre></div>
<p>With data properly structured within the <code>nodes</code> and <code>links</code> data frames, these data can be passed into the <code>sankeyNetwork()</code> function to construct the sankey diagram. As illustrated in Figure @ref(fig:sankey-1), hovering over a connection displays the count of employee transfers between the corresponding departments (<span class="math inline">\(n\)</span> = 222 moves within Product).</p>
<div class="figure" style="text-align: center">
<img src="graphics/sankey_1.png" alt="Sankey diagram showing employee transfers between departments with default colors." width="100%" />
<p class="caption">
(#fig:sankey-1)Sankey diagram showing employee transfers between departments with default colors.
</p>
</div>
<p>Though it can quickly become noisy as the number of nodes increases, coloring connections based on the source departments from which each group flows can be helpful in tracing the employee flow to the various destination departments.</p>
<p>A department variable needs to be defined and added to the <code>links</code> data frame in order to color connections based on the source department (transfers out). The <code>NodeGroup</code> and <code>LinkGroup</code> parameters in the call to the <code>sankeyNetwork()</code> function define the column in the <code>nodes</code> and <code>links</code> data frames, respectively, that specify the group values by which the nodes and links should be colored.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append source department variable for colored connections</span></span>
<span id="cb455-2"><a href="#cb455-2" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb455-3"><a href="#cb455-3" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Engineering&quot;</span>,</span>
<span id="cb455-4"><a href="#cb455-4" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Finance&quot;</span>,</span>
<span id="cb455-5"><a href="#cb455-5" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Legal&quot;</span>,</span>
<span id="cb455-6"><a href="#cb455-6" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Marketing&quot;</span>,</span>
<span id="cb455-7"><a href="#cb455-7" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;People&quot;</span>,</span>
<span id="cb455-8"><a href="#cb455-8" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;Product&quot;</span>,</span>
<span id="cb455-9"><a href="#cb455-9" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;Sales&quot;</span>,</span>
<span id="cb455-10"><a href="#cb455-10" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;NA&quot;</span></span>
<span id="cb455-11"><a href="#cb455-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graphics/sankey_2.png" alt="Sankey diagram showing employee transfers between departments with connections shaded based on a source department color scheme." width="100%" />
<p class="caption">
(#fig:sankey-2)Sankey diagram showing employee transfers between departments with connections shaded based on a source department color scheme.
</p>
</div>
<p>We can add another grouping variable to support coloring intradepartmental (within) moves differently from interdepartmental (outside) moves.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append within/outside department transfer variable for colored connections</span></span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>wiout_dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb456-3"><a href="#cb456-3" aria-hidden="true" tabindex="-1"></a>  (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">7</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">8</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">9</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">13</span>) <span class="sc">~</span> <span class="st">&quot;Within&quot;</span>,</span>
<span id="cb456-4"><a href="#cb456-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Outside&quot;</span></span>
<span id="cb456-5"><a href="#cb456-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graphics/sankey_3.png" alt="Sankey diagram showing employee transfers between departments with connections shaded based on an intradepartmental vs. interdepartmental color scheme." width="100%" />
<p class="caption">
(#fig:sankey-3)Sankey diagram showing employee transfers between departments with connections shaded based on an intradepartmental vs. interdepartmental color scheme.
</p>
</div>
<p>If the focus is on a single department’s transfers, preattentive attributes can be applied to help focus the audience’s attention and move the less important information to the background to reduce clutter.</p>
<p>To facilitate this, a grouping variable can be defined to differentiate a single department, such as Product, from remaining departments. The color of each group can then be specified using valid D3 code: <code>d3.scaleOrdinal(["group_1_color", "group_2_color"])</code>:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append dichotomous product/other indicator to links and nodes data frames</span></span>
<span id="cb457-2"><a href="#cb457-2" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span>
<span id="cb457-3"><a href="#cb457-3" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(nodes<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graphics/sankey_4.png" alt="Sankey diagram with preattentive attributes to highlight employee transfers out of the Product department." width="100%" />
<p class="caption">
(#fig:sankey-4)Sankey diagram with preattentive attributes to highlight employee transfers out of the Product department.
</p>
</div>
</div>
<div id="pie-charts" class="section level3" number="15.3.11">
<h3><span class="header-section-number">15.3.11</span> Pie Charts</h3>
<p><strong>Pie charts</strong> are rarely an effective way to visualize data, and this book does not generally endorse them. Pie charts can be appropriate in cases where there are two or three mutually exclusive and collectively exhaustive groups and we need to visualize the relative contribution of each to the whole. However, it quickly becomes difficult to ascertain relative size beyond a few groups with a pie chart, and labeling many slices adds a lot of clutter and noise. Proportions should always sum to 1 so if data are not mutually exclusive parts of a whole, a pie chart is not appropriate.</p>
<p>Figure @ref(fig:bad-donut-chart) shows a donut chart – which is simply a pie chart with the center cut out – that is intended to show Kane Williamson’s outsized contribution to New Zealand’s cricket runs. However, top scorers from other countries are also included in this visual, so the metrics do not sum to 100%. Pie and donut charts are not appropriate for these data.</p>
<div class="figure" style="text-align: center">
<img src="graphics/bad_viz-pie_chart.png" alt="Improper use of a donut chart." width="75%" />
<p class="caption">
(#fig:bad-donut-chart)Improper use of a donut chart.
</p>
</div>
<p>There is no specific <code>geom()</code> function for building pie charts using <code>ggplot2</code>. Therefore, we need to create a bar chart and make it circular by adding a <code>coord_polar("y", start = 0)</code> transformation. The <code>coord_polar()</code> transformation complicates the positioning of labels, but we can add a <code>position = position_stack(vjust = 0.5))</code> argument within the <code>geom_text()</code> function to specify the alignment of gender representation metrics. We can also easily improve the aesthetics with the <code>theme_void()</code> function, which removes the default background, grid, and labels.</p>
<p>The data need to be structured consistent with the requirements for a bar chart. A basic data cube with descriptive statistics by gender category will simplify the construction of the pie chart in <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for gender representation among active employees</span></span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true" tabindex="-1"></a>smmry_gender <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb458-4"><a href="#cb458-4" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb458-5"><a href="#cb458-5" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb458-6"><a href="#cb458-6" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(cnt <span class="sc">/</span> <span class="fu">sum</span>(cnt) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb458-7"><a href="#cb458-7" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct))</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graphics/pie_chart.png" alt="Pie chart showing gender representation for active employees." width="100%" />
<p class="caption">
(#fig:pie-chart)Pie chart showing gender representation for active employees.
</p>
</div>
</div>
<div id="d-visuals" class="section level3" number="15.3.12">
<h3><span class="header-section-number">15.3.12</span> 3D Visuals</h3>
<p>An element of uncertainty is inherent in analytics, which is why this book avoids the use of categorical terms such as <em>always</em> and <em>never</em>. However, an exception will be made for this section. 3D visualizations are <em>never</em> appropriate. 3D visuals misrepresent the data they are intended to visualize and are unnecessarily difficult to interpret.</p>
<p>Figure @ref(fig:3d-pie-chart) shows the distribution of headcount across locations using a 3D pie chart. Based on this visual, it may not be apparent that Los Angeles (25%) is considerably larger than New York (19%). The misleading perspective of this tilted visual causes locations on the back side of the pie chart to appear smaller relative to locations on the front side.</p>
<div class="figure" style="text-align: center">
<img src="graphics/3d_pie_chart.png" alt="Headcount by location misrepresented with a 3D pie chart." width="75%" />
<p class="caption">
(#fig:3d-pie-chart)Headcount by location misrepresented with a 3D pie chart.
</p>
</div>
<p>A 3D bar chart is not an improvement over a 3D pie chart. As illustrated in Figure @ref(fig:3d-bar-chart), bars do not appear to align with the actual corresponding values (e.g., Los Angeles = 25%). This is because software determines the height of bars in a 3D bar chart using an invisible tangent plane to intersect the bars at the correct y-axis location.</p>
<div class="figure" style="text-align: center">
<img src="graphics/3d_bar_chart.png" alt="Headcount by location visualized with a misleading 3D bar chart." width="75%" />
<p class="caption">
(#fig:3d-bar-chart)Headcount by location visualized with a misleading 3D bar chart.
</p>
</div>
<p>As shown in Figure @ref(fig:3d-bar-chart_conv), by leveraging a horizontal bar chart with labeled bars and preattentive attributes, it becomes easy to understand relative headcount across locations.</p>
<div class="figure" style="text-align: center">
<img src="graphics/horizontal_bar_chart_2.png" alt="Headcount by location properly visualized with a horizontal bar chart." width="75%" />
<p class="caption">
(#fig:3d-bar-chart-conv)Headcount by location properly visualized with a horizontal bar chart.
</p>
</div>
</div>
</div>
<div id="elegant-data-visualization" class="section level2" number="15.4">
<h2><span class="header-section-number">15.4</span> Elegant Data Visualization</h2>
<p>This chapter has covered the fundamentals of effective data visualization. Applying these best practices will elevate impact when presenting results of analyses to stakeholders.</p>
<p>Figure @ref(fig:good-viz) is an example of an excellent data visualization that brings together many of the design elements promoted in this chapter. This visual shows seasonally adjusted jobless claims over a period of two decades to highlight the significance of the Coronavirus’s impact on the labor market using the following design elements:</p>
<ul>
<li>Larger and darker text for the headline</li>
<li>Smaller and lighter text for the commentary</li>
<li>Grey axis labels and chart annotations to avoid competing with <em>current</em> statistics</li>
<li>Low-profile dotted horizontal lines to help connect bars across the long <span class="math inline">\(x\)</span>-axis to their corresponding <span class="math inline">\(y\)</span>-axis values</li>
<li>Orange coloring to represent jobless claims (an <strong>unfavorable</strong> event)</li>
<li>Creative use of a bar chart resembling an area chart to represent the weekly interval for jobless claims over the 20-year period</li>
<li>Two helpful reference points to provide perspective: (1) 20-year weekly average; and (2) cumulative jobless claims during the last significant U.S. recession in 2008</li>
</ul>
<div class="figure" style="text-align: center">
<img src="graphics/good_viz-job_loss.png" alt="An archetype of elegance in data visualization." width="100%" />
<p class="caption">
(#fig:good-viz)An archetype of elegance in data visualization.
</p>
</div>
</div>
<div id="review-questions-13" class="section level2" number="15.5">
<h2><span class="header-section-number">15.5</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What is the function of preattentive attributes in data visualization?</p></li>
<li><p>Why is the use of red and green in data visualization potentially problematic?</p></li>
<li><p>Why are horizontal bar charts easier to interpret than pie charts?</p></li>
<li><p>What types of data are visualized in scatterplots?</p></li>
<li><p>What advantages do heatmaps provide over tables?</p></li>
<li><p>What are some people analytics use cases for slopegraphs?</p></li>
<li><p>What are some people analytics use cases for sankey diagrams?</p></li>
<li><p>Why is it important to use a zero baseline for y-axes?</p></li>
<li><p>Why is it a best practice to avoid rotating axis labels?</p></li>
<li><p>What is the primary purpose of applying a consistent color palette across visuals?</p></li>
</ol>
<!--chapter:end:r/15_data_visualization.Rmd-->
</div>
</div>
<div id="storytelling" class="section level1" number="16">
<h1><span class="header-section-number">16</span> Data Storytelling</h1>
<p>Like Chapter @ref(data-viz), this chapter leans more <em>art</em> than <em>science</em> in the coverage of strategies to translate results of analyses into compelling stories that have a high probability of landing effectively with target audiences. One may build an impressive set of complex models and perform robust analyses but unless the results and recommendations are clear to stakeholders, this is an exercise in futility. We need stories to distill analytical output down to a non-technical and logical organization of unified ideas that arouse the energy and attention of the audience.</p>
<div id="know-your-audience" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Know Your Audience</h2>
<p>First, we must remember that we are communicating <em>for the audience</em>, not for ourselves. To do this effectively, we need to know the audience – what is important to them (e.g., making money, reducing expenses, gaining market share, innovation) and how they define and measure success. Knowing what matters to those we seek to influence with information enables us to tailor content in a way that appeals to the unique needs of those who can ultimately authorize action and drive change.</p>
<p>A unique challenge for people analytics practitioners is that the audience is often non-technical folks in the People organization. The strategies needed to communicate effectively to this audience are quite different from those required to present an analysis to Finance, for example. Using technical jargon is a sure way to quickly lose a non-technical audience and sacrifice what could otherwise be a poignant and impactful call to action. Therefore, it is critically important to identify and understand the target audience before packaging and delivering results.</p>
<p>In general, it is best not to assume the audience knows what you know because chances are good that no one else has been as deeply immersed in the problem as you.</p>
<p>Several contextual questions are important to consider:</p>
<ol style="list-style-type: decimal">
<li>What essential background information does the audience already have, and what additional context needs to be shared?</li>
<li>Does the audience already have access to any relevant data that would strengthen or conflict with the messages we need to convey?</li>
<li>Does the audience or decision maker have a known perspective on the topic?</li>
<li>How should the content be messaged to proactively appeal to potential risks or biases the audience may possess that could create resistance to the findings and/or recommendations?</li>
<li>What is the audience’s preferred format for content sharing (e.g., document vs. deck)?</li>
</ol>
</div>
<div id="production-status" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> Production Status</h2>
<p>Prior to documents or decks being circulated to the target audience, there are generally several revs to refine the content and storyline in partnership with internal analytics colleagues and other stakeholders. If working docs are shared prematurely, it can result in the analytics team needing to address unnecessary questions that may compromise the project scope and timeline. Stakeholders will naturally have questions and ideas for further exploration, and we should always value their engagement and enthusiasm for more insights. However, unless there is a critical business need to venture down another path, the analytics team must protect the project scope and cite in the presentation the need to prioritize the additional analyses as a next step.</p>
<p>It is important to define a production status taxonomy to clarify content readiness. The framework below may prove useful:</p>
<ol style="list-style-type: decimal">
<li><strong>Draft</strong>: Working document/deck being prepared by the analytics team (do not share!)</li>
<li><strong>Initial Review</strong>: Document/deck suitable for initial input from stakeholders</li>
<li><strong>Final Review</strong>: Document/deck reflects feedback from initial review and ready for final review and sign off</li>
<li><strong>Complete</strong>: Document/deck complete and ready for delivery to target audience</li>
</ol>
</div>
<div id="structural-elements" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Structural Elements</h2>
<p>Entrepreneurs pitching to VCs craft a concise <em>elevator pitch</em> that highlights the key features of their product or service complemented by data to support the unique value proposition and attractive upside of the business (e.g., market size and penetration, revenue growth trajectory). In the same way, a good early step in storytelling with data is drafting a short story and iterating on it until only the essential content remains and it requires no more than a few minutes to read.</p>
<p>When preparing a presentation, a general rule is to never begin with slides. The aesthetics and formatting are of secondary importance to the organization and sequencing of content. Begin by outlining the structure and organizing content in a way that supports and punctuates the key messages you wish to convey to the audience. The outline can then be translated into a presentation-ready deck or document, which will support a logical and effective flow of information.</p>
<p>While the structure and format may vary company to company, and across stakeholder groups within a particular company, there are some essential elements that will support the effectiveness of an analysis presentation.</p>
<div id="tldr" class="section level3" number="16.3.1">
<h3><span class="header-section-number">16.3.1</span> TL;DR</h3>
<p>A <strong>TL;DR (too long; don’t read)</strong> is an abstract intended to provide a concise synopsis of the research objective, high-level approach, key findings, and recommendations and next steps. The TL;DR is popular among tech companies, though the general idea is embraced by organizations in other industries under various names (e.g., Executive Summary).</p>
<p>Here is an example of a TL;DR for an analysis intended to support a solution to an organization’s location capacity issue:</p>
<p><em>Based on our strategic workforce plan, we will exceed the capacity at our HQ facility within three years. Labor market analyses indicate that by expanding our remote workforce, we can source from a larger pool of talent with the skills we need to maintain our competitive position in the market, decrease our average time to fill positions, lower our average cost per employee, and solve for the impending capacity breach at our HQ facility. A shift to remote-first hiring is recommended over the next six months to proactively address both our strategic workforce needs and location capacity constraints.</em></p>
<p>This short TL;DR led with the problem statement, highlighted a solution and associated benefits based on the analysis, and finished with a recommended next step and timeline. While this short summary does not provide the intricate details of the analysis, in most cases it should be sufficient to communicate the high-level story to those with limited time. This short summary may also function to pique the interest of stakeholders who are unsure if the analysis warrants their time and attention.</p>
</div>
<div id="purpose" class="section level3" number="16.3.2">
<h3><span class="header-section-number">16.3.2</span> Purpose</h3>
<p>Studies show that our audience determines in 3-8 seconds whether or not to give us their attention based on what we have put in front of them (Knaflic, 2015). Therefore, it is crucial to let the audience know upfront what we are going to share with them and why it matters.</p>
<p>There is perhaps no more important initial question to answer than: “What does a successful outcome look like?” To answer this question, we must be able to clearly articulate the problem statement. That is, why is it important to perform this analysis over the many other analytics opportunities aging on the team’s backlog?</p>
<p>If we cannot clearly articulate the problem statement and desired success outcome(s), the audience will likely be unclear about what we are asking them to do and why they should make it a priority. All content and messages should support what we want our audience to know or do; therefore, defining what success looks like is a prerequisite for outlining and structuring the presentation.</p>
<p>While the problem statement need not be dramatized, this is an excellent opportunity to arouse an emotional response that hooks the audience. Consider the following juxtaposition of two very different approaches to articulating the same problem statement:</p>
<ul>
<li><p><strong>Option 1:</strong> Our offer acceptance rate (OAR) has declined from 80% to 40% YoY in Engineering.</p></li>
<li><p><strong>Option 2:</strong> To deliver on our strategic workforce plan and support our ambitious product roadmap, we need to attract the best and brightest Engineering talent. However, an increasing number of Engineering candidates are declining our offers (OAR has declined 50 percent YoY), and this presents a material risk to the guidance issued to shareholders during our most recent earnings call.</p></li>
</ul>
<p>The severity of the situation is far more palpable with the framing in Option 2 relative to the terse and factual approach taken in Option 1. As a result, it stands to reason that Option 2 features a higher likelihood of the audience taking seriously subsequent content which supports a solution to this problem.</p>
</div>
<div id="methodology" class="section level3" number="16.3.3">
<h3><span class="header-section-number">16.3.3</span> Methodology</h3>
<p>It is usually appropriate to provide a <em>high-level</em> overview of the analysis approach. In doing this, it is important to know what level of information is appropriate for the target audience.</p>
<p>It is easy to provide too much information in this section. For example, does the audience need to know that we built a multi-level regression model with quadratic terms on time variables? If the People team is the target audience, there is a good chance that this level of information is <em>not</em> appropriate. Sharing that an analysis method was used that is well-suited for understanding drivers of the outcome being studied is likely sufficient, as the content and presentation should index more on the findings and recommended next steps than on methodological details.</p>
<p>Presenting results of analyses to a non-technical audience using technical nomenclature will at best be seen as hubris and create confusion; at worst, the important information you need to convey will be completely lost on the audience and the efforts to improve the employee experience will be a deplorable miss. In general, if information is included in the presentation, we should ask ourselves whether the audience <em>really</em> needs to know it. If the key points are likely to land without the information, we should generally eliminate it. To paraphrase a quote attributed to Einstein: “Everything should be made as simple as possible, but not simpler.”</p>
</div>
<div id="results" class="section level3" number="16.3.4">
<h3><span class="header-section-number">16.3.4</span> Results</h3>
<p>Just as the methodology should not be presented to stakeholders on the People team using technical nomenclature, results of statistical analyses also need an appropriate translation for the audience. If you are operating in a tech company, it is possible that terms like <em>modeling</em> and <span class="math inline">\(n\)</span>-count are broadly understood. This is again a case in which it is critical to know your audience to ensure the key messages resonate based on their knowledge, vernacular, and delivery preferences.</p>
<p>Tables containing the output of regression models, for example, should not be included in the main body of the document or deck. As we covered in Chapter @ref(lm), regression lends to a highly intuitive interpretation – assuming relationships between predictors and the outcome are not modeled using complex transformations. Therefore, we can speak to the results using language such as:</p>
<p>“When controlling for alternative influences such as <span class="math inline">\(X_2 ... X_p\)</span>, the average change in <span class="math inline">\(Y\)</span> for each one-unit increase in <span class="math inline">\(X_1\)</span> is <span class="math inline">\(\beta_1\)</span>. The association between <span class="math inline">\(X_1\)</span> and <span class="math inline">\(Y\)</span> is statistically significant.”</p>
<p>By replacing <span class="math inline">\(X_2 ... X_p\)</span> with the names of control variables, <span class="math inline">\(X_1\)</span> with the name of the main predictor variable, <span class="math inline">\(Y\)</span> with the name of the outcome variable, and <span class="math inline">\(\beta_1\)</span> with the corresponding numerical for the average change, we do not need statistical symbols or technical jargon to communicate high-level results of regression analyses.</p>
<p>If data are visualized, this does not require them to be included in the ultimate doc or deck presented to stakeholders. Myriad visuals are often generated during the EDA phase of analytics projects to understand distributions, relationships, differences, density, and trends, but relatively few – and sometimes none – need to be shared beyond the project team.</p>
</div>
<div id="limitations" class="section level3" number="16.3.5">
<h3><span class="header-section-number">16.3.5</span> Limitations</h3>
<p>This is the section in which the limits of the study should be made known to the audience. There are limits to every study – even the most rigorous – and the failure of a researcher to report them does not change this fact.</p>
<p>Outlined below are some questions to consider in identifying limitations:</p>
<ol style="list-style-type: decimal">
<li>Does the research design support causal effects?</li>
<li>Were there confounding variables that may have compromised the internal validity of the research?</li>
<li>Were there data quality issues that may have biased results?</li>
<li>Was low participation a factor, and could feedback from nonrespondents materially change the results?</li>
<li>Is the observation window in which data were collected recent enough to reflect current sentiments and behaviors?</li>
<li>Were mitigating factors implemented to control for social desirability?</li>
<li>Were strategies deployed to mitigate the risk of common method variance for self-reported data collection?</li>
<li>Were employees incentivized to participate, and could this have influenced their responses or performance?</li>
<li>Were data dimensions standardized and consistent across time, or were data imputation and/or mapping strategies required to support longitudinal analyses?</li>
<li>Did time constraints require curtailing the project scope?</li>
</ol>
</div>
<div id="next-steps" class="section level3" number="16.3.6">
<h3><span class="header-section-number">16.3.6</span> Next Steps</h3>
<p>The presentation is likely missing a clear call to action if the audience’s only response is, “That’s interesting!” Presentations should conclude with recommended next steps that are likely to generate a productive and action-oriented dialogue among the stakeholders. Leaving the audience with clear answers to the following questions will help drive accountability for action:</p>
<ul>
<li>What are we asking the audience to do based on the findings?</li>
<li>What are we – the analytics team – committed to doing as a next step (e.g., working with operations teams to improve data quality for future analyses, pre/post study on the efficacy of proposed interventions)?</li>
<li>When is an appropriate time to follow up to help remove any barriers to action taking?</li>
</ul>
</div>
<div id="appendix" class="section level3" number="16.3.7">
<h3><span class="header-section-number">16.3.7</span> Appendix</h3>
<p>Given the significant time required to wrangle, model, and analyze data, it is often tempting to include in a presentation details associated with every aspect of the analytics project of which we are so proud. However, nonessential details will likely detract from the key messages we wish to convey.</p>
<p>Including in the Appendix of a document or deck information that is superfluous to the main points ensures the details are available should they be needed in addressing the audience’s questions whilst ensuring the audience is focused only on the material elements of the presentation. This may be tables containing metrics across various dimensions or results from supplemental analyses adjacent to the primary research objective(s).</p>
</div>
</div>
<div id="qa" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Q&amp;A</h2>
<p>It is important to reserve time and be prepared for Q&amp;A with the audience when delivering a live presentation. Despite our most earnest planning efforts, the likelihood is low that even the most effective presentations will address <em>all</em> the questions our audience has. Addressing questions or concerns in the moment, or by way of follow up in the case of an asynchronous review of a doc or deck, will increase the probability of action being taken on the recommendations.</p>
</div>
<div id="review-questions-14" class="section level2" number="16.5">
<h2><span class="header-section-number">16.5</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>Based on research, how long do we have to convince an audience that what we plan to present is worth their time and attention?</p></li>
<li><p>Why is there no one-size-fits-all approach to storytelling with data?</p></li>
<li><p>What are some early contextual considerations as it relates to understanding the target audience?</p></li>
<li><p>What is the utility of preattentive attributes in storytelling?</p></li>
<li><p>What are some strategies for organizing and structuring content to support compelling narratives?</p></li>
<li><p>What is a TL;DR, and what is its purpose?</p></li>
<li><p>Why is it important to clearly define success?</p></li>
<li><p>What are some features of an effective conclusion that supports accountability for action?</p></li>
<li><p>What are some common limitations in people analytics projects, and why is it important to note them when presenting results of analyses?</p></li>
<li><p>What are some examples of content that should be moved to the Appendix?</p></li>
</ol>
<!--chapter:end:r/16_data_storytelling.Rmd-->
</div>
</div>
<div id="bibli" class="section level1" number="17">
<h1><span class="header-section-number">17</span> Bibliography</h1>
<p>Aguinis, H., Gottfredson, R., &amp; Joo, H. (2013). Best-Practice Recommendations for Defining, Identifying, and Handling Outliers. Organizational Research Methods, 16(2), 270-301.</p>
<p>Albright, S. C., &amp; Winston, W. L. (2016). Business Analytics: Data Analysis &amp; Decision Making (6th ed.). Boston, MA: Cengage.</p>
<p>Angrist, J. D., &amp; Pischke, J.-S. (2009). Mostly harmless econometrics: An empiricist’s companion. Princeton, NJ: Princeton University Press.</p>
<p>Baron, R. M., &amp; Kenny, D. A. (1986). The moderator–mediator variable distinction in social psychological research: Conceptual, strategic, and statistical considerations. Journal of Personality and Social Psychology, 51(6), 1173–1182.</p>
<p>Bartlett, M. S. (1954). A note on the multiplying factors for various chi square approximations. Journal of the Royal Statistical Society: Series B, 16(2), 296-298.</p>
<p>Bartlett, R. (2013). A Practitioner’s Guide to Business Analytics: Using Data Analysis Tools to Improve Your Organization’s Decision Making and Strategy. New York, NY: McGraw-Hill.</p>
<p>Brant, R. (1990). Assessing Proportionality in the Proportional Odds Model for Ordinal Logistic Regression. Biometrics, 46(4), 1171–1178. <a href="https://doi.org/10.2307/2532457" class="uri">https://doi.org/10.2307/2532457</a></p>
<p>Chakravarti, I. M., Laha, R. G., &amp; Roy, J. (1967). Handbook of methods of applied statistics. New York: Wiley.</p>
<p>Cohen, J. (1988). Statistical power analysis for the behavioral sciences (2nd ed.). Hillsdale,NJ: Lawrence Erlbaum.</p>
<p>Creswell, J. W., &amp; Creswell, J. D. (2018). Research Design: Qualitative, Quantitative, and Mixed Methods Approaches (5th ed.). Los Angeles: Sage.</p>
<p>Cronbach, L. J., &amp; Meehl, P. E. (1955). Construct validity in psychological tests. Psychological Bulletin, 52(4), 281–302. <a href="https://doi.org/10.1037/h0040957" class="uri">https://doi.org/10.1037/h0040957</a></p>
<p>Daniel, W. W. (1990). Kruskal–Wallis one-way analysis of variance by ranks. Applied Nonparametric Statistics (2nd ed.). Boston: PWS-Kent. pp. 226–234.</p>
<p>Delacre, M., Lakens, D., &amp; Leys, C. (2017). Why Psychologists Should by Default Use Welch’s t-test Instead of Student’s t-test. International Review of Social Psychology, 30(1), 92–101. DOI: <a href="http://doi.org/10.5334/irsp.82" class="uri">http://doi.org/10.5334/irsp.82</a></p>
<p>DeVellis, R. F. (2012). Scale development: Theory and applications. Thousand Oaks, Calif: Sage.</p>
<p>Edmondson, A. (1999). Psychological safety and learning behavior in work teams. Administrative Science Quarterly, 44(2), 350-383.</p>
<p>Gelman, A., &amp; Hill, J. (2006). Analytical methods for social research: Data analysis using regression and multilevel/hierarchical models. Cambridge University Press.</p>
<p>Gordon, N. (1998). Colour blindness. Public Health, 112(2), 81–84. <a href="doi:10.1038/sj.ph.1900446" class="uri">doi:10.1038/sj.ph.1900446</a>.</p>
<p>Hair, J. F., Black, W. C., Babin, B. J., Anderson, R. E., &amp; Tatham, R. L. (2006). Multivariate data analysis (6th ed.). Upper Saddle River, NJ: Pearson Prentice Hall.</p>
<p>James, G., Witten, D., Hastie, T., &amp; Tibshirani, R. (2013). An Introduction to Statistical Learning: With Applications in R. New York: Springer.</p>
<p>Kahneman, D. (2011). Thinking, fast and slow. New York: Farrar, Straus and Giroux.</p>
<p>Kaiser, H. (1974). An index of factorial simplicity. Psychometrika, 39(1), 31-36.</p>
<p>Kenny, D. A., Kaniskan, B., &amp; McCoach, D. B. (2015). The performance of RMSEA in models with small degrees of freedom. Sociological Methods &amp; Research, 44(3), 486–507. <a href="https://doi.org/10.1177/0049124114543236" class="uri">https://doi.org/10.1177/0049124114543236</a></p>
<p>Kerlinger, F., &amp; Lee, H. (2000). Foundations of behavioral research (4th ed.). Melbourne: Wadsworth.</p>
<p>Kimball, R. (1996). The Data Warehouse Toolkit. New York: Wiley.</p>
<p>Kline, R. B. (2005). Principles and practice of structural equation modeling (2nd ed.). New York, NY: Guilford Press.</p>
<p>Knaflic, C. N. (2015). Storytelling with Data: A Data Visualization Guide for Business Professionals. Hoboken, NJ: Wiley.</p>
<p>Kuhn, M., &amp; Johnson, K. (2013). Applied predictive modeling. New York: Springer.</p>
<p>Langkjær-Bain, R. (2017), The murky tale of Flint’s deceptive water data. Significance, 14: 16-21. <a href="https://doi.org/10.1111/j.1740-9713.2017.01016.x" class="uri">https://doi.org/10.1111/j.1740-9713.2017.01016.x</a></p>
<p>Levene, H. (1960). Robust Tests for Equality of Variances. In: Olkin, I., Ed., Contributions to Probability and Statistics. Palo Alto: Stanford University Press. pp. 278-292.</p>
<p>Martin, P. (2022). Regression Models for Categorical and Count Data (1st ed.). SAGE Publications. Retrieved from <a href="https://www.perlego.com/book/3277492/regression-models-for-categorical-and-count-data-pdf" class="uri">https://www.perlego.com/book/3277492/regression-models-for-categorical-and-count-data-pdf</a> (Original work published 2022)</p>
<p>Mitchell, Tom (1997). Machine Learning. New York: McGraw Hill.</p>
<p>Perneger, T. V. (1998). What’s wrong with Bonferroni adjustments. BMJ, 316(7139), 1236-1238.</p>
<p>Pishro-Nik, H. (2014). Introduction to Probability: Statistics and Random Processes. Blue Bell, PA: Kappa Research, LLC.</p>
<p>Roethlisberger, F. J., &amp; Dickson, W. J. (1939). Management and the worker. Harvard Univ. Press.</p>
<p>Satterthwaite, F. E. (1946). An Approximate Distribution of Estimates of Variance Components. Biometrics Bulletin, 2(6), 110–114. <a href="https://doi.org/10.2307/3002019" class="uri">https://doi.org/10.2307/3002019</a></p>
<p>Schaufeli, W. B., Bakker, A. B., &amp; Salanova, M. (2006). The measurement of work engagement with a short questionnaire: A cross-national study. Educational and Psychological Measurement, 66(4), 701-716. <a href="https://doi.org/10.1177/0013164405282471" class="uri">https://doi.org/10.1177/0013164405282471</a></p>
<p>Shapiro, S. S., &amp; Wilk, M. B. (1965). An analysis of variance test for normality (complete samples). Biometrika, 52(3–4), 591–611. <a href="https://doi.org/10.1093/biomet/52.3-4.591" class="uri">https://doi.org/10.1093/biomet/52.3-4.591</a></p>
<p>Snedecor, G. W., &amp; Cochran, W. G. (1980). Statistical methods (7th ed.). Ames, Iowa: Iowa State University Press.</p>
<p>Spector, P. E. (2006). Method Variance in Organizational Research: Truth or Urban Legend? Organizational Research Methods, 9(2), 221-232.</p>
<p>Starbuck, C. R. (2016). Managing insidious barriers to upward communication in organizations: An empirical investigation of relationships among implicit voice theories, power distance orientation, self-efficacy, and leader-directed voice (Doctoral dissertation, Regent University).</p>
<p>Vargha, A. &amp; Delaney, H. D. (2000). A Critique and Improvement of the CL Common Language Effect Size Statistics of McGraw and Wong. Journal of Educational and Behavioral Statistics 25(2), 101–132.</p>
<p>Wald, Abraham. (1943). A Method of Estimating Plane Vulnerability Based on Damage of Survivors. Statistical Research Group, Columbia University. CRC 432 — reprint from July 1980 Archived 2019-07-13 at the Wayback Machine. Center for Naval Analyses.</p>
<p>Welch, B. L. (1947). The Generalization of `Student’s’ Problem when Several Different Population Variances are Involved. Biometrika, 34(1/2), 28–35. <a href="https://doi.org/10.2307/2332510" class="uri">https://doi.org/10.2307/2332510</a></p>
<p>Wheelan, C. (2013). Naked Statistics: Stripping the Dread from the Data. New York: W.W. Norton.</p>
<!--chapter:end:r/17_bibliography.Rmd-->
</div>
<div id="appendix" class="section level1" number="18">
<h1><span class="header-section-number">18</span> Appendix</h1>
<div id="d-framework-1" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> 4D Framework</h2>
<p>This section provides a detailed set of considerations and framework for structuring analytics projects.</p>
<div id="discover" class="section level3" number="18.1.1">
<h3><span class="header-section-number">18.1.1</span> Discover</h3>
<p>During the Discover phase, it is important to remain in the problem zone; seek to understand your clients’ needs through active listening and questions. This is not the time for solutioning or committing to any specific deliverables or timelines. If the client’s needs are ambiguous, proceeding without clarity is unlikely to result in a favorable outcome.</p>
<p>It is generally helpful to think about analytics solutions – whether a dashboard with basic metrics and trends or an advanced analysis – like a Product Owner thinks about the initial and subsequent releases of a commercial product. A <strong>Minimum Viable Product (MVP)</strong> is a version of the solution with the minimum number of features to be useful to early customers who can provide feedback for future enhancements. It is important to clarify that the MVP version of solutions often has both a limited number of users and features, which protects against the tendency to boil the ocean by striving to address every question for every stakeholder. Breaking down large projects into small sets of features that are easier to communicate and adopt provides space for agility and real-time adjustments to the product roadmap per user feedback.</p>
<p>There are some initial questions and considerations that will help frame an analytics project and support its success.</p>
<p><strong>Client</strong></p>
<p>Who is the client? A client can be a person or organization contracting you for consulting services, or an internal stakeholder within your organization who has need. What is important to them?</p>
<p><strong>Primary Objective</strong></p>
<ul>
<li>What is the client ultimately hoping to accomplish?</li>
<li>Is the request merely to satisfy one’s curiosity, or are there actions that can realistically be taken to materially influence the stated objective?</li>
</ul>
<p><strong>Problem Statement</strong></p>
<ul>
<li>One of the most important early steps is clearly defining the problem statement. If your understanding of the problem – after translating from the business anecdotes in which it was likely initially expressed – is misaligned with the client’s needs, none of the subsequent steps matter.</li>
</ul>
<p><strong>Guiding Theories</strong></p>
<ul>
<li>What theoretical explanations can the client offer as potential rationalizations for the phenomena of interest?</li>
<li>Are there existing theories in the organizational literature that should guide how the problem is tackled (e.g., findings from similar research implemented in other contexts)?</li>
</ul>
<p><strong>Research Questions</strong></p>
<p>To respect the nuances of the problem statement, it is important to unpack it and frame as a set of overarching questions to guide the research.</p>
<ul>
<li>Q1: …</li>
<li>Q2: …</li>
<li>Q3: …</li>
</ul>
<p>To ensure it is possible (and appropriate) to take action in response to these questions, consider the following after drafting each question: “What would I do if I knew the answer?”</p>
<p><strong>Research Hypotheses</strong></p>
<p>Once research questions are developed, what do you expect to find based on anecdotal stories or empirical findings? As a next step, these expectations should be expressed in the form of research hypotheses. Note that these research hypotheses are different from statistical hypotheses; both will be covered in detail in later chapters.</p>
<ul>
<li>H1: …</li>
<li>H2: …</li>
<li>H3: …</li>
</ul>
<p>To ensure the hypotheses lend to actionable analyses, it is important to consider the following: “What does success look like?” In other words, once the project is complete, against which success measures will the project’s success be determined? Curiosity is not a business reason and hope is not a reasonable strategy. The following questions may prove helpful in the promotion of actionable – over merely interesting – outcomes:</p>
<ul>
<li>What will be done if the hypotheses are supported?</li>
<li>What will be done if the hypotheses are <em>not</em> supported?</li>
</ul>
<p><strong>Assumptions</strong></p>
<p>At this point, it’s helpful to consider what assumptions may be embedded in this discovery work. Are the questions and hypotheses rooted in what the client has theorized, or are these the product of an ambiguous understanding of the client’s needs?</p>
<p><strong>Cadence</strong></p>
<ul>
<li>Is this analysis a one-off, or could there be a need to refresh this analysis on a regular cadence?</li>
<li>Are there dates associated with programs or actions this analysis is intended to support?</li>
</ul>
<p><strong>Aggregation</strong></p>
<p>Is there a need for individual-level detail supporting the analysis? Aggregate data should generally be the default unless a compelling justification exists and exception granted from legal and privacy partners. One important role of analysts is to help keep the audience focused on the bigger picture and findings. Access to individual-level detail can not only introduce unnecessary legal and compliance risk but can also lead to questions and probing that can delay taking necessary actions based on the results.</p>
<p><strong>Deliverable</strong></p>
<p>What is the preferred method of communicating the results of the analysis (e.g., interactive dashboard, static slide deck, document)? It is important to determine this early so that subsequent efforts can be structured to support the preferred deliverable. For example, if an interactive dashboard is preferred, does your Engineering department need to prioritize dependent tasks such as data pipelines, row-level security, BI development, and migrations to production servers?</p>
<p><strong>Filters &amp; Dimensions</strong></p>
<p>How does your client prefer to segment the workforce? Some common grouping dimensions are business unit, division, team, job family, location, tenure, and management level, but the client may have custom segmentation requirements that will be important to identify and define early in the project.</p>
</div>
<div id="design" class="section level3" number="18.1.2">
<h3><span class="header-section-number">18.1.2</span> Design</h3>
<p>Perhaps the most important initial question to answer in the design phase is: “Does anything already exist that addresses part, or all, of the client’s objectives?” If an existing solution will suffice, or a previous analysis can be easily refreshed with recent data, it may be possible to allocate time and resources elsewhere. If related or complimentary analyses have already been performed, they may accelerate new analyses.</p>
<p>The end-user experience is of paramount importance during the Design phase, as solutions should have a consistent look and feel regardless of who developed them. Defining and implementing design guidelines, such as those outlined in Chapter @ref(data-viz), will ensure consistency across analytics projects as well as within large projects in which multiple analysts are collaborating on various elements of the solution.</p>
<p><strong>Data Privacy</strong></p>
<p>Are there potential concerns with the study’s objective, planned actions, and/or requested data elements from an employee privacy or legal perspective? A cross-functional data governance committee can help with efficient and consistent decisioning on requests for people data and analytics.</p>
<p>In cases where sensitive attributes such as gender, ethnicity, age, sexual orientation, and disability status are requested, it is best to consult with legal and privacy partners to ensure they green light the intended use of the data. The decision on whether or not to include these sensitive data elements is often less about what the audience can view (e.g., People Partners may already have access to the information at the individual level in the source system) and more anchored in what they plan to do with the information.</p>
<p><strong>Data Sources &amp; Elements</strong></p>
<p>Is the required data already accessible in a data warehouse or other analytics environment? If not, does it need to be? What is required to achieve this?</p>
<ul>
<li>What data sources are required?</li>
<li>What data elements are required?</li>
</ul>
<p><strong>Data Quality</strong></p>
<p>It is important to understand the data generative process and never make assumptions about how anomalies or missing data should be interpreted. After identifying what data sources will be required for a particular analysis, it is important to meet with source system owners and data stewards to deeply understand the business processes by which data are generated in the system(s). An ideal should always be <em>unimpeachable</em> data quality at the analysis presentation stage, and this begins with an early understanding and investigation of data quality in the source systems. Below are some helpful questions to consider:</p>
<ul>
<li>Is there a better data source, such as data generated further upstream?</li>
<li>Are the data actively validated with automated data quality checks and regular exceptions reports?</li>
<li>What is the SLA for the data refreshes, and how often is this SLA met?</li>
<li>Is there a clear (and accessible) data source owner/steward?</li>
<li>Is there comprehensive documentation and field definitions?</li>
<li>Do the tables drive business critical deliverables?</li>
<li>Who are the other consumers of the data?</li>
</ul>
<p><strong>Variables</strong></p>
<p>How will the constructs be measured (e.g., survey instrument, derived attribute, calculated field)?</p>
<p><strong>Analysis Method</strong></p>
<p>What are the appropriate analysis methods based on the research hypotheses? If modeling is required, is it more important to index on accuracy or interpretability?</p>
<p><strong>Dependencies</strong></p>
<p>Are other teams required to develop this solution? What is the nature of the work each dependent team will perform? Are there required system configuration changes? Do these teams have capacity to support?</p>
<p><strong>Change Management</strong></p>
<p>Will this solution impact current processes or solutions? If so, what is the change management plan to facilitate a seamless transition and user experience?</p>
<p><strong>Sign-Off</strong></p>
<p>Generally, it is best for the client to signoff on the problem statement, analysis approach, and wire frame for the deliverable (if applicable) before providing an ETA and proceeding to the development phase. This ensures alignment on the client’s needs and the perceived utility of the solution in addressing those needs.</p>
</div>
<div id="develop" class="section level3" number="18.1.3">
<h3><span class="header-section-number">18.1.3</span> Develop</h3>
<p>While development patterns can vary widely across analytics teams, establishing a set of standards can pay dividends in the form of greater efficiency and reliability over time. Pattern-based development ensures analysts who were not involved in a particular project can access the code and easily and quickly understand each step of the analysis.</p>
<p><strong>Development Patterns</strong></p>
<ul>
<li>Are there development patterns that should guide the development approach to support consistency?</li>
<li>Are there existing calculated fields that can/should be leveraged for derived data?</li>
<li>Are there best practices that should be employed to optimize performance (e.g., load time for dashboards, executing complex queries during non-peak times)?</li>
<li>Are there standard color palettes that should be applied?</li>
</ul>
<p><strong>Productionalizable Code</strong></p>
<ul>
<li>How do models and data science pipelines need to be developed to facilitate a seamless migration from lower to upper environments? For example, initial EDA may be performed using curated data in flat files for the purpose of identifying meaningful trends, relationships, and differences, but where will this data need to be sourced in production to automate the refresh of models at a regular interval? If the data were provided from multiple source systems, what joins are required to integrate the data? What transformation logic or business rules need to be applied to reproduce the curated data?</li>
</ul>
<p><strong>Unit Testing</strong></p>
<ul>
<li>What test cases will ensure the veracity of data?</li>
<li>Who will perform the testing?</li>
</ul>
<p><strong>User Acceptance Testing (UAT)</strong></p>
<ul>
<li>In the spirit of agility and constant contact with the client to prevent surprises, it is generally a good idea to have the client take the solution for a test run within the UAT environment and then provide sign-off before migrating to production. If the deliverable is a deck or doc with results from a model, UAT may surface clarifying questions that can be addressed before releasing to the broader audience.</li>
</ul>
</div>
<div id="deliver" class="section level3" number="18.1.4">
<h3><span class="header-section-number">18.1.4</span> Deliver</h3>
<p>The Deliver phase can take many forms depending on the solution being released. If the solution is designed for a large user base, a series of recorded trainings may be in order so that there is a helpful reference for those unable to attend the live sessions or new joiners in the future. It is important to monitor success measures, which could be insights aligned to research hypotheses, dashboard utilization metrics, progress following data-informed interventions, or any number of others defined within the Discover phase.</p>
</div>
</div>
<div id="data-visualization" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> Data Visualization</h2>
<p>This section provides the code needed to reproduce visuals in Chapter @ref(data-viz).</p>
<div id="step-by-step-visual-upgrade-1" class="section level3" number="18.2.1">
<h3><span class="header-section-number">18.2.1</span> Step-by-Step Visual Upgrade</h3>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb459-2"><a href="#cb459-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb459-3"><a href="#cb459-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb459-4"><a href="#cb459-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-5"><a href="#cb459-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb459-6"><a href="#cb459-6" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb459-7"><a href="#cb459-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-8"><a href="#cb459-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for active employees</span></span>
<span id="cb459-9"><a href="#cb459-9" aria-hidden="true" tabindex="-1"></a>smmry_ed_field <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb459-10"><a href="#cb459-10" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb459-11"><a href="#cb459-11" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">count</span>(ed_field)</span>
<span id="cb459-12"><a href="#cb459-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-13"><a href="#cb459-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Build Bar Chart with Defaults</span></span>
<span id="cb459-14"><a href="#cb459-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-15"><a href="#cb459-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb459-16"><a href="#cb459-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-17"><a href="#cb459-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Remove Legend</span></span>
<span id="cb459-18"><a href="#cb459-18" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-19"><a href="#cb459-19" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-20"><a href="#cb459-20" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb459-21"><a href="#cb459-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-22"><a href="#cb459-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Assign Colors Strategically</span></span>
<span id="cb459-23"><a href="#cb459-23" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-24"><a href="#cb459-24" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-25"><a href="#cb459-25" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-26"><a href="#cb459-26" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-27"><a href="#cb459-27" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-28"><a href="#cb459-28" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-29"><a href="#cb459-29" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-30"><a href="#cb459-30" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-31"><a href="#cb459-31" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb459-32"><a href="#cb459-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-33"><a href="#cb459-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Add Axis Titles and Margins</span></span>
<span id="cb459-34"><a href="#cb459-34" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-35"><a href="#cb459-35" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-36"><a href="#cb459-36" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-37"><a href="#cb459-37" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-38"><a href="#cb459-38" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-39"><a href="#cb459-39" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-40"><a href="#cb459-40" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-41"><a href="#cb459-41" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-42"><a href="#cb459-42" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-43"><a href="#cb459-43" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-44"><a href="#cb459-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-45"><a href="#cb459-45" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb459-46"><a href="#cb459-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-47"><a href="#cb459-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Add Left-Justified Title</span></span>
<span id="cb459-48"><a href="#cb459-48" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-49"><a href="#cb459-49" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-50"><a href="#cb459-50" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-51"><a href="#cb459-51" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-52"><a href="#cb459-52" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-53"><a href="#cb459-53" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-54"><a href="#cb459-54" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-55"><a href="#cb459-55" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-56"><a href="#cb459-56" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-57"><a href="#cb459-57" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-58"><a href="#cb459-58" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb459-59"><a href="#cb459-59" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-60"><a href="#cb459-60" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb459-61"><a href="#cb459-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-62"><a href="#cb459-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Remove Background</span></span>
<span id="cb459-63"><a href="#cb459-63" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-64"><a href="#cb459-64" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-65"><a href="#cb459-65" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-66"><a href="#cb459-66" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-67"><a href="#cb459-67" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-68"><a href="#cb459-68" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-69"><a href="#cb459-69" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-70"><a href="#cb459-70" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-71"><a href="#cb459-71" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-72"><a href="#cb459-72" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-73"><a href="#cb459-73" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-74"><a href="#cb459-74" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-75"><a href="#cb459-75" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb459-76"><a href="#cb459-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-77"><a href="#cb459-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 7: Remove Axis Ticks</span></span>
<span id="cb459-78"><a href="#cb459-78" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-79"><a href="#cb459-79" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-80"><a href="#cb459-80" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-81"><a href="#cb459-81" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-82"><a href="#cb459-82" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-83"><a href="#cb459-83" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-84"><a href="#cb459-84" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-85"><a href="#cb459-85" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-86"><a href="#cb459-86" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-87"><a href="#cb459-87" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-88"><a href="#cb459-88" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-89"><a href="#cb459-89" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-90"><a href="#cb459-90" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-91"><a href="#cb459-91" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-92"><a href="#cb459-92" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-93"><a href="#cb459-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-94"><a href="#cb459-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Mute Titles</span></span>
<span id="cb459-95"><a href="#cb459-95" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-96"><a href="#cb459-96" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-97"><a href="#cb459-97" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-98"><a href="#cb459-98" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-99"><a href="#cb459-99" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-100"><a href="#cb459-100" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-101"><a href="#cb459-101" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-102"><a href="#cb459-102" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-103"><a href="#cb459-103" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-104"><a href="#cb459-104" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-105"><a href="#cb459-105" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-106"><a href="#cb459-106" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-107"><a href="#cb459-107" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-108"><a href="#cb459-108" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-109"><a href="#cb459-109" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-110"><a href="#cb459-110" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-111"><a href="#cb459-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-112"><a href="#cb459-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 9: Flip Axes</span></span>
<span id="cb459-113"><a href="#cb459-113" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-114"><a href="#cb459-114" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-115"><a href="#cb459-115" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb459-116"><a href="#cb459-116" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-117"><a href="#cb459-117" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-118"><a href="#cb459-118" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-119"><a href="#cb459-119" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-120"><a href="#cb459-120" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-121"><a href="#cb459-121" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-122"><a href="#cb459-122" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-123"><a href="#cb459-123" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-124"><a href="#cb459-124" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-125"><a href="#cb459-125" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-126"><a href="#cb459-126" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-127"><a href="#cb459-127" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-128"><a href="#cb459-128" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-129"><a href="#cb459-129" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-130"><a href="#cb459-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-131"><a href="#cb459-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 10: Sort Data</span></span>
<span id="cb459-132"><a href="#cb459-132" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(ed_field, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-133"><a href="#cb459-133" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-134"><a href="#cb459-134" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb459-135"><a href="#cb459-135" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-136"><a href="#cb459-136" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-137"><a href="#cb459-137" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-138"><a href="#cb459-138" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-139"><a href="#cb459-139" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-140"><a href="#cb459-140" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-141"><a href="#cb459-141" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-142"><a href="#cb459-142" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-143"><a href="#cb459-143" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-144"><a href="#cb459-144" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-145"><a href="#cb459-145" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-146"><a href="#cb459-146" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-147"><a href="#cb459-147" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-148"><a href="#cb459-148" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-149"><a href="#cb459-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-150"><a href="#cb459-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Pre/post viz comparison</span></span>
<span id="cb459-151"><a href="#cb459-151" aria-hidden="true" tabindex="-1"></a>viz_pre <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-152"><a href="#cb459-152" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb459-153"><a href="#cb459-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-154"><a href="#cb459-154" aria-hidden="true" tabindex="-1"></a>viz_post <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(ed_field, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-155"><a href="#cb459-155" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-156"><a href="#cb459-156" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb459-157"><a href="#cb459-157" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-158"><a href="#cb459-158" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-159"><a href="#cb459-159" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-160"><a href="#cb459-160" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-161"><a href="#cb459-161" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-162"><a href="#cb459-162" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-163"><a href="#cb459-163" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-164"><a href="#cb459-164" aria-hidden="true" tabindex="-1"></a>              ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-165"><a href="#cb459-165" aria-hidden="true" tabindex="-1"></a>                             <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-166"><a href="#cb459-166" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-167"><a href="#cb459-167" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-168"><a href="#cb459-168" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-169"><a href="#cb459-169" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-170"><a href="#cb459-170" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-171"><a href="#cb459-171" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb459-172"><a href="#cb459-172" aria-hidden="true" tabindex="-1"></a><span class="co"># Display pre/post visualizations side-by-side</span></span>
<span id="cb459-173"><a href="#cb459-173" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(viz_post, viz_pre, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="tables-1" class="section level3" number="18.2.2">
<h3><span class="header-section-number">18.2.2</span> Tables</h3>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb460-2"><a href="#cb460-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-3"><a href="#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb460-4"><a href="#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb460-5"><a href="#cb460-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-6"><a href="#cb460-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb460-7"><a href="#cb460-7" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb460-8"><a href="#cb460-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-9"><a href="#cb460-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb460-10"><a href="#cb460-10" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb460-11"><a href="#cb460-11" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb460-12"><a href="#cb460-12" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb460-13"><a href="#cb460-13" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb460-14"><a href="#cb460-14" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb460-15"><a href="#cb460-15" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb460-16"><a href="#cb460-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb460-17"><a href="#cb460-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-18"><a href="#cb460-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb460-19"><a href="#cb460-19" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb460-20"><a href="#cb460-20" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb460-21"><a href="#cb460-21" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb460-22"><a href="#cb460-22" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb460-23"><a href="#cb460-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-24"><a href="#cb460-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb460-25"><a href="#cb460-25" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span>
<span id="cb460-26"><a href="#cb460-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-27"><a href="#cb460-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign proper case field names</span></span>
<span id="cb460-28"><a href="#cb460-28" aria-hidden="true" tabindex="-1"></a>dept_tenure_proper <span class="ot">&lt;-</span> dept_tenure <span class="sc">%&gt;%</span></span>
<span id="cb460-29"><a href="#cb460-29" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="st">&#39;Department&#39;</span> <span class="ot">=</span> dept,</span>
<span id="cb460-30"><a href="#cb460-30" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Tenure&#39;</span> <span class="ot">=</span> tenure_band,</span>
<span id="cb460-31"><a href="#cb460-31" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Count&#39;</span> <span class="ot">=</span> cnt)</span></code></pre></div>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Table </span><span class="al">###</span></span>
<span id="cb461-2"><a href="#cb461-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-3"><a href="#cb461-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb461-4"><a href="#cb461-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb461-5"><a href="#cb461-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-6"><a href="#cb461-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Format output with datatable</span></span>
<span id="cb461-7"><a href="#cb461-7" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(dept_tenure_proper, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="heatmaps-1" class="section level3" number="18.2.3">
<h3><span class="header-section-number">18.2.3</span> Heatmaps</h3>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb462-2"><a href="#cb462-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-3"><a href="#cb462-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb462-4"><a href="#cb462-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb462-5"><a href="#cb462-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-6"><a href="#cb462-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb462-7"><a href="#cb462-7" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb462-8"><a href="#cb462-8" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb462-9"><a href="#cb462-9" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb462-10"><a href="#cb462-10" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb462-11"><a href="#cb462-11" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb462-12"><a href="#cb462-12" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb462-13"><a href="#cb462-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb462-14"><a href="#cb462-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-15"><a href="#cb462-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb462-16"><a href="#cb462-16" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb462-17"><a href="#cb462-17" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb462-18"><a href="#cb462-18" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb462-19"><a href="#cb462-19" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb462-20"><a href="#cb462-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-21"><a href="#cb462-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb462-22"><a href="#cb462-22" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Heatmap </span><span class="al">###</span></span>
<span id="cb463-2"><a href="#cb463-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-3"><a href="#cb463-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb463-4"><a href="#cb463-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb463-5"><a href="#cb463-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-6"><a href="#cb463-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(dept_tenure, <span class="fu">aes</span>(<span class="at">x =</span> tenure_band, <span class="at">y =</span> dept, <span class="at">fill =</span> cnt)) <span class="sc">+</span></span>
<span id="cb463-7"><a href="#cb463-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb463-8"><a href="#cb463-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;A large portion of our workforce has between 3 and 10 years</span><span class="sc">\n</span><span class="st"> of company tenure and works within R&amp;D.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Tenure&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb463-9"><a href="#cb463-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Employee Count&quot;</span>)) <span class="sc">+</span></span>
<span id="cb463-10"><a href="#cb463-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">&quot;#F2F2F2&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#0070C0&quot;</span>) <span class="sc">+</span></span>
<span id="cb463-11"><a href="#cb463-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb463-12"><a href="#cb463-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb463-13"><a href="#cb463-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb463-14"><a href="#cb463-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb463-15"><a href="#cb463-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb463-16"><a href="#cb463-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="scatterplots-1" class="section level3" number="18.2.4">
<h3><span class="header-section-number">18.2.4</span> Scatterplots</h3>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb464-2"><a href="#cb464-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-3"><a href="#cb464-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset df to active sales employees</span></span>
<span id="cb464-4"><a href="#cb464-4" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, dept <span class="sc">==</span> <span class="st">&#39;Sales&#39;</span> <span class="sc">&amp;</span> active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb464-5"><a href="#cb464-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-6"><a href="#cb464-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set quote attainment flag for data viz coloring</span></span>
<span id="cb464-7"><a href="#cb464-7" aria-hidden="true" tabindex="-1"></a>sales<span class="sc">$</span>quota_flg <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sales<span class="sc">$</span>ytd_sales <span class="sc">&gt;=</span> <span class="dv">150000</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Scatterplots </span><span class="al">###</span></span>
<span id="cb465-2"><a href="#cb465-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-3"><a href="#cb465-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb465-4"><a href="#cb465-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb465-5"><a href="#cb465-5" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(scales)</span>
<span id="cb465-6"><a href="#cb465-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-7"><a href="#cb465-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic scatterplot</span></span>
<span id="cb465-8"><a href="#cb465-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sales, <span class="fu">aes</span>(<span class="at">x =</span> work_exp, <span class="at">y =</span> ytd_sales, <span class="at">group =</span> quota_flg)) <span class="sc">+</span></span>
<span id="cb465-9"><a href="#cb465-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb465-10"><a href="#cb465-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The relationship between work experience and YTD sales is positive.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Work Experience&#39;</span>, <span class="at">y =</span> <span class="st">&#39;YTD Sales (USD)&#39;</span>) <span class="sc">+</span></span>
<span id="cb465-11"><a href="#cb465-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb465-12"><a href="#cb465-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-13"><a href="#cb465-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb465-14"><a href="#cb465-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-15"><a href="#cb465-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-16"><a href="#cb465-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-17"><a href="#cb465-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-18"><a href="#cb465-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span>
<span id="cb465-19"><a href="#cb465-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-20"><a href="#cb465-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot with preattentive attributes</span></span>
<span id="cb465-21"><a href="#cb465-21" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sales, <span class="fu">aes</span>(<span class="at">x =</span> work_exp, <span class="at">y =</span> ytd_sales, <span class="at">group =</span> quota_flg)) <span class="sc">+</span></span>
<span id="cb465-22"><a href="#cb465-22" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">as.factor</span>(quota_flg))) <span class="sc">+</span></span>
<span id="cb465-23"><a href="#cb465-23" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">150000</span>, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>) <span class="sc">+</span> </span>
<span id="cb465-24"><a href="#cb465-24" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">159000</span>, <span class="at">label =</span> <span class="st">&quot;Sales Quota = $150k&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb465-25"><a href="#cb465-25" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Some employees with more work experience have </span><span class="sc">\n</span><span class="st">already met the full year sales quota.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Work Experience&#39;</span>, <span class="at">y =</span> <span class="st">&#39;YTD Sales (USD)&#39;</span>) <span class="sc">+</span></span>
<span id="cb465-26"><a href="#cb465-26" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb465-27"><a href="#cb465-27" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb465-28"><a href="#cb465-28" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb465-29"><a href="#cb465-29" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-30"><a href="#cb465-30" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb465-31"><a href="#cb465-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-32"><a href="#cb465-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-33"><a href="#cb465-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-34"><a href="#cb465-34" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-35"><a href="#cb465-35" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="line-charts" class="section level3" number="18.2.5">
<h3><span class="header-section-number">18.2.5</span> Line Charts</h3>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb466-4"><a href="#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb466-5"><a href="#cb466-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-6"><a href="#cb466-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb466-7"><a href="#cb466-7" aria-hidden="true" tabindex="-1"></a>months <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span></span>
<span id="cb466-8"><a href="#cb466-8" aria-hidden="true" tabindex="-1"></a>eng_rt <span class="ot">=</span> <span class="dv">5</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="fl">2.7</span>, <span class="fl">2.9</span>) <span class="sc">+</span> <span class="fl">2.41</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">41</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> .<span class="dv">02</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb466-9"><a href="#cb466-9" aria-hidden="true" tabindex="-1"></a>fin_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">15</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-10"><a href="#cb466-10" aria-hidden="true" tabindex="-1"></a>ppl_rt <span class="ot">=</span> <span class="dv">3</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">12</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">4</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-11"><a href="#cb466-11" aria-hidden="true" tabindex="-1"></a>prd_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">13</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-12"><a href="#cb466-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-13"><a href="#cb466-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine dimensions and metrics within df</span></span>
<span id="cb466-14"><a href="#cb466-14" aria-hidden="true" tabindex="-1"></a>attrition_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="fu">rep</span>(months, <span class="dv">4</span>),</span>
<span id="cb466-15"><a href="#cb466-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">dept =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="fu">length</span>(months)), </span>
<span id="cb466-16"><a href="#cb466-16" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Finance&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb466-17"><a href="#cb466-17" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;People&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb466-18"><a href="#cb466-18" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Product&#39;</span>, <span class="fu">length</span>(months))),</span>
<span id="cb466-19"><a href="#cb466-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">rate =</span> <span class="fu">c</span>(eng_rt,</span>
<span id="cb466-20"><a href="#cb466-20" aria-hidden="true" tabindex="-1"></a>                                     fin_rt,</span>
<span id="cb466-21"><a href="#cb466-21" aria-hidden="true" tabindex="-1"></a>                                     ppl_rt,</span>
<span id="cb466-22"><a href="#cb466-22" aria-hidden="true" tabindex="-1"></a>                                     prd_rt))</span>
<span id="cb466-23"><a href="#cb466-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-24"><a href="#cb466-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordered factor for subsequent layering of lines in graph (last value takes the top position)</span></span>
<span id="cb466-25"><a href="#cb466-25" aria-hidden="true" tabindex="-1"></a>attrition_dat<span class="sc">$</span>dept <span class="ot">&lt;-</span> <span class="fu">factor</span>(attrition_dat<span class="sc">$</span>dept, <span class="fu">c</span>(<span class="st">&quot;Product&quot;</span>, <span class="st">&quot;Finance&quot;</span>, <span class="st">&quot;People&quot;</span>, <span class="st">&quot;Engineering&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Single Series Line Graphs </span><span class="al">###</span></span>
<span id="cb467-2"><a href="#cb467-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb467-3"><a href="#cb467-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb467-4"><a href="#cb467-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb467-5"><a href="#cb467-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb467-6"><a href="#cb467-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(attrition_dat, dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">group =</span> dept)) <span class="sc">+</span> </span>
<span id="cb467-7"><a href="#cb467-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Engineering attrition has increased over the last 24 months, </span><span class="sc">\n</span><span class="st">largely due to an exponential spike in the last year.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>) <span class="sc">+</span></span>
<span id="cb467-8"><a href="#cb467-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&#39;#0070C0&#39;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb467-9"><a href="#cb467-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb467-10"><a href="#cb467-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb467-11"><a href="#cb467-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb467-12"><a href="#cb467-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb467-13"><a href="#cb467-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb467-14"><a href="#cb467-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb467-15"><a href="#cb467-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb467-16"><a href="#cb467-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Two Series Line Graphs </span><span class="al">###</span></span>
<span id="cb468-2"><a href="#cb468-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-3"><a href="#cb468-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb468-4"><a href="#cb468-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb468-5"><a href="#cb468-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-6"><a href="#cb468-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(attrition_dat, dept <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Product&#39;</span>)), <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">color =</span> dept)) <span class="sc">+</span> </span>
<span id="cb468-7"><a href="#cb468-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The attrition trends for Engineering and Product </span><span class="sc">\n</span><span class="st">are negatively correlated over the last year.&#39;</span>,</span>
<span id="cb468-8"><a href="#cb468-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb468-9"><a href="#cb468-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>,</span>
<span id="cb468-10"><a href="#cb468-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb468-11"><a href="#cb468-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb468-12"><a href="#cb468-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb468-13"><a href="#cb468-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Engineering&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb468-14"><a href="#cb468-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Product&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb468-15"><a href="#cb468-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Engineering&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb468-16"><a href="#cb468-16" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Product&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb468-17"><a href="#cb468-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb468-18"><a href="#cb468-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb468-19"><a href="#cb468-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb468-20"><a href="#cb468-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb468-21"><a href="#cb468-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb468-22"><a href="#cb468-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb468-23"><a href="#cb468-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Multiple Series Line Graphs </span><span class="al">###</span></span>
<span id="cb469-2"><a href="#cb469-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-3"><a href="#cb469-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb469-4"><a href="#cb469-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb469-5"><a href="#cb469-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-6"><a href="#cb469-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(attrition_dat, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">color =</span> dept)) <span class="sc">+</span> </span>
<span id="cb469-7"><a href="#cb469-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The attrition trend for Engineering is quite different </span><span class="sc">\n</span><span class="st">relative to attrition patterns for other departments.&#39;</span>,</span>
<span id="cb469-8"><a href="#cb469-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb469-9"><a href="#cb469-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>,</span>
<span id="cb469-10"><a href="#cb469-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb469-11"><a href="#cb469-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb469-12"><a href="#cb469-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb469-13"><a href="#cb469-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Engineering&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-14"><a href="#cb469-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Product&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-15"><a href="#cb469-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Finance&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Finance&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-16"><a href="#cb469-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;People&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;People&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-17"><a href="#cb469-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Engineering&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb469-18"><a href="#cb469-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Product&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb469-19"><a href="#cb469-19" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Finance&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb469-20"><a href="#cb469-20" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;People&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb469-21"><a href="#cb469-21" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb469-22"><a href="#cb469-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb469-23"><a href="#cb469-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb469-24"><a href="#cb469-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb469-25"><a href="#cb469-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb469-26"><a href="#cb469-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb469-27"><a href="#cb469-27" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="slopegraphs-1" class="section level3" number="18.2.6">
<h3><span class="header-section-number">18.2.6</span> Slopegraphs</h3>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb470-2"><a href="#cb470-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-3"><a href="#cb470-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb470-4"><a href="#cb470-4" aria-hidden="true" tabindex="-1"></a>prepost_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Time 1&#39;</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">&#39;Time 2&#39;</span>, <span class="dv">2</span>)),</span>
<span id="cb470-5"><a href="#cb470-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Treatment&#39;</span>, <span class="st">&#39;Control&#39;</span>), <span class="dv">2</span>),</span>
<span id="cb470-6"><a href="#cb470-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">score =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">55</span>, <span class="dv">16</span>))</span></code></pre></div>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Slopegraphs </span><span class="al">###</span></span>
<span id="cb471-2"><a href="#cb471-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-3"><a href="#cb471-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb471-4"><a href="#cb471-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb471-5"><a href="#cb471-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-6"><a href="#cb471-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate treatment and control group changes for inclusion in annotation</span></span>
<span id="cb471-7"><a href="#cb471-7" aria-hidden="true" tabindex="-1"></a>treatment_chg <span class="ot">&lt;-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="at">select =</span> score) <span class="sc">-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 1&#39;</span>, <span class="at">select =</span> score)</span>
<span id="cb471-8"><a href="#cb471-8" aria-hidden="true" tabindex="-1"></a>control_chg <span class="ot">&lt;-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="at">select =</span> score) <span class="sc">-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 1&#39;</span>, <span class="at">select =</span> score)</span>
<span id="cb471-9"><a href="#cb471-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-10"><a href="#cb471-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(prepost_scores, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> score, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb471-11"><a href="#cb471-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> group), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb471-12"><a href="#cb471-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> group), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb471-13"><a href="#cb471-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">expand_limits</span>(<span class="at">y =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb471-14"><a href="#cb471-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2.1</span>, <span class="at">y =</span> prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>] <span class="sc">-</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>], <span class="st">&quot;% (&quot;</span>, <span class="fu">ifelse</span>(treatment_chg <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&#39;+&#39;</span>, <span class="st">&#39;&#39;</span>), treatment_chg, <span class="st">&quot;)&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Treatment Group&quot;</span>), <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb471-15"><a href="#cb471-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2.1</span>, <span class="at">y =</span> prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>] <span class="sc">-</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>], <span class="st">&quot;% (&quot;</span>, <span class="fu">ifelse</span>(control_chg <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&#39;+&#39;</span>, <span class="st">&#39;&#39;</span>), control_chg, <span class="st">&quot;)&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Control Group&quot;</span>), <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb471-16"><a href="#cb471-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;          A more favorable change in engagement was observed </span><span class="sc">\n</span><span class="st">          for the treatment group relative to </span><span class="sc">\n</span><span class="st">          the control group.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Observation Period&#39;</span>) <span class="sc">+</span></span>
<span id="cb471-17"><a href="#cb471-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Control&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb471-18"><a href="#cb471-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Treatment&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb471-19"><a href="#cb471-19" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-20"><a href="#cb471-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb471-21"><a href="#cb471-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-22"><a href="#cb471-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-23"><a href="#cb471-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-24"><a href="#cb471-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb471-25"><a href="#cb471-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb471-26"><a href="#cb471-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="bar-charts-1" class="section level3" number="18.2.7">
<h3><span class="header-section-number">18.2.7</span> Bar Charts</h3>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb472-2"><a href="#cb472-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-3"><a href="#cb472-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb472-4"><a href="#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb472-5"><a href="#cb472-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-6"><a href="#cb472-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate favorability distributions</span></span>
<span id="cb472-7"><a href="#cb472-7" aria-hidden="true" tabindex="-1"></a>fav_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb472-8"><a href="#cb472-8" aria-hidden="true" tabindex="-1"></a>neu_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb472-9"><a href="#cb472-9" aria-hidden="true" tabindex="-1"></a>unfav_pct <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> fav_pct <span class="sc">-</span> neu_pct</span>
<span id="cb472-10"><a href="#cb472-10" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(fav_pct, neu_pct, unfav_pct)</span>
<span id="cb472-11"><a href="#cb472-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-12"><a href="#cb472-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Average top box (favorable) score</span></span>
<span id="cb472-13"><a href="#cb472-13" aria-hidden="true" tabindex="-1"></a>topbox_avg <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(fav_pct), <span class="dv">0</span>)</span>
<span id="cb472-14"><a href="#cb472-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-15"><a href="#cb472-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb472-16"><a href="#cb472-16" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">dept =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>), <span class="dv">3</span>),</span>
<span id="cb472-17"><a href="#cb472-17" aria-hidden="true" tabindex="-1"></a>                                <span class="at">favorability =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Favorable&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Neutral&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Unfavorable&#39;</span>, <span class="dv">7</span>)),</span>
<span id="cb472-18"><a href="#cb472-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">pct =</span> scores)</span>
<span id="cb472-19"><a href="#cb472-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-20"><a href="#cb472-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank departments by top box score to support sorting</span></span>
<span id="cb472-21"><a href="#cb472-21" aria-hidden="true" tabindex="-1"></a>dept_rank <span class="ot">&lt;-</span> engagement_scores <span class="sc">%&gt;%</span></span>
<span id="cb472-22"><a href="#cb472-22" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">filter</span>(favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb472-23"><a href="#cb472-23" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb472-24"><a href="#cb472-24" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(pct))) <span class="sc">%&gt;%</span></span>
<span id="cb472-25"><a href="#cb472-25" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">select</span>(dept, rank)</span>
<span id="cb472-26"><a href="#cb472-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-27"><a href="#cb472-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag top department records in df to support conditional coloring</span></span>
<span id="cb472-28"><a href="#cb472-28" aria-hidden="true" tabindex="-1"></a>engagement_scores<span class="sc">$</span>top_score <span class="ot">=</span> <span class="fu">ifelse</span>(engagement_scores<span class="sc">$</span>dept <span class="sc">==</span> dept_rank[<span class="dv">1</span>, <span class="st">&#39;dept&#39;</span>], <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb472-29"><a href="#cb472-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-30"><a href="#cb472-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add department rank based on top box scores</span></span>
<span id="cb472-31"><a href="#cb472-31" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">left_join</span>(engagement_scores, dept_rank, <span class="at">by =</span> <span class="st">&quot;dept&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Vertical Bar Charts </span><span class="al">###</span></span>
<span id="cb473-2"><a href="#cb473-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-3"><a href="#cb473-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(engagement_scores, favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, <span class="sc">-</span>pct), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(top_score))) <span class="sc">+</span></span>
<span id="cb473-4"><a href="#cb473-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The People team is leading in department-level engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb473-5"><a href="#cb473-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb473-6"><a href="#cb473-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> topbox_avg, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>) <span class="sc">+</span> </span>
<span id="cb473-7"><a href="#cb473-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">7.1</span>, <span class="at">y =</span> topbox_avg <span class="sc">+</span> <span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Avg = &quot;</span>, topbox_avg), <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb473-8"><a href="#cb473-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb473-9"><a href="#cb473-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb473-10"><a href="#cb473-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb473-11"><a href="#cb473-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb473-12"><a href="#cb473-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb473-13"><a href="#cb473-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb473-14"><a href="#cb473-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb473-15"><a href="#cb473-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb473-16"><a href="#cb473-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Horizontal Bar Charts </span><span class="al">###</span></span>
<span id="cb474-2"><a href="#cb474-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-3"><a href="#cb474-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(engagement_scores, favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, pct), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(top_score))) <span class="sc">+</span></span>
<span id="cb474-4"><a href="#cb474-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The People team is leading in department-level engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb474-5"><a href="#cb474-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb474-6"><a href="#cb474-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb474-7"><a href="#cb474-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> topbox_avg, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>) <span class="sc">+</span> </span>
<span id="cb474-8"><a href="#cb474-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> topbox_avg <span class="sc">+</span> <span class="fl">2.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Avg = &quot;</span>, topbox_avg), <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb474-9"><a href="#cb474-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb474-10"><a href="#cb474-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb474-11"><a href="#cb474-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb474-12"><a href="#cb474-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb474-13"><a href="#cb474-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb474-14"><a href="#cb474-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb474-15"><a href="#cb474-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb474-16"><a href="#cb474-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb474-17"><a href="#cb474-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Stacked Bar Charts </span><span class="al">###</span></span>
<span id="cb475-2"><a href="#cb475-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-3"><a href="#cb475-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(engagement_scores, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, <span class="sc">-</span>rank), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">factor</span>(favorability, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Unfavorable&quot;</span>, <span class="st">&quot;Neutral&quot;</span>, <span class="st">&quot;Favorable&quot;</span>)))) <span class="sc">+</span></span>
<span id="cb475-4"><a href="#cb475-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Half of Engineering respondents report unfavorable engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb475-5"><a href="#cb475-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Favorability&quot;</span>)) <span class="sc">+</span></span>
<span id="cb475-6"><a href="#cb475-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb475-7"><a href="#cb475-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb475-8"><a href="#cb475-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Favorable&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb475-9"><a href="#cb475-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Neutral&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>,</span>
<span id="cb475-10"><a href="#cb475-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Unfavorable&quot;</span> <span class="ot">=</span> <span class="st">&quot;#ED7D31&quot;</span>)) <span class="sc">+</span></span>
<span id="cb475-11"><a href="#cb475-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb475-12"><a href="#cb475-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb475-13"><a href="#cb475-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb475-14"><a href="#cb475-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb475-15"><a href="#cb475-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb475-16"><a href="#cb475-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb475-17"><a href="#cb475-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="combination-charts-1" class="section level3" number="18.2.8">
<h3><span class="header-section-number">18.2.8</span> Combination Charts</h3>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb476-2"><a href="#cb476-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-3"><a href="#cb476-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb476-4"><a href="#cb476-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb476-5"><a href="#cb476-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-6"><a href="#cb476-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Turnover rates</span></span>
<span id="cb476-7"><a href="#cb476-7" aria-hidden="true" tabindex="-1"></a>reg_rt <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">24</span>, <span class="dv">5</span>, <span class="dv">15</span>), <span class="dv">1</span>)</span>
<span id="cb476-8"><a href="#cb476-8" aria-hidden="true" tabindex="-1"></a>nonreg_rt <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">24</span>, <span class="dv">1</span>, <span class="dv">5</span>), <span class="dv">1</span>)</span>
<span id="cb476-9"><a href="#cb476-9" aria-hidden="true" tabindex="-1"></a>vol_rt <span class="ot">&lt;-</span> reg_rt <span class="sc">+</span> nonreg_rt</span>
<span id="cb476-10"><a href="#cb476-10" aria-hidden="true" tabindex="-1"></a>turnover_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>,</span>
<span id="cb476-11"><a href="#cb476-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">reg_rt =</span> reg_rt,</span>
<span id="cb476-12"><a href="#cb476-12" aria-hidden="true" tabindex="-1"></a>                           <span class="at">nonreg_rt =</span> nonreg_rt,</span>
<span id="cb476-13"><a href="#cb476-13" aria-hidden="true" tabindex="-1"></a>                           <span class="at">vol_rt =</span> vol_rt)</span></code></pre></div>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Combination Charts </span><span class="al">###</span></span>
<span id="cb477-2"><a href="#cb477-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-3"><a href="#cb477-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb477-4"><a href="#cb477-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb477-5"><a href="#cb477-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-6"><a href="#cb477-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(turnover_dat) <span class="sc">+</span> </span>
<span id="cb477-7"><a href="#cb477-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The largest share of monthly voluntary attrition over the 24-month period </span><span class="sc">\n</span><span class="st">has consistently been regrettable terminations.&#39;</span>,</span>
<span id="cb477-8"><a href="#cb477-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb477-9"><a href="#cb477-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>) <span class="sc">+</span></span>
<span id="cb477-10"><a href="#cb477-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> vol_rt), <span class="at">fill =</span> <span class="st">&#39;#E7E6E6&#39;</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb477-11"><a href="#cb477-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> reg_rt), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;#ED7D31&quot;</span>, <span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb477-12"><a href="#cb477-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> nonreg_rt), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;#9BC2E6&quot;</span>, <span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb477-13"><a href="#cb477-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb477-14"><a href="#cb477-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb477-15"><a href="#cb477-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">7</span>, <span class="at">y =</span> turnover_dat[turnover_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month), <span class="st">&#39;reg_rt&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Regrettable&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#ED7D31&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb477-16"><a href="#cb477-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">7</span>, <span class="at">y =</span> turnover_dat[turnover_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month), <span class="st">&#39;nonreg_rt&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Not</span><span class="sc">\n</span><span class="st">Regrettable&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#5B9BD5&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb477-17"><a href="#cb477-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb477-18"><a href="#cb477-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb477-19"><a href="#cb477-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb477-20"><a href="#cb477-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb477-21"><a href="#cb477-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb477-22"><a href="#cb477-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb477-23"><a href="#cb477-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="waterfall-charts-1" class="section level3" number="18.2.9">
<h3><span class="header-section-number">18.2.9</span> Waterfall Charts</h3>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb478-2"><a href="#cb478-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-3"><a href="#cb478-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate headcount data with id field to define bar order</span></span>
<span id="cb478-4"><a href="#cb478-4" aria-hidden="true" tabindex="-1"></a>hc_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb478-5"><a href="#cb478-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">event =</span> <span class="fu">c</span>(<span class="st">&quot;Starting HC&quot;</span>, <span class="st">&quot;Hires&quot;</span>, <span class="st">&quot;Transfers In&quot;</span>, <span class="st">&quot;Transfers Out&quot;</span>, <span class="st">&quot;Exits&quot;</span>, <span class="st">&quot;Ending HC&quot;</span>),</span>
<span id="cb478-6"><a href="#cb478-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Headcount&quot;</span>),</span>
<span id="cb478-7"><a href="#cb478-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="dv">130</span>),</span>
<span id="cb478-8"><a href="#cb478-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">start =</span> <span class="cn">NA</span>,</span>
<span id="cb478-9"><a href="#cb478-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">end =</span> <span class="cn">NA</span>)</span>
<span id="cb478-10"><a href="#cb478-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-11"><a href="#cb478-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and end values to support waterfall chart</span></span>
<span id="cb478-12"><a href="#cb478-12" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(hc_dat<span class="sc">$</span>count)</span>
<span id="cb478-13"><a href="#cb478-13" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>), <span class="dv">0</span>)</span>
<span id="cb478-14"><a href="#cb478-14" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>start <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb478-15"><a href="#cb478-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-16"><a href="#cb478-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap start/end values for last record (Ending HC)</span></span>
<span id="cb478-17"><a href="#cb478-17" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;end&quot;</span>] <span class="ot">&lt;-</span> hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>]</span>
<span id="cb478-18"><a href="#cb478-18" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Waterfall Chart </span><span class="al">###</span></span>
<span id="cb479-2"><a href="#cb479-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-3"><a href="#cb479-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb479-4"><a href="#cb479-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb479-5"><a href="#cb479-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-6"><a href="#cb479-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(hc_dat, <span class="fu">aes</span>(<span class="at">x =</span> event, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb479-7"><a href="#cb479-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(event, id),</span>
<span id="cb479-8"><a href="#cb479-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xmin =</span> id <span class="sc">-</span> <span class="fl">0.45</span>,</span>
<span id="cb479-9"><a href="#cb479-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xmax =</span> id <span class="sc">+</span> <span class="fl">0.50</span>,</span>
<span id="cb479-10"><a href="#cb479-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ymin =</span> end,</span>
<span id="cb479-11"><a href="#cb479-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ymax =</span> start)) <span class="sc">+</span></span>
<span id="cb479-12"><a href="#cb479-12" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_text</span>(<span class="fu">aes</span>(id, end, <span class="at">label =</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), end, <span class="st">&#39;&#39;</span>)), <span class="co"># Only label start and end HC</span></span>
<span id="cb479-13"><a href="#cb479-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb479-14"><a href="#cb479-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Hires and inbound transfers have outpaced outbound transfers and exits </span><span class="sc">\n</span><span class="st">in Engineering, leading to a net YTD increase in headcount.&#39;</span>,</span>
<span id="cb479-15"><a href="#cb479-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Event&#39;</span>,</span>
<span id="cb479-16"><a href="#cb479-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb479-17"><a href="#cb479-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>,</span>
<span id="cb479-18"><a href="#cb479-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Growth&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb479-19"><a href="#cb479-19" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Loss&quot;</span> <span class="ot">=</span> <span class="st">&quot;#ED7D31&quot;</span>)) <span class="sc">+</span></span>
<span id="cb479-20"><a href="#cb479-20" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb479-21"><a href="#cb479-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb479-22"><a href="#cb479-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb479-23"><a href="#cb479-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb479-24"><a href="#cb479-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb479-25"><a href="#cb479-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb479-26"><a href="#cb479-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="waffle-charts-1" class="section level3" number="18.2.10">
<h3><span class="header-section-number">18.2.10</span> Waffle Charts</h3>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb480-2"><a href="#cb480-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-3"><a href="#cb480-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create df with TA funnel metrics</span></span>
<span id="cb480-4"><a href="#cb480-4" aria-hidden="true" tabindex="-1"></a>ta_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">stage =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span>, <span class="st">&quot;Phone Screen&quot;</span>, <span class="st">&quot;Interview&quot;</span>, <span class="st">&quot;Offer Extend&quot;</span>, <span class="st">&quot;Offer Accept&quot;</span>),</span>
<span id="cb480-5"><a href="#cb480-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb480-6"><a href="#cb480-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-7"><a href="#cb480-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set depth of waffle chart (# of y-axis rows)</span></span>
<span id="cb480-8"><a href="#cb480-8" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb480-9"><a href="#cb480-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-10"><a href="#cb480-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Each observation needs an x and y coordinate, and y needs to be specified first for a waffle chart with horizontal accumulation</span></span>
<span id="cb480-11"><a href="#cb480-11" aria-hidden="true" tabindex="-1"></a>waffle_dat <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span>depth,</span>
<span id="cb480-12"><a href="#cb480-12" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="fu">ceiling</span>(<span class="fu">sum</span>(ta_dat<span class="sc">$</span>cnt) <span class="sc">/</span> depth)))</span>
<span id="cb480-13"><a href="#cb480-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-14"><a href="#cb480-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Expand the applicant counts into a vector of stage labels</span></span>
<span id="cb480-15"><a href="#cb480-15" aria-hidden="true" tabindex="-1"></a>stages <span class="ot">&lt;-</span> <span class="fu">rep</span>(ta_dat<span class="sc">$</span>stage, ta_dat<span class="sc">$</span>cnt)</span>
<span id="cb480-16"><a href="#cb480-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-17"><a href="#cb480-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate stages and fill any extra tiles with NA</span></span>
<span id="cb480-18"><a href="#cb480-18" aria-hidden="true" tabindex="-1"></a>waffle_dat<span class="sc">$</span>stage <span class="ot">&lt;-</span> <span class="fu">c</span>(stages, <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">nrow</span>(waffle_dat) <span class="sc">-</span> <span class="fu">length</span>(stages)))</span></code></pre></div>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Waffle Chart </span><span class="al">###</span></span>
<span id="cb481-2"><a href="#cb481-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-3"><a href="#cb481-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb481-4"><a href="#cb481-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb481-5"><a href="#cb481-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-6"><a href="#cb481-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(waffle_dat, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> stage)) <span class="sc">+</span> </span>
<span id="cb481-7"><a href="#cb481-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;We select 10 in every 100 applicants. </span><span class="sc">\n</span><span class="st">Our offer acceptance rate (OAR) is 40%.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb481-8"><a href="#cb481-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb481-9"><a href="#cb481-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>, </span>
<span id="cb481-10"><a href="#cb481-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Phone Screen&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb481-11"><a href="#cb481-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Interview&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6A6A6&quot;</span>, </span>
<span id="cb481-12"><a href="#cb481-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Offer Extend&quot;</span> <span class="ot">=</span> <span class="st">&quot;#808080&quot;</span>,</span>
<span id="cb481-13"><a href="#cb481-13" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Offer Accept&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb481-14"><a href="#cb481-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_reverse</span>() <span class="sc">+</span></span>
<span id="cb481-15"><a href="#cb481-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb481-16"><a href="#cb481-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb481-17"><a href="#cb481-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="sankey-diagrams-1" class="section level3" number="18.2.11">
<h3><span class="header-section-number">18.2.11</span> Sankey Diagrams</h3>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb482-2"><a href="#cb482-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-3"><a href="#cb482-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb482-4"><a href="#cb482-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb482-5"><a href="#cb482-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-6"><a href="#cb482-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb482-7"><a href="#cb482-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb482-8"><a href="#cb482-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-9"><a href="#cb482-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create nodes df</span></span>
<span id="cb482-10"><a href="#cb482-10" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>, <span class="co"># source</span></span>
<span id="cb482-11"><a href="#cb482-11" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>)) <span class="co"># destination</span></span>
<span id="cb482-12"><a href="#cb482-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-13"><a href="#cb482-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create links df</span></span>
<span id="cb482-14"><a href="#cb482-14" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">source =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">target =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">13</span>)</span>
<span id="cb482-15"><a href="#cb482-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-16"><a href="#cb482-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Append employee transfer counts per department pair to links df</span></span>
<span id="cb482-17"><a href="#cb482-17" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>source <span class="sc">==</span> links<span class="sc">$</span>target<span class="dv">-7</span>, <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">150</span>, <span class="dv">50</span>), <span class="dv">0</span>), <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">30</span>, <span class="dv">5</span>), <span class="dv">0</span>))</span>
<span id="cb482-18"><a href="#cb482-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-19"><a href="#cb482-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Append source department variable for colored connections</span></span>
<span id="cb482-20"><a href="#cb482-20" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb482-21"><a href="#cb482-21" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Engineering&quot;</span>,</span>
<span id="cb482-22"><a href="#cb482-22" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Finance&quot;</span>,</span>
<span id="cb482-23"><a href="#cb482-23" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Legal&quot;</span>,</span>
<span id="cb482-24"><a href="#cb482-24" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Marketing&quot;</span>,</span>
<span id="cb482-25"><a href="#cb482-25" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;People&quot;</span>,</span>
<span id="cb482-26"><a href="#cb482-26" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;Product&quot;</span>,</span>
<span id="cb482-27"><a href="#cb482-27" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;Sales&quot;</span>,</span>
<span id="cb482-28"><a href="#cb482-28" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;NA&quot;</span></span>
<span id="cb482-29"><a href="#cb482-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb482-30"><a href="#cb482-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-31"><a href="#cb482-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Append within/outside department transfer variable for colored connections</span></span>
<span id="cb482-32"><a href="#cb482-32" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>wiout_dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb482-33"><a href="#cb482-33" aria-hidden="true" tabindex="-1"></a>  (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">7</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">8</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">9</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">13</span>) <span class="sc">~</span> <span class="st">&quot;Within&quot;</span>,</span>
<span id="cb482-34"><a href="#cb482-34" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Outside&quot;</span></span>
<span id="cb482-35"><a href="#cb482-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb482-36"><a href="#cb482-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-37"><a href="#cb482-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Append dichotomous product/other indicator to links and nodes data frames</span></span>
<span id="cb482-38"><a href="#cb482-38" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span>
<span id="cb482-39"><a href="#cb482-39" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(nodes<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Sankey Diagrams </span><span class="al">###</span></span>
<span id="cb483-2"><a href="#cb483-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-3"><a href="#cb483-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb483-4"><a href="#cb483-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkD3)</span>
<span id="cb483-5"><a href="#cb483-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-6"><a href="#cb483-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 1</span></span>
<span id="cb483-7"><a href="#cb483-7" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb483-8"><a href="#cb483-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb483-9"><a href="#cb483-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb483-10"><a href="#cb483-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb483-11"><a href="#cb483-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb483-12"><a href="#cb483-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb483-13"><a href="#cb483-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb483-14"><a href="#cb483-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>)</span>
<span id="cb483-15"><a href="#cb483-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-16"><a href="#cb483-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 2</span></span>
<span id="cb483-17"><a href="#cb483-17" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb483-18"><a href="#cb483-18" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb483-19"><a href="#cb483-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb483-20"><a href="#cb483-20" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb483-21"><a href="#cb483-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb483-22"><a href="#cb483-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb483-23"><a href="#cb483-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb483-24"><a href="#cb483-24" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb483-25"><a href="#cb483-25" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;dept&quot;</span>)</span>
<span id="cb483-26"><a href="#cb483-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-27"><a href="#cb483-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 3</span></span>
<span id="cb483-28"><a href="#cb483-28" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb483-29"><a href="#cb483-29" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb483-30"><a href="#cb483-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb483-31"><a href="#cb483-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb483-32"><a href="#cb483-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb483-33"><a href="#cb483-33" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb483-34"><a href="#cb483-34" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb483-35"><a href="#cb483-35" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb483-36"><a href="#cb483-36" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;wiout_dept&quot;</span>)</span>
<span id="cb483-37"><a href="#cb483-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-38"><a href="#cb483-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 4</span></span>
<span id="cb483-39"><a href="#cb483-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Define color palette</span></span>
<span id="cb483-40"><a href="#cb483-40" aria-hidden="true" tabindex="-1"></a>colorJS <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;d3.scaleOrdinal([&quot;#BFBFBF&quot;, &quot;#0070C0&quot;])&#39;</span>)</span>
<span id="cb483-41"><a href="#cb483-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-42"><a href="#cb483-42" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb483-43"><a href="#cb483-43" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb483-44"><a href="#cb483-44" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb483-45"><a href="#cb483-45" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb483-46"><a href="#cb483-46" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb483-47"><a href="#cb483-47" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb483-48"><a href="#cb483-48" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb483-49"><a href="#cb483-49" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb483-50"><a href="#cb483-50" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeGroup =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb483-51"><a href="#cb483-51" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb483-52"><a href="#cb483-52" aria-hidden="true" tabindex="-1"></a>                         <span class="at">colourScale =</span> colorJS)</span></code></pre></div>
</div>
<div id="pie-charts-1" class="section level3" number="18.2.12">
<h3><span class="header-section-number">18.2.12</span> Pie Charts</h3>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb484-2"><a href="#cb484-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-3"><a href="#cb484-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for gender representation among active employees</span></span>
<span id="cb484-4"><a href="#cb484-4" aria-hidden="true" tabindex="-1"></a>smmry_gender <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Female&#39;</span>),</span>
<span id="cb484-5"><a href="#cb484-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">732</span>, <span class="dv">501</span>),</span>
<span id="cb484-6"><a href="#cb484-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">pct =</span> <span class="fu">c</span>(<span class="fl">59.4</span>, <span class="fl">40.6</span>))</span></code></pre></div>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Pie Chart </span><span class="al">###</span></span>
<span id="cb485-2"><a href="#cb485-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-3"><a href="#cb485-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb485-4"><a href="#cb485-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb485-5"><a href="#cb485-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-6"><a href="#cb485-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_gender, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(gender))) <span class="sc">+</span></span>
<span id="cb485-7"><a href="#cb485-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb485-8"><a href="#cb485-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb485-9"><a href="#cb485-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(pct, <span class="st">&quot;%&quot;</span>)), <span class="at">color =</span> <span class="fu">ifelse</span>(smmry_gender<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&#39;Male&#39;</span>, <span class="st">&#39;white&#39;</span>, <span class="st">&#39;black&#39;</span>), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb485-10"><a href="#cb485-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Nearly 60 percent of active employees identify as male.&#39;</span>) <span class="sc">+</span></span>
<span id="cb485-11"><a href="#cb485-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Female&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb485-12"><a href="#cb485-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Male&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb485-13"><a href="#cb485-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb485-14"><a href="#cb485-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb485-15"><a href="#cb485-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb485-16"><a href="#cb485-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb485-17"><a href="#cb485-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb485-18"><a href="#cb485-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
<!--chapter:end:r/18_appendix.Rmd-->
</div>
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
