<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>18 Appendix | The Fundamentals of People Analytics: With Applications in R</title>
  <meta name="description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="generator" content="bookdown 0.24.4 and GitBook 2.6.7" />

  <meta property="og:title" content="18 Appendix | The Fundamentals of People Analytics: With Applications in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="github-repo" content="crstarbuck/peopleanalytics-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="18 Appendix | The Fundamentals of People Analytics: With Applications in R" />
  
  <meta name="twitter:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  

<meta name="author" content="Craig Starbuck" />


<meta name="date" content="2022-09-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bibli.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Fundamentals of People Analytics: With Applications in R</a></li>

<li class="divider"></li>
<li><a href="dedication.html#dedication" id="toc-dedication">Dedication</a></li>
<li><a href="foreword.html#foreword" id="toc-foreword">Foreword</a></li>
<li><a href="preface.html#preface" id="toc-preface">Preface</a></li>
<li><a href="getting-started.html#getting-started" id="toc-getting-started"><span class="toc-section-number">1</span> Getting Started</a>
<ul>
<li><a href="getting-started.html#guiding-principles" id="toc-guiding-principles"><span class="toc-section-number">1.1</span> Guiding Principles</a>
<ul>
<li><a href="getting-started.html#pro-employee-thinking" id="toc-pro-employee-thinking"><span class="toc-section-number">1.1.1</span> Pro-Employee Thinking</a></li>
<li><a href="getting-started.html#quality" id="toc-quality"><span class="toc-section-number">1.1.2</span> Quality</a></li>
<li><a href="getting-started.html#prioritization" id="toc-prioritization"><span class="toc-section-number">1.1.3</span> Prioritization</a></li>
</ul></li>
<li><a href="getting-started.html#tooling" id="toc-tooling"><span class="toc-section-number">1.2</span> Tooling</a></li>
<li><a href="getting-started.html#data-sets" id="toc-data-sets"><span class="toc-section-number">1.3</span> Data Sets</a>
<ul>
<li><a href="getting-started.html#employees" id="toc-employees"><span class="toc-section-number">1.3.1</span> Employees</a></li>
<li><a href="getting-started.html#turnover-trends" id="toc-turnover-trends"><span class="toc-section-number">1.3.2</span> Turnover Trends</a></li>
<li><a href="getting-started.html#survey-responses" id="toc-survey-responses"><span class="toc-section-number">1.3.3</span> Survey Responses</a></li>
</ul></li>
<li><a href="getting-started.html#d-framework" id="toc-d-framework"><span class="toc-section-number">1.4</span> 4D Framework</a></li>
</ul></li>
<li><a href="r-intro.html#r-intro" id="toc-r-intro"><span class="toc-section-number">2</span> Introduction to R</a>
<ul>
<li><a href="r-intro.html#getting-started-1" id="toc-getting-started-1"><span class="toc-section-number">2.1</span> Getting Started</a>
<ul>
<li><a href="r-intro.html#installing-r" id="toc-installing-r"><span class="toc-section-number">2.1.1</span> Installing R</a></li>
<li><a href="r-intro.html#installing-r-studio" id="toc-installing-r-studio"><span class="toc-section-number">2.1.2</span> Installing R Studio</a></li>
<li><a href="r-intro.html#installing-packages" id="toc-installing-packages"><span class="toc-section-number">2.1.3</span> Installing Packages</a></li>
<li><a href="r-intro.html#case-sensitivity" id="toc-case-sensitivity"><span class="toc-section-number">2.1.4</span> Case Sensitivity</a></li>
<li><a href="r-intro.html#help" id="toc-help"><span class="toc-section-number">2.1.5</span> Help</a></li>
<li><a href="r-intro.html#objects" id="toc-objects"><span class="toc-section-number">2.1.6</span> Objects</a></li>
<li><a href="r-intro.html#comments" id="toc-comments"><span class="toc-section-number">2.1.7</span> Comments</a></li>
<li><a href="r-intro.html#testing-early-and-often" id="toc-testing-early-and-often"><span class="toc-section-number">2.1.8</span> Testing Early and Often</a></li>
</ul></li>
<li><a href="r-intro.html#vectors" id="toc-vectors"><span class="toc-section-number">2.2</span> Vectors</a></li>
<li><a href="r-intro.html#matrices" id="toc-matrices"><span class="toc-section-number">2.3</span> Matrices</a></li>
<li><a href="r-intro.html#factors" id="toc-factors"><span class="toc-section-number">2.4</span> Factors</a></li>
<li><a href="r-intro.html#data-frames" id="toc-data-frames"><span class="toc-section-number">2.5</span> Data Frames</a></li>
<li><a href="r-intro.html#lists" id="toc-lists"><span class="toc-section-number">2.6</span> Lists</a></li>
<li><a href="r-intro.html#loops" id="toc-loops"><span class="toc-section-number">2.7</span> Loops</a></li>
<li><a href="r-intro.html#user-defined-functions-udfs" id="toc-user-defined-functions-udfs"><span class="toc-section-number">2.8</span> User-Defined Functions (UDFs)</a></li>
<li><a href="r-intro.html#graphics" id="toc-graphics"><span class="toc-section-number">2.9</span> Graphics</a></li>
<li><a href="r-intro.html#review-questions" id="toc-review-questions"><span class="toc-section-number">2.10</span> Review Questions</a></li>
</ul></li>
<li><a href="sql-intro.html#sql-intro" id="toc-sql-intro"><span class="toc-section-number">3</span> Introduction to SQL</a>
<ul>
<li><a href="sql-intro.html#basics" id="toc-basics"><span class="toc-section-number">3.1</span> Basics</a></li>
<li><a href="sql-intro.html#aggregate-functions" id="toc-aggregate-functions"><span class="toc-section-number">3.2</span> Aggregate Functions</a></li>
<li><a href="sql-intro.html#joins" id="toc-joins"><span class="toc-section-number">3.3</span> Joins</a></li>
<li><a href="sql-intro.html#subqueries" id="toc-subqueries"><span class="toc-section-number">3.4</span> Subqueries</a></li>
<li><a href="sql-intro.html#virtual-tables" id="toc-virtual-tables"><span class="toc-section-number">3.5</span> Virtual Tables</a></li>
<li><a href="sql-intro.html#window-functions" id="toc-window-functions"><span class="toc-section-number">3.6</span> Window Functions</a></li>
<li><a href="sql-intro.html#common-table-expressions-ctes" id="toc-common-table-expressions-ctes"><span class="toc-section-number">3.7</span> Common Table Expressions (CTEs)</a></li>
<li><a href="sql-intro.html#review-questions-1" id="toc-review-questions-1"><span class="toc-section-number">3.8</span> Review Questions</a></li>
</ul></li>
<li><a href="research.html#research" id="toc-research"><span class="toc-section-number">4</span> Research Design</a>
<ul>
<li><a href="research.html#research-questions" id="toc-research-questions"><span class="toc-section-number">4.1</span> Research Questions</a></li>
<li><a href="research.html#research-hypotheses" id="toc-research-hypotheses"><span class="toc-section-number">4.2</span> Research Hypotheses</a></li>
<li><a href="research.html#internal-and-external-validity" id="toc-internal-and-external-validity"><span class="toc-section-number">4.3</span> Internal and External Validity</a></li>
<li><a href="research.html#research-methods" id="toc-research-methods"><span class="toc-section-number">4.4</span> Research Methods</a></li>
<li><a href="research.html#research-designs" id="toc-research-designs"><span class="toc-section-number">4.5</span> Research Designs</a></li>
<li><a href="research.html#review-questions-2" id="toc-review-questions-2"><span class="toc-section-number">4.6</span> Review Questions</a></li>
</ul></li>
<li><a href="measure-sampl.html#measure-sampl" id="toc-measure-sampl"><span class="toc-section-number">5</span> Measurement &amp; Sampling</a>
<ul>
<li><a href="measure-sampl.html#variable-types" id="toc-variable-types"><span class="toc-section-number">5.1</span> Variable Types</a>
<ul>
<li><a href="measure-sampl.html#independent-variables-iv" id="toc-independent-variables-iv"><span class="toc-section-number">5.1.1</span> Independent Variables (IV)</a></li>
<li><a href="measure-sampl.html#dependent-variables-dv" id="toc-dependent-variables-dv"><span class="toc-section-number">5.1.2</span> Dependent Variables (DV)</a></li>
<li><a href="measure-sampl.html#control-variables-cv" id="toc-control-variables-cv"><span class="toc-section-number">5.1.3</span> Control Variables (CV)</a></li>
<li><a href="measure-sampl.html#moderating-variables" id="toc-moderating-variables"><span class="toc-section-number">5.1.4</span> Moderating Variables</a></li>
<li><a href="measure-sampl.html#mediating-variables" id="toc-mediating-variables"><span class="toc-section-number">5.1.5</span> Mediating Variables</a></li>
<li><a href="measure-sampl.html#endogenous-vs.-exogenous-variables" id="toc-endogenous-vs.-exogenous-variables"><span class="toc-section-number">5.1.6</span> Endogenous vs. Exogenous Variables</a></li>
</ul></li>
<li><a href="measure-sampl.html#measurement-scales" id="toc-measurement-scales"><span class="toc-section-number">5.2</span> Measurement Scales</a>
<ul>
<li><a href="measure-sampl.html#discrete-variables" id="toc-discrete-variables"><span class="toc-section-number">5.2.1</span> Discrete Variables</a></li>
<li><a href="measure-sampl.html#continuous-variables" id="toc-continuous-variables"><span class="toc-section-number">5.2.2</span> Continuous Variables</a></li>
</ul></li>
<li><a href="measure-sampl.html#sampling-methods" id="toc-sampling-methods"><span class="toc-section-number">5.3</span> Sampling Methods</a>
<ul>
<li><a href="measure-sampl.html#probability-sampling" id="toc-probability-sampling"><span class="toc-section-number">5.3.1</span> Probability Sampling</a></li>
<li><a href="measure-sampl.html#non-probability-sampling" id="toc-non-probability-sampling"><span class="toc-section-number">5.3.2</span> Non-Probability Sampling</a></li>
</ul></li>
<li><a href="measure-sampl.html#sampling-nonsampling-error" id="toc-sampling-nonsampling-error"><span class="toc-section-number">5.4</span> Sampling &amp; Nonsampling Error</a>
<ul>
<li><a href="measure-sampl.html#sampling-error" id="toc-sampling-error"><span class="toc-section-number">5.4.1</span> Sampling Error</a></li>
<li><a href="measure-sampl.html#nonsampling-error" id="toc-nonsampling-error"><span class="toc-section-number">5.4.2</span> Nonsampling Error</a></li>
</ul></li>
<li><a href="measure-sampl.html#scale-reliability-and-validity" id="toc-scale-reliability-and-validity"><span class="toc-section-number">5.5</span> Scale Reliability and Validity</a>
<ul>
<li><a href="measure-sampl.html#reliability" id="toc-reliability"><span class="toc-section-number">5.5.1</span> Reliability</a></li>
<li><a href="measure-sampl.html#validity" id="toc-validity"><span class="toc-section-number">5.5.2</span> Validity</a></li>
</ul></li>
<li><a href="measure-sampl.html#review-questions-3" id="toc-review-questions-3"><span class="toc-section-number">5.6</span> Review Questions</a></li>
</ul></li>
<li><a href="data-prep.html#data-prep" id="toc-data-prep"><span class="toc-section-number">6</span> Data Preparation</a>
<ul>
<li><a href="data-prep.html#data-extraction" id="toc-data-extraction"><span class="toc-section-number">6.1</span> Data Extraction</a>
<ul>
<li><a href="data-prep.html#data-architecture" id="toc-data-architecture"><span class="toc-section-number">6.1.1</span> Data Architecture</a></li>
<li><a href="data-prep.html#database-normalization" id="toc-database-normalization"><span class="toc-section-number">6.1.2</span> Database Normalization</a></li>
<li><a href="data-prep.html#modern-data-infrastructure" id="toc-modern-data-infrastructure"><span class="toc-section-number">6.1.3</span> Modern Data Infrastructure</a></li>
</ul></li>
<li><a href="data-prep.html#data-screening-cleaning" id="toc-data-screening-cleaning"><span class="toc-section-number">6.2</span> Data Screening &amp; Cleaning</a>
<ul>
<li><a href="data-prep.html#missingness" id="toc-missingness"><span class="toc-section-number">6.2.1</span> Missingness</a></li>
<li><a href="data-prep.html#outliers" id="toc-outliers"><span class="toc-section-number">6.2.2</span> Outliers</a></li>
<li><a href="data-prep.html#low-variability" id="toc-low-variability"><span class="toc-section-number">6.2.3</span> Low Variability</a></li>
<li><a href="data-prep.html#inconsistent-categories" id="toc-inconsistent-categories"><span class="toc-section-number">6.2.4</span> Inconsistent Categories</a></li>
<li><a href="data-prep.html#data-binning" id="toc-data-binning"><span class="toc-section-number">6.2.5</span> Data Binning</a></li>
</ul></li>
<li><a href="data-prep.html#one-hot-encoding" id="toc-one-hot-encoding"><span class="toc-section-number">6.3</span> One-Hot Encoding</a></li>
<li><a href="data-prep.html#feature-engineering" id="toc-feature-engineering"><span class="toc-section-number">6.4</span> Feature Engineering</a></li>
<li><a href="data-prep.html#review-questions-4" id="toc-review-questions-4"><span class="toc-section-number">6.5</span> Review Questions</a></li>
</ul></li>
<li><a href="desc-stats.html#desc-stats" id="toc-desc-stats"><span class="toc-section-number">7</span> Descriptive Statistics</a>
<ul>
<li><a href="desc-stats.html#univariate-analysis" id="toc-univariate-analysis"><span class="toc-section-number">7.1</span> Univariate Analysis</a>
<ul>
<li><a href="desc-stats.html#measures-of-central-tendency" id="toc-measures-of-central-tendency"><span class="toc-section-number">7.1.1</span> Measures of Central Tendency</a></li>
<li><a href="desc-stats.html#measures-of-spread" id="toc-measures-of-spread"><span class="toc-section-number">7.1.2</span> Measures of Spread</a></li>
</ul></li>
<li><a href="desc-stats.html#bivariate-analysis" id="toc-bivariate-analysis"><span class="toc-section-number">7.2</span> Bivariate Analysis</a>
<ul>
<li><a href="desc-stats.html#covariance" id="toc-covariance"><span class="toc-section-number">7.2.1</span> Covariance</a></li>
<li><a href="desc-stats.html#correlation" id="toc-correlation"><span class="toc-section-number">7.2.2</span> Correlation</a></li>
</ul></li>
<li><a href="desc-stats.html#review-questions-5" id="toc-review-questions-5"><span class="toc-section-number">7.3</span> Review Questions</a></li>
</ul></li>
<li><a href="inf-stats.html#inf-stats" id="toc-inf-stats"><span class="toc-section-number">8</span> Statistical Inference</a>
<ul>
<li><a href="inf-stats.html#introduction-to-probability" id="toc-introduction-to-probability"><span class="toc-section-number">8.1</span> Introduction to Probability</a>
<ul>
<li><a href="inf-stats.html#probability-distributions" id="toc-probability-distributions"><span class="toc-section-number">8.1.1</span> Probability Distributions</a></li>
<li><a href="inf-stats.html#conditional-probability" id="toc-conditional-probability"><span class="toc-section-number">8.1.2</span> Conditional Probability</a></li>
</ul></li>
<li><a href="inf-stats.html#central-limit-theorem" id="toc-central-limit-theorem"><span class="toc-section-number">8.2</span> Central Limit Theorem</a></li>
<li><a href="inf-stats.html#confidence-intervals" id="toc-confidence-intervals"><span class="toc-section-number">8.3</span> Confidence Intervals</a>
<ul>
<li><a href="inf-stats.html#hypothesis-testing" id="toc-hypothesis-testing"><span class="toc-section-number">8.3.1</span> Hypothesis Testing</a></li>
<li><a href="inf-stats.html#alpha" id="toc-alpha"><span class="toc-section-number">8.3.2</span> Alpha</a></li>
<li><a href="inf-stats.html#type-i-ii-errors" id="toc-type-i-ii-errors"><span class="toc-section-number">8.3.3</span> Type I &amp; II Errors</a></li>
<li><a href="inf-stats.html#p-values" id="toc-p-values"><span class="toc-section-number">8.3.4</span> <span class="math inline">\(p\)</span>-Values</a></li>
<li><a href="inf-stats.html#bonferroni-correction" id="toc-bonferroni-correction"><span class="toc-section-number">8.3.5</span> Bonferroni Correction</a></li>
<li><a href="inf-stats.html#statistical-power" id="toc-statistical-power"><span class="toc-section-number">8.3.6</span> Statistical Power</a></li>
</ul></li>
<li><a href="inf-stats.html#review-questions-6" id="toc-review-questions-6"><span class="toc-section-number">8.4</span> Review Questions</a></li>
</ul></li>
<li><a href="aod.html#aod" id="toc-aod"><span class="toc-section-number">9</span> Analysis of Differences</a>
<ul>
<li><a href="aod.html#parametric-vs.-nonparametric-tests" id="toc-parametric-vs.-nonparametric-tests"><span class="toc-section-number">9.1</span> Parametric vs. Nonparametric Tests</a></li>
<li><a href="aod.html#differences-in-discrete-data" id="toc-differences-in-discrete-data"><span class="toc-section-number">9.2</span> Differences in Discrete Data</a></li>
<li><a href="aod.html#differences-in-continuous-data" id="toc-differences-in-continuous-data"><span class="toc-section-number">9.3</span> Differences in Continuous Data</a></li>
<li><a href="aod.html#review-questions-7" id="toc-review-questions-7"><span class="toc-section-number">9.4</span> Review Questions</a></li>
</ul></li>
<li><a href="lm.html#lm" id="toc-lm"><span class="toc-section-number">10</span> Linear Regression</a>
<ul>
<li><a href="lm.html#sample-size" id="toc-sample-size"><span class="toc-section-number">10.1</span> Sample Size</a></li>
<li><a href="lm.html#simple-linear-regression" id="toc-simple-linear-regression"><span class="toc-section-number">10.2</span> Simple Linear Regression</a></li>
<li><a href="lm.html#multiple-linear-regression" id="toc-multiple-linear-regression"><span class="toc-section-number">10.3</span> Multiple Linear Regression</a></li>
<li><a href="lm.html#moderation" id="toc-moderation"><span class="toc-section-number">10.4</span> Moderation</a></li>
<li><a href="lm.html#mediation" id="toc-mediation"><span class="toc-section-number">10.5</span> Mediation</a></li>
<li><a href="lm.html#review-questions-8" id="toc-review-questions-8"><span class="toc-section-number">10.6</span> Review Questions</a></li>
</ul></li>
<li><a href="lme.html#lme" id="toc-lme"><span class="toc-section-number">11</span> Linear Model Extensions</a>
<ul>
<li><a href="lme.html#model-comparisons" id="toc-model-comparisons"><span class="toc-section-number">11.1</span> Model Comparisons</a></li>
<li><a href="lme.html#hierarchical-regression" id="toc-hierarchical-regression"><span class="toc-section-number">11.2</span> Hierarchical Regression</a></li>
<li><a href="lme.html#multilevel-models" id="toc-multilevel-models"><span class="toc-section-number">11.3</span> Multilevel Models</a></li>
<li><a href="lme.html#polynomial-regression" id="toc-polynomial-regression"><span class="toc-section-number">11.4</span> Polynomial Regression</a></li>
<li><a href="lme.html#review-questions-9" id="toc-review-questions-9"><span class="toc-section-number">11.5</span> Review Questions</a></li>
</ul></li>
<li><a href="log.html#log" id="toc-log"><span class="toc-section-number">12</span> Logistic Regression</a>
<ul>
<li><a href="log.html#binomial-logistic-regression" id="toc-binomial-logistic-regression"><span class="toc-section-number">12.1</span> Binomial Logistic Regression</a></li>
<li><a href="log.html#multinomial-logistic-regression" id="toc-multinomial-logistic-regression"><span class="toc-section-number">12.2</span> Multinomial Logistic Regression</a></li>
<li><a href="log.html#ordinal-logistic-regression" id="toc-ordinal-logistic-regression"><span class="toc-section-number">12.3</span> Ordinal Logistic Regression</a></li>
<li><a href="log.html#review-questions-10" id="toc-review-questions-10"><span class="toc-section-number">12.4</span> Review Questions</a></li>
</ul></li>
<li><a href="pred-mod.html#pred-mod" id="toc-pred-mod"><span class="toc-section-number">13</span> Predictive Modeling</a>
<ul>
<li><a href="pred-mod.html#cross-validation" id="toc-cross-validation"><span class="toc-section-number">13.1</span> Cross-Validation</a></li>
<li><a href="pred-mod.html#model-performance" id="toc-model-performance"><span class="toc-section-number">13.2</span> Model Performance</a></li>
<li><a href="pred-mod.html#bias-variance-tradeoff" id="toc-bias-variance-tradeoff"><span class="toc-section-number">13.3</span> Bias-Variance Tradeoff</a></li>
<li><a href="pred-mod.html#tree-based-algorithms" id="toc-tree-based-algorithms"><span class="toc-section-number">13.4</span> Tree-Based Algorithms</a></li>
<li><a href="pred-mod.html#predictive-modeling" id="toc-predictive-modeling"><span class="toc-section-number">13.5</span> Predictive Modeling</a></li>
<li><a href="pred-mod.html#review-questions-11" id="toc-review-questions-11"><span class="toc-section-number">13.6</span> Review Questions</a></li>
</ul></li>
<li><a href="unsup-lrn.html#unsup-lrn" id="toc-unsup-lrn"><span class="toc-section-number">14</span> Unsupervised Learning</a>
<ul>
<li><a href="unsup-lrn.html#factor-analysis" id="toc-factor-analysis"><span class="toc-section-number">14.1</span> Factor Analysis</a>
<ul>
<li><a href="unsup-lrn.html#exploratory-factor-analysis-efa" id="toc-exploratory-factor-analysis-efa"><span class="toc-section-number">14.1.1</span> Exploratory Factor Analysis (EFA)</a></li>
<li><a href="unsup-lrn.html#confirmatory-factor-analysis-cfa" id="toc-confirmatory-factor-analysis-cfa"><span class="toc-section-number">14.1.2</span> Confirmatory Factor Analysis (CFA)</a></li>
</ul></li>
<li><a href="unsup-lrn.html#clustering" id="toc-clustering"><span class="toc-section-number">14.2</span> Clustering</a>
<ul>
<li><a href="unsup-lrn.html#k-means-clustering" id="toc-k-means-clustering"><span class="toc-section-number">14.2.1</span> <span class="math inline">\(K\)</span>-Means Clustering</a></li>
<li><a href="unsup-lrn.html#hierarchical-clustering" id="toc-hierarchical-clustering"><span class="toc-section-number">14.2.2</span> Hierarchical Clustering</a></li>
</ul></li>
<li><a href="unsup-lrn.html#review-questions-12" id="toc-review-questions-12"><span class="toc-section-number">14.3</span> Review Questions</a></li>
</ul></li>
<li><a href="data-viz.html#data-viz" id="toc-data-viz"><span class="toc-section-number">15</span> Data Visualization</a>
<ul>
<li><a href="data-viz.html#best-practices" id="toc-best-practices"><span class="toc-section-number">15.1</span> Best Practices</a>
<ul>
<li><a href="data-viz.html#color-palette" id="toc-color-palette"><span class="toc-section-number">15.1.1</span> Color Palette</a></li>
<li><a href="data-viz.html#chart-borders" id="toc-chart-borders"><span class="toc-section-number">15.1.2</span> Chart Borders</a></li>
<li><a href="data-viz.html#zero-baseline" id="toc-zero-baseline"><span class="toc-section-number">15.1.3</span> Zero Baseline</a></li>
<li><a href="data-viz.html#intuitive-layout" id="toc-intuitive-layout"><span class="toc-section-number">15.1.4</span> Intuitive Layout</a></li>
<li><a href="data-viz.html#preattentive-attributes" id="toc-preattentive-attributes"><span class="toc-section-number">15.1.5</span> Preattentive Attributes</a></li>
</ul></li>
<li><a href="data-viz.html#step-by-step-visual-upgrade" id="toc-step-by-step-visual-upgrade"><span class="toc-section-number">15.2</span> Step-by-Step Visual Upgrade</a>
<ul>
<li><a href="data-viz.html#step-1-build-bar-chart-with-defaults" id="toc-step-1-build-bar-chart-with-defaults"><span class="toc-section-number">15.2.1</span> Step 1: Build Bar Chart with Defaults</a></li>
<li><a href="data-viz.html#step-2-remove-legend" id="toc-step-2-remove-legend"><span class="toc-section-number">15.2.2</span> Step 2: Remove Legend</a></li>
<li><a href="data-viz.html#step-3-assign-colors-strategically" id="toc-step-3-assign-colors-strategically"><span class="toc-section-number">15.2.3</span> Step 3: Assign Colors Strategically</a></li>
<li><a href="data-viz.html#step-4-add-axis-titles-and-margins" id="toc-step-4-add-axis-titles-and-margins"><span class="toc-section-number">15.2.4</span> Step 4: Add Axis Titles and Margins</a></li>
<li><a href="data-viz.html#step-5-add-left-justified-title" id="toc-step-5-add-left-justified-title"><span class="toc-section-number">15.2.5</span> Step 5: Add Left-Justified Title</a></li>
<li><a href="data-viz.html#step-6-remove-background" id="toc-step-6-remove-background"><span class="toc-section-number">15.2.6</span> Step 6: Remove Background</a></li>
<li><a href="data-viz.html#step-7-remove-axis-ticks" id="toc-step-7-remove-axis-ticks"><span class="toc-section-number">15.2.7</span> Step 7: Remove Axis Ticks</a></li>
<li><a href="data-viz.html#step-8-mute-titles" id="toc-step-8-mute-titles"><span class="toc-section-number">15.2.8</span> Step 8: Mute Titles</a></li>
<li><a href="data-viz.html#step-9-flip-axes" id="toc-step-9-flip-axes"><span class="toc-section-number">15.2.9</span> Step 9: Flip Axes</a></li>
<li><a href="data-viz.html#step-10-sort-data" id="toc-step-10-sort-data"><span class="toc-section-number">15.2.10</span> Step 10: Sort Data</a></li>
</ul></li>
<li><a href="data-viz.html#visualization-types" id="toc-visualization-types"><span class="toc-section-number">15.3</span> Visualization Types</a>
<ul>
<li><a href="data-viz.html#tables" id="toc-tables"><span class="toc-section-number">15.3.1</span> Tables</a></li>
<li><a href="data-viz.html#heatmaps" id="toc-heatmaps"><span class="toc-section-number">15.3.2</span> Heatmaps</a></li>
<li><a href="data-viz.html#scatterplots" id="toc-scatterplots"><span class="toc-section-number">15.3.3</span> Scatterplots</a></li>
<li><a href="data-viz.html#line-graphs" id="toc-line-graphs"><span class="toc-section-number">15.3.4</span> Line Graphs</a></li>
<li><a href="data-viz.html#slopegraphs" id="toc-slopegraphs"><span class="toc-section-number">15.3.5</span> Slopegraphs</a></li>
<li><a href="data-viz.html#bar-charts" id="toc-bar-charts"><span class="toc-section-number">15.3.6</span> Bar Charts</a></li>
<li><a href="data-viz.html#combination-charts" id="toc-combination-charts"><span class="toc-section-number">15.3.7</span> Combination Charts</a></li>
<li><a href="data-viz.html#waterfall-charts" id="toc-waterfall-charts"><span class="toc-section-number">15.3.8</span> Waterfall Charts</a></li>
<li><a href="data-viz.html#waffle-charts" id="toc-waffle-charts"><span class="toc-section-number">15.3.9</span> Waffle Charts</a></li>
<li><a href="data-viz.html#sankey-diagrams" id="toc-sankey-diagrams"><span class="toc-section-number">15.3.10</span> Sankey Diagrams</a></li>
<li><a href="data-viz.html#pie-charts" id="toc-pie-charts"><span class="toc-section-number">15.3.11</span> Pie Charts</a></li>
<li><a href="data-viz.html#d-visuals" id="toc-d-visuals"><span class="toc-section-number">15.3.12</span> 3D Visuals</a></li>
</ul></li>
<li><a href="data-viz.html#elegant-data-visualization" id="toc-elegant-data-visualization"><span class="toc-section-number">15.4</span> Elegant Data Visualization</a></li>
<li><a href="data-viz.html#review-questions-13" id="toc-review-questions-13"><span class="toc-section-number">15.5</span> Review Questions</a></li>
</ul></li>
<li><a href="storytelling.html#storytelling" id="toc-storytelling"><span class="toc-section-number">16</span> Data Storytelling</a>
<ul>
<li><a href="storytelling.html#know-your-audience" id="toc-know-your-audience"><span class="toc-section-number">16.1</span> Know Your Audience</a></li>
<li><a href="storytelling.html#production-status" id="toc-production-status"><span class="toc-section-number">16.2</span> Production Status</a></li>
<li><a href="storytelling.html#structural-elements" id="toc-structural-elements"><span class="toc-section-number">16.3</span> Structural Elements</a>
<ul>
<li><a href="storytelling.html#tldr" id="toc-tldr"><span class="toc-section-number">16.3.1</span> TL;DR</a></li>
<li><a href="storytelling.html#purpose" id="toc-purpose"><span class="toc-section-number">16.3.2</span> Purpose</a></li>
<li><a href="storytelling.html#methodology" id="toc-methodology"><span class="toc-section-number">16.3.3</span> Methodology</a></li>
<li><a href="storytelling.html#results" id="toc-results"><span class="toc-section-number">16.3.4</span> Results</a></li>
<li><a href="storytelling.html#limitations" id="toc-limitations"><span class="toc-section-number">16.3.5</span> Limitations</a></li>
<li><a href="storytelling.html#next-steps" id="toc-next-steps"><span class="toc-section-number">16.3.6</span> Next Steps</a></li>
<li><a href="storytelling.html#appendix" id="toc-appendix"><span class="toc-section-number">16.3.7</span> Appendix</a></li>
</ul></li>
<li><a href="storytelling.html#qa" id="toc-qa"><span class="toc-section-number">16.4</span> Q&amp;A</a></li>
<li><a href="storytelling.html#review-questions-14" id="toc-review-questions-14"><span class="toc-section-number">16.5</span> Review Questions</a></li>
</ul></li>
<li><a href="bibli.html#bibli" id="toc-bibli"><span class="toc-section-number">17</span> Bibliography</a></li>
<li><a href="storytelling.html#appendix" id="toc-appendix"><span class="toc-section-number">18</span> Appendix</a>
<ul>
<li><a href="appendix.html#d-framework-1" id="toc-d-framework-1"><span class="toc-section-number">18.1</span> 4D Framework</a>
<ul>
<li><a href="appendix.html#discover" id="toc-discover"><span class="toc-section-number">18.1.1</span> Discover</a></li>
<li><a href="appendix.html#design" id="toc-design"><span class="toc-section-number">18.1.2</span> Design</a></li>
<li><a href="appendix.html#develop" id="toc-develop"><span class="toc-section-number">18.1.3</span> Develop</a></li>
<li><a href="appendix.html#deliver" id="toc-deliver"><span class="toc-section-number">18.1.4</span> Deliver</a></li>
</ul></li>
<li><a href="appendix.html#data-visualization" id="toc-data-visualization"><span class="toc-section-number">18.2</span> Data Visualization</a>
<ul>
<li><a href="appendix.html#step-by-step-visual-upgrade-1" id="toc-step-by-step-visual-upgrade-1"><span class="toc-section-number">18.2.1</span> Step-by-Step Visual Upgrade</a></li>
<li><a href="appendix.html#tables-1" id="toc-tables-1"><span class="toc-section-number">18.2.2</span> Tables</a></li>
<li><a href="appendix.html#heatmaps-1" id="toc-heatmaps-1"><span class="toc-section-number">18.2.3</span> Heatmaps</a></li>
<li><a href="appendix.html#scatterplots-1" id="toc-scatterplots-1"><span class="toc-section-number">18.2.4</span> Scatterplots</a></li>
<li><a href="appendix.html#line-charts" id="toc-line-charts"><span class="toc-section-number">18.2.5</span> Line Charts</a></li>
<li><a href="appendix.html#slopegraphs-1" id="toc-slopegraphs-1"><span class="toc-section-number">18.2.6</span> Slopegraphs</a></li>
<li><a href="appendix.html#bar-charts-1" id="toc-bar-charts-1"><span class="toc-section-number">18.2.7</span> Bar Charts</a></li>
<li><a href="appendix.html#combination-charts-1" id="toc-combination-charts-1"><span class="toc-section-number">18.2.8</span> Combination Charts</a></li>
<li><a href="appendix.html#waterfall-charts-1" id="toc-waterfall-charts-1"><span class="toc-section-number">18.2.9</span> Waterfall Charts</a></li>
<li><a href="appendix.html#waffle-charts-1" id="toc-waffle-charts-1"><span class="toc-section-number">18.2.10</span> Waffle Charts</a></li>
<li><a href="appendix.html#sankey-diagrams-1" id="toc-sankey-diagrams-1"><span class="toc-section-number">18.2.11</span> Sankey Diagrams</a></li>
<li><a href="appendix.html#pie-charts-1" id="toc-pie-charts-1"><span class="toc-section-number">18.2.12</span> Pie Charts</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Fundamentals of People Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix" class="section level1" number="18">
<h1><span class="header-section-number">18</span> Appendix</h1>
<div id="d-framework-1" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> 4D Framework</h2>
<p>This section provides a detailed set of considerations and framework for structuring analytics projects.</p>
<div id="discover" class="section level3" number="18.1.1">
<h3><span class="header-section-number">18.1.1</span> Discover</h3>
<p>During the Discover phase, it is important to remain in the problem zone; seek to understand your clients’ needs through active listening and questions. This is not the time for solutioning or committing to any specific deliverables or timelines. If the client’s needs are ambiguous, proceeding without clarity is unlikely to result in a favorable outcome.</p>
<p>It is generally helpful to think about analytics solutions – whether a dashboard with basic metrics and trends or an advanced analysis – like a Product Owner thinks about the initial and subsequent releases of a commercial product. A <strong>Minimum Viable Product (MVP)</strong> is a version of the solution with the minimum number of features to be useful to early customers who can provide feedback for future enhancements. It is important to clarify that the MVP version of solutions often has both a limited number of users and features, which protects against the tendency to boil the ocean by striving to address every question for every stakeholder. Breaking down large projects into small sets of features that are easier to communicate and adopt provides space for agility and real-time adjustments to the product roadmap per user feedback.</p>
<p>There are some initial questions and considerations that will help frame an analytics project and support its success.</p>
<p><strong>Client</strong></p>
<p>Who is the client? A client can be a person or organization contracting you for consulting services, or an internal stakeholder within your organization who has need. What is important to them?</p>
<p><strong>Primary Objective</strong></p>
<ul>
<li>What is the client ultimately hoping to accomplish?</li>
<li>Is the request merely to satisfy one’s curiosity, or are there actions that can realistically be taken to materially influence the stated objective?</li>
</ul>
<p><strong>Problem Statement</strong></p>
<ul>
<li>One of the most important early steps is clearly defining the problem statement. If your understanding of the problem – after translating from the business anecdotes in which it was likely initially expressed – is misaligned with the client’s needs, none of the subsequent steps matter.</li>
</ul>
<p><strong>Guiding Theories</strong></p>
<ul>
<li>What theoretical explanations can the client offer as potential rationalizations for the phenomena of interest?</li>
<li>Are there existing theories in the organizational literature that should guide how the problem is tackled (e.g., findings from similar research implemented in other contexts)?</li>
</ul>
<p><strong>Research Questions</strong></p>
<p>To respect the nuances of the problem statement, it is important to unpack it and frame as a set of overarching questions to guide the research.</p>
<ul>
<li>Q1: …</li>
<li>Q2: …</li>
<li>Q3: …</li>
</ul>
<p>To ensure it is possible (and appropriate) to take action in response to these questions, consider the following after drafting each question: “What would I do if I knew the answer?”</p>
<p><strong>Research Hypotheses</strong></p>
<p>Once research questions are developed, what do you expect to find based on anecdotal stories or empirical findings? As a next step, these expectations should be expressed in the form of research hypotheses. Note that these research hypotheses are different from statistical hypotheses; both will be covered in detail in later chapters.</p>
<ul>
<li>H1: …</li>
<li>H2: …</li>
<li>H3: …</li>
</ul>
<p>To ensure the hypotheses lend to actionable analyses, it is important to consider the following: “What does success look like?” In other words, once the project is complete, against which success measures will the project’s success be determined? Curiosity is not a business reason and hope is not a reasonable strategy. The following questions may prove helpful in the promotion of actionable – over merely interesting – outcomes:</p>
<ul>
<li>What will be done if the hypotheses are supported?</li>
<li>What will be done if the hypotheses are <em>not</em> supported?</li>
</ul>
<p><strong>Assumptions</strong></p>
<p>At this point, it’s helpful to consider what assumptions may be embedded in this discovery work. Are the questions and hypotheses rooted in what the client has theorized, or are these the product of an ambiguous understanding of the client’s needs?</p>
<p><strong>Cadence</strong></p>
<ul>
<li>Is this analysis a one-off, or could there be a need to refresh this analysis on a regular cadence?</li>
<li>Are there dates associated with programs or actions this analysis is intended to support?</li>
</ul>
<p><strong>Aggregation</strong></p>
<p>Is there a need for individual-level detail supporting the analysis? Aggregate data should generally be the default unless a compelling justification exists and exception granted from legal and privacy partners. One important role of analysts is to help keep the audience focused on the bigger picture and findings. Access to individual-level detail can not only introduce unnecessary legal and compliance risk but can also lead to questions and probing that can delay taking necessary actions based on the results.</p>
<p><strong>Deliverable</strong></p>
<p>What is the preferred method of communicating the results of the analysis (e.g., interactive dashboard, static slide deck, document)? It is important to determine this early so that subsequent efforts can be structured to support the preferred deliverable. For example, if an interactive dashboard is preferred, does your Engineering department need to prioritize dependent tasks such as data pipelines, row-level security, BI development, and migrations to production servers?</p>
<p><strong>Filters &amp; Dimensions</strong></p>
<p>How does your client prefer to segment the workforce? Some common grouping dimensions are business unit, division, team, job family, location, tenure, and management level, but the client may have custom segmentation requirements that will be important to identify and define early in the project.</p>
</div>
<div id="design" class="section level3" number="18.1.2">
<h3><span class="header-section-number">18.1.2</span> Design</h3>
<p>Perhaps the most important initial question to answer in the design phase is: “Does anything already exist that addresses part, or all, of the client’s objectives?” If an existing solution will suffice, or a previous analysis can be easily refreshed with recent data, it may be possible to allocate time and resources elsewhere. If related or complimentary analyses have already been performed, they may accelerate new analyses.</p>
<p>The end-user experience is of paramount importance during the Design phase, as solutions should have a consistent look and feel regardless of who developed them. Defining and implementing design guidelines, such as those outlined in Chapter <a href="data-viz.html#data-viz">15</a>, will ensure consistency across analytics projects as well as within large projects in which multiple analysts are collaborating on various elements of the solution.</p>
<p><strong>Data Privacy</strong></p>
<p>Are there potential concerns with the study’s objective, planned actions, and/or requested data elements from an employee privacy or legal perspective? A cross-functional data governance committee can help with efficient and consistent decisioning on requests for people data and analytics.</p>
<p>In cases where sensitive attributes such as gender, ethnicity, age, sexual orientation, and disability status are requested, it is best to consult with legal and privacy partners to ensure they green light the intended use of the data. The decision on whether or not to include these sensitive data elements is often less about what the audience can view (e.g., People Partners may already have access to the information at the individual level in the source system) and more anchored in what they plan to do with the information.</p>
<p><strong>Data Sources &amp; Elements</strong></p>
<p>Is the required data already accessible in a data warehouse or other analytics environment? If not, does it need to be? What is required to achieve this?</p>
<ul>
<li>What data sources are required?</li>
<li>What data elements are required?</li>
</ul>
<p><strong>Data Quality</strong></p>
<p>It is important to understand the data generative process and never make assumptions about how anomalies or missing data should be interpreted. After identifying what data sources will be required for a particular analysis, it is important to meet with source system owners and data stewards to deeply understand the business processes by which data are generated in the system(s). An ideal should always be <em>unimpeachable</em> data quality at the analysis presentation stage, and this begins with an early understanding and investigation of data quality in the source systems. Below are some helpful questions to consider:</p>
<ul>
<li>Is there a better data source, such as data generated further upstream?</li>
<li>Are the data actively validated with automated data quality checks and regular exceptions reports?</li>
<li>What is the SLA for the data refreshes, and how often is this SLA met?</li>
<li>Is there a clear (and accessible) data source owner/steward?</li>
<li>Is there comprehensive documentation and field definitions?</li>
<li>Do the tables drive business critical deliverables?</li>
<li>Who are the other consumers of the data?</li>
</ul>
<p><strong>Variables</strong></p>
<p>How will the constructs be measured (e.g., survey instrument, derived attribute, calculated field)?</p>
<p><strong>Analysis Method</strong></p>
<p>What are the appropriate analysis methods based on the research hypotheses? If modeling is required, is it more important to index on accuracy or interpretability?</p>
<p><strong>Dependencies</strong></p>
<p>Are other teams required to develop this solution? What is the nature of the work each dependent team will perform? Are there required system configuration changes? Do these teams have capacity to support?</p>
<p><strong>Change Management</strong></p>
<p>Will this solution impact current processes or solutions? If so, what is the change management plan to facilitate a seamless transition and user experience?</p>
<p><strong>Sign-Off</strong></p>
<p>Generally, it is best for the client to signoff on the problem statement, analysis approach, and wire frame for the deliverable (if applicable) before providing an ETA and proceeding to the development phase. This ensures alignment on the client’s needs and the perceived utility of the solution in addressing those needs.</p>
</div>
<div id="develop" class="section level3" number="18.1.3">
<h3><span class="header-section-number">18.1.3</span> Develop</h3>
<p>While development patterns can vary widely across analytics teams, establishing a set of standards can pay dividends in the form of greater efficiency and reliability over time. Pattern-based development ensures analysts who were not involved in a particular project can access the code and easily and quickly understand each step of the analysis.</p>
<p><strong>Development Patterns</strong></p>
<ul>
<li>Are there development patterns that should guide the development approach to support consistency?</li>
<li>Are there existing calculated fields that can/should be leveraged for derived data?</li>
<li>Are there best practices that should be employed to optimize performance (e.g., load time for dashboards, executing complex queries during non-peak times)?</li>
<li>Are there standard color palettes that should be applied?</li>
</ul>
<p><strong>Productionalizable Code</strong></p>
<ul>
<li>How do models and data science pipelines need to be developed to facilitate a seamless migration from lower to upper environments? For example, initial EDA may be performed using curated data in flat files for the purpose of identifying meaningful trends, relationships, and differences, but where will this data need to be sourced in production to automate the refresh of models at a regular interval? If the data were provided from multiple source systems, what joins are required to integrate the data? What transformation logic or business rules need to be applied to reproduce the curated data?</li>
</ul>
<p><strong>Unit Testing</strong></p>
<ul>
<li>What test cases will ensure the veracity of data?</li>
<li>Who will perform the testing?</li>
</ul>
<p><strong>User Acceptance Testing (UAT)</strong></p>
<ul>
<li>In the spirit of agility and constant contact with the client to prevent surprises, it is generally a good idea to have the client take the solution for a test run within the UAT environment and then provide sign-off before migrating to production. If the deliverable is a deck or doc with results from a model, UAT may surface clarifying questions that can be addressed before releasing to the broader audience.</li>
</ul>
</div>
<div id="deliver" class="section level3" number="18.1.4">
<h3><span class="header-section-number">18.1.4</span> Deliver</h3>
<p>The Deliver phase can take many forms depending on the solution being released. If the solution is designed for a large user base, a series of recorded trainings may be in order so that there is a helpful reference for those unable to attend the live sessions or new joiners in the future. It is important to monitor success measures, which could be insights aligned to research hypotheses, dashboard utilization metrics, progress following data-informed interventions, or any number of others defined within the Discover phase.</p>
</div>
</div>
<div id="data-visualization" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> Data Visualization</h2>
<p>This section provides the code needed to reproduce visuals in Chapter <a href="data-viz.html#data-viz">15</a>.</p>
<div id="step-by-step-visual-upgrade-1" class="section level3" number="18.2.1">
<h3><span class="header-section-number">18.2.1</span> Step-by-Step Visual Upgrade</h3>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="appendix.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb482-2"><a href="appendix.html#cb482-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb482-3"><a href="appendix.html#cb482-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb482-4"><a href="appendix.html#cb482-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-5"><a href="appendix.html#cb482-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb482-6"><a href="appendix.html#cb482-6" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb482-7"><a href="appendix.html#cb482-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-8"><a href="appendix.html#cb482-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for active employees</span></span>
<span id="cb482-9"><a href="appendix.html#cb482-9" aria-hidden="true" tabindex="-1"></a>smmry_ed_field <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb482-10"><a href="appendix.html#cb482-10" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb482-11"><a href="appendix.html#cb482-11" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">count</span>(ed_field)</span>
<span id="cb482-12"><a href="appendix.html#cb482-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-13"><a href="appendix.html#cb482-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Build Bar Chart with Defaults</span></span>
<span id="cb482-14"><a href="appendix.html#cb482-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-15"><a href="appendix.html#cb482-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb482-16"><a href="appendix.html#cb482-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-17"><a href="appendix.html#cb482-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Remove Legend</span></span>
<span id="cb482-18"><a href="appendix.html#cb482-18" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-19"><a href="appendix.html#cb482-19" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-20"><a href="appendix.html#cb482-20" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb482-21"><a href="appendix.html#cb482-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-22"><a href="appendix.html#cb482-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Assign Colors Strategically</span></span>
<span id="cb482-23"><a href="appendix.html#cb482-23" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-24"><a href="appendix.html#cb482-24" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-25"><a href="appendix.html#cb482-25" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-26"><a href="appendix.html#cb482-26" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-27"><a href="appendix.html#cb482-27" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-28"><a href="appendix.html#cb482-28" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-29"><a href="appendix.html#cb482-29" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-30"><a href="appendix.html#cb482-30" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-31"><a href="appendix.html#cb482-31" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb482-32"><a href="appendix.html#cb482-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-33"><a href="appendix.html#cb482-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Add Axis Titles and Margins</span></span>
<span id="cb482-34"><a href="appendix.html#cb482-34" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-35"><a href="appendix.html#cb482-35" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-36"><a href="appendix.html#cb482-36" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-37"><a href="appendix.html#cb482-37" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-38"><a href="appendix.html#cb482-38" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-39"><a href="appendix.html#cb482-39" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-40"><a href="appendix.html#cb482-40" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-41"><a href="appendix.html#cb482-41" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-42"><a href="appendix.html#cb482-42" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-43"><a href="appendix.html#cb482-43" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-44"><a href="appendix.html#cb482-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb482-45"><a href="appendix.html#cb482-45" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb482-46"><a href="appendix.html#cb482-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-47"><a href="appendix.html#cb482-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Add Left-Justified Title</span></span>
<span id="cb482-48"><a href="appendix.html#cb482-48" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-49"><a href="appendix.html#cb482-49" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-50"><a href="appendix.html#cb482-50" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-51"><a href="appendix.html#cb482-51" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-52"><a href="appendix.html#cb482-52" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-53"><a href="appendix.html#cb482-53" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-54"><a href="appendix.html#cb482-54" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-55"><a href="appendix.html#cb482-55" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-56"><a href="appendix.html#cb482-56" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-57"><a href="appendix.html#cb482-57" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-58"><a href="appendix.html#cb482-58" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb482-59"><a href="appendix.html#cb482-59" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb482-60"><a href="appendix.html#cb482-60" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb482-61"><a href="appendix.html#cb482-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-62"><a href="appendix.html#cb482-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Remove Background</span></span>
<span id="cb482-63"><a href="appendix.html#cb482-63" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-64"><a href="appendix.html#cb482-64" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-65"><a href="appendix.html#cb482-65" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-66"><a href="appendix.html#cb482-66" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-67"><a href="appendix.html#cb482-67" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-68"><a href="appendix.html#cb482-68" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-69"><a href="appendix.html#cb482-69" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-70"><a href="appendix.html#cb482-70" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-71"><a href="appendix.html#cb482-71" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-72"><a href="appendix.html#cb482-72" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-73"><a href="appendix.html#cb482-73" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-74"><a href="appendix.html#cb482-74" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb482-75"><a href="appendix.html#cb482-75" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb482-76"><a href="appendix.html#cb482-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-77"><a href="appendix.html#cb482-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 7: Remove Axis Ticks</span></span>
<span id="cb482-78"><a href="appendix.html#cb482-78" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-79"><a href="appendix.html#cb482-79" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-80"><a href="appendix.html#cb482-80" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-81"><a href="appendix.html#cb482-81" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-82"><a href="appendix.html#cb482-82" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-83"><a href="appendix.html#cb482-83" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-84"><a href="appendix.html#cb482-84" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-85"><a href="appendix.html#cb482-85" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-86"><a href="appendix.html#cb482-86" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-87"><a href="appendix.html#cb482-87" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-88"><a href="appendix.html#cb482-88" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-89"><a href="appendix.html#cb482-89" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb482-90"><a href="appendix.html#cb482-90" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb482-91"><a href="appendix.html#cb482-91" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-92"><a href="appendix.html#cb482-92" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb482-93"><a href="appendix.html#cb482-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-94"><a href="appendix.html#cb482-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Mute Titles</span></span>
<span id="cb482-95"><a href="appendix.html#cb482-95" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-96"><a href="appendix.html#cb482-96" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-97"><a href="appendix.html#cb482-97" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-98"><a href="appendix.html#cb482-98" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-99"><a href="appendix.html#cb482-99" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-100"><a href="appendix.html#cb482-100" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-101"><a href="appendix.html#cb482-101" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-102"><a href="appendix.html#cb482-102" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-103"><a href="appendix.html#cb482-103" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-104"><a href="appendix.html#cb482-104" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-105"><a href="appendix.html#cb482-105" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-106"><a href="appendix.html#cb482-106" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-107"><a href="appendix.html#cb482-107" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-108"><a href="appendix.html#cb482-108" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-109"><a href="appendix.html#cb482-109" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-110"><a href="appendix.html#cb482-110" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb482-111"><a href="appendix.html#cb482-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-112"><a href="appendix.html#cb482-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 9: Flip Axes</span></span>
<span id="cb482-113"><a href="appendix.html#cb482-113" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-114"><a href="appendix.html#cb482-114" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-115"><a href="appendix.html#cb482-115" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb482-116"><a href="appendix.html#cb482-116" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-117"><a href="appendix.html#cb482-117" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-118"><a href="appendix.html#cb482-118" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-119"><a href="appendix.html#cb482-119" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-120"><a href="appendix.html#cb482-120" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-121"><a href="appendix.html#cb482-121" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-122"><a href="appendix.html#cb482-122" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-123"><a href="appendix.html#cb482-123" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-124"><a href="appendix.html#cb482-124" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-125"><a href="appendix.html#cb482-125" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-126"><a href="appendix.html#cb482-126" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-127"><a href="appendix.html#cb482-127" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-128"><a href="appendix.html#cb482-128" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-129"><a href="appendix.html#cb482-129" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb482-130"><a href="appendix.html#cb482-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-131"><a href="appendix.html#cb482-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 10: Sort Data</span></span>
<span id="cb482-132"><a href="appendix.html#cb482-132" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(ed_field, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-133"><a href="appendix.html#cb482-133" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-134"><a href="appendix.html#cb482-134" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb482-135"><a href="appendix.html#cb482-135" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-136"><a href="appendix.html#cb482-136" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-137"><a href="appendix.html#cb482-137" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-138"><a href="appendix.html#cb482-138" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-139"><a href="appendix.html#cb482-139" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-140"><a href="appendix.html#cb482-140" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-141"><a href="appendix.html#cb482-141" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-142"><a href="appendix.html#cb482-142" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-143"><a href="appendix.html#cb482-143" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-144"><a href="appendix.html#cb482-144" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-145"><a href="appendix.html#cb482-145" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-146"><a href="appendix.html#cb482-146" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-147"><a href="appendix.html#cb482-147" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-148"><a href="appendix.html#cb482-148" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb482-149"><a href="appendix.html#cb482-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-150"><a href="appendix.html#cb482-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Pre/post viz comparison</span></span>
<span id="cb482-151"><a href="appendix.html#cb482-151" aria-hidden="true" tabindex="-1"></a>viz_pre <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-152"><a href="appendix.html#cb482-152" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb482-153"><a href="appendix.html#cb482-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-154"><a href="appendix.html#cb482-154" aria-hidden="true" tabindex="-1"></a>viz_post <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(ed_field, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb482-155"><a href="appendix.html#cb482-155" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb482-156"><a href="appendix.html#cb482-156" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb482-157"><a href="appendix.html#cb482-157" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb482-158"><a href="appendix.html#cb482-158" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-159"><a href="appendix.html#cb482-159" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb482-160"><a href="appendix.html#cb482-160" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb482-161"><a href="appendix.html#cb482-161" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-162"><a href="appendix.html#cb482-162" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb482-163"><a href="appendix.html#cb482-163" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb482-164"><a href="appendix.html#cb482-164" aria-hidden="true" tabindex="-1"></a>              ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb482-165"><a href="appendix.html#cb482-165" aria-hidden="true" tabindex="-1"></a>                             <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-166"><a href="appendix.html#cb482-166" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-167"><a href="appendix.html#cb482-167" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-168"><a href="appendix.html#cb482-168" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb482-169"><a href="appendix.html#cb482-169" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb482-170"><a href="appendix.html#cb482-170" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb482-171"><a href="appendix.html#cb482-171" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb482-172"><a href="appendix.html#cb482-172" aria-hidden="true" tabindex="-1"></a><span class="co"># Display pre/post visualizations side-by-side</span></span>
<span id="cb482-173"><a href="appendix.html#cb482-173" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(viz_post, viz_pre, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="tables-1" class="section level3" number="18.2.2">
<h3><span class="header-section-number">18.2.2</span> Tables</h3>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="appendix.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb483-2"><a href="appendix.html#cb483-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-3"><a href="appendix.html#cb483-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb483-4"><a href="appendix.html#cb483-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb483-5"><a href="appendix.html#cb483-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-6"><a href="appendix.html#cb483-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb483-7"><a href="appendix.html#cb483-7" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb483-8"><a href="appendix.html#cb483-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-9"><a href="appendix.html#cb483-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb483-10"><a href="appendix.html#cb483-10" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb483-11"><a href="appendix.html#cb483-11" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb483-12"><a href="appendix.html#cb483-12" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb483-13"><a href="appendix.html#cb483-13" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb483-14"><a href="appendix.html#cb483-14" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb483-15"><a href="appendix.html#cb483-15" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb483-16"><a href="appendix.html#cb483-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb483-17"><a href="appendix.html#cb483-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-18"><a href="appendix.html#cb483-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb483-19"><a href="appendix.html#cb483-19" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb483-20"><a href="appendix.html#cb483-20" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb483-21"><a href="appendix.html#cb483-21" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb483-22"><a href="appendix.html#cb483-22" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb483-23"><a href="appendix.html#cb483-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-24"><a href="appendix.html#cb483-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb483-25"><a href="appendix.html#cb483-25" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span>
<span id="cb483-26"><a href="appendix.html#cb483-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-27"><a href="appendix.html#cb483-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign proper case field names</span></span>
<span id="cb483-28"><a href="appendix.html#cb483-28" aria-hidden="true" tabindex="-1"></a>dept_tenure_proper <span class="ot">&lt;-</span> dept_tenure <span class="sc">%&gt;%</span></span>
<span id="cb483-29"><a href="appendix.html#cb483-29" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="st">&#39;Department&#39;</span> <span class="ot">=</span> dept,</span>
<span id="cb483-30"><a href="appendix.html#cb483-30" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Tenure&#39;</span> <span class="ot">=</span> tenure_band,</span>
<span id="cb483-31"><a href="appendix.html#cb483-31" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Count&#39;</span> <span class="ot">=</span> cnt)</span></code></pre></div>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="appendix.html#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Table </span><span class="al">###</span></span>
<span id="cb484-2"><a href="appendix.html#cb484-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-3"><a href="appendix.html#cb484-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb484-4"><a href="appendix.html#cb484-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb484-5"><a href="appendix.html#cb484-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-6"><a href="appendix.html#cb484-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Format output with datatable</span></span>
<span id="cb484-7"><a href="appendix.html#cb484-7" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(dept_tenure_proper, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="heatmaps-1" class="section level3" number="18.2.3">
<h3><span class="header-section-number">18.2.3</span> Heatmaps</h3>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="appendix.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb485-2"><a href="appendix.html#cb485-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-3"><a href="appendix.html#cb485-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb485-4"><a href="appendix.html#cb485-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb485-5"><a href="appendix.html#cb485-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-6"><a href="appendix.html#cb485-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb485-7"><a href="appendix.html#cb485-7" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb485-8"><a href="appendix.html#cb485-8" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb485-9"><a href="appendix.html#cb485-9" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb485-10"><a href="appendix.html#cb485-10" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb485-11"><a href="appendix.html#cb485-11" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb485-12"><a href="appendix.html#cb485-12" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb485-13"><a href="appendix.html#cb485-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb485-14"><a href="appendix.html#cb485-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-15"><a href="appendix.html#cb485-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb485-16"><a href="appendix.html#cb485-16" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb485-17"><a href="appendix.html#cb485-17" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb485-18"><a href="appendix.html#cb485-18" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb485-19"><a href="appendix.html#cb485-19" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb485-20"><a href="appendix.html#cb485-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-21"><a href="appendix.html#cb485-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb485-22"><a href="appendix.html#cb485-22" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="appendix.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Heatmap </span><span class="al">###</span></span>
<span id="cb486-2"><a href="appendix.html#cb486-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb486-3"><a href="appendix.html#cb486-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb486-4"><a href="appendix.html#cb486-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb486-5"><a href="appendix.html#cb486-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb486-6"><a href="appendix.html#cb486-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(dept_tenure, <span class="fu">aes</span>(<span class="at">x =</span> tenure_band, <span class="at">y =</span> dept, <span class="at">fill =</span> cnt)) <span class="sc">+</span></span>
<span id="cb486-7"><a href="appendix.html#cb486-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb486-8"><a href="appendix.html#cb486-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;A large portion of our workforce has between 3 and 10 years</span><span class="sc">\n</span><span class="st"> of company tenure and works within R&amp;D.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Tenure&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb486-9"><a href="appendix.html#cb486-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Employee Count&quot;</span>)) <span class="sc">+</span></span>
<span id="cb486-10"><a href="appendix.html#cb486-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">&quot;#F2F2F2&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#0070C0&quot;</span>) <span class="sc">+</span></span>
<span id="cb486-11"><a href="appendix.html#cb486-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb486-12"><a href="appendix.html#cb486-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb486-13"><a href="appendix.html#cb486-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb486-14"><a href="appendix.html#cb486-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb486-15"><a href="appendix.html#cb486-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb486-16"><a href="appendix.html#cb486-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="scatterplots-1" class="section level3" number="18.2.4">
<h3><span class="header-section-number">18.2.4</span> Scatterplots</h3>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="appendix.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb487-2"><a href="appendix.html#cb487-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-3"><a href="appendix.html#cb487-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset df to active sales employees</span></span>
<span id="cb487-4"><a href="appendix.html#cb487-4" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, dept <span class="sc">==</span> <span class="st">&#39;Sales&#39;</span> <span class="sc">&amp;</span> active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb487-5"><a href="appendix.html#cb487-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-6"><a href="appendix.html#cb487-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set quote attainment flag for data viz coloring</span></span>
<span id="cb487-7"><a href="appendix.html#cb487-7" aria-hidden="true" tabindex="-1"></a>sales<span class="sc">$</span>quota_flg <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sales<span class="sc">$</span>ytd_sales <span class="sc">&gt;=</span> <span class="dv">150000</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="appendix.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Scatterplots </span><span class="al">###</span></span>
<span id="cb488-2"><a href="appendix.html#cb488-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-3"><a href="appendix.html#cb488-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb488-4"><a href="appendix.html#cb488-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb488-5"><a href="appendix.html#cb488-5" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(scales)</span>
<span id="cb488-6"><a href="appendix.html#cb488-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-7"><a href="appendix.html#cb488-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic scatterplot</span></span>
<span id="cb488-8"><a href="appendix.html#cb488-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sales, <span class="fu">aes</span>(<span class="at">x =</span> work_exp, <span class="at">y =</span> ytd_sales, <span class="at">group =</span> quota_flg)) <span class="sc">+</span></span>
<span id="cb488-9"><a href="appendix.html#cb488-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb488-10"><a href="appendix.html#cb488-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The relationship between work experience and YTD sales is positive.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Work Experience&#39;</span>, <span class="at">y =</span> <span class="st">&#39;YTD Sales (USD)&#39;</span>) <span class="sc">+</span></span>
<span id="cb488-11"><a href="appendix.html#cb488-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb488-12"><a href="appendix.html#cb488-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb488-13"><a href="appendix.html#cb488-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb488-14"><a href="appendix.html#cb488-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb488-15"><a href="appendix.html#cb488-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb488-16"><a href="appendix.html#cb488-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb488-17"><a href="appendix.html#cb488-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb488-18"><a href="appendix.html#cb488-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span>
<span id="cb488-19"><a href="appendix.html#cb488-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-20"><a href="appendix.html#cb488-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot with preattentive attributes</span></span>
<span id="cb488-21"><a href="appendix.html#cb488-21" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sales, <span class="fu">aes</span>(<span class="at">x =</span> work_exp, <span class="at">y =</span> ytd_sales, <span class="at">group =</span> quota_flg)) <span class="sc">+</span></span>
<span id="cb488-22"><a href="appendix.html#cb488-22" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">as.factor</span>(quota_flg))) <span class="sc">+</span></span>
<span id="cb488-23"><a href="appendix.html#cb488-23" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">150000</span>, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>) <span class="sc">+</span> </span>
<span id="cb488-24"><a href="appendix.html#cb488-24" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">159000</span>, <span class="at">label =</span> <span class="st">&quot;Sales Quota = $150k&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb488-25"><a href="appendix.html#cb488-25" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Some employees with more work experience have </span><span class="sc">\n</span><span class="st">already met the full year sales quota.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Work Experience&#39;</span>, <span class="at">y =</span> <span class="st">&#39;YTD Sales (USD)&#39;</span>) <span class="sc">+</span></span>
<span id="cb488-26"><a href="appendix.html#cb488-26" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb488-27"><a href="appendix.html#cb488-27" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb488-28"><a href="appendix.html#cb488-28" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb488-29"><a href="appendix.html#cb488-29" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb488-30"><a href="appendix.html#cb488-30" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb488-31"><a href="appendix.html#cb488-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb488-32"><a href="appendix.html#cb488-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb488-33"><a href="appendix.html#cb488-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb488-34"><a href="appendix.html#cb488-34" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb488-35"><a href="appendix.html#cb488-35" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="line-charts" class="section level3" number="18.2.5">
<h3><span class="header-section-number">18.2.5</span> Line Charts</h3>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="appendix.html#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb489-2"><a href="appendix.html#cb489-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-3"><a href="appendix.html#cb489-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb489-4"><a href="appendix.html#cb489-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb489-5"><a href="appendix.html#cb489-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-6"><a href="appendix.html#cb489-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb489-7"><a href="appendix.html#cb489-7" aria-hidden="true" tabindex="-1"></a>months <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span></span>
<span id="cb489-8"><a href="appendix.html#cb489-8" aria-hidden="true" tabindex="-1"></a>eng_rt <span class="ot">=</span> <span class="dv">5</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="fl">2.7</span>, <span class="fl">2.9</span>) <span class="sc">+</span> <span class="fl">2.41</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">41</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> .<span class="dv">02</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb489-9"><a href="appendix.html#cb489-9" aria-hidden="true" tabindex="-1"></a>fin_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">15</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb489-10"><a href="appendix.html#cb489-10" aria-hidden="true" tabindex="-1"></a>ppl_rt <span class="ot">=</span> <span class="dv">3</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">12</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">4</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb489-11"><a href="appendix.html#cb489-11" aria-hidden="true" tabindex="-1"></a>prd_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">13</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb489-12"><a href="appendix.html#cb489-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-13"><a href="appendix.html#cb489-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine dimensions and metrics within df</span></span>
<span id="cb489-14"><a href="appendix.html#cb489-14" aria-hidden="true" tabindex="-1"></a>attrition_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="fu">rep</span>(months, <span class="dv">4</span>),</span>
<span id="cb489-15"><a href="appendix.html#cb489-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">dept =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="fu">length</span>(months)), </span>
<span id="cb489-16"><a href="appendix.html#cb489-16" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Finance&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb489-17"><a href="appendix.html#cb489-17" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;People&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb489-18"><a href="appendix.html#cb489-18" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Product&#39;</span>, <span class="fu">length</span>(months))),</span>
<span id="cb489-19"><a href="appendix.html#cb489-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">rate =</span> <span class="fu">c</span>(eng_rt,</span>
<span id="cb489-20"><a href="appendix.html#cb489-20" aria-hidden="true" tabindex="-1"></a>                                     fin_rt,</span>
<span id="cb489-21"><a href="appendix.html#cb489-21" aria-hidden="true" tabindex="-1"></a>                                     ppl_rt,</span>
<span id="cb489-22"><a href="appendix.html#cb489-22" aria-hidden="true" tabindex="-1"></a>                                     prd_rt))</span>
<span id="cb489-23"><a href="appendix.html#cb489-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-24"><a href="appendix.html#cb489-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordered factor for subsequent layering of lines in graph (last value takes the top position)</span></span>
<span id="cb489-25"><a href="appendix.html#cb489-25" aria-hidden="true" tabindex="-1"></a>attrition_dat<span class="sc">$</span>dept <span class="ot">&lt;-</span> <span class="fu">factor</span>(attrition_dat<span class="sc">$</span>dept, <span class="fu">c</span>(<span class="st">&quot;Product&quot;</span>, <span class="st">&quot;Finance&quot;</span>, <span class="st">&quot;People&quot;</span>, <span class="st">&quot;Engineering&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="appendix.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Single Series Line Graphs </span><span class="al">###</span></span>
<span id="cb490-2"><a href="appendix.html#cb490-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-3"><a href="appendix.html#cb490-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb490-4"><a href="appendix.html#cb490-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb490-5"><a href="appendix.html#cb490-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-6"><a href="appendix.html#cb490-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(attrition_dat, dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">group =</span> dept)) <span class="sc">+</span> </span>
<span id="cb490-7"><a href="appendix.html#cb490-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Engineering attrition has increased over the last 24 months, </span><span class="sc">\n</span><span class="st">largely due to an exponential spike in the last year.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>) <span class="sc">+</span></span>
<span id="cb490-8"><a href="appendix.html#cb490-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&#39;#0070C0&#39;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb490-9"><a href="appendix.html#cb490-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb490-10"><a href="appendix.html#cb490-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb490-11"><a href="appendix.html#cb490-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb490-12"><a href="appendix.html#cb490-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb490-13"><a href="appendix.html#cb490-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb490-14"><a href="appendix.html#cb490-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb490-15"><a href="appendix.html#cb490-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb490-16"><a href="appendix.html#cb490-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="appendix.html#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Two Series Line Graphs </span><span class="al">###</span></span>
<span id="cb491-2"><a href="appendix.html#cb491-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb491-3"><a href="appendix.html#cb491-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb491-4"><a href="appendix.html#cb491-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb491-5"><a href="appendix.html#cb491-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb491-6"><a href="appendix.html#cb491-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(attrition_dat, dept <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Product&#39;</span>)), <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">color =</span> dept)) <span class="sc">+</span> </span>
<span id="cb491-7"><a href="appendix.html#cb491-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The attrition trends for Engineering and Product </span><span class="sc">\n</span><span class="st">are negatively correlated over the last year.&#39;</span>,</span>
<span id="cb491-8"><a href="appendix.html#cb491-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb491-9"><a href="appendix.html#cb491-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>,</span>
<span id="cb491-10"><a href="appendix.html#cb491-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb491-11"><a href="appendix.html#cb491-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb491-12"><a href="appendix.html#cb491-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb491-13"><a href="appendix.html#cb491-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Engineering&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb491-14"><a href="appendix.html#cb491-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Product&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb491-15"><a href="appendix.html#cb491-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Engineering&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb491-16"><a href="appendix.html#cb491-16" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Product&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb491-17"><a href="appendix.html#cb491-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb491-18"><a href="appendix.html#cb491-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb491-19"><a href="appendix.html#cb491-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb491-20"><a href="appendix.html#cb491-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb491-21"><a href="appendix.html#cb491-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb491-22"><a href="appendix.html#cb491-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb491-23"><a href="appendix.html#cb491-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="appendix.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Multiple Series Line Graphs </span><span class="al">###</span></span>
<span id="cb492-2"><a href="appendix.html#cb492-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-3"><a href="appendix.html#cb492-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb492-4"><a href="appendix.html#cb492-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb492-5"><a href="appendix.html#cb492-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-6"><a href="appendix.html#cb492-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(attrition_dat, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">color =</span> dept)) <span class="sc">+</span> </span>
<span id="cb492-7"><a href="appendix.html#cb492-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The attrition trend for Engineering is quite different </span><span class="sc">\n</span><span class="st">relative to attrition patterns for other departments.&#39;</span>,</span>
<span id="cb492-8"><a href="appendix.html#cb492-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb492-9"><a href="appendix.html#cb492-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>,</span>
<span id="cb492-10"><a href="appendix.html#cb492-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb492-11"><a href="appendix.html#cb492-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb492-12"><a href="appendix.html#cb492-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb492-13"><a href="appendix.html#cb492-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Engineering&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb492-14"><a href="appendix.html#cb492-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Product&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb492-15"><a href="appendix.html#cb492-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Finance&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Finance&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb492-16"><a href="appendix.html#cb492-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;People&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;People&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb492-17"><a href="appendix.html#cb492-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Engineering&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb492-18"><a href="appendix.html#cb492-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Product&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb492-19"><a href="appendix.html#cb492-19" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Finance&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb492-20"><a href="appendix.html#cb492-20" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;People&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb492-21"><a href="appendix.html#cb492-21" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb492-22"><a href="appendix.html#cb492-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb492-23"><a href="appendix.html#cb492-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb492-24"><a href="appendix.html#cb492-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb492-25"><a href="appendix.html#cb492-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb492-26"><a href="appendix.html#cb492-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb492-27"><a href="appendix.html#cb492-27" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="slopegraphs-1" class="section level3" number="18.2.6">
<h3><span class="header-section-number">18.2.6</span> Slopegraphs</h3>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="appendix.html#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb493-2"><a href="appendix.html#cb493-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb493-3"><a href="appendix.html#cb493-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb493-4"><a href="appendix.html#cb493-4" aria-hidden="true" tabindex="-1"></a>prepost_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Time 1&#39;</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">&#39;Time 2&#39;</span>, <span class="dv">2</span>)),</span>
<span id="cb493-5"><a href="appendix.html#cb493-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Treatment&#39;</span>, <span class="st">&#39;Control&#39;</span>), <span class="dv">2</span>),</span>
<span id="cb493-6"><a href="appendix.html#cb493-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">score =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">55</span>, <span class="dv">16</span>))</span></code></pre></div>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="appendix.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Slopegraphs </span><span class="al">###</span></span>
<span id="cb494-2"><a href="appendix.html#cb494-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-3"><a href="appendix.html#cb494-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb494-4"><a href="appendix.html#cb494-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb494-5"><a href="appendix.html#cb494-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-6"><a href="appendix.html#cb494-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate treatment and control group changes for inclusion in annotation</span></span>
<span id="cb494-7"><a href="appendix.html#cb494-7" aria-hidden="true" tabindex="-1"></a>treatment_chg <span class="ot">&lt;-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="at">select =</span> score) <span class="sc">-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 1&#39;</span>, <span class="at">select =</span> score)</span>
<span id="cb494-8"><a href="appendix.html#cb494-8" aria-hidden="true" tabindex="-1"></a>control_chg <span class="ot">&lt;-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="at">select =</span> score) <span class="sc">-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 1&#39;</span>, <span class="at">select =</span> score)</span>
<span id="cb494-9"><a href="appendix.html#cb494-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-10"><a href="appendix.html#cb494-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(prepost_scores, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> score, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb494-11"><a href="appendix.html#cb494-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> group), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb494-12"><a href="appendix.html#cb494-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> group), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb494-13"><a href="appendix.html#cb494-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">expand_limits</span>(<span class="at">y =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb494-14"><a href="appendix.html#cb494-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2.1</span>, <span class="at">y =</span> prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>] <span class="sc">-</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>], <span class="st">&quot;% (&quot;</span>, <span class="fu">ifelse</span>(treatment_chg <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&#39;+&#39;</span>, <span class="st">&#39;&#39;</span>), treatment_chg, <span class="st">&quot;)&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Treatment Group&quot;</span>), <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb494-15"><a href="appendix.html#cb494-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2.1</span>, <span class="at">y =</span> prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>] <span class="sc">-</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>], <span class="st">&quot;% (&quot;</span>, <span class="fu">ifelse</span>(control_chg <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&#39;+&#39;</span>, <span class="st">&#39;&#39;</span>), control_chg, <span class="st">&quot;)&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Control Group&quot;</span>), <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb494-16"><a href="appendix.html#cb494-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;          A more favorable change in engagement was observed </span><span class="sc">\n</span><span class="st">          for the treatment group relative to </span><span class="sc">\n</span><span class="st">          the control group.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Observation Period&#39;</span>) <span class="sc">+</span></span>
<span id="cb494-17"><a href="appendix.html#cb494-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Control&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb494-18"><a href="appendix.html#cb494-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Treatment&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb494-19"><a href="appendix.html#cb494-19" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb494-20"><a href="appendix.html#cb494-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb494-21"><a href="appendix.html#cb494-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb494-22"><a href="appendix.html#cb494-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb494-23"><a href="appendix.html#cb494-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb494-24"><a href="appendix.html#cb494-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb494-25"><a href="appendix.html#cb494-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb494-26"><a href="appendix.html#cb494-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="bar-charts-1" class="section level3" number="18.2.7">
<h3><span class="header-section-number">18.2.7</span> Bar Charts</h3>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="appendix.html#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb495-2"><a href="appendix.html#cb495-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-3"><a href="appendix.html#cb495-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb495-4"><a href="appendix.html#cb495-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb495-5"><a href="appendix.html#cb495-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-6"><a href="appendix.html#cb495-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate favorability distributions</span></span>
<span id="cb495-7"><a href="appendix.html#cb495-7" aria-hidden="true" tabindex="-1"></a>fav_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb495-8"><a href="appendix.html#cb495-8" aria-hidden="true" tabindex="-1"></a>neu_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb495-9"><a href="appendix.html#cb495-9" aria-hidden="true" tabindex="-1"></a>unfav_pct <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> fav_pct <span class="sc">-</span> neu_pct</span>
<span id="cb495-10"><a href="appendix.html#cb495-10" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(fav_pct, neu_pct, unfav_pct)</span>
<span id="cb495-11"><a href="appendix.html#cb495-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-12"><a href="appendix.html#cb495-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Average top box (favorable) score</span></span>
<span id="cb495-13"><a href="appendix.html#cb495-13" aria-hidden="true" tabindex="-1"></a>topbox_avg <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(fav_pct), <span class="dv">0</span>)</span>
<span id="cb495-14"><a href="appendix.html#cb495-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-15"><a href="appendix.html#cb495-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb495-16"><a href="appendix.html#cb495-16" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">dept =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>), <span class="dv">3</span>),</span>
<span id="cb495-17"><a href="appendix.html#cb495-17" aria-hidden="true" tabindex="-1"></a>                                <span class="at">favorability =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Favorable&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Neutral&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Unfavorable&#39;</span>, <span class="dv">7</span>)),</span>
<span id="cb495-18"><a href="appendix.html#cb495-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">pct =</span> scores)</span>
<span id="cb495-19"><a href="appendix.html#cb495-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-20"><a href="appendix.html#cb495-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank departments by top box score to support sorting</span></span>
<span id="cb495-21"><a href="appendix.html#cb495-21" aria-hidden="true" tabindex="-1"></a>dept_rank <span class="ot">&lt;-</span> engagement_scores <span class="sc">%&gt;%</span></span>
<span id="cb495-22"><a href="appendix.html#cb495-22" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">filter</span>(favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb495-23"><a href="appendix.html#cb495-23" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb495-24"><a href="appendix.html#cb495-24" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(pct))) <span class="sc">%&gt;%</span></span>
<span id="cb495-25"><a href="appendix.html#cb495-25" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">select</span>(dept, rank)</span>
<span id="cb495-26"><a href="appendix.html#cb495-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-27"><a href="appendix.html#cb495-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag top department records in df to support conditional coloring</span></span>
<span id="cb495-28"><a href="appendix.html#cb495-28" aria-hidden="true" tabindex="-1"></a>engagement_scores<span class="sc">$</span>top_score <span class="ot">=</span> <span class="fu">ifelse</span>(engagement_scores<span class="sc">$</span>dept <span class="sc">==</span> dept_rank[<span class="dv">1</span>, <span class="st">&#39;dept&#39;</span>], <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb495-29"><a href="appendix.html#cb495-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb495-30"><a href="appendix.html#cb495-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add department rank based on top box scores</span></span>
<span id="cb495-31"><a href="appendix.html#cb495-31" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">left_join</span>(engagement_scores, dept_rank, <span class="at">by =</span> <span class="st">&quot;dept&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="appendix.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Vertical Bar Charts </span><span class="al">###</span></span>
<span id="cb496-2"><a href="appendix.html#cb496-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-3"><a href="appendix.html#cb496-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(engagement_scores, favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, <span class="sc">-</span>pct), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(top_score))) <span class="sc">+</span></span>
<span id="cb496-4"><a href="appendix.html#cb496-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The People team is leading in department-level engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb496-5"><a href="appendix.html#cb496-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb496-6"><a href="appendix.html#cb496-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> topbox_avg, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>) <span class="sc">+</span> </span>
<span id="cb496-7"><a href="appendix.html#cb496-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">7.1</span>, <span class="at">y =</span> topbox_avg <span class="sc">+</span> <span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Avg = &quot;</span>, topbox_avg), <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb496-8"><a href="appendix.html#cb496-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb496-9"><a href="appendix.html#cb496-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb496-10"><a href="appendix.html#cb496-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb496-11"><a href="appendix.html#cb496-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb496-12"><a href="appendix.html#cb496-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb496-13"><a href="appendix.html#cb496-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb496-14"><a href="appendix.html#cb496-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb496-15"><a href="appendix.html#cb496-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb496-16"><a href="appendix.html#cb496-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="appendix.html#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Horizontal Bar Charts </span><span class="al">###</span></span>
<span id="cb497-2"><a href="appendix.html#cb497-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb497-3"><a href="appendix.html#cb497-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(engagement_scores, favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, pct), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(top_score))) <span class="sc">+</span></span>
<span id="cb497-4"><a href="appendix.html#cb497-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The People team is leading in department-level engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb497-5"><a href="appendix.html#cb497-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb497-6"><a href="appendix.html#cb497-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb497-7"><a href="appendix.html#cb497-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> topbox_avg, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>) <span class="sc">+</span> </span>
<span id="cb497-8"><a href="appendix.html#cb497-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> topbox_avg <span class="sc">+</span> <span class="fl">2.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Avg = &quot;</span>, topbox_avg), <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb497-9"><a href="appendix.html#cb497-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb497-10"><a href="appendix.html#cb497-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb497-11"><a href="appendix.html#cb497-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb497-12"><a href="appendix.html#cb497-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb497-13"><a href="appendix.html#cb497-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb497-14"><a href="appendix.html#cb497-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb497-15"><a href="appendix.html#cb497-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb497-16"><a href="appendix.html#cb497-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb497-17"><a href="appendix.html#cb497-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="appendix.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Stacked Bar Charts </span><span class="al">###</span></span>
<span id="cb498-2"><a href="appendix.html#cb498-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb498-3"><a href="appendix.html#cb498-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(engagement_scores, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, <span class="sc">-</span>rank), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">factor</span>(favorability, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Unfavorable&quot;</span>, <span class="st">&quot;Neutral&quot;</span>, <span class="st">&quot;Favorable&quot;</span>)))) <span class="sc">+</span></span>
<span id="cb498-4"><a href="appendix.html#cb498-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Half of Engineering respondents report unfavorable engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb498-5"><a href="appendix.html#cb498-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Favorability&quot;</span>)) <span class="sc">+</span></span>
<span id="cb498-6"><a href="appendix.html#cb498-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb498-7"><a href="appendix.html#cb498-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb498-8"><a href="appendix.html#cb498-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Favorable&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb498-9"><a href="appendix.html#cb498-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Neutral&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>,</span>
<span id="cb498-10"><a href="appendix.html#cb498-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Unfavorable&quot;</span> <span class="ot">=</span> <span class="st">&quot;#ED7D31&quot;</span>)) <span class="sc">+</span></span>
<span id="cb498-11"><a href="appendix.html#cb498-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb498-12"><a href="appendix.html#cb498-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb498-13"><a href="appendix.html#cb498-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb498-14"><a href="appendix.html#cb498-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb498-15"><a href="appendix.html#cb498-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb498-16"><a href="appendix.html#cb498-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb498-17"><a href="appendix.html#cb498-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="combination-charts-1" class="section level3" number="18.2.8">
<h3><span class="header-section-number">18.2.8</span> Combination Charts</h3>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="appendix.html#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb499-2"><a href="appendix.html#cb499-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb499-3"><a href="appendix.html#cb499-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb499-4"><a href="appendix.html#cb499-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb499-5"><a href="appendix.html#cb499-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb499-6"><a href="appendix.html#cb499-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Turnover rates</span></span>
<span id="cb499-7"><a href="appendix.html#cb499-7" aria-hidden="true" tabindex="-1"></a>reg_rt <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">24</span>, <span class="dv">5</span>, <span class="dv">15</span>), <span class="dv">1</span>)</span>
<span id="cb499-8"><a href="appendix.html#cb499-8" aria-hidden="true" tabindex="-1"></a>nonreg_rt <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">24</span>, <span class="dv">1</span>, <span class="dv">5</span>), <span class="dv">1</span>)</span>
<span id="cb499-9"><a href="appendix.html#cb499-9" aria-hidden="true" tabindex="-1"></a>vol_rt <span class="ot">&lt;-</span> reg_rt <span class="sc">+</span> nonreg_rt</span>
<span id="cb499-10"><a href="appendix.html#cb499-10" aria-hidden="true" tabindex="-1"></a>turnover_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>,</span>
<span id="cb499-11"><a href="appendix.html#cb499-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">reg_rt =</span> reg_rt,</span>
<span id="cb499-12"><a href="appendix.html#cb499-12" aria-hidden="true" tabindex="-1"></a>                           <span class="at">nonreg_rt =</span> nonreg_rt,</span>
<span id="cb499-13"><a href="appendix.html#cb499-13" aria-hidden="true" tabindex="-1"></a>                           <span class="at">vol_rt =</span> vol_rt)</span></code></pre></div>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="appendix.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Combination Charts </span><span class="al">###</span></span>
<span id="cb500-2"><a href="appendix.html#cb500-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb500-3"><a href="appendix.html#cb500-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb500-4"><a href="appendix.html#cb500-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb500-5"><a href="appendix.html#cb500-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb500-6"><a href="appendix.html#cb500-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(turnover_dat) <span class="sc">+</span> </span>
<span id="cb500-7"><a href="appendix.html#cb500-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The largest share of monthly voluntary attrition over the 24-month period </span><span class="sc">\n</span><span class="st">has consistently been regrettable terminations.&#39;</span>,</span>
<span id="cb500-8"><a href="appendix.html#cb500-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb500-9"><a href="appendix.html#cb500-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>) <span class="sc">+</span></span>
<span id="cb500-10"><a href="appendix.html#cb500-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> vol_rt), <span class="at">fill =</span> <span class="st">&#39;#E7E6E6&#39;</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb500-11"><a href="appendix.html#cb500-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> reg_rt), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;#ED7D31&quot;</span>, <span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb500-12"><a href="appendix.html#cb500-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> nonreg_rt), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;#9BC2E6&quot;</span>, <span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb500-13"><a href="appendix.html#cb500-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb500-14"><a href="appendix.html#cb500-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb500-15"><a href="appendix.html#cb500-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">7</span>, <span class="at">y =</span> turnover_dat[turnover_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month), <span class="st">&#39;reg_rt&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Regrettable&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#ED7D31&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb500-16"><a href="appendix.html#cb500-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">7</span>, <span class="at">y =</span> turnover_dat[turnover_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(turnover_dat<span class="sc">$</span>month), <span class="st">&#39;nonreg_rt&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Not</span><span class="sc">\n</span><span class="st">Regrettable&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#5B9BD5&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb500-17"><a href="appendix.html#cb500-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb500-18"><a href="appendix.html#cb500-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb500-19"><a href="appendix.html#cb500-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb500-20"><a href="appendix.html#cb500-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb500-21"><a href="appendix.html#cb500-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb500-22"><a href="appendix.html#cb500-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb500-23"><a href="appendix.html#cb500-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="waterfall-charts-1" class="section level3" number="18.2.9">
<h3><span class="header-section-number">18.2.9</span> Waterfall Charts</h3>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="appendix.html#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb501-2"><a href="appendix.html#cb501-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb501-3"><a href="appendix.html#cb501-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate headcount data with id field to define bar order</span></span>
<span id="cb501-4"><a href="appendix.html#cb501-4" aria-hidden="true" tabindex="-1"></a>hc_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb501-5"><a href="appendix.html#cb501-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">event =</span> <span class="fu">c</span>(<span class="st">&quot;Starting HC&quot;</span>, <span class="st">&quot;Hires&quot;</span>, <span class="st">&quot;Transfers In&quot;</span>, <span class="st">&quot;Transfers Out&quot;</span>, <span class="st">&quot;Exits&quot;</span>, <span class="st">&quot;Ending HC&quot;</span>),</span>
<span id="cb501-6"><a href="appendix.html#cb501-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Headcount&quot;</span>),</span>
<span id="cb501-7"><a href="appendix.html#cb501-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="dv">130</span>),</span>
<span id="cb501-8"><a href="appendix.html#cb501-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">start =</span> <span class="cn">NA</span>,</span>
<span id="cb501-9"><a href="appendix.html#cb501-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">end =</span> <span class="cn">NA</span>)</span>
<span id="cb501-10"><a href="appendix.html#cb501-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb501-11"><a href="appendix.html#cb501-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and end values to support waterfall chart</span></span>
<span id="cb501-12"><a href="appendix.html#cb501-12" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(hc_dat<span class="sc">$</span>count)</span>
<span id="cb501-13"><a href="appendix.html#cb501-13" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>), <span class="dv">0</span>)</span>
<span id="cb501-14"><a href="appendix.html#cb501-14" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>start <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb501-15"><a href="appendix.html#cb501-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb501-16"><a href="appendix.html#cb501-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap start/end values for last record (Ending HC)</span></span>
<span id="cb501-17"><a href="appendix.html#cb501-17" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;end&quot;</span>] <span class="ot">&lt;-</span> hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>]</span>
<span id="cb501-18"><a href="appendix.html#cb501-18" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="appendix.html#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Waterfall Chart </span><span class="al">###</span></span>
<span id="cb502-2"><a href="appendix.html#cb502-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb502-3"><a href="appendix.html#cb502-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb502-4"><a href="appendix.html#cb502-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb502-5"><a href="appendix.html#cb502-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb502-6"><a href="appendix.html#cb502-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(hc_dat, <span class="fu">aes</span>(<span class="at">x =</span> event, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb502-7"><a href="appendix.html#cb502-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(event, id),</span>
<span id="cb502-8"><a href="appendix.html#cb502-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xmin =</span> id <span class="sc">-</span> <span class="fl">0.45</span>,</span>
<span id="cb502-9"><a href="appendix.html#cb502-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xmax =</span> id <span class="sc">+</span> <span class="fl">0.50</span>,</span>
<span id="cb502-10"><a href="appendix.html#cb502-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ymin =</span> end,</span>
<span id="cb502-11"><a href="appendix.html#cb502-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ymax =</span> start)) <span class="sc">+</span></span>
<span id="cb502-12"><a href="appendix.html#cb502-12" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_text</span>(<span class="fu">aes</span>(id, end, <span class="at">label =</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), end, <span class="st">&#39;&#39;</span>)), <span class="co"># Only label start and end HC</span></span>
<span id="cb502-13"><a href="appendix.html#cb502-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb502-14"><a href="appendix.html#cb502-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Hires and inbound transfers have outpaced outbound transfers and exits </span><span class="sc">\n</span><span class="st">in Engineering, leading to a net YTD increase in headcount.&#39;</span>,</span>
<span id="cb502-15"><a href="appendix.html#cb502-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Event&#39;</span>,</span>
<span id="cb502-16"><a href="appendix.html#cb502-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb502-17"><a href="appendix.html#cb502-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>,</span>
<span id="cb502-18"><a href="appendix.html#cb502-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Growth&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb502-19"><a href="appendix.html#cb502-19" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Loss&quot;</span> <span class="ot">=</span> <span class="st">&quot;#ED7D31&quot;</span>)) <span class="sc">+</span></span>
<span id="cb502-20"><a href="appendix.html#cb502-20" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb502-21"><a href="appendix.html#cb502-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb502-22"><a href="appendix.html#cb502-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb502-23"><a href="appendix.html#cb502-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb502-24"><a href="appendix.html#cb502-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb502-25"><a href="appendix.html#cb502-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb502-26"><a href="appendix.html#cb502-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="waffle-charts-1" class="section level3" number="18.2.10">
<h3><span class="header-section-number">18.2.10</span> Waffle Charts</h3>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="appendix.html#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb503-2"><a href="appendix.html#cb503-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-3"><a href="appendix.html#cb503-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create df with TA funnel metrics</span></span>
<span id="cb503-4"><a href="appendix.html#cb503-4" aria-hidden="true" tabindex="-1"></a>ta_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">stage =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span>, <span class="st">&quot;Phone Screen&quot;</span>, <span class="st">&quot;Interview&quot;</span>, <span class="st">&quot;Offer Extend&quot;</span>, <span class="st">&quot;Offer Accept&quot;</span>),</span>
<span id="cb503-5"><a href="appendix.html#cb503-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb503-6"><a href="appendix.html#cb503-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-7"><a href="appendix.html#cb503-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set depth of waffle chart (# of y-axis rows)</span></span>
<span id="cb503-8"><a href="appendix.html#cb503-8" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb503-9"><a href="appendix.html#cb503-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-10"><a href="appendix.html#cb503-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Each observation needs an x and y coordinate, and y needs to be specified first for a waffle chart with horizontal accumulation</span></span>
<span id="cb503-11"><a href="appendix.html#cb503-11" aria-hidden="true" tabindex="-1"></a>waffle_dat <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span>depth,</span>
<span id="cb503-12"><a href="appendix.html#cb503-12" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="fu">ceiling</span>(<span class="fu">sum</span>(ta_dat<span class="sc">$</span>cnt) <span class="sc">/</span> depth)))</span>
<span id="cb503-13"><a href="appendix.html#cb503-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-14"><a href="appendix.html#cb503-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Expand the applicant counts into a vector of stage labels</span></span>
<span id="cb503-15"><a href="appendix.html#cb503-15" aria-hidden="true" tabindex="-1"></a>stages <span class="ot">&lt;-</span> <span class="fu">rep</span>(ta_dat<span class="sc">$</span>stage, ta_dat<span class="sc">$</span>cnt)</span>
<span id="cb503-16"><a href="appendix.html#cb503-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-17"><a href="appendix.html#cb503-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate stages and fill any extra tiles with NA</span></span>
<span id="cb503-18"><a href="appendix.html#cb503-18" aria-hidden="true" tabindex="-1"></a>waffle_dat<span class="sc">$</span>stage <span class="ot">&lt;-</span> <span class="fu">c</span>(stages, <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">nrow</span>(waffle_dat) <span class="sc">-</span> <span class="fu">length</span>(stages)))</span></code></pre></div>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="appendix.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Waffle Chart </span><span class="al">###</span></span>
<span id="cb504-2"><a href="appendix.html#cb504-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb504-3"><a href="appendix.html#cb504-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb504-4"><a href="appendix.html#cb504-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb504-5"><a href="appendix.html#cb504-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb504-6"><a href="appendix.html#cb504-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(waffle_dat, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> stage)) <span class="sc">+</span> </span>
<span id="cb504-7"><a href="appendix.html#cb504-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;We select 10 in every 100 applicants. </span><span class="sc">\n</span><span class="st">Our offer acceptance rate (OAR) is 40%.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb504-8"><a href="appendix.html#cb504-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb504-9"><a href="appendix.html#cb504-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>, </span>
<span id="cb504-10"><a href="appendix.html#cb504-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Phone Screen&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb504-11"><a href="appendix.html#cb504-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Interview&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6A6A6&quot;</span>, </span>
<span id="cb504-12"><a href="appendix.html#cb504-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Offer Extend&quot;</span> <span class="ot">=</span> <span class="st">&quot;#808080&quot;</span>,</span>
<span id="cb504-13"><a href="appendix.html#cb504-13" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Offer Accept&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb504-14"><a href="appendix.html#cb504-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_reverse</span>() <span class="sc">+</span></span>
<span id="cb504-15"><a href="appendix.html#cb504-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb504-16"><a href="appendix.html#cb504-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb504-17"><a href="appendix.html#cb504-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="sankey-diagrams-1" class="section level3" number="18.2.11">
<h3><span class="header-section-number">18.2.11</span> Sankey Diagrams</h3>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="appendix.html#cb505-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb505-2"><a href="appendix.html#cb505-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-3"><a href="appendix.html#cb505-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb505-4"><a href="appendix.html#cb505-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb505-5"><a href="appendix.html#cb505-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-6"><a href="appendix.html#cb505-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb505-7"><a href="appendix.html#cb505-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb505-8"><a href="appendix.html#cb505-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-9"><a href="appendix.html#cb505-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create nodes df</span></span>
<span id="cb505-10"><a href="appendix.html#cb505-10" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>, <span class="co"># source</span></span>
<span id="cb505-11"><a href="appendix.html#cb505-11" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>)) <span class="co"># destination</span></span>
<span id="cb505-12"><a href="appendix.html#cb505-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-13"><a href="appendix.html#cb505-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create links df</span></span>
<span id="cb505-14"><a href="appendix.html#cb505-14" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">source =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">target =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">13</span>)</span>
<span id="cb505-15"><a href="appendix.html#cb505-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-16"><a href="appendix.html#cb505-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Append employee transfer counts per department pair to links df</span></span>
<span id="cb505-17"><a href="appendix.html#cb505-17" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>source <span class="sc">==</span> links<span class="sc">$</span>target<span class="dv">-7</span>, <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">150</span>, <span class="dv">50</span>), <span class="dv">0</span>), <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">30</span>, <span class="dv">5</span>), <span class="dv">0</span>))</span>
<span id="cb505-18"><a href="appendix.html#cb505-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-19"><a href="appendix.html#cb505-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Append source department variable for colored connections</span></span>
<span id="cb505-20"><a href="appendix.html#cb505-20" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb505-21"><a href="appendix.html#cb505-21" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Engineering&quot;</span>,</span>
<span id="cb505-22"><a href="appendix.html#cb505-22" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Finance&quot;</span>,</span>
<span id="cb505-23"><a href="appendix.html#cb505-23" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Legal&quot;</span>,</span>
<span id="cb505-24"><a href="appendix.html#cb505-24" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Marketing&quot;</span>,</span>
<span id="cb505-25"><a href="appendix.html#cb505-25" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;People&quot;</span>,</span>
<span id="cb505-26"><a href="appendix.html#cb505-26" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;Product&quot;</span>,</span>
<span id="cb505-27"><a href="appendix.html#cb505-27" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;Sales&quot;</span>,</span>
<span id="cb505-28"><a href="appendix.html#cb505-28" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;NA&quot;</span></span>
<span id="cb505-29"><a href="appendix.html#cb505-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb505-30"><a href="appendix.html#cb505-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-31"><a href="appendix.html#cb505-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Append within/outside department transfer variable for colored connections</span></span>
<span id="cb505-32"><a href="appendix.html#cb505-32" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>wiout_dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb505-33"><a href="appendix.html#cb505-33" aria-hidden="true" tabindex="-1"></a>  (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">7</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">8</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">9</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">13</span>) <span class="sc">~</span> <span class="st">&quot;Within&quot;</span>,</span>
<span id="cb505-34"><a href="appendix.html#cb505-34" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Outside&quot;</span></span>
<span id="cb505-35"><a href="appendix.html#cb505-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb505-36"><a href="appendix.html#cb505-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-37"><a href="appendix.html#cb505-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Append dichotomous product/other indicator to links and nodes data frames</span></span>
<span id="cb505-38"><a href="appendix.html#cb505-38" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span>
<span id="cb505-39"><a href="appendix.html#cb505-39" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(nodes<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="appendix.html#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Sankey Diagrams </span><span class="al">###</span></span>
<span id="cb506-2"><a href="appendix.html#cb506-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-3"><a href="appendix.html#cb506-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb506-4"><a href="appendix.html#cb506-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkD3)</span>
<span id="cb506-5"><a href="appendix.html#cb506-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-6"><a href="appendix.html#cb506-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 1</span></span>
<span id="cb506-7"><a href="appendix.html#cb506-7" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb506-8"><a href="appendix.html#cb506-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb506-9"><a href="appendix.html#cb506-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb506-10"><a href="appendix.html#cb506-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb506-11"><a href="appendix.html#cb506-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb506-12"><a href="appendix.html#cb506-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb506-13"><a href="appendix.html#cb506-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb506-14"><a href="appendix.html#cb506-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>)</span>
<span id="cb506-15"><a href="appendix.html#cb506-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-16"><a href="appendix.html#cb506-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 2</span></span>
<span id="cb506-17"><a href="appendix.html#cb506-17" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb506-18"><a href="appendix.html#cb506-18" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb506-19"><a href="appendix.html#cb506-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb506-20"><a href="appendix.html#cb506-20" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb506-21"><a href="appendix.html#cb506-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb506-22"><a href="appendix.html#cb506-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb506-23"><a href="appendix.html#cb506-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb506-24"><a href="appendix.html#cb506-24" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb506-25"><a href="appendix.html#cb506-25" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;dept&quot;</span>)</span>
<span id="cb506-26"><a href="appendix.html#cb506-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-27"><a href="appendix.html#cb506-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 3</span></span>
<span id="cb506-28"><a href="appendix.html#cb506-28" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb506-29"><a href="appendix.html#cb506-29" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb506-30"><a href="appendix.html#cb506-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb506-31"><a href="appendix.html#cb506-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb506-32"><a href="appendix.html#cb506-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb506-33"><a href="appendix.html#cb506-33" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb506-34"><a href="appendix.html#cb506-34" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb506-35"><a href="appendix.html#cb506-35" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb506-36"><a href="appendix.html#cb506-36" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;wiout_dept&quot;</span>)</span>
<span id="cb506-37"><a href="appendix.html#cb506-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-38"><a href="appendix.html#cb506-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 4</span></span>
<span id="cb506-39"><a href="appendix.html#cb506-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Define color palette</span></span>
<span id="cb506-40"><a href="appendix.html#cb506-40" aria-hidden="true" tabindex="-1"></a>colorJS <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;d3.scaleOrdinal([&quot;#BFBFBF&quot;, &quot;#0070C0&quot;])&#39;</span>)</span>
<span id="cb506-41"><a href="appendix.html#cb506-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-42"><a href="appendix.html#cb506-42" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb506-43"><a href="appendix.html#cb506-43" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb506-44"><a href="appendix.html#cb506-44" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb506-45"><a href="appendix.html#cb506-45" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb506-46"><a href="appendix.html#cb506-46" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb506-47"><a href="appendix.html#cb506-47" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb506-48"><a href="appendix.html#cb506-48" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb506-49"><a href="appendix.html#cb506-49" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb506-50"><a href="appendix.html#cb506-50" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeGroup =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb506-51"><a href="appendix.html#cb506-51" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb506-52"><a href="appendix.html#cb506-52" aria-hidden="true" tabindex="-1"></a>                         <span class="at">colourScale =</span> colorJS)</span></code></pre></div>
</div>
<div id="pie-charts-1" class="section level3" number="18.2.12">
<h3><span class="header-section-number">18.2.12</span> Pie Charts</h3>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="appendix.html#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb507-2"><a href="appendix.html#cb507-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb507-3"><a href="appendix.html#cb507-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for gender representation among active employees</span></span>
<span id="cb507-4"><a href="appendix.html#cb507-4" aria-hidden="true" tabindex="-1"></a>smmry_gender <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Female&#39;</span>),</span>
<span id="cb507-5"><a href="appendix.html#cb507-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">732</span>, <span class="dv">501</span>),</span>
<span id="cb507-6"><a href="appendix.html#cb507-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">pct =</span> <span class="fu">c</span>(<span class="fl">59.4</span>, <span class="fl">40.6</span>))</span></code></pre></div>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="appendix.html#cb508-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Pie Chart </span><span class="al">###</span></span>
<span id="cb508-2"><a href="appendix.html#cb508-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb508-3"><a href="appendix.html#cb508-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb508-4"><a href="appendix.html#cb508-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb508-5"><a href="appendix.html#cb508-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb508-6"><a href="appendix.html#cb508-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_gender, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(gender))) <span class="sc">+</span></span>
<span id="cb508-7"><a href="appendix.html#cb508-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb508-8"><a href="appendix.html#cb508-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb508-9"><a href="appendix.html#cb508-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(pct, <span class="st">&quot;%&quot;</span>)), <span class="at">color =</span> <span class="fu">ifelse</span>(smmry_gender<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&#39;Male&#39;</span>, <span class="st">&#39;white&#39;</span>, <span class="st">&#39;black&#39;</span>), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb508-10"><a href="appendix.html#cb508-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Nearly 60 percent of active employees identify as male.&#39;</span>) <span class="sc">+</span></span>
<span id="cb508-11"><a href="appendix.html#cb508-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Female&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb508-12"><a href="appendix.html#cb508-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Male&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb508-13"><a href="appendix.html#cb508-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb508-14"><a href="appendix.html#cb508-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb508-15"><a href="appendix.html#cb508-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb508-16"><a href="appendix.html#cb508-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb508-17"><a href="appendix.html#cb508-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb508-18"><a href="appendix.html#cb508-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bibli.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["The_Fundamentals_of_People_Analytics.pdf", "The_Fundamentals_of_People_Analytics.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
