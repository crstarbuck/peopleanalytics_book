<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>18 Appendix | The Fundamentals of People Analytics: With Applications in R</title>
  <meta name="description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="generator" content="bookdown 0.24.4 and GitBook 2.6.7" />

  <meta property="og:title" content="18 Appendix | The Fundamentals of People Analytics: With Applications in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="github-repo" content="crstarbuck/peopleanalytics-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="18 Appendix | The Fundamentals of People Analytics: With Applications in R" />
  
  <meta name="twitter:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  

<meta name="author" content="Craig Starbuck" />


<meta name="date" content="2022-09-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bibli.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<link href="libs/tabwid-1.0.0/scrool.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Fundamentals of People Analytics: With Applications in R</a></li>

<li class="divider"></li>
<li><a href="dedication.html#dedication" id="toc-dedication">Dedication</a></li>
<li><a href="foreword.html#foreword" id="toc-foreword">Foreword</a></li>
<li><a href="preface.html#preface" id="toc-preface">Preface</a></li>
<li><a href="getting-started.html#getting-started" id="toc-getting-started"><span class="toc-section-number">1</span> Getting Started</a>
<ul>
<li><a href="getting-started.html#guiding-principles" id="toc-guiding-principles"><span class="toc-section-number">1.1</span> Guiding Principles</a>
<ul>
<li><a href="getting-started.html#pro-employee-thinking" id="toc-pro-employee-thinking"><span class="toc-section-number">1.1.1</span> Pro-Employee Thinking</a></li>
<li><a href="getting-started.html#quality" id="toc-quality"><span class="toc-section-number">1.1.2</span> Quality</a></li>
<li><a href="getting-started.html#prioritization" id="toc-prioritization"><span class="toc-section-number">1.1.3</span> Prioritization</a></li>
</ul></li>
<li><a href="getting-started.html#tooling" id="toc-tooling"><span class="toc-section-number">1.2</span> Tooling</a></li>
<li><a href="getting-started.html#data" id="toc-data"><span class="toc-section-number">1.3</span> Data</a>
<ul>
<li><a href="getting-started.html#employees" id="toc-employees"><span class="toc-section-number">1.3.1</span> Employees</a></li>
<li><a href="getting-started.html#turnover-trends" id="toc-turnover-trends"><span class="toc-section-number">1.3.2</span> Turnover Trends</a></li>
<li><a href="getting-started.html#survey-responses" id="toc-survey-responses"><span class="toc-section-number">1.3.3</span> Survey Responses</a></li>
</ul></li>
<li><a href="getting-started.html#d-framework" id="toc-d-framework"><span class="toc-section-number">1.4</span> 4D Framework</a>
<ul>
<li><a href="getting-started.html#discover" id="toc-discover"><span class="toc-section-number">1.4.1</span> Discover</a></li>
<li><a href="getting-started.html#design" id="toc-design"><span class="toc-section-number">1.4.2</span> Design</a></li>
<li><a href="getting-started.html#develop" id="toc-develop"><span class="toc-section-number">1.4.3</span> Develop</a></li>
<li><a href="getting-started.html#deliver" id="toc-deliver"><span class="toc-section-number">1.4.4</span> Deliver</a></li>
</ul></li>
</ul></li>
<li><a href="r-intro.html#r-intro" id="toc-r-intro"><span class="toc-section-number">2</span> Introduction to R</a>
<ul>
<li><a href="r-intro.html#getting-started-1" id="toc-getting-started-1"><span class="toc-section-number">2.1</span> Getting Started</a></li>
<li><a href="r-intro.html#vectors" id="toc-vectors"><span class="toc-section-number">2.2</span> Vectors</a></li>
<li><a href="r-intro.html#matrices" id="toc-matrices"><span class="toc-section-number">2.3</span> Matrices</a></li>
<li><a href="r-intro.html#factors" id="toc-factors"><span class="toc-section-number">2.4</span> Factors</a></li>
<li><a href="r-intro.html#data-frames" id="toc-data-frames"><span class="toc-section-number">2.5</span> Data Frames</a></li>
<li><a href="r-intro.html#lists" id="toc-lists"><span class="toc-section-number">2.6</span> Lists</a></li>
<li><a href="r-intro.html#loops" id="toc-loops"><span class="toc-section-number">2.7</span> Loops</a></li>
<li><a href="r-intro.html#user-defined-functions-udfs" id="toc-user-defined-functions-udfs"><span class="toc-section-number">2.8</span> User-Defined Functions (UDFs)</a></li>
<li><a href="r-intro.html#graphics" id="toc-graphics"><span class="toc-section-number">2.9</span> Graphics</a></li>
<li><a href="r-intro.html#review-questions" id="toc-review-questions"><span class="toc-section-number">2.10</span> Review Questions</a></li>
</ul></li>
<li><a href="sql-intro.html#sql-intro" id="toc-sql-intro"><span class="toc-section-number">3</span> Introduction to SQL</a>
<ul>
<li><a href="sql-intro.html#basics" id="toc-basics"><span class="toc-section-number">3.1</span> Basics</a></li>
<li><a href="sql-intro.html#aggregate-functions" id="toc-aggregate-functions"><span class="toc-section-number">3.2</span> Aggregate Functions</a></li>
<li><a href="sql-intro.html#joins" id="toc-joins"><span class="toc-section-number">3.3</span> Joins</a></li>
<li><a href="sql-intro.html#subqueries" id="toc-subqueries"><span class="toc-section-number">3.4</span> Subqueries</a></li>
<li><a href="sql-intro.html#virtual-tables" id="toc-virtual-tables"><span class="toc-section-number">3.5</span> Virtual Tables</a></li>
<li><a href="sql-intro.html#window-functions" id="toc-window-functions"><span class="toc-section-number">3.6</span> Window Functions</a></li>
<li><a href="sql-intro.html#common-table-expressions-ctes" id="toc-common-table-expressions-ctes"><span class="toc-section-number">3.7</span> Common Table Expressions (CTEs)</a></li>
<li><a href="sql-intro.html#review-questions-1" id="toc-review-questions-1"><span class="toc-section-number">3.8</span> Review Questions</a></li>
</ul></li>
<li><a href="measure-sampl.html#measure-sampl" id="toc-measure-sampl"><span class="toc-section-number">4</span> Measurement &amp; Sampling</a>
<ul>
<li><a href="measure-sampl.html#variable-types" id="toc-variable-types"><span class="toc-section-number">4.1</span> Variable Types</a>
<ul>
<li><a href="measure-sampl.html#independent-variables-iv" id="toc-independent-variables-iv"><span class="toc-section-number">4.1.1</span> Independent Variables (IV)</a></li>
<li><a href="measure-sampl.html#dependent-variables-dv" id="toc-dependent-variables-dv"><span class="toc-section-number">4.1.2</span> Dependent Variables (DV)</a></li>
<li><a href="measure-sampl.html#control-variables-cv" id="toc-control-variables-cv"><span class="toc-section-number">4.1.3</span> Control Variables (CV)</a></li>
<li><a href="measure-sampl.html#moderating-variables" id="toc-moderating-variables"><span class="toc-section-number">4.1.4</span> Moderating Variables</a></li>
<li><a href="measure-sampl.html#mediating-variables" id="toc-mediating-variables"><span class="toc-section-number">4.1.5</span> Mediating Variables</a></li>
<li><a href="measure-sampl.html#endogenous-vs.-exogenous-variables" id="toc-endogenous-vs.-exogenous-variables"><span class="toc-section-number">4.1.6</span> Endogenous vs. Exogenous Variables</a></li>
</ul></li>
<li><a href="measure-sampl.html#measurement-scales" id="toc-measurement-scales"><span class="toc-section-number">4.2</span> Measurement Scales</a>
<ul>
<li><a href="measure-sampl.html#discrete-variables" id="toc-discrete-variables"><span class="toc-section-number">4.2.1</span> Discrete Variables</a></li>
<li><a href="measure-sampl.html#continuous-variables" id="toc-continuous-variables"><span class="toc-section-number">4.2.2</span> Continuous Variables</a></li>
</ul></li>
<li><a href="measure-sampl.html#sampling" id="toc-sampling"><span class="toc-section-number">4.3</span> Sampling</a>
<ul>
<li><a href="measure-sampl.html#sampling-nonsampling-error" id="toc-sampling-nonsampling-error"><span class="toc-section-number">4.3.1</span> Sampling &amp; Nonsampling Error</a></li>
</ul></li>
<li><a href="measure-sampl.html#review-questions-2" id="toc-review-questions-2"><span class="toc-section-number">4.4</span> Review Questions</a></li>
</ul></li>
<li><a href="research.html#research" id="toc-research"><span class="toc-section-number">5</span> Research Fundamentals</a>
<ul>
<li><a href="research.html#research-questions" id="toc-research-questions"><span class="toc-section-number">5.1</span> Research Questions</a></li>
<li><a href="research.html#research-hypotheses" id="toc-research-hypotheses"><span class="toc-section-number">5.2</span> Research Hypotheses</a></li>
<li><a href="research.html#internal-vs.-external-validity" id="toc-internal-vs.-external-validity"><span class="toc-section-number">5.3</span> Internal vs. External Validity</a></li>
<li><a href="research.html#research-methods" id="toc-research-methods"><span class="toc-section-number">5.4</span> Research Methods</a></li>
<li><a href="research.html#research-designs" id="toc-research-designs"><span class="toc-section-number">5.5</span> Research Designs</a></li>
<li><a href="research.html#review-questions-3" id="toc-review-questions-3"><span class="toc-section-number">5.6</span> Review Questions</a></li>
</ul></li>
<li><a href="data-mgmt-prep.html#data-mgmt-prep" id="toc-data-mgmt-prep"><span class="toc-section-number">6</span> Data Management &amp; Preparation</a>
<ul>
<li><a href="data-mgmt-prep.html#data-management" id="toc-data-management"><span class="toc-section-number">6.1</span> Data Management</a></li>
<li><a href="data-mgmt-prep.html#data-screening-cleaning" id="toc-data-screening-cleaning"><span class="toc-section-number">6.2</span> Data Screening &amp; Cleaning</a></li>
<li><a href="data-mgmt-prep.html#one-hot-encoding" id="toc-one-hot-encoding"><span class="toc-section-number">6.3</span> One-Hot Encoding</a></li>
<li><a href="data-mgmt-prep.html#feature-engineering" id="toc-feature-engineering"><span class="toc-section-number">6.4</span> Feature Engineering</a></li>
<li><a href="data-mgmt-prep.html#review-questions-4" id="toc-review-questions-4"><span class="toc-section-number">6.5</span> Review Questions</a></li>
</ul></li>
<li><a href="desc-stats.html#desc-stats" id="toc-desc-stats"><span class="toc-section-number">7</span> Descriptive Statistics</a>
<ul>
<li><a href="desc-stats.html#univariate-analysis" id="toc-univariate-analysis"><span class="toc-section-number">7.1</span> Univariate Analysis</a>
<ul>
<li><a href="desc-stats.html#measures-of-central-tendency" id="toc-measures-of-central-tendency"><span class="toc-section-number">7.1.1</span> Measures of Central Tendency</a></li>
<li><a href="desc-stats.html#measures-of-spread" id="toc-measures-of-spread"><span class="toc-section-number">7.1.2</span> Measures of Spread</a></li>
</ul></li>
<li><a href="desc-stats.html#bivariate-analysis" id="toc-bivariate-analysis"><span class="toc-section-number">7.2</span> Bivariate Analysis</a>
<ul>
<li><a href="desc-stats.html#covariance" id="toc-covariance"><span class="toc-section-number">7.2.1</span> Covariance</a></li>
<li><a href="desc-stats.html#correlation" id="toc-correlation"><span class="toc-section-number">7.2.2</span> Correlation</a></li>
</ul></li>
<li><a href="desc-stats.html#review-questions-5" id="toc-review-questions-5"><span class="toc-section-number">7.3</span> Review Questions</a></li>
</ul></li>
<li><a href="inf-stats.html#inf-stats" id="toc-inf-stats"><span class="toc-section-number">8</span> Statistical Inference</a>
<ul>
<li><a href="inf-stats.html#introduction-to-probability" id="toc-introduction-to-probability"><span class="toc-section-number">8.1</span> Introduction to Probability</a>
<ul>
<li><a href="inf-stats.html#probability-distributions" id="toc-probability-distributions"><span class="toc-section-number">8.1.1</span> Probability Distributions</a></li>
<li><a href="inf-stats.html#conditional-probability" id="toc-conditional-probability"><span class="toc-section-number">8.1.2</span> Conditional Probability</a></li>
</ul></li>
<li><a href="inf-stats.html#central-limit-theorem" id="toc-central-limit-theorem"><span class="toc-section-number">8.2</span> Central Limit Theorem</a></li>
<li><a href="inf-stats.html#confidence-intervals" id="toc-confidence-intervals"><span class="toc-section-number">8.3</span> Confidence Intervals</a>
<ul>
<li><a href="inf-stats.html#hypothesis-testing" id="toc-hypothesis-testing"><span class="toc-section-number">8.3.1</span> Hypothesis Testing</a></li>
<li><a href="inf-stats.html#alpha" id="toc-alpha"><span class="toc-section-number">8.3.2</span> Alpha</a></li>
<li><a href="inf-stats.html#type-i-ii-errors" id="toc-type-i-ii-errors"><span class="toc-section-number">8.3.3</span> Type I &amp; II Errors</a></li>
<li><a href="inf-stats.html#p-values" id="toc-p-values"><span class="toc-section-number">8.3.4</span> <span class="math inline">\(p\)</span>-Values</a></li>
<li><a href="inf-stats.html#bonferroni-correction" id="toc-bonferroni-correction"><span class="toc-section-number">8.3.5</span> Bonferroni Correction</a></li>
<li><a href="inf-stats.html#statistical-power" id="toc-statistical-power"><span class="toc-section-number">8.3.6</span> Statistical Power</a></li>
</ul></li>
<li><a href="inf-stats.html#review-questions-6" id="toc-review-questions-6"><span class="toc-section-number">8.4</span> Review Questions</a></li>
</ul></li>
<li><a href="aod.html#aod" id="toc-aod"><span class="toc-section-number">9</span> Analysis of Differences</a>
<ul>
<li><a href="aod.html#parametric-vs.-nonparametric-tests" id="toc-parametric-vs.-nonparametric-tests"><span class="toc-section-number">9.1</span> Parametric vs. Nonparametric Tests</a></li>
<li><a href="aod.html#differences-in-discrete-data" id="toc-differences-in-discrete-data"><span class="toc-section-number">9.2</span> Differences in Discrete Data</a></li>
<li><a href="aod.html#differences-in-continuous-data" id="toc-differences-in-continuous-data"><span class="toc-section-number">9.3</span> Differences in Continuous Data</a></li>
<li><a href="aod.html#review-questions-7" id="toc-review-questions-7"><span class="toc-section-number">9.4</span> Review Questions</a></li>
</ul></li>
<li><a href="lm.html#lm" id="toc-lm"><span class="toc-section-number">10</span> Linear Regression</a>
<ul>
<li><a href="lm.html#sample-size" id="toc-sample-size"><span class="toc-section-number">10.1</span> Sample Size</a></li>
<li><a href="lm.html#simple-linear-regression" id="toc-simple-linear-regression"><span class="toc-section-number">10.2</span> Simple Linear Regression</a></li>
<li><a href="lm.html#multiple-linear-regression" id="toc-multiple-linear-regression"><span class="toc-section-number">10.3</span> Multiple Linear Regression</a></li>
<li><a href="lm.html#moderation" id="toc-moderation"><span class="toc-section-number">10.4</span> Moderation</a></li>
<li><a href="lm.html#mediation" id="toc-mediation"><span class="toc-section-number">10.5</span> Mediation</a></li>
<li><a href="lm.html#review-questions-8" id="toc-review-questions-8"><span class="toc-section-number">10.6</span> Review Questions</a></li>
</ul></li>
<li><a href="lme.html#lme" id="toc-lme"><span class="toc-section-number">11</span> Linear Model Extensions</a>
<ul>
<li><a href="lme.html#model-comparisons" id="toc-model-comparisons"><span class="toc-section-number">11.1</span> Model Comparisons</a></li>
<li><a href="lme.html#hierarchical-regression" id="toc-hierarchical-regression"><span class="toc-section-number">11.2</span> Hierarchical Regression</a></li>
<li><a href="lme.html#multilevel-models" id="toc-multilevel-models"><span class="toc-section-number">11.3</span> Multilevel Models</a></li>
<li><a href="lme.html#polynomial-regression" id="toc-polynomial-regression"><span class="toc-section-number">11.4</span> Polynomial Regression</a></li>
<li><a href="lme.html#review-questions-9" id="toc-review-questions-9"><span class="toc-section-number">11.5</span> Review Questions</a></li>
</ul></li>
<li><a href="log.html#log" id="toc-log"><span class="toc-section-number">12</span> Logistic Regression</a>
<ul>
<li><a href="log.html#binomial-logistic-regression" id="toc-binomial-logistic-regression"><span class="toc-section-number">12.1</span> Binomial Logistic Regression</a></li>
<li><a href="log.html#multinomial-logistic-regression" id="toc-multinomial-logistic-regression"><span class="toc-section-number">12.2</span> Multinomial Logistic Regression</a></li>
<li><a href="log.html#ordinal-logistic-regression" id="toc-ordinal-logistic-regression"><span class="toc-section-number">12.3</span> Ordinal Logistic Regression</a></li>
<li><a href="log.html#review-questions-10" id="toc-review-questions-10"><span class="toc-section-number">12.4</span> Review Questions</a></li>
</ul></li>
<li><a href="pred-mod.html#pred-mod" id="toc-pred-mod"><span class="toc-section-number">13</span> Predictive Modeling</a>
<ul>
<li><a href="pred-mod.html#cross-validation" id="toc-cross-validation"><span class="toc-section-number">13.1</span> Cross-Validation</a></li>
<li><a href="pred-mod.html#model-performance" id="toc-model-performance"><span class="toc-section-number">13.2</span> Model Performance</a></li>
<li><a href="pred-mod.html#bias-variance-tradeoff" id="toc-bias-variance-tradeoff"><span class="toc-section-number">13.3</span> Bias-Variance Tradeoff</a></li>
<li><a href="pred-mod.html#tree-based-algorithms" id="toc-tree-based-algorithms"><span class="toc-section-number">13.4</span> Tree-Based Algorithms</a></li>
<li><a href="pred-mod.html#predictive-modeling" id="toc-predictive-modeling"><span class="toc-section-number">13.5</span> Predictive Modeling</a></li>
<li><a href="pred-mod.html#review-questions-11" id="toc-review-questions-11"><span class="toc-section-number">13.6</span> Review Questions</a></li>
</ul></li>
<li><a href="unsup-lrn.html#unsup-lrn" id="toc-unsup-lrn"><span class="toc-section-number">14</span> Unsupervised Learning</a>
<ul>
<li><a href="unsup-lrn.html#factor-analysis" id="toc-factor-analysis"><span class="toc-section-number">14.1</span> Factor Analysis</a>
<ul>
<li><a href="unsup-lrn.html#exploratory-factor-analysis-efa" id="toc-exploratory-factor-analysis-efa"><span class="toc-section-number">14.1.1</span> Exploratory Factor Analysis (EFA)</a></li>
<li><a href="unsup-lrn.html#confirmatory-factor-analysis-cfa" id="toc-confirmatory-factor-analysis-cfa"><span class="toc-section-number">14.1.2</span> Confirmatory Factor Analysis (CFA)</a></li>
</ul></li>
<li><a href="unsup-lrn.html#clustering" id="toc-clustering"><span class="toc-section-number">14.2</span> Clustering</a>
<ul>
<li><a href="unsup-lrn.html#k-means-clustering" id="toc-k-means-clustering"><span class="toc-section-number">14.2.1</span> <span class="math inline">\(K\)</span>-Means Clustering</a></li>
<li><a href="unsup-lrn.html#hierarchical-clustering" id="toc-hierarchical-clustering"><span class="toc-section-number">14.2.2</span> Hierarchical Clustering</a></li>
</ul></li>
<li><a href="unsup-lrn.html#review-questions-12" id="toc-review-questions-12"><span class="toc-section-number">14.3</span> Review Questions</a></li>
</ul></li>
<li><a href="data-viz.html#data-viz" id="toc-data-viz"><span class="toc-section-number">15</span> Data Visualization</a>
<ul>
<li><a href="data-viz.html#best-practices" id="toc-best-practices"><span class="toc-section-number">15.1</span> Best Practices</a>
<ul>
<li><a href="data-viz.html#color-palette" id="toc-color-palette"><span class="toc-section-number">15.1.1</span> Color Palette</a></li>
<li><a href="data-viz.html#chart-borders" id="toc-chart-borders"><span class="toc-section-number">15.1.2</span> Chart Borders</a></li>
<li><a href="data-viz.html#zero-baseline" id="toc-zero-baseline"><span class="toc-section-number">15.1.3</span> Zero Baseline</a></li>
<li><a href="data-viz.html#intuitive-layout" id="toc-intuitive-layout"><span class="toc-section-number">15.1.4</span> Intuitive Layout</a></li>
<li><a href="data-viz.html#preattentive-attributes" id="toc-preattentive-attributes"><span class="toc-section-number">15.1.5</span> Preattentive Attributes</a></li>
</ul></li>
<li><a href="data-viz.html#step-by-step-visual-upgrade" id="toc-step-by-step-visual-upgrade"><span class="toc-section-number">15.2</span> Step-by-Step Visual Upgrade</a>
<ul>
<li><a href="data-viz.html#step-1-build-bar-chart-with-defaults" id="toc-step-1-build-bar-chart-with-defaults"><span class="toc-section-number">15.2.1</span> Step 1: Build Bar Chart with Defaults</a></li>
<li><a href="data-viz.html#step-2-remove-legend" id="toc-step-2-remove-legend"><span class="toc-section-number">15.2.2</span> Step 2: Remove Legend</a></li>
<li><a href="data-viz.html#step-3-assign-colors-strategically" id="toc-step-3-assign-colors-strategically"><span class="toc-section-number">15.2.3</span> Step 3: Assign Colors Strategically</a></li>
<li><a href="data-viz.html#step-4-add-axis-titles-and-margins" id="toc-step-4-add-axis-titles-and-margins"><span class="toc-section-number">15.2.4</span> Step 4: Add Axis Titles and Margins</a></li>
<li><a href="data-viz.html#step-5-add-left-justified-title" id="toc-step-5-add-left-justified-title"><span class="toc-section-number">15.2.5</span> Step 5: Add Left-Justified Title</a></li>
<li><a href="data-viz.html#step-6-remove-background" id="toc-step-6-remove-background"><span class="toc-section-number">15.2.6</span> Step 6: Remove Background</a></li>
<li><a href="data-viz.html#step-7-remove-axis-ticks" id="toc-step-7-remove-axis-ticks"><span class="toc-section-number">15.2.7</span> Step 7: Remove Axis Ticks</a></li>
<li><a href="data-viz.html#step-8-mute-titles" id="toc-step-8-mute-titles"><span class="toc-section-number">15.2.8</span> Step 8: Mute Titles</a></li>
<li><a href="data-viz.html#step-9-flip-axes" id="toc-step-9-flip-axes"><span class="toc-section-number">15.2.9</span> Step 9: Flip Axes</a></li>
<li><a href="data-viz.html#step-10-sort-data" id="toc-step-10-sort-data"><span class="toc-section-number">15.2.10</span> Step 10: Sort Data</a></li>
</ul></li>
<li><a href="data-viz.html#visualization-types" id="toc-visualization-types"><span class="toc-section-number">15.3</span> Visualization Types</a>
<ul>
<li><a href="data-viz.html#tables" id="toc-tables"><span class="toc-section-number">15.3.1</span> Tables</a></li>
<li><a href="data-viz.html#heatmaps" id="toc-heatmaps"><span class="toc-section-number">15.3.2</span> Heatmaps</a></li>
<li><a href="data-viz.html#scatterplots" id="toc-scatterplots"><span class="toc-section-number">15.3.3</span> Scatterplots</a></li>
<li><a href="data-viz.html#line-graphs" id="toc-line-graphs"><span class="toc-section-number">15.3.4</span> Line Graphs</a></li>
<li><a href="data-viz.html#slopegraphs" id="toc-slopegraphs"><span class="toc-section-number">15.3.5</span> Slopegraphs</a></li>
<li><a href="data-viz.html#bar-charts" id="toc-bar-charts"><span class="toc-section-number">15.3.6</span> Bar Charts</a></li>
<li><a href="data-viz.html#waterfall-charts" id="toc-waterfall-charts"><span class="toc-section-number">15.3.7</span> Waterfall Charts</a></li>
<li><a href="data-viz.html#waffle-charts" id="toc-waffle-charts"><span class="toc-section-number">15.3.8</span> Waffle Charts</a></li>
<li><a href="data-viz.html#sankey-diagrams" id="toc-sankey-diagrams"><span class="toc-section-number">15.3.9</span> Sankey Diagrams</a></li>
<li><a href="data-viz.html#pie-charts" id="toc-pie-charts"><span class="toc-section-number">15.3.10</span> Pie Charts</a></li>
<li><a href="data-viz.html#d-visuals" id="toc-d-visuals"><span class="toc-section-number">15.3.11</span> 3D Visuals</a></li>
</ul></li>
<li><a href="data-viz.html#elegant-data-visualization" id="toc-elegant-data-visualization"><span class="toc-section-number">15.4</span> Elegant Data Visualization</a></li>
<li><a href="data-viz.html#review-questions-13" id="toc-review-questions-13"><span class="toc-section-number">15.5</span> Review Questions</a></li>
</ul></li>
<li><a href="storytelling.html#storytelling" id="toc-storytelling"><span class="toc-section-number">16</span> Data Storytelling</a>
<ul>
<li><a href="storytelling.html#know-your-audience" id="toc-know-your-audience"><span class="toc-section-number">16.1</span> Know Your Audience</a></li>
<li><a href="storytelling.html#production-status" id="toc-production-status"><span class="toc-section-number">16.2</span> Production Status</a></li>
<li><a href="storytelling.html#structural-elements" id="toc-structural-elements"><span class="toc-section-number">16.3</span> Structural Elements</a>
<ul>
<li><a href="storytelling.html#tldr" id="toc-tldr"><span class="toc-section-number">16.3.1</span> TL;DR</a></li>
<li><a href="storytelling.html#purpose" id="toc-purpose"><span class="toc-section-number">16.3.2</span> Purpose</a></li>
<li><a href="storytelling.html#methodology" id="toc-methodology"><span class="toc-section-number">16.3.3</span> Methodology</a></li>
<li><a href="storytelling.html#results" id="toc-results"><span class="toc-section-number">16.3.4</span> Results</a></li>
<li><a href="storytelling.html#limitations" id="toc-limitations"><span class="toc-section-number">16.3.5</span> Limitations</a></li>
<li><a href="storytelling.html#next-steps" id="toc-next-steps"><span class="toc-section-number">16.3.6</span> Next Steps</a></li>
<li><a href="storytelling.html#appendix" id="toc-appendix"><span class="toc-section-number">16.3.7</span> Appendix</a></li>
</ul></li>
<li><a href="storytelling.html#qa" id="toc-qa"><span class="toc-section-number">16.4</span> Q&amp;A</a></li>
<li><a href="storytelling.html#review-questions-14" id="toc-review-questions-14"><span class="toc-section-number">16.5</span> Review Questions</a></li>
</ul></li>
<li><a href="bibli.html#bibli" id="toc-bibli"><span class="toc-section-number">17</span> Bibliography</a></li>
<li><a href="storytelling.html#appendix" id="toc-appendix"><span class="toc-section-number">18</span> Appendix</a>
<ul>
<li><a href="appendix.html#step-by-step-visual-upgrade-1" id="toc-step-by-step-visual-upgrade-1"><span class="toc-section-number">18.1</span> Step-by-Step Visual Upgrade</a></li>
<li><a href="appendix.html#tables-1" id="toc-tables-1"><span class="toc-section-number">18.2</span> Tables</a></li>
<li><a href="appendix.html#heatmaps-1" id="toc-heatmaps-1"><span class="toc-section-number">18.3</span> Heatmaps</a></li>
<li><a href="appendix.html#scatterplots-1" id="toc-scatterplots-1"><span class="toc-section-number">18.4</span> Scatterplots</a></li>
<li><a href="appendix.html#line-charts" id="toc-line-charts"><span class="toc-section-number">18.5</span> Line Charts</a></li>
<li><a href="appendix.html#slopegraphs-1" id="toc-slopegraphs-1"><span class="toc-section-number">18.6</span> Slopegraphs</a></li>
<li><a href="appendix.html#bar-charts-1" id="toc-bar-charts-1"><span class="toc-section-number">18.7</span> Bar Charts</a></li>
<li><a href="appendix.html#waterfall-charts-1" id="toc-waterfall-charts-1"><span class="toc-section-number">18.8</span> Waterfall Charts</a></li>
<li><a href="appendix.html#waffle-charts-1" id="toc-waffle-charts-1"><span class="toc-section-number">18.9</span> Waffle Charts</a></li>
<li><a href="appendix.html#sankey-diagrams-1" id="toc-sankey-diagrams-1"><span class="toc-section-number">18.10</span> Sankey Diagrams</a></li>
<li><a href="appendix.html#pie-charts-1" id="toc-pie-charts-1"><span class="toc-section-number">18.11</span> Pie Charts</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Fundamentals of People Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix" class="section level1" number="18">
<h1><span class="header-section-number">18</span> Appendix</h1>
<p>This appendix provides the code needed to reproduce visuals in Chapter <a href="data-viz.html#data-viz">15</a>.</p>
<div id="step-by-step-visual-upgrade-1" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> Step-by-Step Visual Upgrade</h2>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="appendix.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb459-2"><a href="appendix.html#cb459-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb459-3"><a href="appendix.html#cb459-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb459-4"><a href="appendix.html#cb459-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-5"><a href="appendix.html#cb459-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb459-6"><a href="appendix.html#cb459-6" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb459-7"><a href="appendix.html#cb459-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-8"><a href="appendix.html#cb459-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for active employees</span></span>
<span id="cb459-9"><a href="appendix.html#cb459-9" aria-hidden="true" tabindex="-1"></a>smmry_ed_field <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb459-10"><a href="appendix.html#cb459-10" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb459-11"><a href="appendix.html#cb459-11" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">count</span>(ed_field)</span>
<span id="cb459-12"><a href="appendix.html#cb459-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-13"><a href="appendix.html#cb459-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Build Bar Chart with Defaults</span></span>
<span id="cb459-14"><a href="appendix.html#cb459-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-15"><a href="appendix.html#cb459-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb459-16"><a href="appendix.html#cb459-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-17"><a href="appendix.html#cb459-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Remove Legend</span></span>
<span id="cb459-18"><a href="appendix.html#cb459-18" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-19"><a href="appendix.html#cb459-19" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-20"><a href="appendix.html#cb459-20" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb459-21"><a href="appendix.html#cb459-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-22"><a href="appendix.html#cb459-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Assign Colors Strategically</span></span>
<span id="cb459-23"><a href="appendix.html#cb459-23" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-24"><a href="appendix.html#cb459-24" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-25"><a href="appendix.html#cb459-25" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-26"><a href="appendix.html#cb459-26" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-27"><a href="appendix.html#cb459-27" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-28"><a href="appendix.html#cb459-28" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-29"><a href="appendix.html#cb459-29" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-30"><a href="appendix.html#cb459-30" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-31"><a href="appendix.html#cb459-31" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb459-32"><a href="appendix.html#cb459-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-33"><a href="appendix.html#cb459-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Add Axis Titles and Margins</span></span>
<span id="cb459-34"><a href="appendix.html#cb459-34" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-35"><a href="appendix.html#cb459-35" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-36"><a href="appendix.html#cb459-36" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-37"><a href="appendix.html#cb459-37" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-38"><a href="appendix.html#cb459-38" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-39"><a href="appendix.html#cb459-39" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-40"><a href="appendix.html#cb459-40" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-41"><a href="appendix.html#cb459-41" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-42"><a href="appendix.html#cb459-42" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-43"><a href="appendix.html#cb459-43" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-44"><a href="appendix.html#cb459-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-45"><a href="appendix.html#cb459-45" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb459-46"><a href="appendix.html#cb459-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-47"><a href="appendix.html#cb459-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Add Left-Justified Title</span></span>
<span id="cb459-48"><a href="appendix.html#cb459-48" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-49"><a href="appendix.html#cb459-49" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-50"><a href="appendix.html#cb459-50" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-51"><a href="appendix.html#cb459-51" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-52"><a href="appendix.html#cb459-52" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-53"><a href="appendix.html#cb459-53" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-54"><a href="appendix.html#cb459-54" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-55"><a href="appendix.html#cb459-55" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-56"><a href="appendix.html#cb459-56" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-57"><a href="appendix.html#cb459-57" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-58"><a href="appendix.html#cb459-58" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb459-59"><a href="appendix.html#cb459-59" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-60"><a href="appendix.html#cb459-60" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb459-61"><a href="appendix.html#cb459-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-62"><a href="appendix.html#cb459-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Remove Background</span></span>
<span id="cb459-63"><a href="appendix.html#cb459-63" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-64"><a href="appendix.html#cb459-64" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-65"><a href="appendix.html#cb459-65" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-66"><a href="appendix.html#cb459-66" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-67"><a href="appendix.html#cb459-67" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-68"><a href="appendix.html#cb459-68" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-69"><a href="appendix.html#cb459-69" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-70"><a href="appendix.html#cb459-70" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-71"><a href="appendix.html#cb459-71" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-72"><a href="appendix.html#cb459-72" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-73"><a href="appendix.html#cb459-73" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-74"><a href="appendix.html#cb459-74" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-75"><a href="appendix.html#cb459-75" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)))</span>
<span id="cb459-76"><a href="appendix.html#cb459-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-77"><a href="appendix.html#cb459-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 7: Remove Axis Ticks</span></span>
<span id="cb459-78"><a href="appendix.html#cb459-78" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-79"><a href="appendix.html#cb459-79" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-80"><a href="appendix.html#cb459-80" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-81"><a href="appendix.html#cb459-81" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-82"><a href="appendix.html#cb459-82" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-83"><a href="appendix.html#cb459-83" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-84"><a href="appendix.html#cb459-84" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-85"><a href="appendix.html#cb459-85" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-86"><a href="appendix.html#cb459-86" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-87"><a href="appendix.html#cb459-87" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-88"><a href="appendix.html#cb459-88" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-89"><a href="appendix.html#cb459-89" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-90"><a href="appendix.html#cb459-90" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>)),</span>
<span id="cb459-91"><a href="appendix.html#cb459-91" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-92"><a href="appendix.html#cb459-92" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-93"><a href="appendix.html#cb459-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-94"><a href="appendix.html#cb459-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Mute Titles</span></span>
<span id="cb459-95"><a href="appendix.html#cb459-95" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-96"><a href="appendix.html#cb459-96" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-97"><a href="appendix.html#cb459-97" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-98"><a href="appendix.html#cb459-98" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-99"><a href="appendix.html#cb459-99" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-100"><a href="appendix.html#cb459-100" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-101"><a href="appendix.html#cb459-101" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-102"><a href="appendix.html#cb459-102" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-103"><a href="appendix.html#cb459-103" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-104"><a href="appendix.html#cb459-104" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-105"><a href="appendix.html#cb459-105" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-106"><a href="appendix.html#cb459-106" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-107"><a href="appendix.html#cb459-107" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-108"><a href="appendix.html#cb459-108" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-109"><a href="appendix.html#cb459-109" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-110"><a href="appendix.html#cb459-110" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-111"><a href="appendix.html#cb459-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-112"><a href="appendix.html#cb459-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 9: Flip Axes</span></span>
<span id="cb459-113"><a href="appendix.html#cb459-113" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-114"><a href="appendix.html#cb459-114" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-115"><a href="appendix.html#cb459-115" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb459-116"><a href="appendix.html#cb459-116" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-117"><a href="appendix.html#cb459-117" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-118"><a href="appendix.html#cb459-118" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-119"><a href="appendix.html#cb459-119" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-120"><a href="appendix.html#cb459-120" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-121"><a href="appendix.html#cb459-121" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-122"><a href="appendix.html#cb459-122" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-123"><a href="appendix.html#cb459-123" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-124"><a href="appendix.html#cb459-124" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-125"><a href="appendix.html#cb459-125" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-126"><a href="appendix.html#cb459-126" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-127"><a href="appendix.html#cb459-127" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-128"><a href="appendix.html#cb459-128" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-129"><a href="appendix.html#cb459-129" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-130"><a href="appendix.html#cb459-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-131"><a href="appendix.html#cb459-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 10: Sort Data</span></span>
<span id="cb459-132"><a href="appendix.html#cb459-132" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(ed_field, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-133"><a href="appendix.html#cb459-133" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-134"><a href="appendix.html#cb459-134" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb459-135"><a href="appendix.html#cb459-135" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-136"><a href="appendix.html#cb459-136" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-137"><a href="appendix.html#cb459-137" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-138"><a href="appendix.html#cb459-138" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-139"><a href="appendix.html#cb459-139" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-140"><a href="appendix.html#cb459-140" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-141"><a href="appendix.html#cb459-141" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-142"><a href="appendix.html#cb459-142" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-143"><a href="appendix.html#cb459-143" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-144"><a href="appendix.html#cb459-144" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-145"><a href="appendix.html#cb459-145" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-146"><a href="appendix.html#cb459-146" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-147"><a href="appendix.html#cb459-147" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-148"><a href="appendix.html#cb459-148" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-149"><a href="appendix.html#cb459-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-150"><a href="appendix.html#cb459-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Pre/post viz comparison</span></span>
<span id="cb459-151"><a href="appendix.html#cb459-151" aria-hidden="true" tabindex="-1"></a>viz_pre <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> ed_field, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-152"><a href="appendix.html#cb459-152" aria-hidden="true" tabindex="-1"></a>           ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb459-153"><a href="appendix.html#cb459-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-154"><a href="appendix.html#cb459-154" aria-hidden="true" tabindex="-1"></a>viz_post <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_ed_field, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(ed_field, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">as.factor</span>(ed_field))) <span class="sc">+</span></span>
<span id="cb459-155"><a href="appendix.html#cb459-155" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb459-156"><a href="appendix.html#cb459-156" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb459-157"><a href="appendix.html#cb459-157" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Life Sciences is the most common education field </span><span class="sc">\n</span><span class="st">pursued by active employees.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Education Field&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb459-158"><a href="appendix.html#cb459-158" aria-hidden="true" tabindex="-1"></a>            ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Human Resources&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-159"><a href="appendix.html#cb459-159" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Life Sciences&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>, </span>
<span id="cb459-160"><a href="appendix.html#cb459-160" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Marketing&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb459-161"><a href="appendix.html#cb459-161" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Medical&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-162"><a href="appendix.html#cb459-162" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Other&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb459-163"><a href="appendix.html#cb459-163" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Technical Degree&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb459-164"><a href="appendix.html#cb459-164" aria-hidden="true" tabindex="-1"></a>              ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb459-165"><a href="appendix.html#cb459-165" aria-hidden="true" tabindex="-1"></a>                             <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-166"><a href="appendix.html#cb459-166" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-167"><a href="appendix.html#cb459-167" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-168"><a href="appendix.html#cb459-168" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb459-169"><a href="appendix.html#cb459-169" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb459-170"><a href="appendix.html#cb459-170" aria-hidden="true" tabindex="-1"></a>                             <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span>
<span id="cb459-171"><a href="appendix.html#cb459-171" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb459-172"><a href="appendix.html#cb459-172" aria-hidden="true" tabindex="-1"></a><span class="co"># Display pre/post visualizations side-by-side</span></span>
<span id="cb459-173"><a href="appendix.html#cb459-173" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(viz_post, viz_pre, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="tables-1" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> Tables</h2>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="appendix.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb460-2"><a href="appendix.html#cb460-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-3"><a href="appendix.html#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb460-4"><a href="appendix.html#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb460-5"><a href="appendix.html#cb460-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-6"><a href="appendix.html#cb460-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb460-7"><a href="appendix.html#cb460-7" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb460-8"><a href="appendix.html#cb460-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-9"><a href="appendix.html#cb460-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb460-10"><a href="appendix.html#cb460-10" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb460-11"><a href="appendix.html#cb460-11" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb460-12"><a href="appendix.html#cb460-12" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb460-13"><a href="appendix.html#cb460-13" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb460-14"><a href="appendix.html#cb460-14" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb460-15"><a href="appendix.html#cb460-15" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb460-16"><a href="appendix.html#cb460-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb460-17"><a href="appendix.html#cb460-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-18"><a href="appendix.html#cb460-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb460-19"><a href="appendix.html#cb460-19" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb460-20"><a href="appendix.html#cb460-20" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb460-21"><a href="appendix.html#cb460-21" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb460-22"><a href="appendix.html#cb460-22" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb460-23"><a href="appendix.html#cb460-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-24"><a href="appendix.html#cb460-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb460-25"><a href="appendix.html#cb460-25" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span>
<span id="cb460-26"><a href="appendix.html#cb460-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-27"><a href="appendix.html#cb460-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign proper case field names</span></span>
<span id="cb460-28"><a href="appendix.html#cb460-28" aria-hidden="true" tabindex="-1"></a>dept_tenure_proper <span class="ot">&lt;-</span> dept_tenure <span class="sc">%&gt;%</span></span>
<span id="cb460-29"><a href="appendix.html#cb460-29" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="st">&#39;Department&#39;</span> <span class="ot">=</span> dept,</span>
<span id="cb460-30"><a href="appendix.html#cb460-30" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Tenure&#39;</span> <span class="ot">=</span> tenure_band,</span>
<span id="cb460-31"><a href="appendix.html#cb460-31" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Count&#39;</span> <span class="ot">=</span> cnt)</span></code></pre></div>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="appendix.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Table </span><span class="al">###</span></span>
<span id="cb461-2"><a href="appendix.html#cb461-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-3"><a href="appendix.html#cb461-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb461-4"><a href="appendix.html#cb461-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb461-5"><a href="appendix.html#cb461-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-6"><a href="appendix.html#cb461-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Format output with datatable</span></span>
<span id="cb461-7"><a href="appendix.html#cb461-7" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(dept_tenure_proper, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="heatmaps-1" class="section level2" number="18.3">
<h2><span class="header-section-number">18.3</span> Heatmaps</h2>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="appendix.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb462-2"><a href="appendix.html#cb462-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-3"><a href="appendix.html#cb462-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb462-4"><a href="appendix.html#cb462-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb462-5"><a href="appendix.html#cb462-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-6"><a href="appendix.html#cb462-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb462-7"><a href="appendix.html#cb462-7" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb462-8"><a href="appendix.html#cb462-8" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb462-9"><a href="appendix.html#cb462-9" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb462-10"><a href="appendix.html#cb462-10" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb462-11"><a href="appendix.html#cb462-11" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb462-12"><a href="appendix.html#cb462-12" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb462-13"><a href="appendix.html#cb462-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb462-14"><a href="appendix.html#cb462-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-15"><a href="appendix.html#cb462-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb462-16"><a href="appendix.html#cb462-16" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb462-17"><a href="appendix.html#cb462-17" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb462-18"><a href="appendix.html#cb462-18" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb462-19"><a href="appendix.html#cb462-19" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb462-20"><a href="appendix.html#cb462-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-21"><a href="appendix.html#cb462-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb462-22"><a href="appendix.html#cb462-22" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="appendix.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Heatmap </span><span class="al">###</span></span>
<span id="cb463-2"><a href="appendix.html#cb463-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-3"><a href="appendix.html#cb463-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb463-4"><a href="appendix.html#cb463-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb463-5"><a href="appendix.html#cb463-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-6"><a href="appendix.html#cb463-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(dept_tenure, <span class="fu">aes</span>(<span class="at">x =</span> tenure_band, <span class="at">y =</span> dept, <span class="at">fill =</span> cnt)) <span class="sc">+</span></span>
<span id="cb463-7"><a href="appendix.html#cb463-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb463-8"><a href="appendix.html#cb463-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;A large portion of our workforce has between 3 and 10 years</span><span class="sc">\n</span><span class="st"> of company tenure and works within R&amp;D.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Tenure&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb463-9"><a href="appendix.html#cb463-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Employee Count&quot;</span>)) <span class="sc">+</span></span>
<span id="cb463-10"><a href="appendix.html#cb463-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">&quot;#F2F2F2&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#0070C0&quot;</span>) <span class="sc">+</span></span>
<span id="cb463-11"><a href="appendix.html#cb463-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb463-12"><a href="appendix.html#cb463-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb463-13"><a href="appendix.html#cb463-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb463-14"><a href="appendix.html#cb463-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb463-15"><a href="appendix.html#cb463-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb463-16"><a href="appendix.html#cb463-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="scatterplots-1" class="section level2" number="18.4">
<h2><span class="header-section-number">18.4</span> Scatterplots</h2>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="appendix.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb464-2"><a href="appendix.html#cb464-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-3"><a href="appendix.html#cb464-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset df to active sales employees</span></span>
<span id="cb464-4"><a href="appendix.html#cb464-4" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, dept <span class="sc">==</span> <span class="st">&#39;Sales&#39;</span> <span class="sc">&amp;</span> active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb464-5"><a href="appendix.html#cb464-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-6"><a href="appendix.html#cb464-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set quote attainment flag for data viz coloring</span></span>
<span id="cb464-7"><a href="appendix.html#cb464-7" aria-hidden="true" tabindex="-1"></a>sales<span class="sc">$</span>quota_flg <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sales<span class="sc">$</span>ytd_sales <span class="sc">&gt;=</span> <span class="dv">150000</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="appendix.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Scatterplots </span><span class="al">###</span></span>
<span id="cb465-2"><a href="appendix.html#cb465-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-3"><a href="appendix.html#cb465-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb465-4"><a href="appendix.html#cb465-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb465-5"><a href="appendix.html#cb465-5" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(scales)</span>
<span id="cb465-6"><a href="appendix.html#cb465-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-7"><a href="appendix.html#cb465-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic scatterplot</span></span>
<span id="cb465-8"><a href="appendix.html#cb465-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sales, <span class="fu">aes</span>(<span class="at">x =</span> work_exp, <span class="at">y =</span> ytd_sales, <span class="at">group =</span> quota_flg)) <span class="sc">+</span></span>
<span id="cb465-9"><a href="appendix.html#cb465-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb465-10"><a href="appendix.html#cb465-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The relationship between work experience and YTD sales is positive.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Work Experience&#39;</span>, <span class="at">y =</span> <span class="st">&#39;YTD Sales (USD)&#39;</span>) <span class="sc">+</span></span>
<span id="cb465-11"><a href="appendix.html#cb465-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb465-12"><a href="appendix.html#cb465-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-13"><a href="appendix.html#cb465-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb465-14"><a href="appendix.html#cb465-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-15"><a href="appendix.html#cb465-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-16"><a href="appendix.html#cb465-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-17"><a href="appendix.html#cb465-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-18"><a href="appendix.html#cb465-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span>
<span id="cb465-19"><a href="appendix.html#cb465-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-20"><a href="appendix.html#cb465-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot with preattentive attributes</span></span>
<span id="cb465-21"><a href="appendix.html#cb465-21" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sales, <span class="fu">aes</span>(<span class="at">x =</span> work_exp, <span class="at">y =</span> ytd_sales, <span class="at">group =</span> quota_flg)) <span class="sc">+</span></span>
<span id="cb465-22"><a href="appendix.html#cb465-22" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">as.factor</span>(quota_flg))) <span class="sc">+</span></span>
<span id="cb465-23"><a href="appendix.html#cb465-23" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">150000</span>, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>) <span class="sc">+</span> </span>
<span id="cb465-24"><a href="appendix.html#cb465-24" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">159000</span>, <span class="at">label =</span> <span class="st">&quot;Sales Quota = $150k&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb465-25"><a href="appendix.html#cb465-25" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Some employees with more work experience have </span><span class="sc">\n</span><span class="st">already met the full year sales quota.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Work Experience&#39;</span>, <span class="at">y =</span> <span class="st">&#39;YTD Sales (USD)&#39;</span>) <span class="sc">+</span></span>
<span id="cb465-26"><a href="appendix.html#cb465-26" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb465-27"><a href="appendix.html#cb465-27" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb465-28"><a href="appendix.html#cb465-28" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb465-29"><a href="appendix.html#cb465-29" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-30"><a href="appendix.html#cb465-30" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb465-31"><a href="appendix.html#cb465-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-32"><a href="appendix.html#cb465-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb465-33"><a href="appendix.html#cb465-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-34"><a href="appendix.html#cb465-34" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb465-35"><a href="appendix.html#cb465-35" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="line-charts" class="section level2" number="18.5">
<h2><span class="header-section-number">18.5</span> Line Charts</h2>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="appendix.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb466-2"><a href="appendix.html#cb466-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-3"><a href="appendix.html#cb466-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb466-4"><a href="appendix.html#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb466-5"><a href="appendix.html#cb466-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-6"><a href="appendix.html#cb466-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb466-7"><a href="appendix.html#cb466-7" aria-hidden="true" tabindex="-1"></a>months <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span></span>
<span id="cb466-8"><a href="appendix.html#cb466-8" aria-hidden="true" tabindex="-1"></a>eng_rt <span class="ot">=</span> <span class="dv">5</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="fl">2.7</span>, <span class="fl">2.9</span>) <span class="sc">+</span> <span class="fl">2.41</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">41</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> .<span class="dv">02</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb466-9"><a href="appendix.html#cb466-9" aria-hidden="true" tabindex="-1"></a>fin_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">15</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-10"><a href="appendix.html#cb466-10" aria-hidden="true" tabindex="-1"></a>ppl_rt <span class="ot">=</span> <span class="dv">3</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">12</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">4</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-11"><a href="appendix.html#cb466-11" aria-hidden="true" tabindex="-1"></a>prd_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">13</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-12"><a href="appendix.html#cb466-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-13"><a href="appendix.html#cb466-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine dimensions and metrics within df</span></span>
<span id="cb466-14"><a href="appendix.html#cb466-14" aria-hidden="true" tabindex="-1"></a>attrition_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="fu">rep</span>(months, <span class="dv">4</span>),</span>
<span id="cb466-15"><a href="appendix.html#cb466-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">dept =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="fu">length</span>(months)), </span>
<span id="cb466-16"><a href="appendix.html#cb466-16" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Finance&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb466-17"><a href="appendix.html#cb466-17" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;People&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb466-18"><a href="appendix.html#cb466-18" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Product&#39;</span>, <span class="fu">length</span>(months))),</span>
<span id="cb466-19"><a href="appendix.html#cb466-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">rate =</span> <span class="fu">c</span>(eng_rt,</span>
<span id="cb466-20"><a href="appendix.html#cb466-20" aria-hidden="true" tabindex="-1"></a>                                     fin_rt,</span>
<span id="cb466-21"><a href="appendix.html#cb466-21" aria-hidden="true" tabindex="-1"></a>                                     ppl_rt,</span>
<span id="cb466-22"><a href="appendix.html#cb466-22" aria-hidden="true" tabindex="-1"></a>                                     prd_rt))</span>
<span id="cb466-23"><a href="appendix.html#cb466-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-24"><a href="appendix.html#cb466-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordered factor for subsequent layering of lines in graph (last value takes the top position)</span></span>
<span id="cb466-25"><a href="appendix.html#cb466-25" aria-hidden="true" tabindex="-1"></a>attrition_dat<span class="sc">$</span>dept <span class="ot">&lt;-</span> <span class="fu">factor</span>(attrition_dat<span class="sc">$</span>dept, <span class="fu">c</span>(<span class="st">&quot;Product&quot;</span>, <span class="st">&quot;Finance&quot;</span>, <span class="st">&quot;People&quot;</span>, <span class="st">&quot;Engineering&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="appendix.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Single Series Line Graphs </span><span class="al">###</span></span>
<span id="cb467-2"><a href="appendix.html#cb467-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb467-3"><a href="appendix.html#cb467-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(attrition_dat, dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">group =</span> dept)) <span class="sc">+</span> </span>
<span id="cb467-4"><a href="appendix.html#cb467-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Engineering attrition has increased over the last 24 months, </span><span class="sc">\n</span><span class="st">largely due to an exponential spike in the last year.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>) <span class="sc">+</span></span>
<span id="cb467-5"><a href="appendix.html#cb467-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&#39;#0070C0&#39;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb467-6"><a href="appendix.html#cb467-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb467-7"><a href="appendix.html#cb467-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb467-8"><a href="appendix.html#cb467-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb467-9"><a href="appendix.html#cb467-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb467-10"><a href="appendix.html#cb467-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb467-11"><a href="appendix.html#cb467-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb467-12"><a href="appendix.html#cb467-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb467-13"><a href="appendix.html#cb467-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="appendix.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Two Series Line Graphs </span><span class="al">###</span></span>
<span id="cb468-2"><a href="appendix.html#cb468-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-3"><a href="appendix.html#cb468-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(attrition_dat, dept <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Product&#39;</span>)), <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">color =</span> dept)) <span class="sc">+</span> </span>
<span id="cb468-4"><a href="appendix.html#cb468-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The attrition trends for Engineering and Product </span><span class="sc">\n</span><span class="st">are negatively correlated over the last year.&#39;</span>,</span>
<span id="cb468-5"><a href="appendix.html#cb468-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb468-6"><a href="appendix.html#cb468-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>,</span>
<span id="cb468-7"><a href="appendix.html#cb468-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb468-8"><a href="appendix.html#cb468-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb468-9"><a href="appendix.html#cb468-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb468-10"><a href="appendix.html#cb468-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Engineering&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb468-11"><a href="appendix.html#cb468-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Product&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb468-12"><a href="appendix.html#cb468-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Engineering&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb468-13"><a href="appendix.html#cb468-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Product&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb468-14"><a href="appendix.html#cb468-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb468-15"><a href="appendix.html#cb468-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb468-16"><a href="appendix.html#cb468-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb468-17"><a href="appendix.html#cb468-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb468-18"><a href="appendix.html#cb468-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb468-19"><a href="appendix.html#cb468-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb468-20"><a href="appendix.html#cb468-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="appendix.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Multiple Series Line Graphs </span><span class="al">###</span></span>
<span id="cb469-2"><a href="appendix.html#cb469-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-3"><a href="appendix.html#cb469-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(attrition_dat, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> rate, <span class="at">color =</span> dept)) <span class="sc">+</span> </span>
<span id="cb469-4"><a href="appendix.html#cb469-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The attrition trend for Engineering is quite different </span><span class="sc">\n</span><span class="st">relative to attrition patterns for other departments.&#39;</span>,</span>
<span id="cb469-5"><a href="appendix.html#cb469-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Month&#39;</span>,</span>
<span id="cb469-6"><a href="appendix.html#cb469-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Attrition Rate&#39;</span>,</span>
<span id="cb469-7"><a href="appendix.html#cb469-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&#39;Department&#39;</span>) <span class="sc">+</span></span>
<span id="cb469-8"><a href="appendix.html#cb469-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb469-9"><a href="appendix.html#cb469-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="at">by =</span> <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb469-10"><a href="appendix.html#cb469-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Engineering&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Engineering&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-11"><a href="appendix.html#cb469-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Product&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-12"><a href="appendix.html#cb469-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Finance&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;Finance&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-13"><a href="appendix.html#cb469-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">y =</span> attrition_dat[attrition_dat<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;People&#39;</span> <span class="sc">&amp;</span> attrition_dat<span class="sc">$</span>month <span class="sc">==</span> <span class="fu">max</span>(attrition_dat<span class="sc">$</span>month), <span class="st">&#39;rate&#39;</span>], <span class="at">label =</span> <span class="st">&#39;People&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb469-14"><a href="appendix.html#cb469-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Engineering&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb469-15"><a href="appendix.html#cb469-15" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Product&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb469-16"><a href="appendix.html#cb469-16" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Finance&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb469-17"><a href="appendix.html#cb469-17" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;People&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb469-18"><a href="appendix.html#cb469-18" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb469-19"><a href="appendix.html#cb469-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb469-20"><a href="appendix.html#cb469-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb469-21"><a href="appendix.html#cb469-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb469-22"><a href="appendix.html#cb469-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb469-23"><a href="appendix.html#cb469-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb469-24"><a href="appendix.html#cb469-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="slopegraphs-1" class="section level2" number="18.6">
<h2><span class="header-section-number">18.6</span> Slopegraphs</h2>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="appendix.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb470-2"><a href="appendix.html#cb470-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-3"><a href="appendix.html#cb470-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb470-4"><a href="appendix.html#cb470-4" aria-hidden="true" tabindex="-1"></a>prepost_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Time 1&#39;</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">&#39;Time 2&#39;</span>, <span class="dv">2</span>)),</span>
<span id="cb470-5"><a href="appendix.html#cb470-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Treatment&#39;</span>, <span class="st">&#39;Control&#39;</span>), <span class="dv">2</span>),</span>
<span id="cb470-6"><a href="appendix.html#cb470-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">score =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">55</span>, <span class="dv">16</span>))</span></code></pre></div>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="appendix.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Slopegraphs </span><span class="al">###</span></span>
<span id="cb471-2"><a href="appendix.html#cb471-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-3"><a href="appendix.html#cb471-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb471-4"><a href="appendix.html#cb471-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb471-5"><a href="appendix.html#cb471-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-6"><a href="appendix.html#cb471-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate treatment and control group changes for inclusion in annotation</span></span>
<span id="cb471-7"><a href="appendix.html#cb471-7" aria-hidden="true" tabindex="-1"></a>treatment_chg <span class="ot">&lt;-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="at">select =</span> score) <span class="sc">-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 1&#39;</span>, <span class="at">select =</span> score)</span>
<span id="cb471-8"><a href="appendix.html#cb471-8" aria-hidden="true" tabindex="-1"></a>control_chg <span class="ot">&lt;-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="at">select =</span> score) <span class="sc">-</span> <span class="fu">subset</span>(prepost_scores, group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">&#39;Time 1&#39;</span>, <span class="at">select =</span> score)</span>
<span id="cb471-9"><a href="appendix.html#cb471-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-10"><a href="appendix.html#cb471-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(prepost_scores, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> score, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb471-11"><a href="appendix.html#cb471-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> group), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb471-12"><a href="appendix.html#cb471-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> group), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb471-13"><a href="appendix.html#cb471-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">expand_limits</span>(<span class="at">y =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb471-14"><a href="appendix.html#cb471-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2.1</span>, <span class="at">y =</span> prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>] <span class="sc">-</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Treatment&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>], <span class="st">&quot;% (&quot;</span>, <span class="fu">ifelse</span>(treatment_chg <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&#39;+&#39;</span>, <span class="st">&#39;&#39;</span>), treatment_chg, <span class="st">&quot;)&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Treatment Group&quot;</span>), <span class="at">color =</span> <span class="st">&quot;#0070C0&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb471-15"><a href="appendix.html#cb471-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2.1</span>, <span class="at">y =</span> prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>] <span class="sc">-</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prepost_scores[prepost_scores<span class="sc">$</span>group <span class="sc">==</span> <span class="st">&#39;Control&#39;</span> <span class="sc">&amp;</span> prepost_scores<span class="sc">$</span>date <span class="sc">==</span> <span class="st">&#39;Time 2&#39;</span>, <span class="st">&#39;score&#39;</span>], <span class="st">&quot;% (&quot;</span>, <span class="fu">ifelse</span>(control_chg <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&#39;+&#39;</span>, <span class="st">&#39;&#39;</span>), control_chg, <span class="st">&quot;)&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Control Group&quot;</span>), <span class="at">color =</span> <span class="st">&quot;#808080&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb471-16"><a href="appendix.html#cb471-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;          A more favorable change in engagement was observed </span><span class="sc">\n</span><span class="st">          for the treatment group relative to </span><span class="sc">\n</span><span class="st">          the control group.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Observation Period&#39;</span>) <span class="sc">+</span></span>
<span id="cb471-17"><a href="appendix.html#cb471-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Control&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>,</span>
<span id="cb471-18"><a href="appendix.html#cb471-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;Treatment&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb471-19"><a href="appendix.html#cb471-19" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-20"><a href="appendix.html#cb471-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb471-21"><a href="appendix.html#cb471-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-22"><a href="appendix.html#cb471-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-23"><a href="appendix.html#cb471-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb471-24"><a href="appendix.html#cb471-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb471-25"><a href="appendix.html#cb471-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb471-26"><a href="appendix.html#cb471-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="bar-charts-1" class="section level2" number="18.7">
<h2><span class="header-section-number">18.7</span> Bar Charts</h2>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="appendix.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb472-2"><a href="appendix.html#cb472-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-3"><a href="appendix.html#cb472-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb472-4"><a href="appendix.html#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb472-5"><a href="appendix.html#cb472-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-6"><a href="appendix.html#cb472-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate favorability distributions</span></span>
<span id="cb472-7"><a href="appendix.html#cb472-7" aria-hidden="true" tabindex="-1"></a>fav_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb472-8"><a href="appendix.html#cb472-8" aria-hidden="true" tabindex="-1"></a>neu_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb472-9"><a href="appendix.html#cb472-9" aria-hidden="true" tabindex="-1"></a>unfav_pct <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> fav_pct <span class="sc">-</span> neu_pct</span>
<span id="cb472-10"><a href="appendix.html#cb472-10" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(fav_pct, neu_pct, unfav_pct)</span>
<span id="cb472-11"><a href="appendix.html#cb472-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-12"><a href="appendix.html#cb472-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Average top box (favorable) score</span></span>
<span id="cb472-13"><a href="appendix.html#cb472-13" aria-hidden="true" tabindex="-1"></a>topbox_avg <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(fav_pct), <span class="dv">0</span>)</span>
<span id="cb472-14"><a href="appendix.html#cb472-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-15"><a href="appendix.html#cb472-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb472-16"><a href="appendix.html#cb472-16" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">dept =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>), <span class="dv">3</span>),</span>
<span id="cb472-17"><a href="appendix.html#cb472-17" aria-hidden="true" tabindex="-1"></a>                                <span class="at">favorability =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Favorable&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Neutral&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Unfavorable&#39;</span>, <span class="dv">7</span>)),</span>
<span id="cb472-18"><a href="appendix.html#cb472-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">pct =</span> scores)</span>
<span id="cb472-19"><a href="appendix.html#cb472-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-20"><a href="appendix.html#cb472-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank departments by top box score to support sorting</span></span>
<span id="cb472-21"><a href="appendix.html#cb472-21" aria-hidden="true" tabindex="-1"></a>dept_rank <span class="ot">&lt;-</span> engagement_scores <span class="sc">%&gt;%</span></span>
<span id="cb472-22"><a href="appendix.html#cb472-22" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">filter</span>(favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb472-23"><a href="appendix.html#cb472-23" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb472-24"><a href="appendix.html#cb472-24" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(pct))) <span class="sc">%&gt;%</span></span>
<span id="cb472-25"><a href="appendix.html#cb472-25" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">select</span>(dept, rank)</span>
<span id="cb472-26"><a href="appendix.html#cb472-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-27"><a href="appendix.html#cb472-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag top department records in df to support conditional coloring</span></span>
<span id="cb472-28"><a href="appendix.html#cb472-28" aria-hidden="true" tabindex="-1"></a>engagement_scores<span class="sc">$</span>top_score <span class="ot">=</span> <span class="fu">ifelse</span>(engagement_scores<span class="sc">$</span>dept <span class="sc">==</span> dept_rank[<span class="dv">1</span>, <span class="st">&#39;dept&#39;</span>], <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb472-29"><a href="appendix.html#cb472-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-30"><a href="appendix.html#cb472-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add department rank based on top box scores</span></span>
<span id="cb472-31"><a href="appendix.html#cb472-31" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">left_join</span>(engagement_scores, dept_rank, <span class="at">by =</span> <span class="st">&quot;dept&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="appendix.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Vertical Bar Charts </span><span class="al">###</span></span>
<span id="cb473-2"><a href="appendix.html#cb473-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-3"><a href="appendix.html#cb473-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(engagement_scores, favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, <span class="sc">-</span>pct), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(top_score))) <span class="sc">+</span></span>
<span id="cb473-4"><a href="appendix.html#cb473-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The People team is leading in department-level engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb473-5"><a href="appendix.html#cb473-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb473-6"><a href="appendix.html#cb473-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> topbox_avg, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>) <span class="sc">+</span> </span>
<span id="cb473-7"><a href="appendix.html#cb473-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">7.1</span>, <span class="at">y =</span> topbox_avg <span class="sc">+</span> <span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Avg = &quot;</span>, topbox_avg), <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb473-8"><a href="appendix.html#cb473-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb473-9"><a href="appendix.html#cb473-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb473-10"><a href="appendix.html#cb473-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb473-11"><a href="appendix.html#cb473-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb473-12"><a href="appendix.html#cb473-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb473-13"><a href="appendix.html#cb473-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb473-14"><a href="appendix.html#cb473-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb473-15"><a href="appendix.html#cb473-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb473-16"><a href="appendix.html#cb473-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="appendix.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Horizontal Bar Charts </span><span class="al">###</span></span>
<span id="cb474-2"><a href="appendix.html#cb474-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-3"><a href="appendix.html#cb474-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">subset</span>(engagement_scores, favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, pct), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(top_score))) <span class="sc">+</span></span>
<span id="cb474-4"><a href="appendix.html#cb474-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;The People team is leading in department-level engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb474-5"><a href="appendix.html#cb474-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb474-6"><a href="appendix.html#cb474-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb474-7"><a href="appendix.html#cb474-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> topbox_avg, <span class="at">linetype =</span> <span class="st">&#39;dotted&#39;</span>, <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>) <span class="sc">+</span> </span>
<span id="cb474-8"><a href="appendix.html#cb474-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> topbox_avg <span class="sc">+</span> <span class="fl">2.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;Avg = &quot;</span>, topbox_avg), <span class="at">color =</span> <span class="st">&quot;#404040&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb474-9"><a href="appendix.html#cb474-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb474-10"><a href="appendix.html#cb474-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>)) <span class="sc">+</span></span>
<span id="cb474-11"><a href="appendix.html#cb474-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb474-12"><a href="appendix.html#cb474-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb474-13"><a href="appendix.html#cb474-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb474-14"><a href="appendix.html#cb474-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb474-15"><a href="appendix.html#cb474-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb474-16"><a href="appendix.html#cb474-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb474-17"><a href="appendix.html#cb474-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="appendix.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Stacked Bar Charts </span><span class="al">###</span></span>
<span id="cb475-2"><a href="appendix.html#cb475-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-3"><a href="appendix.html#cb475-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(engagement_scores, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dept, <span class="sc">-</span>rank), <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">factor</span>(favorability, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Unfavorable&quot;</span>, <span class="st">&quot;Neutral&quot;</span>, <span class="st">&quot;Favorable&quot;</span>)))) <span class="sc">+</span></span>
<span id="cb475-4"><a href="appendix.html#cb475-4" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Half of Engineering respondents report unfavorable engagement.&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Department&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Engagement Score&#39;</span>) <span class="sc">+</span></span>
<span id="cb475-5"><a href="appendix.html#cb475-5" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Favorability&quot;</span>)) <span class="sc">+</span></span>
<span id="cb475-6"><a href="appendix.html#cb475-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb475-7"><a href="appendix.html#cb475-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb475-8"><a href="appendix.html#cb475-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Favorable&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb475-9"><a href="appendix.html#cb475-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Neutral&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>,</span>
<span id="cb475-10"><a href="appendix.html#cb475-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Unfavorable&quot;</span> <span class="ot">=</span> <span class="st">&quot;#ED7D31&quot;</span>)) <span class="sc">+</span></span>
<span id="cb475-11"><a href="appendix.html#cb475-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb475-12"><a href="appendix.html#cb475-12" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb475-13"><a href="appendix.html#cb475-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb475-14"><a href="appendix.html#cb475-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb475-15"><a href="appendix.html#cb475-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb475-16"><a href="appendix.html#cb475-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb475-17"><a href="appendix.html#cb475-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="waterfall-charts-1" class="section level2" number="18.8">
<h2><span class="header-section-number">18.8</span> Waterfall Charts</h2>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="appendix.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb476-2"><a href="appendix.html#cb476-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-3"><a href="appendix.html#cb476-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate headcount data with id field to define bar order</span></span>
<span id="cb476-4"><a href="appendix.html#cb476-4" aria-hidden="true" tabindex="-1"></a>hc_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb476-5"><a href="appendix.html#cb476-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">event =</span> <span class="fu">c</span>(<span class="st">&quot;Starting HC&quot;</span>, <span class="st">&quot;Hires&quot;</span>, <span class="st">&quot;Transfers In&quot;</span>, <span class="st">&quot;Transfers Out&quot;</span>, <span class="st">&quot;Exits&quot;</span>, <span class="st">&quot;Ending HC&quot;</span>),</span>
<span id="cb476-6"><a href="appendix.html#cb476-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Headcount&quot;</span>),</span>
<span id="cb476-7"><a href="appendix.html#cb476-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="dv">130</span>),</span>
<span id="cb476-8"><a href="appendix.html#cb476-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">start =</span> <span class="cn">NA</span>,</span>
<span id="cb476-9"><a href="appendix.html#cb476-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">end =</span> <span class="cn">NA</span>)</span>
<span id="cb476-10"><a href="appendix.html#cb476-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-11"><a href="appendix.html#cb476-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and end values to support waterfall chart</span></span>
<span id="cb476-12"><a href="appendix.html#cb476-12" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(hc_dat<span class="sc">$</span>count)</span>
<span id="cb476-13"><a href="appendix.html#cb476-13" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>), <span class="dv">0</span>)</span>
<span id="cb476-14"><a href="appendix.html#cb476-14" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>start <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb476-15"><a href="appendix.html#cb476-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-16"><a href="appendix.html#cb476-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap start/end values for last record (Ending HC)</span></span>
<span id="cb476-17"><a href="appendix.html#cb476-17" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;end&quot;</span>] <span class="ot">&lt;-</span> hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>]</span>
<span id="cb476-18"><a href="appendix.html#cb476-18" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="appendix.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Waterfall Chart </span><span class="al">###</span></span>
<span id="cb477-2"><a href="appendix.html#cb477-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-3"><a href="appendix.html#cb477-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb477-4"><a href="appendix.html#cb477-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb477-5"><a href="appendix.html#cb477-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-6"><a href="appendix.html#cb477-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(hc_dat, <span class="fu">aes</span>(<span class="at">x =</span> event, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb477-7"><a href="appendix.html#cb477-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(event, id),</span>
<span id="cb477-8"><a href="appendix.html#cb477-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xmin =</span> id <span class="sc">-</span> <span class="fl">0.45</span>,</span>
<span id="cb477-9"><a href="appendix.html#cb477-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xmax =</span> id <span class="sc">+</span> <span class="fl">0.50</span>,</span>
<span id="cb477-10"><a href="appendix.html#cb477-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ymin =</span> end,</span>
<span id="cb477-11"><a href="appendix.html#cb477-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ymax =</span> start)) <span class="sc">+</span></span>
<span id="cb477-12"><a href="appendix.html#cb477-12" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_text</span>(<span class="fu">aes</span>(id, end, <span class="at">label =</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), end, <span class="st">&#39;&#39;</span>)), <span class="co"># Only label start and end HC</span></span>
<span id="cb477-13"><a href="appendix.html#cb477-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb477-14"><a href="appendix.html#cb477-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Hires and inbound transfers have outpaced outbound transfers and exits </span><span class="sc">\n</span><span class="st">in Engineering, leading to a net YTD increase in headcount.&#39;</span>,</span>
<span id="cb477-15"><a href="appendix.html#cb477-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">&#39;Event&#39;</span>,</span>
<span id="cb477-16"><a href="appendix.html#cb477-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">&#39;Headcount&#39;</span>) <span class="sc">+</span></span>
<span id="cb477-17"><a href="appendix.html#cb477-17" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>,</span>
<span id="cb477-18"><a href="appendix.html#cb477-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Growth&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>,</span>
<span id="cb477-19"><a href="appendix.html#cb477-19" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Loss&quot;</span> <span class="ot">=</span> <span class="st">&quot;#ED7D31&quot;</span>)) <span class="sc">+</span></span>
<span id="cb477-20"><a href="appendix.html#cb477-20" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb477-21"><a href="appendix.html#cb477-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb477-22"><a href="appendix.html#cb477-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">r =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb477-23"><a href="appendix.html#cb477-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.title.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb477-24"><a href="appendix.html#cb477-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>),</span>
<span id="cb477-25"><a href="appendix.html#cb477-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb477-26"><a href="appendix.html#cb477-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>())</span></code></pre></div>
</div>
<div id="waffle-charts-1" class="section level2" number="18.9">
<h2><span class="header-section-number">18.9</span> Waffle Charts</h2>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="appendix.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb478-2"><a href="appendix.html#cb478-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-3"><a href="appendix.html#cb478-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create df with TA funnel metrics</span></span>
<span id="cb478-4"><a href="appendix.html#cb478-4" aria-hidden="true" tabindex="-1"></a>ta_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">stage =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span>, <span class="st">&quot;Phone Screen&quot;</span>, <span class="st">&quot;Interview&quot;</span>, <span class="st">&quot;Offer Extend&quot;</span>, <span class="st">&quot;Offer Accept&quot;</span>),</span>
<span id="cb478-5"><a href="appendix.html#cb478-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb478-6"><a href="appendix.html#cb478-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-7"><a href="appendix.html#cb478-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set depth of waffle chart (# of y-axis rows)</span></span>
<span id="cb478-8"><a href="appendix.html#cb478-8" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb478-9"><a href="appendix.html#cb478-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-10"><a href="appendix.html#cb478-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Each observation needs an x and y coordinate, and y needs to be specified first for a waffle chart with horizontal accumulation</span></span>
<span id="cb478-11"><a href="appendix.html#cb478-11" aria-hidden="true" tabindex="-1"></a>waffle_dat <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span>depth,</span>
<span id="cb478-12"><a href="appendix.html#cb478-12" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="fu">ceiling</span>(<span class="fu">sum</span>(ta_dat<span class="sc">$</span>cnt) <span class="sc">/</span> depth)))</span>
<span id="cb478-13"><a href="appendix.html#cb478-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-14"><a href="appendix.html#cb478-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Expand the applicant counts into a vector of stage labels</span></span>
<span id="cb478-15"><a href="appendix.html#cb478-15" aria-hidden="true" tabindex="-1"></a>stages <span class="ot">&lt;-</span> <span class="fu">rep</span>(ta_dat<span class="sc">$</span>stage, ta_dat<span class="sc">$</span>cnt)</span>
<span id="cb478-16"><a href="appendix.html#cb478-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-17"><a href="appendix.html#cb478-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate stages and fill any extra tiles with NA</span></span>
<span id="cb478-18"><a href="appendix.html#cb478-18" aria-hidden="true" tabindex="-1"></a>waffle_dat<span class="sc">$</span>stage <span class="ot">&lt;-</span> <span class="fu">c</span>(stages, <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">nrow</span>(waffle_dat) <span class="sc">-</span> <span class="fu">length</span>(stages)))</span></code></pre></div>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="appendix.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Waffle Chart </span><span class="al">###</span></span>
<span id="cb479-2"><a href="appendix.html#cb479-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-3"><a href="appendix.html#cb479-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb479-4"><a href="appendix.html#cb479-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb479-5"><a href="appendix.html#cb479-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-6"><a href="appendix.html#cb479-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(waffle_dat, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> stage)) <span class="sc">+</span> </span>
<span id="cb479-7"><a href="appendix.html#cb479-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;We select 10 in every 100 applicants. </span><span class="sc">\n</span><span class="st">Our offer acceptance rate (OAR) is 40%.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb479-8"><a href="appendix.html#cb479-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb479-9"><a href="appendix.html#cb479-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D9D9D9&quot;</span>, </span>
<span id="cb479-10"><a href="appendix.html#cb479-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Phone Screen&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb479-11"><a href="appendix.html#cb479-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Interview&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6A6A6&quot;</span>, </span>
<span id="cb479-12"><a href="appendix.html#cb479-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Offer Extend&quot;</span> <span class="ot">=</span> <span class="st">&quot;#808080&quot;</span>,</span>
<span id="cb479-13"><a href="appendix.html#cb479-13" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Offer Accept&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb479-14"><a href="appendix.html#cb479-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_y_reverse</span>() <span class="sc">+</span></span>
<span id="cb479-15"><a href="appendix.html#cb479-15" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb479-16"><a href="appendix.html#cb479-16" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb479-17"><a href="appendix.html#cb479-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>
</div>
<div id="sankey-diagrams-1" class="section level2" number="18.10">
<h2><span class="header-section-number">18.10</span> Sankey Diagrams</h2>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="appendix.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb480-2"><a href="appendix.html#cb480-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-3"><a href="appendix.html#cb480-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb480-4"><a href="appendix.html#cb480-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb480-5"><a href="appendix.html#cb480-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-6"><a href="appendix.html#cb480-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb480-7"><a href="appendix.html#cb480-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb480-8"><a href="appendix.html#cb480-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-9"><a href="appendix.html#cb480-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create nodes df</span></span>
<span id="cb480-10"><a href="appendix.html#cb480-10" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>, <span class="co"># source</span></span>
<span id="cb480-11"><a href="appendix.html#cb480-11" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>)) <span class="co"># destination</span></span>
<span id="cb480-12"><a href="appendix.html#cb480-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-13"><a href="appendix.html#cb480-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create links df</span></span>
<span id="cb480-14"><a href="appendix.html#cb480-14" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">source =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">target =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">13</span>)</span>
<span id="cb480-15"><a href="appendix.html#cb480-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-16"><a href="appendix.html#cb480-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Append employee transfer counts per department pair to links df</span></span>
<span id="cb480-17"><a href="appendix.html#cb480-17" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>source <span class="sc">==</span> links<span class="sc">$</span>target<span class="dv">-7</span>, <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">150</span>, <span class="dv">50</span>), <span class="dv">0</span>), <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">30</span>, <span class="dv">5</span>), <span class="dv">0</span>))</span>
<span id="cb480-18"><a href="appendix.html#cb480-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-19"><a href="appendix.html#cb480-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Append source department variable for colored connections</span></span>
<span id="cb480-20"><a href="appendix.html#cb480-20" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb480-21"><a href="appendix.html#cb480-21" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Engineering&quot;</span>,</span>
<span id="cb480-22"><a href="appendix.html#cb480-22" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Finance&quot;</span>,</span>
<span id="cb480-23"><a href="appendix.html#cb480-23" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Legal&quot;</span>,</span>
<span id="cb480-24"><a href="appendix.html#cb480-24" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Marketing&quot;</span>,</span>
<span id="cb480-25"><a href="appendix.html#cb480-25" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;People&quot;</span>,</span>
<span id="cb480-26"><a href="appendix.html#cb480-26" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;Product&quot;</span>,</span>
<span id="cb480-27"><a href="appendix.html#cb480-27" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;Sales&quot;</span>,</span>
<span id="cb480-28"><a href="appendix.html#cb480-28" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;NA&quot;</span></span>
<span id="cb480-29"><a href="appendix.html#cb480-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb480-30"><a href="appendix.html#cb480-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-31"><a href="appendix.html#cb480-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Append within/outside department transfer variable for colored connections</span></span>
<span id="cb480-32"><a href="appendix.html#cb480-32" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>wiout_dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb480-33"><a href="appendix.html#cb480-33" aria-hidden="true" tabindex="-1"></a>  (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">7</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">8</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">9</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">13</span>) <span class="sc">~</span> <span class="st">&quot;Within&quot;</span>,</span>
<span id="cb480-34"><a href="appendix.html#cb480-34" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Outside&quot;</span></span>
<span id="cb480-35"><a href="appendix.html#cb480-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb480-36"><a href="appendix.html#cb480-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-37"><a href="appendix.html#cb480-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Append dichotomous product/other indicator to links and nodes data frames</span></span>
<span id="cb480-38"><a href="appendix.html#cb480-38" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span>
<span id="cb480-39"><a href="appendix.html#cb480-39" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(nodes<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="appendix.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Sankey Diagrams </span><span class="al">###</span></span>
<span id="cb481-2"><a href="appendix.html#cb481-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-3"><a href="appendix.html#cb481-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb481-4"><a href="appendix.html#cb481-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkD3)</span>
<span id="cb481-5"><a href="appendix.html#cb481-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-6"><a href="appendix.html#cb481-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 1</span></span>
<span id="cb481-7"><a href="appendix.html#cb481-7" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb481-8"><a href="appendix.html#cb481-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb481-9"><a href="appendix.html#cb481-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb481-10"><a href="appendix.html#cb481-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb481-11"><a href="appendix.html#cb481-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb481-12"><a href="appendix.html#cb481-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb481-13"><a href="appendix.html#cb481-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb481-14"><a href="appendix.html#cb481-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>)</span>
<span id="cb481-15"><a href="appendix.html#cb481-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-16"><a href="appendix.html#cb481-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 2</span></span>
<span id="cb481-17"><a href="appendix.html#cb481-17" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb481-18"><a href="appendix.html#cb481-18" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb481-19"><a href="appendix.html#cb481-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb481-20"><a href="appendix.html#cb481-20" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb481-21"><a href="appendix.html#cb481-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb481-22"><a href="appendix.html#cb481-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb481-23"><a href="appendix.html#cb481-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb481-24"><a href="appendix.html#cb481-24" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb481-25"><a href="appendix.html#cb481-25" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;dept&quot;</span>)</span>
<span id="cb481-26"><a href="appendix.html#cb481-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-27"><a href="appendix.html#cb481-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 3</span></span>
<span id="cb481-28"><a href="appendix.html#cb481-28" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb481-29"><a href="appendix.html#cb481-29" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb481-30"><a href="appendix.html#cb481-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb481-31"><a href="appendix.html#cb481-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb481-32"><a href="appendix.html#cb481-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb481-33"><a href="appendix.html#cb481-33" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb481-34"><a href="appendix.html#cb481-34" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb481-35"><a href="appendix.html#cb481-35" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb481-36"><a href="appendix.html#cb481-36" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;wiout_dept&quot;</span>)</span>
<span id="cb481-37"><a href="appendix.html#cb481-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-38"><a href="appendix.html#cb481-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Sankey diagram 4</span></span>
<span id="cb481-39"><a href="appendix.html#cb481-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Define color palette</span></span>
<span id="cb481-40"><a href="appendix.html#cb481-40" aria-hidden="true" tabindex="-1"></a>colorJS <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;d3.scaleOrdinal([&quot;#BFBFBF&quot;, &quot;#0070C0&quot;])&#39;</span>)</span>
<span id="cb481-41"><a href="appendix.html#cb481-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-42"><a href="appendix.html#cb481-42" aria-hidden="true" tabindex="-1"></a>networkD3<span class="sc">::</span><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb481-43"><a href="appendix.html#cb481-43" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Nodes =</span> nodes,</span>
<span id="cb481-44"><a href="appendix.html#cb481-44" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, </span>
<span id="cb481-45"><a href="appendix.html#cb481-45" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb481-46"><a href="appendix.html#cb481-46" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb481-47"><a href="appendix.html#cb481-47" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb481-48"><a href="appendix.html#cb481-48" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fontSize =</span> <span class="dv">12</span>, </span>
<span id="cb481-49"><a href="appendix.html#cb481-49" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nodeWidth =</span> <span class="dv">30</span>, </span>
<span id="cb481-50"><a href="appendix.html#cb481-50" aria-hidden="true" tabindex="-1"></a>                         <span class="at">NodeGroup =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb481-51"><a href="appendix.html#cb481-51" aria-hidden="true" tabindex="-1"></a>                         <span class="at">LinkGroup =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb481-52"><a href="appendix.html#cb481-52" aria-hidden="true" tabindex="-1"></a>                         <span class="at">colourScale =</span> colorJS)</span></code></pre></div>
</div>
<div id="pie-charts-1" class="section level2" number="18.11">
<h2><span class="header-section-number">18.11</span> Pie Charts</h2>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="appendix.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb482-2"><a href="appendix.html#cb482-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-3"><a href="appendix.html#cb482-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb482-4"><a href="appendix.html#cb482-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb482-5"><a href="appendix.html#cb482-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-6"><a href="appendix.html#cb482-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for gender representation among active employees</span></span>
<span id="cb482-7"><a href="appendix.html#cb482-7" aria-hidden="true" tabindex="-1"></a>smmry_gender <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb482-8"><a href="appendix.html#cb482-8" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb482-9"><a href="appendix.html#cb482-9" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb482-10"><a href="appendix.html#cb482-10" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb482-11"><a href="appendix.html#cb482-11" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(cnt <span class="sc">/</span> <span class="fu">sum</span>(cnt) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb482-12"><a href="appendix.html#cb482-12" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct))</span></code></pre></div>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="appendix.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Pie Chart </span><span class="al">###</span></span>
<span id="cb483-2"><a href="appendix.html#cb483-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-3"><a href="appendix.html#cb483-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb483-4"><a href="appendix.html#cb483-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb483-5"><a href="appendix.html#cb483-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-6"><a href="appendix.html#cb483-6" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(smmry_gender, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> pct, <span class="at">fill =</span> <span class="fu">as.factor</span>(gender))) <span class="sc">+</span></span>
<span id="cb483-7"><a href="appendix.html#cb483-7" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb483-8"><a href="appendix.html#cb483-8" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb483-9"><a href="appendix.html#cb483-9" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(pct, <span class="st">&quot;%&quot;</span>)), <span class="at">color =</span> <span class="fu">ifelse</span>(smmry_gender<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&#39;Male&#39;</span>, <span class="st">&#39;white&#39;</span>, <span class="st">&#39;black&#39;</span>), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb483-10"><a href="appendix.html#cb483-10" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Nearly 60 percent of active employees identify as male.&#39;</span>) <span class="sc">+</span></span>
<span id="cb483-11"><a href="appendix.html#cb483-11" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Female&quot;</span> <span class="ot">=</span> <span class="st">&quot;#BFBFBF&quot;</span>, </span>
<span id="cb483-12"><a href="appendix.html#cb483-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;Male&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0070C0&quot;</span>)) <span class="sc">+</span></span>
<span id="cb483-13"><a href="appendix.html#cb483-13" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb483-14"><a href="appendix.html#cb483-14" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb483-15"><a href="appendix.html#cb483-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb483-16"><a href="appendix.html#cb483-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb483-17"><a href="appendix.html#cb483-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb483-18"><a href="appendix.html#cb483-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;#404040&quot;</span>))</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bibli.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["The_Fundamentals_of_People_Analytics.pdf", "The_Fundamentals_of_People_Analytics.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
