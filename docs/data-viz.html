<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>15 Data Visualization | The Fundamentals of People Analytics: With Applications in R</title>
  <meta name="description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="generator" content="bookdown 0.24.4 and GitBook 2.6.7" />

  <meta property="og:title" content="15 Data Visualization | The Fundamentals of People Analytics: With Applications in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  <meta name="github-repo" content="crstarbuck/peopleanalytics-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="15 Data Visualization | The Fundamentals of People Analytics: With Applications in R" />
  
  <meta name="twitter:description" content="An end-to-end guide for successful analytics projects in the social sciences" />
  

<meta name="author" content="Craig Starbuck" />


<meta name="date" content="2022-09-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="unsup-lrn.html"/>
<link rel="next" href="storytelling.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Fundamentals of People Analytics: With Applications in R</a></li>

<li class="divider"></li>
<li><a href="dedication.html#dedication" id="toc-dedication">Dedication</a></li>
<li><a href="foreword.html#foreword" id="toc-foreword">Foreword</a></li>
<li><a href="preface.html#preface" id="toc-preface">Preface</a></li>
<li><a href="getting-started.html#getting-started" id="toc-getting-started"><span class="toc-section-number">1</span> Getting Started</a>
<ul>
<li><a href="getting-started.html#guiding-principles" id="toc-guiding-principles"><span class="toc-section-number">1.1</span> Guiding Principles</a>
<ul>
<li><a href="getting-started.html#pro-employee-thinking" id="toc-pro-employee-thinking"><span class="toc-section-number">1.1.1</span> Pro-Employee Thinking</a></li>
<li><a href="getting-started.html#quality" id="toc-quality"><span class="toc-section-number">1.1.2</span> Quality</a></li>
<li><a href="getting-started.html#prioritization" id="toc-prioritization"><span class="toc-section-number">1.1.3</span> Prioritization</a></li>
</ul></li>
<li><a href="getting-started.html#tooling" id="toc-tooling"><span class="toc-section-number">1.2</span> Tooling</a></li>
<li><a href="getting-started.html#data-sets" id="toc-data-sets"><span class="toc-section-number">1.3</span> Data Sets</a>
<ul>
<li><a href="getting-started.html#employees" id="toc-employees"><span class="toc-section-number">1.3.1</span> Employees</a></li>
<li><a href="getting-started.html#turnover-trends" id="toc-turnover-trends"><span class="toc-section-number">1.3.2</span> Turnover Trends</a></li>
<li><a href="getting-started.html#survey-responses" id="toc-survey-responses"><span class="toc-section-number">1.3.3</span> Survey Responses</a></li>
</ul></li>
<li><a href="getting-started.html#d-framework" id="toc-d-framework"><span class="toc-section-number">1.4</span> 4D Framework</a></li>
</ul></li>
<li><a href="r-intro.html#r-intro" id="toc-r-intro"><span class="toc-section-number">2</span> Introduction to R</a>
<ul>
<li><a href="r-intro.html#getting-started-1" id="toc-getting-started-1"><span class="toc-section-number">2.1</span> Getting Started</a>
<ul>
<li><a href="r-intro.html#installing-r" id="toc-installing-r"><span class="toc-section-number">2.1.1</span> Installing R</a></li>
<li><a href="r-intro.html#installing-r-studio" id="toc-installing-r-studio"><span class="toc-section-number">2.1.2</span> Installing R Studio</a></li>
<li><a href="r-intro.html#installing-packages" id="toc-installing-packages"><span class="toc-section-number">2.1.3</span> Installing Packages</a></li>
<li><a href="r-intro.html#case-sensitivity" id="toc-case-sensitivity"><span class="toc-section-number">2.1.4</span> Case Sensitivity</a></li>
<li><a href="r-intro.html#help" id="toc-help"><span class="toc-section-number">2.1.5</span> Help</a></li>
<li><a href="r-intro.html#objects" id="toc-objects"><span class="toc-section-number">2.1.6</span> Objects</a></li>
<li><a href="r-intro.html#comments" id="toc-comments"><span class="toc-section-number">2.1.7</span> Comments</a></li>
<li><a href="r-intro.html#testing-early-and-often" id="toc-testing-early-and-often"><span class="toc-section-number">2.1.8</span> Testing Early and Often</a></li>
</ul></li>
<li><a href="r-intro.html#vectors" id="toc-vectors"><span class="toc-section-number">2.2</span> Vectors</a></li>
<li><a href="r-intro.html#matrices" id="toc-matrices"><span class="toc-section-number">2.3</span> Matrices</a></li>
<li><a href="r-intro.html#factors" id="toc-factors"><span class="toc-section-number">2.4</span> Factors</a></li>
<li><a href="r-intro.html#data-frames" id="toc-data-frames"><span class="toc-section-number">2.5</span> Data Frames</a></li>
<li><a href="r-intro.html#lists" id="toc-lists"><span class="toc-section-number">2.6</span> Lists</a></li>
<li><a href="r-intro.html#loops" id="toc-loops"><span class="toc-section-number">2.7</span> Loops</a></li>
<li><a href="r-intro.html#user-defined-functions-udfs" id="toc-user-defined-functions-udfs"><span class="toc-section-number">2.8</span> User-Defined Functions (UDFs)</a></li>
<li><a href="r-intro.html#graphics" id="toc-graphics"><span class="toc-section-number">2.9</span> Graphics</a></li>
<li><a href="r-intro.html#review-questions" id="toc-review-questions"><span class="toc-section-number">2.10</span> Review Questions</a></li>
</ul></li>
<li><a href="sql-intro.html#sql-intro" id="toc-sql-intro"><span class="toc-section-number">3</span> Introduction to SQL</a>
<ul>
<li><a href="sql-intro.html#basics" id="toc-basics"><span class="toc-section-number">3.1</span> Basics</a></li>
<li><a href="sql-intro.html#aggregate-functions" id="toc-aggregate-functions"><span class="toc-section-number">3.2</span> Aggregate Functions</a></li>
<li><a href="sql-intro.html#joins" id="toc-joins"><span class="toc-section-number">3.3</span> Joins</a></li>
<li><a href="sql-intro.html#subqueries" id="toc-subqueries"><span class="toc-section-number">3.4</span> Subqueries</a></li>
<li><a href="sql-intro.html#virtual-tables" id="toc-virtual-tables"><span class="toc-section-number">3.5</span> Virtual Tables</a></li>
<li><a href="sql-intro.html#window-functions" id="toc-window-functions"><span class="toc-section-number">3.6</span> Window Functions</a></li>
<li><a href="sql-intro.html#common-table-expressions-ctes" id="toc-common-table-expressions-ctes"><span class="toc-section-number">3.7</span> Common Table Expressions (CTEs)</a></li>
<li><a href="sql-intro.html#review-questions-1" id="toc-review-questions-1"><span class="toc-section-number">3.8</span> Review Questions</a></li>
</ul></li>
<li><a href="research.html#research" id="toc-research"><span class="toc-section-number">4</span> Research Design</a>
<ul>
<li><a href="research.html#research-questions" id="toc-research-questions"><span class="toc-section-number">4.1</span> Research Questions</a></li>
<li><a href="research.html#research-hypotheses" id="toc-research-hypotheses"><span class="toc-section-number">4.2</span> Research Hypotheses</a></li>
<li><a href="research.html#internal-and-external-validity" id="toc-internal-and-external-validity"><span class="toc-section-number">4.3</span> Internal and External Validity</a></li>
<li><a href="research.html#research-methods" id="toc-research-methods"><span class="toc-section-number">4.4</span> Research Methods</a></li>
<li><a href="research.html#research-designs" id="toc-research-designs"><span class="toc-section-number">4.5</span> Research Designs</a></li>
<li><a href="research.html#review-questions-2" id="toc-review-questions-2"><span class="toc-section-number">4.6</span> Review Questions</a></li>
</ul></li>
<li><a href="measure-sampl.html#measure-sampl" id="toc-measure-sampl"><span class="toc-section-number">5</span> Measurement &amp; Sampling</a>
<ul>
<li><a href="measure-sampl.html#variable-types" id="toc-variable-types"><span class="toc-section-number">5.1</span> Variable Types</a>
<ul>
<li><a href="measure-sampl.html#independent-variables-iv" id="toc-independent-variables-iv"><span class="toc-section-number">5.1.1</span> Independent Variables (IV)</a></li>
<li><a href="measure-sampl.html#dependent-variables-dv" id="toc-dependent-variables-dv"><span class="toc-section-number">5.1.2</span> Dependent Variables (DV)</a></li>
<li><a href="measure-sampl.html#control-variables-cv" id="toc-control-variables-cv"><span class="toc-section-number">5.1.3</span> Control Variables (CV)</a></li>
<li><a href="measure-sampl.html#moderating-variables" id="toc-moderating-variables"><span class="toc-section-number">5.1.4</span> Moderating Variables</a></li>
<li><a href="measure-sampl.html#mediating-variables" id="toc-mediating-variables"><span class="toc-section-number">5.1.5</span> Mediating Variables</a></li>
<li><a href="measure-sampl.html#endogenous-vs.-exogenous-variables" id="toc-endogenous-vs.-exogenous-variables"><span class="toc-section-number">5.1.6</span> Endogenous vs. Exogenous Variables</a></li>
</ul></li>
<li><a href="measure-sampl.html#measurement-scales" id="toc-measurement-scales"><span class="toc-section-number">5.2</span> Measurement Scales</a>
<ul>
<li><a href="measure-sampl.html#discrete-variables" id="toc-discrete-variables"><span class="toc-section-number">5.2.1</span> Discrete Variables</a></li>
<li><a href="measure-sampl.html#continuous-variables" id="toc-continuous-variables"><span class="toc-section-number">5.2.2</span> Continuous Variables</a></li>
</ul></li>
<li><a href="measure-sampl.html#sampling-methods" id="toc-sampling-methods"><span class="toc-section-number">5.3</span> Sampling Methods</a>
<ul>
<li><a href="measure-sampl.html#probability-sampling" id="toc-probability-sampling"><span class="toc-section-number">5.3.1</span> Probability Sampling</a></li>
<li><a href="measure-sampl.html#non-probability-sampling" id="toc-non-probability-sampling"><span class="toc-section-number">5.3.2</span> Non-Probability Sampling</a></li>
</ul></li>
<li><a href="measure-sampl.html#sampling-nonsampling-error" id="toc-sampling-nonsampling-error"><span class="toc-section-number">5.4</span> Sampling &amp; Nonsampling Error</a>
<ul>
<li><a href="measure-sampl.html#sampling-error" id="toc-sampling-error"><span class="toc-section-number">5.4.1</span> Sampling Error</a></li>
<li><a href="measure-sampl.html#nonsampling-error" id="toc-nonsampling-error"><span class="toc-section-number">5.4.2</span> Nonsampling Error</a></li>
</ul></li>
<li><a href="measure-sampl.html#scale-reliability-and-validity" id="toc-scale-reliability-and-validity"><span class="toc-section-number">5.5</span> Scale Reliability and Validity</a>
<ul>
<li><a href="measure-sampl.html#reliability" id="toc-reliability"><span class="toc-section-number">5.5.1</span> Reliability</a></li>
<li><a href="measure-sampl.html#validity" id="toc-validity"><span class="toc-section-number">5.5.2</span> Validity</a></li>
</ul></li>
<li><a href="measure-sampl.html#review-questions-3" id="toc-review-questions-3"><span class="toc-section-number">5.6</span> Review Questions</a></li>
</ul></li>
<li><a href="data-prep.html#data-prep" id="toc-data-prep"><span class="toc-section-number">6</span> Data Preparation</a>
<ul>
<li><a href="data-prep.html#data-extraction" id="toc-data-extraction"><span class="toc-section-number">6.1</span> Data Extraction</a>
<ul>
<li><a href="data-prep.html#data-architecture" id="toc-data-architecture"><span class="toc-section-number">6.1.1</span> Data Architecture</a></li>
</ul></li>
<li><a href="data-prep.html#data-screening-cleaning" id="toc-data-screening-cleaning"><span class="toc-section-number">6.2</span> Data Screening &amp; Cleaning</a>
<ul>
<li><a href="data-prep.html#missingness" id="toc-missingness"><span class="toc-section-number">6.2.1</span> Missingness</a></li>
<li><a href="data-prep.html#outliers" id="toc-outliers"><span class="toc-section-number">6.2.2</span> Outliers</a></li>
<li><a href="data-prep.html#low-variability" id="toc-low-variability"><span class="toc-section-number">6.2.3</span> Low Variability</a></li>
<li><a href="data-prep.html#inconsistent-categories" id="toc-inconsistent-categories"><span class="toc-section-number">6.2.4</span> Inconsistent Categories</a></li>
<li><a href="data-prep.html#data-binning" id="toc-data-binning"><span class="toc-section-number">6.2.5</span> Data Binning</a></li>
</ul></li>
<li><a href="data-prep.html#one-hot-encoding" id="toc-one-hot-encoding"><span class="toc-section-number">6.3</span> One-Hot Encoding</a></li>
<li><a href="data-prep.html#feature-engineering" id="toc-feature-engineering"><span class="toc-section-number">6.4</span> Feature Engineering</a></li>
<li><a href="data-prep.html#review-questions-4" id="toc-review-questions-4"><span class="toc-section-number">6.5</span> Review Questions</a></li>
</ul></li>
<li><a href="desc-stats.html#desc-stats" id="toc-desc-stats"><span class="toc-section-number">7</span> Descriptive Statistics</a>
<ul>
<li><a href="desc-stats.html#univariate-analysis" id="toc-univariate-analysis"><span class="toc-section-number">7.1</span> Univariate Analysis</a>
<ul>
<li><a href="desc-stats.html#measures-of-central-tendency" id="toc-measures-of-central-tendency"><span class="toc-section-number">7.1.1</span> Measures of Central Tendency</a></li>
<li><a href="desc-stats.html#measures-of-spread" id="toc-measures-of-spread"><span class="toc-section-number">7.1.2</span> Measures of Spread</a></li>
</ul></li>
<li><a href="desc-stats.html#bivariate-analysis" id="toc-bivariate-analysis"><span class="toc-section-number">7.2</span> Bivariate Analysis</a>
<ul>
<li><a href="desc-stats.html#covariance" id="toc-covariance"><span class="toc-section-number">7.2.1</span> Covariance</a></li>
<li><a href="desc-stats.html#correlation" id="toc-correlation"><span class="toc-section-number">7.2.2</span> Correlation</a></li>
</ul></li>
<li><a href="desc-stats.html#review-questions-5" id="toc-review-questions-5"><span class="toc-section-number">7.3</span> Review Questions</a></li>
</ul></li>
<li><a href="inf-stats.html#inf-stats" id="toc-inf-stats"><span class="toc-section-number">8</span> Statistical Inference</a>
<ul>
<li><a href="inf-stats.html#introduction-to-probability" id="toc-introduction-to-probability"><span class="toc-section-number">8.1</span> Introduction to Probability</a>
<ul>
<li><a href="inf-stats.html#probability-distributions" id="toc-probability-distributions"><span class="toc-section-number">8.1.1</span> Probability Distributions</a></li>
<li><a href="inf-stats.html#conditional-probability" id="toc-conditional-probability"><span class="toc-section-number">8.1.2</span> Conditional Probability</a></li>
</ul></li>
<li><a href="inf-stats.html#central-limit-theorem" id="toc-central-limit-theorem"><span class="toc-section-number">8.2</span> Central Limit Theorem</a></li>
<li><a href="inf-stats.html#confidence-intervals" id="toc-confidence-intervals"><span class="toc-section-number">8.3</span> Confidence Intervals</a>
<ul>
<li><a href="inf-stats.html#hypothesis-testing" id="toc-hypothesis-testing"><span class="toc-section-number">8.3.1</span> Hypothesis Testing</a></li>
<li><a href="inf-stats.html#alpha" id="toc-alpha"><span class="toc-section-number">8.3.2</span> Alpha</a></li>
<li><a href="inf-stats.html#type-i-ii-errors" id="toc-type-i-ii-errors"><span class="toc-section-number">8.3.3</span> Type I &amp; II Errors</a></li>
<li><a href="inf-stats.html#p-values" id="toc-p-values"><span class="toc-section-number">8.3.4</span> <span class="math inline">\(p\)</span>-Values</a></li>
<li><a href="inf-stats.html#bonferroni-correction" id="toc-bonferroni-correction"><span class="toc-section-number">8.3.5</span> Bonferroni Correction</a></li>
<li><a href="inf-stats.html#statistical-power" id="toc-statistical-power"><span class="toc-section-number">8.3.6</span> Statistical Power</a></li>
</ul></li>
<li><a href="inf-stats.html#review-questions-6" id="toc-review-questions-6"><span class="toc-section-number">8.4</span> Review Questions</a></li>
</ul></li>
<li><a href="aod.html#aod" id="toc-aod"><span class="toc-section-number">9</span> Analysis of Differences</a>
<ul>
<li><a href="aod.html#parametric-vs.-nonparametric-tests" id="toc-parametric-vs.-nonparametric-tests"><span class="toc-section-number">9.1</span> Parametric vs. Nonparametric Tests</a></li>
<li><a href="aod.html#differences-in-discrete-data" id="toc-differences-in-discrete-data"><span class="toc-section-number">9.2</span> Differences in Discrete Data</a></li>
<li><a href="aod.html#differences-in-continuous-data" id="toc-differences-in-continuous-data"><span class="toc-section-number">9.3</span> Differences in Continuous Data</a></li>
<li><a href="aod.html#review-questions-7" id="toc-review-questions-7"><span class="toc-section-number">9.4</span> Review Questions</a></li>
</ul></li>
<li><a href="lm.html#lm" id="toc-lm"><span class="toc-section-number">10</span> Linear Regression</a>
<ul>
<li><a href="lm.html#sample-size" id="toc-sample-size"><span class="toc-section-number">10.1</span> Sample Size</a></li>
<li><a href="lm.html#simple-linear-regression" id="toc-simple-linear-regression"><span class="toc-section-number">10.2</span> Simple Linear Regression</a></li>
<li><a href="lm.html#multiple-linear-regression" id="toc-multiple-linear-regression"><span class="toc-section-number">10.3</span> Multiple Linear Regression</a></li>
<li><a href="lm.html#moderation" id="toc-moderation"><span class="toc-section-number">10.4</span> Moderation</a></li>
<li><a href="lm.html#mediation" id="toc-mediation"><span class="toc-section-number">10.5</span> Mediation</a></li>
<li><a href="lm.html#review-questions-8" id="toc-review-questions-8"><span class="toc-section-number">10.6</span> Review Questions</a></li>
</ul></li>
<li><a href="lme.html#lme" id="toc-lme"><span class="toc-section-number">11</span> Linear Model Extensions</a>
<ul>
<li><a href="lme.html#model-comparisons" id="toc-model-comparisons"><span class="toc-section-number">11.1</span> Model Comparisons</a></li>
<li><a href="lme.html#hierarchical-regression" id="toc-hierarchical-regression"><span class="toc-section-number">11.2</span> Hierarchical Regression</a></li>
<li><a href="lme.html#multilevel-models" id="toc-multilevel-models"><span class="toc-section-number">11.3</span> Multilevel Models</a></li>
<li><a href="lme.html#polynomial-regression" id="toc-polynomial-regression"><span class="toc-section-number">11.4</span> Polynomial Regression</a></li>
<li><a href="lme.html#review-questions-9" id="toc-review-questions-9"><span class="toc-section-number">11.5</span> Review Questions</a></li>
</ul></li>
<li><a href="log.html#log" id="toc-log"><span class="toc-section-number">12</span> Logistic Regression</a>
<ul>
<li><a href="log.html#binomial-logistic-regression" id="toc-binomial-logistic-regression"><span class="toc-section-number">12.1</span> Binomial Logistic Regression</a></li>
<li><a href="log.html#multinomial-logistic-regression" id="toc-multinomial-logistic-regression"><span class="toc-section-number">12.2</span> Multinomial Logistic Regression</a></li>
<li><a href="log.html#ordinal-logistic-regression" id="toc-ordinal-logistic-regression"><span class="toc-section-number">12.3</span> Ordinal Logistic Regression</a></li>
<li><a href="log.html#review-questions-10" id="toc-review-questions-10"><span class="toc-section-number">12.4</span> Review Questions</a></li>
</ul></li>
<li><a href="pred-mod.html#pred-mod" id="toc-pred-mod"><span class="toc-section-number">13</span> Predictive Modeling</a>
<ul>
<li><a href="pred-mod.html#cross-validation" id="toc-cross-validation"><span class="toc-section-number">13.1</span> Cross-Validation</a></li>
<li><a href="pred-mod.html#model-performance" id="toc-model-performance"><span class="toc-section-number">13.2</span> Model Performance</a></li>
<li><a href="pred-mod.html#bias-variance-tradeoff" id="toc-bias-variance-tradeoff"><span class="toc-section-number">13.3</span> Bias-Variance Tradeoff</a></li>
<li><a href="pred-mod.html#tree-based-algorithms" id="toc-tree-based-algorithms"><span class="toc-section-number">13.4</span> Tree-Based Algorithms</a></li>
<li><a href="pred-mod.html#predictive-modeling" id="toc-predictive-modeling"><span class="toc-section-number">13.5</span> Predictive Modeling</a></li>
<li><a href="pred-mod.html#review-questions-11" id="toc-review-questions-11"><span class="toc-section-number">13.6</span> Review Questions</a></li>
</ul></li>
<li><a href="unsup-lrn.html#unsup-lrn" id="toc-unsup-lrn"><span class="toc-section-number">14</span> Unsupervised Learning</a>
<ul>
<li><a href="unsup-lrn.html#factor-analysis" id="toc-factor-analysis"><span class="toc-section-number">14.1</span> Factor Analysis</a>
<ul>
<li><a href="unsup-lrn.html#exploratory-factor-analysis-efa" id="toc-exploratory-factor-analysis-efa"><span class="toc-section-number">14.1.1</span> Exploratory Factor Analysis (EFA)</a></li>
<li><a href="unsup-lrn.html#confirmatory-factor-analysis-cfa" id="toc-confirmatory-factor-analysis-cfa"><span class="toc-section-number">14.1.2</span> Confirmatory Factor Analysis (CFA)</a></li>
</ul></li>
<li><a href="unsup-lrn.html#clustering" id="toc-clustering"><span class="toc-section-number">14.2</span> Clustering</a>
<ul>
<li><a href="unsup-lrn.html#k-means-clustering" id="toc-k-means-clustering"><span class="toc-section-number">14.2.1</span> <span class="math inline">\(K\)</span>-Means Clustering</a></li>
<li><a href="unsup-lrn.html#hierarchical-clustering" id="toc-hierarchical-clustering"><span class="toc-section-number">14.2.2</span> Hierarchical Clustering</a></li>
</ul></li>
<li><a href="unsup-lrn.html#review-questions-12" id="toc-review-questions-12"><span class="toc-section-number">14.3</span> Review Questions</a></li>
</ul></li>
<li><a href="data-viz.html#data-viz" id="toc-data-viz"><span class="toc-section-number">15</span> Data Visualization</a>
<ul>
<li><a href="data-viz.html#best-practices" id="toc-best-practices"><span class="toc-section-number">15.1</span> Best Practices</a>
<ul>
<li><a href="data-viz.html#color-palette" id="toc-color-palette"><span class="toc-section-number">15.1.1</span> Color Palette</a></li>
<li><a href="data-viz.html#chart-borders" id="toc-chart-borders"><span class="toc-section-number">15.1.2</span> Chart Borders</a></li>
<li><a href="data-viz.html#zero-baseline" id="toc-zero-baseline"><span class="toc-section-number">15.1.3</span> Zero Baseline</a></li>
<li><a href="data-viz.html#intuitive-layout" id="toc-intuitive-layout"><span class="toc-section-number">15.1.4</span> Intuitive Layout</a></li>
<li><a href="data-viz.html#preattentive-attributes" id="toc-preattentive-attributes"><span class="toc-section-number">15.1.5</span> Preattentive Attributes</a></li>
</ul></li>
<li><a href="data-viz.html#step-by-step-visual-upgrade" id="toc-step-by-step-visual-upgrade"><span class="toc-section-number">15.2</span> Step-by-Step Visual Upgrade</a>
<ul>
<li><a href="data-viz.html#step-1-build-bar-chart-with-defaults" id="toc-step-1-build-bar-chart-with-defaults"><span class="toc-section-number">15.2.1</span> Step 1: Build Bar Chart with Defaults</a></li>
<li><a href="data-viz.html#step-2-remove-legend" id="toc-step-2-remove-legend"><span class="toc-section-number">15.2.2</span> Step 2: Remove Legend</a></li>
<li><a href="data-viz.html#step-3-assign-colors-strategically" id="toc-step-3-assign-colors-strategically"><span class="toc-section-number">15.2.3</span> Step 3: Assign Colors Strategically</a></li>
<li><a href="data-viz.html#step-4-add-axis-titles-and-margins" id="toc-step-4-add-axis-titles-and-margins"><span class="toc-section-number">15.2.4</span> Step 4: Add Axis Titles and Margins</a></li>
<li><a href="data-viz.html#step-5-add-left-justified-title" id="toc-step-5-add-left-justified-title"><span class="toc-section-number">15.2.5</span> Step 5: Add Left-Justified Title</a></li>
<li><a href="data-viz.html#step-6-remove-background" id="toc-step-6-remove-background"><span class="toc-section-number">15.2.6</span> Step 6: Remove Background</a></li>
<li><a href="data-viz.html#step-7-remove-axis-ticks" id="toc-step-7-remove-axis-ticks"><span class="toc-section-number">15.2.7</span> Step 7: Remove Axis Ticks</a></li>
<li><a href="data-viz.html#step-8-mute-titles" id="toc-step-8-mute-titles"><span class="toc-section-number">15.2.8</span> Step 8: Mute Titles</a></li>
<li><a href="data-viz.html#step-9-flip-axes" id="toc-step-9-flip-axes"><span class="toc-section-number">15.2.9</span> Step 9: Flip Axes</a></li>
<li><a href="data-viz.html#step-10-sort-data" id="toc-step-10-sort-data"><span class="toc-section-number">15.2.10</span> Step 10: Sort Data</a></li>
</ul></li>
<li><a href="data-viz.html#visualization-types" id="toc-visualization-types"><span class="toc-section-number">15.3</span> Visualization Types</a>
<ul>
<li><a href="data-viz.html#tables" id="toc-tables"><span class="toc-section-number">15.3.1</span> Tables</a></li>
<li><a href="data-viz.html#heatmaps" id="toc-heatmaps"><span class="toc-section-number">15.3.2</span> Heatmaps</a></li>
<li><a href="data-viz.html#scatterplots" id="toc-scatterplots"><span class="toc-section-number">15.3.3</span> Scatterplots</a></li>
<li><a href="data-viz.html#line-graphs" id="toc-line-graphs"><span class="toc-section-number">15.3.4</span> Line Graphs</a></li>
<li><a href="data-viz.html#slopegraphs" id="toc-slopegraphs"><span class="toc-section-number">15.3.5</span> Slopegraphs</a></li>
<li><a href="data-viz.html#bar-charts" id="toc-bar-charts"><span class="toc-section-number">15.3.6</span> Bar Charts</a></li>
<li><a href="data-viz.html#combination-charts" id="toc-combination-charts"><span class="toc-section-number">15.3.7</span> Combination Charts</a></li>
<li><a href="data-viz.html#waterfall-charts" id="toc-waterfall-charts"><span class="toc-section-number">15.3.8</span> Waterfall Charts</a></li>
<li><a href="data-viz.html#waffle-charts" id="toc-waffle-charts"><span class="toc-section-number">15.3.9</span> Waffle Charts</a></li>
<li><a href="data-viz.html#sankey-diagrams" id="toc-sankey-diagrams"><span class="toc-section-number">15.3.10</span> Sankey Diagrams</a></li>
<li><a href="data-viz.html#pie-charts" id="toc-pie-charts"><span class="toc-section-number">15.3.11</span> Pie Charts</a></li>
<li><a href="data-viz.html#d-visuals" id="toc-d-visuals"><span class="toc-section-number">15.3.12</span> 3D Visuals</a></li>
</ul></li>
<li><a href="data-viz.html#elegant-data-visualization" id="toc-elegant-data-visualization"><span class="toc-section-number">15.4</span> Elegant Data Visualization</a></li>
<li><a href="data-viz.html#review-questions-13" id="toc-review-questions-13"><span class="toc-section-number">15.5</span> Review Questions</a></li>
</ul></li>
<li><a href="storytelling.html#storytelling" id="toc-storytelling"><span class="toc-section-number">16</span> Data Storytelling</a>
<ul>
<li><a href="storytelling.html#know-your-audience" id="toc-know-your-audience"><span class="toc-section-number">16.1</span> Know Your Audience</a></li>
<li><a href="storytelling.html#production-status" id="toc-production-status"><span class="toc-section-number">16.2</span> Production Status</a></li>
<li><a href="storytelling.html#structural-elements" id="toc-structural-elements"><span class="toc-section-number">16.3</span> Structural Elements</a>
<ul>
<li><a href="storytelling.html#tldr" id="toc-tldr"><span class="toc-section-number">16.3.1</span> TL;DR</a></li>
<li><a href="storytelling.html#purpose" id="toc-purpose"><span class="toc-section-number">16.3.2</span> Purpose</a></li>
<li><a href="storytelling.html#methodology" id="toc-methodology"><span class="toc-section-number">16.3.3</span> Methodology</a></li>
<li><a href="storytelling.html#results" id="toc-results"><span class="toc-section-number">16.3.4</span> Results</a></li>
<li><a href="storytelling.html#limitations" id="toc-limitations"><span class="toc-section-number">16.3.5</span> Limitations</a></li>
<li><a href="storytelling.html#next-steps" id="toc-next-steps"><span class="toc-section-number">16.3.6</span> Next Steps</a></li>
<li><a href="storytelling.html#appendix" id="toc-appendix"><span class="toc-section-number">16.3.7</span> Appendix</a></li>
</ul></li>
<li><a href="storytelling.html#qa" id="toc-qa"><span class="toc-section-number">16.4</span> Q&amp;A</a></li>
<li><a href="storytelling.html#review-questions-14" id="toc-review-questions-14"><span class="toc-section-number">16.5</span> Review Questions</a></li>
</ul></li>
<li><a href="bibli.html#bibli" id="toc-bibli"><span class="toc-section-number">17</span> Bibliography</a></li>
<li><a href="storytelling.html#appendix" id="toc-appendix"><span class="toc-section-number">18</span> Appendix</a>
<ul>
<li><a href="appendix.html#d-framework-1" id="toc-d-framework-1"><span class="toc-section-number">18.1</span> 4D Framework</a>
<ul>
<li><a href="appendix.html#discover" id="toc-discover"><span class="toc-section-number">18.1.1</span> Discover</a></li>
<li><a href="appendix.html#design" id="toc-design"><span class="toc-section-number">18.1.2</span> Design</a></li>
<li><a href="appendix.html#develop" id="toc-develop"><span class="toc-section-number">18.1.3</span> Develop</a></li>
<li><a href="appendix.html#deliver" id="toc-deliver"><span class="toc-section-number">18.1.4</span> Deliver</a></li>
</ul></li>
<li><a href="appendix.html#data-visualization" id="toc-data-visualization"><span class="toc-section-number">18.2</span> Data Visualization</a>
<ul>
<li><a href="appendix.html#step-by-step-visual-upgrade-1" id="toc-step-by-step-visual-upgrade-1"><span class="toc-section-number">18.2.1</span> Step-by-Step Visual Upgrade</a></li>
<li><a href="appendix.html#tables-1" id="toc-tables-1"><span class="toc-section-number">18.2.2</span> Tables</a></li>
<li><a href="appendix.html#heatmaps-1" id="toc-heatmaps-1"><span class="toc-section-number">18.2.3</span> Heatmaps</a></li>
<li><a href="appendix.html#scatterplots-1" id="toc-scatterplots-1"><span class="toc-section-number">18.2.4</span> Scatterplots</a></li>
<li><a href="appendix.html#line-charts" id="toc-line-charts"><span class="toc-section-number">18.2.5</span> Line Charts</a></li>
<li><a href="appendix.html#slopegraphs-1" id="toc-slopegraphs-1"><span class="toc-section-number">18.2.6</span> Slopegraphs</a></li>
<li><a href="appendix.html#bar-charts-1" id="toc-bar-charts-1"><span class="toc-section-number">18.2.7</span> Bar Charts</a></li>
<li><a href="appendix.html#combination-charts-1" id="toc-combination-charts-1"><span class="toc-section-number">18.2.8</span> Combination Charts</a></li>
<li><a href="appendix.html#waterfall-charts-1" id="toc-waterfall-charts-1"><span class="toc-section-number">18.2.9</span> Waterfall Charts</a></li>
<li><a href="appendix.html#waffle-charts-1" id="toc-waffle-charts-1"><span class="toc-section-number">18.2.10</span> Waffle Charts</a></li>
<li><a href="appendix.html#sankey-diagrams-1" id="toc-sankey-diagrams-1"><span class="toc-section-number">18.2.11</span> Sankey Diagrams</a></li>
<li><a href="appendix.html#pie-charts-1" id="toc-pie-charts-1"><span class="toc-section-number">18.2.12</span> Pie Charts</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Fundamentals of People Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-viz" class="section level1" number="15">
<h1><span class="header-section-number">15</span> Data Visualization</h1>
<p>Unlike content in the preceding chapters, data visualization is more of an <em>art</em> than a <em>science</em>. Data visualization is heavily dependent on the type of data being presented, key messages that need to be conveyed, the unique characteristics of the audience to whom information needs to be communicated, and various contextual features germane to a proper interpretation and understanding of material.</p>
<p>This chapter will provide general best practices as well as strategies specific to various types of data that will promote success when communicating data to technical and non-technical stakeholders alike. Since there is a considerable amount of code required to construct the plethora of graphics in this chapter, only the data prep code will be included. You can reference Chapter <a href="storytelling.html#appendix">16.3.7</a> for a curated set of fully reproducible code for each data visualization provided in this chapter.</p>
<div id="best-practices" class="section level2" number="15.1">
<h2><span class="header-section-number">15.1</span> Best Practices</h2>
<p>While the type of visual depends on the nature of data being presented, there are general best practices for effectively communicating information that are applicable for all data types, audiences, and contexts.</p>
<div id="color-palette" class="section level3" number="15.1.1">
<h3><span class="header-section-number">15.1.1</span> Color Palette</h3>
<p>There are several important considerations when choosing colors for data visualization.</p>
<p><strong>Color has meaning.</strong></p>
<p>The meaning of color is not consistent across the world. For example, in Western cultures red generally has unfavorable connotations (e.g., off track, danger) while green signals a favorable status (e.g., on track, cash flow positive). However, in Asian cultures red indicates success.</p>
<p>It is important to understand what color indicates in the contexts in which information is shared to ensure color choices are consistent with the messages that need to be conveyed.</p>
<p><strong>Respect color blindness.</strong></p>
<p>Most estimates indicate that 1 in 12 men (8%) and 1 in 200 women (0.5%) are colorblind (~4.5% of the world population). Males are more likely to be colorblind because the X chromosome contains the genes responsible for the most common forms of color blindness. Trouble distinguishing between red and green is the most common manifestation of colorblindness (Gordon, 1998).</p>
<p>This has important implications for data visualization, and it is generally best to avoid the use of red and green. One alternative is to leverage orange to indicate unfavorable data points and blue for favorable. This strategy will be implemented throughout this chapter.</p>
<p><strong>Adhere to brand colors.</strong></p>
<p>In most organizations, the marketing team defines a color palette consistent with the branding used for consumer products and services. In this case, analysts may be constrained to the use of colors within the branding palette.</p>
<p>Be sure to consult with marketing colleagues and adhere to any color palette requirements.</p>
<p><strong>Use color consistently.</strong></p>
<p>To support a correct interpretation of information, it is important to use a consistent color scheme across the various visuals in dashboards, slides, and documents. For example, if blue is assigned to highlight how the Engineering department compares to other departments in a particular view, blue should be assigned to the Engineering department in every view in which department is a grouping dimension.</p>
<p>The consistent use of color requires the audience to wield less effort to understand information, which in turn reduces the risk of incorrect interpretation.</p>
</div>
<div id="chart-borders" class="section level3" number="15.1.2">
<h3><span class="header-section-number">15.1.2</span> Chart Borders</h3>
<p>The goal in data visualization is to enable the most important data to take center stage. Formatting should support – not detract – from this objective. Chart borders are a usual suspect and prime example of formatting that can divert focus away from the data.</p>
<p>Figure <a href="data-viz.html#fig:chart-borders">15.1</a> illustrates the use of heavy and light borders for a tabular presentation of data. Formatting takes center stage in the first table due to heavy borders, while formatting is not the focus in the second table given the minimal light grey border.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:chart-borders"></span>
<img src="graphics/light_heavy_borders.png" alt="Comparison of data tables with heavy (left) and light (right) borders" width="75%" />
<p class="caption">
Figure 15.1: Comparison of data tables with heavy (left) and light (right) borders
</p>
</div>
</div>
<div id="zero-baseline" class="section level3" number="15.1.3">
<h3><span class="header-section-number">15.1.3</span> Zero Baseline</h3>
<p>The use of a non-zero baseline can exaggerate differences in metrics, resulting in misleading conclusions.</p>
<p>Figure <a href="data-viz.html#fig:baseline-compare">15.2</a> illustrates how minor differences are exaggerated when a non-zero baseline is applied to the <span class="math inline">\(y\)</span>-axis. Given that the average hires across these four years is <code>1,000</code>, there is actually little variation in hire volume YoY, and this is accurately reflected in the bar chart with a zero baseline.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:baseline-compare"></span>
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/baseline-compare-1.png" alt="Hires by year with zero baseline (left) and non-zero baseline (right)" width="100%" />
<p class="caption">
Figure 15.2: Hires by year with zero baseline (left) and non-zero baseline (right)
</p>
</div>
</div>
<div id="intuitive-layout" class="section level3" number="15.1.4">
<h3><span class="header-section-number">15.1.4</span> Intuitive Layout</h3>
<p>When visualizing data, it is best not to deviate from the way in which the audience will naturally interpret the data. Outlined below are a few important considerations:</p>
<ul>
<li>Numbers lower on a <span class="math inline">\(y\)</span>-axis will naturally be interpreted to be smaller than numbers higher on the <span class="math inline">\(y\)</span>-axis.</li>
<li>When there are both positive and negative numbers along an <span class="math inline">\(x\)</span>-axis, negative metrics are best placed on the left and positive on the right since people naturally consume content from left to right.</li>
<li>Rotated axis labels require more time to read and interpret. If labels must be rotated to fit along an axis, a 45-degree angle is generally preferred over a more extreme 90-degree rotation.</li>
</ul>
<p>Figure <a href="data-viz.html#fig:flipped-axis-viz">15.3</a> shows murders committed using firearms in Florida across time. This visual has an inverted <span class="math inline">\(y\)</span>-axis, which is highly misleading since it suggests spikes in murders are dips. Irrespective of whether this was politically motivated or simply a failed attempt at creativity, this is a deceptive data visualization.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:flipped-axis-viz"></span>
<img src="graphics/bad_viz-flipped_y_axis.png" alt="Misleading inverted y-axis" width="75%" />
<p class="caption">
Figure 15.3: Misleading inverted y-axis
</p>
</div>
</div>
<div id="preattentive-attributes" class="section level3" number="15.1.5">
<h3><span class="header-section-number">15.1.5</span> Preattentive Attributes</h3>
<p><strong>Preattentive attributes</strong> signal where to look and help our audience focus on content we wish to emphasize (Knaflic, 2015).</p>
<p>It is important to remember that data do not always need to be visualized with a chart. Sometimes communicating with text is a sufficient and effective way to convey information. In the case of text, preattentive attributes are often implemented using bold text and/or contrasting colors for keywords and phrases that need to take center stage. <strong>Bolded</strong> text is generally more effective than <em>italizing</em> or , as it highlights the chosen elements without unnecessary noise and compromised legibility.</p>
<p>Grey is an important color in the implementation of preattentive attributes as it facilitates a move of less important data and design elements to the background to make room for more predominate colors to highlight the most important information. Figure <a href="data-viz.html#fig:pre-attr-1">15.4</a> illustrates the application of preattentive attributes to emphasize the key message in a sentence. This is accomplished by pushing the less important content to the background using grey text and using bold orange text to highlight the labor cost increase.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:pre-attr-1"></span>
<img src="graphics/preattentive_attributes.png" alt="The application of preattentive attributes to highlight labor costs as a key driver of operating cost increases" width="75%" />
<p class="caption">
Figure 15.4: The application of preattentive attributes to highlight labor costs as a key driver of operating cost increases
</p>
</div>
<p>Preattentive attributes can also be applied to data visualizations to focus the audience’s attention. Figure <a href="data-viz.html#fig:pre-attr-2">15.5</a> illustrates the use of preattentive attributes by assigning a different color (orange) to the labor cost for the current year and muting the labor costs associated with prior years using a less predominate grey.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:pre-attr-2"></span>
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/pre-attr-2-1.png" alt="The application of preattentive attributes to highlight labor costs for the current year relative to prior years" width="100%" />
<p class="caption">
Figure 15.5: The application of preattentive attributes to highlight labor costs for the current year relative to prior years
</p>
</div>
<p>Simply put, if something is <strong>really important</strong>, make sure it is different from other content on the page, slide, or section.</p>
</div>
</div>
<div id="step-by-step-visual-upgrade" class="section level2" number="15.2">
<h2><span class="header-section-number">15.2</span> Step-by-Step Visual Upgrade</h2>
<p>Software knows neither what we wish to highlight nor the audience to whom we intend to communicate the information. Therefore, regardless of the software, design defaults are rarely best.</p>
<p>This section will implement data visualization best practices step-by-step beginning with the design defaults for the <code>ggplot2</code> library.</p>
<div id="step-1-build-bar-chart-with-defaults" class="section level3" number="15.2.1">
<h3><span class="header-section-number">15.2.1</span> Step 1: Build Bar Chart with Defaults</h3>
<p>We will begin by building a bar chart that shows the distribution of active employees’ educational backgrounds. To simplify the data structure for data visualization, let’s ingest our <code>employees</code> data and create an aggregated cube with counts by <code>ed_field</code> for active employees:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="data-viz.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb464-2"><a href="data-viz.html#cb464-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb464-3"><a href="data-viz.html#cb464-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-4"><a href="data-viz.html#cb464-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read employee data</span></span>
<span id="cb464-5"><a href="data-viz.html#cb464-5" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/crstarbuck/peopleanalytics_book/master/data/employees.csv&quot;</span>)</span>
<span id="cb464-6"><a href="data-viz.html#cb464-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-7"><a href="data-viz.html#cb464-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for active employees</span></span>
<span id="cb464-8"><a href="data-viz.html#cb464-8" aria-hidden="true" tabindex="-1"></a>smmry_ed_field <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb464-9"><a href="data-viz.html#cb464-9" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb464-10"><a href="data-viz.html#cb464-10" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">count</span>(ed_field)</span></code></pre></div>
<p>A bar chart can be created using the <code>geom_bar()</code> function, and we will start with the <code>ggplot2</code> library’s design defaults:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-1"></span>
<img src="graphics/viz_step_1.png" alt="Step 1: Bar chart with defaults" width="100%" />
<p class="caption">
Figure 15.6: Step 1: Bar chart with defaults
</p>
</div>
</div>
<div id="step-2-remove-legend" class="section level3" number="15.2.2">
<h3><span class="header-section-number">15.2.2</span> Step 2: Remove Legend</h3>
<p>Since the legend is not necessary for interpreting the education field to which each bar corresponds, we will remove it using <code>theme(legend.position = "none")</code>. Eliminating the legend also provides more real estate for the chart, which helps make the x-axis values more legible.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-2"></span>
<img src="graphics/viz_step_2.png" alt="Step 2: Remove legend" width="100%" />
<p class="caption">
Figure 15.7: Step 2: Remove legend
</p>
</div>
</div>
<div id="step-3-assign-colors-strategically" class="section level3" number="15.2.3">
<h3><span class="header-section-number">15.2.3</span> Step 3: Assign Colors Strategically</h3>
<p>There is a lot competing for attention due to this vibrant color palette. Let’s assume that the objective is to highlight the education field pursued by the largest number of employees. Preattentive attributes lends well to this, and we can assign specific hex color codes to the education categories.</p>
<p>Since Life Sciences was the field pursued by the most employees, let’s highlight the corresponding bar in blue and move the remaining bars to the background through the assignment of light grey. One method of accomplishing this is via the following explicit category assignments:</p>
<p><code>scale_fill_manual(values = c("Human Resources" = "#BFBFBF", "Life Sciences" = "#0070C0", "Marketing" = "#BFBFBF", "Medical" = "#BFBFBF", "Other" = "#BFBFBF", Technical Degree" = "#BFBFBF"))</code></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-3"></span>
<img src="graphics/viz_step_3.png" alt="Step 3: Assign colors strategically" width="100%" />
<p class="caption">
Figure 15.8: Step 3: Assign colors strategically
</p>
</div>
</div>
<div id="step-4-add-axis-titles-and-margins" class="section level3" number="15.2.4">
<h3><span class="header-section-number">15.2.4</span> Step 4: Add Axis Titles and Margins</h3>
<p>Axis titles are the column names by default, which is usually not the most user-friendly option. We can assign new mixed case axis titles by chaining <code>labs(x = 'Education Field', y = 'Headcount')</code> to the visualization code.</p>
<p>Spacing can also be added between the axis titles and labels to improve upon the default formatting and reduce text congestion. The <code>ggplot2::element_text(margin = margin(t = 0, r = 0, b = 0, l = 0))</code> parameter can be defined for the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> axes via <code>axis.title.x</code> and <code>axis.title.y</code>, respectively, where:</p>
<ul>
<li><strong>t</strong> = space on the top of axis title</li>
<li><strong>r</strong> = space on the right of axis title</li>
<li><strong>b</strong> = space on the bottom of axis title</li>
<li><strong>l</strong> = space on the left of axis title</li>
</ul>
<p>Let’s create a margin of white space above the <span class="math inline">\(x\)</span>-axis title and to the right of the <span class="math inline">\(y\)</span>-axis title by defining the following parameters:</p>
<ul>
<li><code>axis.title.x = ggplot2::element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))</code></li>
<li><code>axis.title.y = ggplot2::element_text(margin = margin(t = 0, r = 10, b = 0, l = 0))</code></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-4"></span>
<img src="graphics/viz_step_4.png" alt="Step 4: Add mixed case axis titles" width="100%" />
<p class="caption">
Figure 15.9: Step 4: Add mixed case axis titles
</p>
</div>
</div>
<div id="step-5-add-left-justified-title" class="section level3" number="15.2.5">
<h3><span class="header-section-number">15.2.5</span> Step 5: Add Left-Justified Title</h3>
<p>We can add a chart title via <code>labs(title = 'This is a chart title.')</code>. This title can be centered via <code>theme(plot.title = ggplot2::element_text(hjust = 0.5)</code>, left justified via <code>theme(plot.title = ggplot2::element_text(hjust = 0)</code>, or right justified via <code>theme(plot.title = ggplot2::element_text(hjust = 1)</code>.</p>
<p>It is a best practice to left justify titles since readers consume information beginning with the left side of the page (like reading a book), and left justifying the title increases the probability that the audience will read the title and understand its purpose before engaging with the visual. Left justification is the default for <code>ggplot2</code> titles.</p>
<p>It is also a best practice to assign a descriptive title to charts to highlight the key message(s) we want to convey to the audience through the visual. For longer titles, the new line character <code>\n</code> can be used to break titles into multiple lines.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-5"></span>
<img src="graphics/viz_step_5.png" alt="Step 5: Add title" width="100%" />
<p class="caption">
Figure 15.10: Step 5: Add title
</p>
</div>
</div>
<div id="step-6-remove-background" class="section level3" number="15.2.6">
<h3><span class="header-section-number">15.2.6</span> Step 6: Remove Background</h3>
<p>The default grey background is a distraction from the data we need to take center stage. We can remove this background using <code>panel.background = element_blank()</code> to achieve a cleaner aesthetic and allow the bars in this chart to become more pronounced.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-6"></span>
<img src="graphics/viz_step_6.png" alt="Step 6: Remove background" width="100%" />
<p class="caption">
Figure 15.11: Step 6: Remove background
</p>
</div>
</div>
<div id="step-7-remove-axis-ticks" class="section level3" number="15.2.7">
<h3><span class="header-section-number">15.2.7</span> Step 7: Remove Axis Ticks</h3>
<p>Axis ticks add noise to this visual and are not necessary to ascertain to which values along the axes the data align. Axis ticks can be removed for each axis independently with <code>axis.ticks.x = element_blank()</code> for the x-axis and <code>axis.ticks.y = element_blank()</code> for the y-axis.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-7"></span>
<img src="graphics/viz_step_7.png" alt="Step 7: Remove axis ticks" width="100%" />
<p class="caption">
Figure 15.12: Step 7: Remove axis ticks
</p>
</div>
</div>
<div id="step-8-mute-titles" class="section level3" number="15.2.8">
<h3><span class="header-section-number">15.2.8</span> Step 8: Mute Titles</h3>
<p>While the chart and axis titles are important for clarifying what information is represented in the visual, these should not be the focus. Just as we pushed the less important education categories to the background using grey text, we can mute the chart and axis titles with grey text to help draw attention to the data.</p>
<p>We can change the color of the chart title to light grey with <code>plot.title = ggplot2::element_text(colour = "#404040")</code>. The axis titles can be changed to the same color using <code>axis.title.x = ggplot2::element_text(colour = "#404040")</code> for the x-axis and <code>axis.title.y = ggplot2::element_text(colour = "#404040")</code> for the y-axis.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-8"></span>
<img src="graphics/viz_step_8.png" alt="Step 8: Mute titles" width="100%" />
<p class="caption">
Figure 15.13: Step 8: Mute titles
</p>
</div>
</div>
<div id="step-9-flip-axes" class="section level3" number="15.2.9">
<h3><span class="header-section-number">15.2.9</span> Step 9: Flip Axes</h3>
<p>Flipping the coordinates of axes to convert the default vertical bar chart into a horizontal bar chart allows the audience to more easily scan down the right side of the visual to quickly identify and understand the relative frequencies of education categories.</p>
<p>Coordinates can be flipped using <code>coord_flip()</code>:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-9"></span>
<img src="graphics/viz_step_9.png" alt="Step 9: Flip axis" width="100%" />
<p class="caption">
Figure 15.14: Step 9: Flip axis
</p>
</div>
</div>
<div id="step-10-sort-data" class="section level3" number="15.2.10">
<h3><span class="header-section-number">15.2.10</span> Step 10: Sort Data</h3>
<p>This visual can be further simplified by sorting the bars from highest to lowest value. With sorted bars, the audience can more easily ascertain the relative ranking of each education field.</p>
<p>We can pass <code>reorder(ed_field, n)</code> into the <code>aes()</code> function to sort the education field bars from highest to lowest <span class="math inline">\(n\)</span>-count. If we needed to sort in the opposite direction, <code>reorder(ed_field, -n)</code> will reverse the sort direction.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:barchart-10"></span>
<img src="graphics/viz_step_10.png" alt="Step 10: Sort data" width="100%" />
<p class="caption">
Figure 15.15: Step 10: Sort data
</p>
</div>
<p>The final visual is a marked improvement over the design defaults in step 1.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:pre-post-declutter"></span>
<img src="graphics/viz_pre_post.png" alt="Enhanced design (top). Design defaults (bottom)." width="100%" />
<p class="caption">
Figure 15.16: Enhanced design (top). Design defaults (bottom).
</p>
</div>
</div>
</div>
<div id="visualization-types" class="section level2" number="15.3">
<h2><span class="header-section-number">15.3</span> Visualization Types</h2>
<p>There are some highly advanced and interactive data visualizations that can be built using JavaScript (JS) libraries such as D3. With some exceptions, JS libraries are generally out of scope for this book. <code>ggplot2</code> is capable of building very elegant data visualizations, and this will be the tool used to implement most of the data visualizations in this chapter.</p>
<p>All visuals will have a set of common parameters for design aesthetics, consistent with the themes used to produce the enhanced chart design shown in Figure <a href="data-viz.html#fig:pre-post-declutter">15.16</a>. Therefore, each section will highlight the differences needed to achieve the respective data visualization. For production applications with many visualizations, it may be helpful to wrap common <code>ggplot2</code> design elements in a function to simplify chart building.</p>
<div id="tables" class="section level3" number="15.3.1">
<h3><span class="header-section-number">15.3.1</span> Tables</h3>
<p><strong>Tables</strong> are the most basic way to organize data. Since tables generally contain many metrics, they are usually better situated as reference material in the Appendix of a doc/deck or within a metric drill-through in dashboards rather than occupying prime real estate that should be leveraged strategically to focus the audience’s attention on key messages.</p>
<p>A simple cube containing employee counts by department and tenure band will be constructed for demonstrating how to display tabular output.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="data-viz.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new tenure band column</span></span>
<span id="cb465-2"><a href="data-viz.html#cb465-2" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb465-3"><a href="data-viz.html#cb465-3" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Under 1 Year&quot;</span>,</span>
<span id="cb465-4"><a href="data-viz.html#cb465-4" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">2.5</span> <span class="sc">~</span> <span class="st">&quot;1-2 Years&quot;</span>,</span>
<span id="cb465-5"><a href="data-viz.html#cb465-5" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">&quot;3-5 Years&quot;</span>,</span>
<span id="cb465-6"><a href="data-viz.html#cb465-6" aria-hidden="true" tabindex="-1"></a>  employees<span class="sc">$</span>org_tenure <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;6-10 Years&quot;</span>,</span>
<span id="cb465-7"><a href="data-viz.html#cb465-7" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Over 10 Years&quot;</span></span>
<span id="cb465-8"><a href="data-viz.html#cb465-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb465-9"><a href="data-viz.html#cb465-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-10"><a href="data-viz.html#cb465-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Store aggregate measures to cube</span></span>
<span id="cb465-11"><a href="data-viz.html#cb465-11" aria-hidden="true" tabindex="-1"></a>dept_tenure <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb465-12"><a href="data-viz.html#cb465-12" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb465-13"><a href="data-viz.html#cb465-13" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">group_by</span>(dept, tenure_band) <span class="sc">%&gt;%</span></span>
<span id="cb465-14"><a href="data-viz.html#cb465-14" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb465-15"><a href="data-viz.html#cb465-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-16"><a href="data-viz.html#cb465-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify ordered factor</span></span>
<span id="cb465-17"><a href="data-viz.html#cb465-17" aria-hidden="true" tabindex="-1"></a>dept_tenure<span class="sc">$</span>tenure_band <span class="ot">&lt;-</span> <span class="fu">ordered</span>(dept_tenure<span class="sc">$</span>tenure_band, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Under 1 Year&quot;</span>, <span class="st">&quot;1-2 Years&quot;</span>, <span class="st">&quot;3-5 Years&quot;</span>, <span class="st">&quot;6-10 Years&quot;</span>, <span class="st">&quot;Over 10 Years&quot;</span>))</span></code></pre></div>
<p>The default display of a tibble (data frame produced by <code>dplyr</code>) is very basic:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="data-viz.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display output using default settings</span></span>
<span id="cb466-2"><a href="data-viz.html#cb466-2" aria-hidden="true" tabindex="-1"></a>dept_tenure</span></code></pre></div>
<pre><code>## # A tibble: 14 × 3
## # Groups:   dept [3]
##    dept                   tenure_band     cnt
##    &lt;chr&gt;                  &lt;ord&gt;         &lt;int&gt;
##  1 Human Resources        1-2 Years         7
##  2 Human Resources        3-5 Years        19
##  3 Human Resources        6-10 Years       17
##  4 Human Resources        Over 10 Years     8
##  5 Research &amp; Development 1-2 Years       148
##  6 Research &amp; Development 3-5 Years       262
##  7 Research &amp; Development 6-10 Years      252
##  8 Research &amp; Development Over 10 Years   148
##  9 Research &amp; Development Under 1 Year     18
## 10 Sales                  1-2 Years        57
## 11 Sales                  3-5 Years        93
## 12 Sales                  6-10 Years      124
## 13 Sales                  Over 10 Years    70
## 14 Sales                  Under 1 Year     10</code></pre>
<p>While these data could easily be copied and pasted into presentation software for formatting, additional libraries exist in R for formatting tables. For example, R Markdown scripts can leverage the <code>DT</code> package to provide filtering, pagination, sorting, search, and other interactive features for HTML output. Field names can also be changed to proper case via the <code>dplyr::rename()</code> function.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="data-viz.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign proper case field names</span></span>
<span id="cb468-2"><a href="data-viz.html#cb468-2" aria-hidden="true" tabindex="-1"></a>dept_tenure_proper <span class="ot">&lt;-</span> dept_tenure <span class="sc">%&gt;%</span></span>
<span id="cb468-3"><a href="data-viz.html#cb468-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="st">&#39;Department&#39;</span> <span class="ot">=</span> dept,</span>
<span id="cb468-4"><a href="data-viz.html#cb468-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Tenure&#39;</span> <span class="ot">=</span> tenure_band,</span>
<span id="cb468-5"><a href="data-viz.html#cb468-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Count&#39;</span> <span class="ot">=</span> cnt)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table"></span>
<img src="graphics/data_table.png" alt="Data table" width="100%" />
<p class="caption">
Figure 15.17: Data table
</p>
</div>
</div>
<div id="heatmaps" class="section level3" number="15.3.2">
<h3><span class="header-section-number">15.3.2</span> Heatmaps</h3>
<p><strong>Heatmaps</strong> use a shading scheme to highlight the relative magnitude of numbers in a tabular format.</p>
<p>The <code>geom_tile()</code> function can be used to build a heatmap with <code>ggplot2</code>. The range of colors can be specified via the <code>scale_fill_continuous(low = 'minimum value color', high = 'maximum value color')</code> function since the fill variable defined by <code>aes(fill = cnt)</code> is measured on a continuous scale:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:heatmap"></span>
<img src="graphics/heatmap.png" alt="Heatmap showing the concentration of employees within departments and tenure bands" width="100%" />
<p class="caption">
Figure 15.18: Heatmap showing the concentration of employees within departments and tenure bands
</p>
</div>
<p>This heatmap is excellent for focusing attention on the department + tenure segments with highest and lowest employee counts. However, if the specific employee counts are required, complimenting this heatmap with a basic table of metrics is a good option to avoid cluttering the heatmap with <span class="math inline">\(3*5 = 15\)</span> additional numbers.</p>
</div>
<div id="scatterplots" class="section level3" number="15.3.3">
<h3><span class="header-section-number">15.3.3</span> Scatterplots</h3>
<p><strong>Scatterplots</strong> are useful for visualizing relationships between numeric variables.</p>
<p>A scatterplot will be used to visualize the relationship between <code>work_exp</code> and <code>ytd_sales</code>, with a goal of focusing the audience’s attention on salespeople whose <code>ytd_sales</code> meet or exceed the full year sales quota of <span class="math inline">\(150,000\)</span> USD. Let’s first subset <code>employees</code> data to active salespeople and append a flag to indicate sales quota attainment for use in shading data points in the scatterplot.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="data-viz.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset df to active sales employees</span></span>
<span id="cb469-2"><a href="data-viz.html#cb469-2" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">subset</span>(employees, dept <span class="sc">==</span> <span class="st">&#39;Sales&#39;</span> <span class="sc">&amp;</span> active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb469-3"><a href="data-viz.html#cb469-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-4"><a href="data-viz.html#cb469-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set quote attainment flag for data viz coloring</span></span>
<span id="cb469-5"><a href="data-viz.html#cb469-5" aria-hidden="true" tabindex="-1"></a>sales<span class="sc">$</span>quota_flg <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sales<span class="sc">$</span>ytd_sales <span class="sc">&gt;=</span> <span class="dv">150000</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<p>The <code>geom_point()</code> function is used to create a scatterplot. The <code>scale_y_continuous()</code> function can be used in conjunction with the <code>scales</code> library to override the default scale for the <code>y</code>-axis (scientific notation) with more intuitive values.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:scatterplot-1"></span>
<img src="graphics/scatterplot_1.png" alt="Scatterplot showing the relationship between work experience and YTD sales for active salespeople" width="100%" />
<p class="caption">
Figure 15.19: Scatterplot showing the relationship between work experience and YTD sales for active salespeople
</p>
</div>
<p>While the basic scatterplot in Figure <a href="data-viz.html#fig:scatterplot-1">15.19</a> is effective in visualizing the relationship between <code>work_exp</code> and <code>ytd_sales</code>, additional design elements are needed to highlight the data points that meet or exceed the full year sales quota of <span class="math inline">\(150,000\)</span> USD.</p>
<p>The <code>color</code> argument for the <code>geom_point()</code> function is used to apply preattentive attributes to this visual by specifying the field used for conditional data point shading. We can define the color for each of the field’s values using the <code>scale_color_manual()</code> function. Additionally, the <code>geom_hline()</code> function is used to add a dotted horizontal line at a specified position on the <span class="math inline">\(y\)</span>-axis (at <span class="math inline">\(150,000\)</span> USD), and annotation is added at a specified pair of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> coordinates using the <code>annotate()</code> function.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:scatterplot-2"></span>
<img src="graphics/scatterplot_2.png" alt="Scatterplot with data points colored relative to the full year sales quota of USD 150k" width="100%" />
<p class="caption">
Figure 15.20: Scatterplot with data points colored relative to the full year sales quota of USD 150k
</p>
</div>
</div>
<div id="line-graphs" class="section level3" number="15.3.4">
<h3><span class="header-section-number">15.3.4</span> Line Graphs</h3>
<p><strong>Line graphs</strong> are used for visualizing continuous data across time.</p>
<p>When visualizing trended data, it is important to avoid cumulative trends because they suggest an upward trajectory (positive slope) even when the corresponding non-cumulative metrics indicate a declining trend.</p>
<p>Consider the following data frame with decreasing hire counts by year:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="data-viz.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print hires df</span></span>
<span id="cb470-2"><a href="data-viz.html#cb470-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(hires_dat[<span class="fu">order</span>(hires_dat<span class="sc">$</span>year, <span class="at">decreasing =</span> <span class="cn">FALSE</span>), ])</span></code></pre></div>
<pre><code>##   year hires cum_hires
## 4 2019  1020       980
## 3 2020  1010      1970
## 2 2021   990      2980
## 1 2022   980      4000</code></pre>
<p>Figure <a href="data-viz.html#fig:cum-hires-trend">15.21</a> juxtaposes a trended line chart with hires by year (left) against a cumulative version of the same (right). Since hires at each year are additive in the cumulative line chart, the slope is positive and misleading.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:cum-hires-trend"></span>
<img src="The_Fundamentals_of_People_Analytics_files/figure-html/cum-hires-trend-1.png" alt="Hires by year (left) and cumulative hires by year (right)" width="100%" />
<p class="caption">
Figure 15.21: Hires by year (left) and cumulative hires by year (right)
</p>
</div>
<p>Figure <a href="data-viz.html#fig:cum-iphone-sales">15.22</a> shows a deceptive cumulative graph of iPhone sales. Superimposing a bar chart with non-cumulative quarterly sales atop an overall cumulative trend that occupies far more real estate and dominates the screen can lend to the audience drawing invalid conclusions from the data.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:cum-iphone-sales"></span>
<img src="graphics/bad_viz-cumulative_trend.png" alt="Deceiving cumulative sales trend" width="75%" />
<p class="caption">
Figure 15.22: Deceiving cumulative sales trend
</p>
</div>
<p><strong>Single Series</strong></p>
<p>The most basic type of line graph is a <strong>single series line graph</strong>, which reflects a trend for a single group.</p>
<p>Let’s generate some attrition data for illustrating various types of line graphs:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="data-viz.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb472-2"><a href="data-viz.html#cb472-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb472-3"><a href="data-viz.html#cb472-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-4"><a href="data-viz.html#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb472-5"><a href="data-viz.html#cb472-5" aria-hidden="true" tabindex="-1"></a>months <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span></span>
<span id="cb472-6"><a href="data-viz.html#cb472-6" aria-hidden="true" tabindex="-1"></a>eng_rt <span class="ot">=</span> <span class="dv">5</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="fl">2.7</span>, <span class="fl">2.9</span>) <span class="sc">+</span> <span class="fl">2.41</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">41</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> .<span class="dv">02</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb472-7"><a href="data-viz.html#cb472-7" aria-hidden="true" tabindex="-1"></a>fin_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">15</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb472-8"><a href="data-viz.html#cb472-8" aria-hidden="true" tabindex="-1"></a>ppl_rt <span class="ot">=</span> <span class="dv">3</span> <span class="sc">-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">12</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">4</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb472-9"><a href="data-viz.html#cb472-9" aria-hidden="true" tabindex="-1"></a>prd_rt <span class="ot">=</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>) <span class="sc">-</span> <span class="fl">6.97</span> <span class="sc">+</span> <span class="dv">13</span><span class="sc">*</span>months <span class="sc">-</span> .<span class="dv">53</span><span class="sc">*</span>months<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb472-10"><a href="data-viz.html#cb472-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-11"><a href="data-viz.html#cb472-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine dimensions and metrics within df</span></span>
<span id="cb472-12"><a href="data-viz.html#cb472-12" aria-hidden="true" tabindex="-1"></a>attrition_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> <span class="fu">rep</span>(months, <span class="dv">4</span>),</span>
<span id="cb472-13"><a href="data-viz.html#cb472-13" aria-hidden="true" tabindex="-1"></a>                            <span class="at">dept =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="fu">length</span>(months)), </span>
<span id="cb472-14"><a href="data-viz.html#cb472-14" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Finance&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb472-15"><a href="data-viz.html#cb472-15" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;People&#39;</span>, <span class="fu">length</span>(months)),</span>
<span id="cb472-16"><a href="data-viz.html#cb472-16" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">&#39;Product&#39;</span>, <span class="fu">length</span>(months))),</span>
<span id="cb472-17"><a href="data-viz.html#cb472-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">rate =</span> <span class="fu">c</span>(eng_rt,</span>
<span id="cb472-18"><a href="data-viz.html#cb472-18" aria-hidden="true" tabindex="-1"></a>                                     fin_rt,</span>
<span id="cb472-19"><a href="data-viz.html#cb472-19" aria-hidden="true" tabindex="-1"></a>                                     ppl_rt,</span>
<span id="cb472-20"><a href="data-viz.html#cb472-20" aria-hidden="true" tabindex="-1"></a>                                     prd_rt))</span></code></pre></div>
<p>Line graphs can be constructed using the <code>geom_line()</code> function in <code>ggplot2</code>. Figure <a href="data-viz.html#fig:single-line-graph">15.23</a> shows a single series line graph built in <code>ggplot2</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:single-line-graph"></span>
<img src="graphics/line_graph_single.png" alt="Single series line graph" width="100%" />
<p class="caption">
Figure 15.23: Single series line graph
</p>
</div>
<p><strong>Two Series</strong></p>
<p>A <strong>two series line graph</strong> reflects trends for two groups, as shown in Figure <a href="data-viz.html#fig:dbl-line-graph">15.24</a>.</p>
<p>The <code>aes(color = group)</code> parameter defines the group by which lines are stratified.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dbl-line-graph"></span>
<img src="graphics/line_graph_double.png" alt="Two series line graph" width="100%" />
<p class="caption">
Figure 15.24: Two series line graph
</p>
</div>
<p><strong>Multiple Series</strong></p>
<p>A <strong>multiple series line graph</strong> reflects trends for three or more groups.</p>
<p>Note the preattentive attributes applied in Figure <a href="data-viz.html#fig:multi-line-graph">15.25</a>. If the focus is on how a single group (Engineering in this case) compares to two or more other groups, there is no need to differentiate the other groups with respect to color – only label.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:multi-line-graph"></span>
<img src="graphics/line_graph_multi.png" alt="Multiple series line graph" width="100%" />
<p class="caption">
Figure 15.25: Multiple series line graph
</p>
</div>
</div>
<div id="slopegraphs" class="section level3" number="15.3.5">
<h3><span class="header-section-number">15.3.5</span> Slopegraphs</h3>
<p><strong>Slopegraphs</strong> are helpful in illustrating relative changes between two points in time.</p>
<p>Common applications for slopegraphs in people analytics include survey variable score changes between two time periods, pre/post changes to outcome variables in an experimental context, and various metrics (e.g., headcount, TTM attrition) for which changes need to be evaluated MoM, QoQ, or YoY when data points between the start and end points are unimportant.</p>
<p>The data structure needed to support a slopegraph is consistent with a line graph. To illustrate how to construct a slopegraph in R, a data frame will be constructed that holds engagement scores for two points in time for both a treatment and control group.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="data-viz.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb473-2"><a href="data-viz.html#cb473-2" aria-hidden="true" tabindex="-1"></a>prepost_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Time 1&#39;</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">&#39;Time 2&#39;</span>, <span class="dv">2</span>)),</span>
<span id="cb473-3"><a href="data-viz.html#cb473-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Treatment&#39;</span>, <span class="st">&#39;Control&#39;</span>), <span class="dv">2</span>),</span>
<span id="cb473-4"><a href="data-viz.html#cb473-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">score =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">53</span>, <span class="dv">75</span>, <span class="dv">56</span>))</span></code></pre></div>
<p>In <code>ggplot2</code>, a slopegraph is simply a line graph with only two values on the <span class="math inline">\(x\)</span>-axis and some additional formatting including annotations and <span class="math inline">\(y\)</span>-axis removal. Figure <a href="data-viz.html#fig:slopegraph">15.26</a> is a slopegraph comparing the engagement score changes for treatment and control groups over the observation period, with preattentive attributes applied to focus attention on the treatment group.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slopegraph"></span>
<img src="graphics/slopegraph.png" alt="Slopegraph" width="100%" />
<p class="caption">
Figure 15.26: Slopegraph
</p>
</div>
</div>
<div id="bar-charts" class="section level3" number="15.3.6">
<h3><span class="header-section-number">15.3.6</span> Bar Charts</h3>
<p><strong>Bar charts</strong> are used to display categorical data. The three main types of bar charts are <em>vertical</em>, <em>horizontal</em>, and <em>stacked</em>.</p>
<p><strong>Vertical</strong></p>
<p>A <strong>vertical bar chart</strong> is the most basic and pervasive method of visualizing categorical data. Like line charts, bar charts can be single series, two series, or multiple series based on the data that need to be displayed.</p>
<p>To demonstrate how to build bar charts, departmental engagement data will be simulated with some rank variables to support preattentive attributes.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="data-viz.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Data Prep </span><span class="al">###</span></span>
<span id="cb474-2"><a href="data-viz.html#cb474-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-3"><a href="data-viz.html#cb474-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb474-4"><a href="data-viz.html#cb474-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb474-5"><a href="data-viz.html#cb474-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-6"><a href="data-viz.html#cb474-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate favorability distributions</span></span>
<span id="cb474-7"><a href="data-viz.html#cb474-7" aria-hidden="true" tabindex="-1"></a>fav_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb474-8"><a href="data-viz.html#cb474-8" aria-hidden="true" tabindex="-1"></a>neu_pct <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">45</span>), <span class="dv">0</span>)</span>
<span id="cb474-9"><a href="data-viz.html#cb474-9" aria-hidden="true" tabindex="-1"></a>unfav_pct <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> fav_pct <span class="sc">-</span> neu_pct</span>
<span id="cb474-10"><a href="data-viz.html#cb474-10" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(fav_pct, neu_pct, unfav_pct)</span>
<span id="cb474-11"><a href="data-viz.html#cb474-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-12"><a href="data-viz.html#cb474-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Average top box (favorable) score</span></span>
<span id="cb474-13"><a href="data-viz.html#cb474-13" aria-hidden="true" tabindex="-1"></a>topbox_avg <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(fav_pct), <span class="dv">0</span>)</span>
<span id="cb474-14"><a href="data-viz.html#cb474-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-15"><a href="data-viz.html#cb474-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Build data frame with YoY headcount metrics by department</span></span>
<span id="cb474-16"><a href="data-viz.html#cb474-16" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">dept =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>), <span class="dv">3</span>),</span>
<span id="cb474-17"><a href="data-viz.html#cb474-17" aria-hidden="true" tabindex="-1"></a>                                <span class="at">favorability =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&#39;Favorable&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Neutral&#39;</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">&#39;Unfavorable&#39;</span>, <span class="dv">7</span>)),</span>
<span id="cb474-18"><a href="data-viz.html#cb474-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">pct =</span> scores)</span>
<span id="cb474-19"><a href="data-viz.html#cb474-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-20"><a href="data-viz.html#cb474-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank departments by top box score to support sorting</span></span>
<span id="cb474-21"><a href="data-viz.html#cb474-21" aria-hidden="true" tabindex="-1"></a>dept_rank <span class="ot">&lt;-</span> engagement_scores <span class="sc">%&gt;%</span></span>
<span id="cb474-22"><a href="data-viz.html#cb474-22" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">filter</span>(favorability <span class="sc">==</span> <span class="st">&#39;Favorable&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb474-23"><a href="data-viz.html#cb474-23" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb474-24"><a href="data-viz.html#cb474-24" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(pct))) <span class="sc">%&gt;%</span></span>
<span id="cb474-25"><a href="data-viz.html#cb474-25" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">select</span>(dept, rank)</span>
<span id="cb474-26"><a href="data-viz.html#cb474-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-27"><a href="data-viz.html#cb474-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag top department records in df to support conditional coloring</span></span>
<span id="cb474-28"><a href="data-viz.html#cb474-28" aria-hidden="true" tabindex="-1"></a>engagement_scores<span class="sc">$</span>top_score <span class="ot">=</span> <span class="fu">ifelse</span>(engagement_scores<span class="sc">$</span>dept <span class="sc">==</span> dept_rank[<span class="dv">1</span>, <span class="st">&#39;dept&#39;</span>], <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb474-29"><a href="data-viz.html#cb474-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-30"><a href="data-viz.html#cb474-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add department rank based on top box scores</span></span>
<span id="cb474-31"><a href="data-viz.html#cb474-31" aria-hidden="true" tabindex="-1"></a>engagement_scores <span class="ot">&lt;-</span> <span class="fu">left_join</span>(engagement_scores, dept_rank, <span class="at">by =</span> <span class="st">&quot;dept&quot;</span>)</span></code></pre></div>
<p>The <code>geom_bar()</code> function can be leveraged to construct a bar chart using <code>ggplot2</code>. The <code>geom_hline()</code> and <code>annotate()</code> functions can be added to include a reference line with the average top box score. Preattentive attributes can also be applied by setting the derived <code>top_score</code> variable as the <code>fill</code> parameter in the <code>aes()</code> function.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:vbar-chart"></span>
<img src="graphics/vertical_bar_chart.png" alt="Vertical bar chart" width="100%" />
<p class="caption">
Figure 15.27: Vertical bar chart
</p>
</div>
<p><strong>Horizontal</strong></p>
<p>The <strong>horizontal bar cart</strong> is a horizontal version of the vertical bar chart, and it tends to be easier to read.</p>
<p>The vertical bar chart can be converted to a horizontal bar chart by adding <code>coord_flip()</code> to swap the axes.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:hbar-chart"></span>
<img src="graphics/horizontal_bar_chart_1.png" alt="Horizontal bar chart" width="100%" />
<p class="caption">
Figure 15.28: Horizontal bar chart
</p>
</div>
<p><strong>Stacked</strong></p>
<p>The <strong>stacked bar chart</strong> is useful for illustrating the relative contribution of subcomponents to a whole. In a people analytics setting, a 100% stacked bar chart is an excellent tool for visualizing the favorability distribution across survey items and various categorical dimensions (e.g., departments, locations, job profiles).</p>
<p>The only adjustment needed to build a stacked area chart is to specify the variable containing the favorability categories as an ordered factor for the <code>fill</code> parameter. Colors can be specified for each favorability category via the <code>scale_fill_manual()</code> parameter.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sbar-chart"></span>
<img src="graphics/stacked_bar_chart.png" alt="100 percent stacked bar chart" width="100%" />
<p class="caption">
Figure 15.29: 100 percent stacked bar chart
</p>
</div>
</div>
<div id="combination-charts" class="section level3" number="15.3.7">
<h3><span class="header-section-number">15.3.7</span> Combination Charts</h3>
<p><strong>Combination charts</strong> display data using different types of visualizations within the same chart.</p>
<p>In a people analytics context, we may wish to highlight differences between regrettable (bad) and non-regrettable (good) turnover trends relative to total voluntary turnover rates. It is usually more difficult to compare the magnitude of regrettable and non-regrettable rates across time using a stacked bar chart, and a combination chart is often a more intuitive method of presenting this information.</p>
<p>As illustrated in Figure <a href="data-viz.html#fig:combo-chart">15.30</a>, we can leverage a two-series line chart for monthly regrettable and non-regrettable rates relative to the total voluntary turnover rate visualized with a light grey vertical bar chart in the background.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:combo-chart"></span>
<img src="graphics/combo_chart.png" alt="Combination chart" width="100%" />
<p class="caption">
Figure 15.30: Combination chart
</p>
</div>
</div>
<div id="waterfall-charts" class="section level3" number="15.3.8">
<h3><span class="header-section-number">15.3.8</span> Waterfall Charts</h3>
<p><strong>Waterfall charts</strong> are alternatives to stacked bar charts that aid in understanding events between two points in time that explain a change in a starting and ending period value. Explaining drivers of headcount changes over time is a common use case for waterfall charts in people analytics.</p>
<p>Building a waterfall chart requires a bit more data prep relative to data structure requirements for a stacked bar chart. Unlike a bar chart, a waterfall chart needs a start and end value for each event type so that each bar beyond the first begins where the previous bar ends.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="data-viz.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate headcount data with id field to define bar order</span></span>
<span id="cb475-2"><a href="data-viz.html#cb475-2" aria-hidden="true" tabindex="-1"></a>hc_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb475-3"><a href="data-viz.html#cb475-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">event =</span> <span class="fu">c</span>(<span class="st">&quot;Starting HC&quot;</span>, <span class="st">&quot;Hires&quot;</span>, <span class="st">&quot;Transfers In&quot;</span>, <span class="st">&quot;Transfers Out&quot;</span>, <span class="st">&quot;Exits&quot;</span>, <span class="st">&quot;Ending HC&quot;</span>),</span>
<span id="cb475-4"><a href="data-viz.html#cb475-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Headcount&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Growth&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Loss&quot;</span>, <span class="st">&quot;Headcount&quot;</span>),</span>
<span id="cb475-5"><a href="data-viz.html#cb475-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="dv">130</span>),</span>
<span id="cb475-6"><a href="data-viz.html#cb475-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">start =</span> <span class="cn">NA</span>,</span>
<span id="cb475-7"><a href="data-viz.html#cb475-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">end =</span> <span class="cn">NA</span>)</span>
<span id="cb475-8"><a href="data-viz.html#cb475-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-9"><a href="data-viz.html#cb475-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and end values to support waterfall chart</span></span>
<span id="cb475-10"><a href="data-viz.html#cb475-10" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(hc_dat<span class="sc">$</span>count)</span>
<span id="cb475-11"><a href="data-viz.html#cb475-11" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>end <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>), <span class="dv">0</span>)</span>
<span id="cb475-12"><a href="data-viz.html#cb475-12" aria-hidden="true" tabindex="-1"></a>hc_dat<span class="sc">$</span>start <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(hc_dat<span class="sc">$</span>end, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb475-13"><a href="data-viz.html#cb475-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-14"><a href="data-viz.html#cb475-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap start/end values for last record (Ending HC)</span></span>
<span id="cb475-15"><a href="data-viz.html#cb475-15" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;end&quot;</span>] <span class="ot">&lt;-</span> hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>]</span>
<span id="cb475-16"><a href="data-viz.html#cb475-16" aria-hidden="true" tabindex="-1"></a>hc_dat[<span class="fu">nrow</span>(hc_dat), <span class="st">&quot;start&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<p>With data properly structured, we can use the <code>geom_rect()</code> function to build the waterfall chart. Strategies such as labeling only the Beginning HC and Ending HC reduces clutter and lends to a cleaner design aesthetic.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:waterfl-chart"></span>
<img src="graphics/waterfall_chart.png" alt="Waterfall chart" width="100%" />
<p class="caption">
Figure 15.31: Waterfall chart
</p>
</div>
</div>
<div id="waffle-charts" class="section level3" number="15.3.9">
<h3><span class="header-section-number">15.3.9</span> Waffle Charts</h3>
<p><strong>Waffle charts</strong>, also known as <strong>square area charts</strong>, are well-suited for illustrating parts of a whole.</p>
<p>A common application in people analytics is illustrating candidate movement through the recruiting funnel. It is often helpful to visualize a normalized applicant pool (e.g., per 100 applicants) to identify where bottlenecks exist across funnel stages and how pass-through rates compare across business areas.</p>
<p>Waffle charts require some data prep to visualize:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="data-viz.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create df with TA funnel metrics</span></span>
<span id="cb476-2"><a href="data-viz.html#cb476-2" aria-hidden="true" tabindex="-1"></a>ta_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">stage =</span> <span class="fu">c</span>(<span class="st">&quot;Apply&quot;</span>, <span class="st">&quot;Phone Screen&quot;</span>, <span class="st">&quot;Interview&quot;</span>, <span class="st">&quot;Offer Extend&quot;</span>, <span class="st">&quot;Offer Accept&quot;</span>),</span>
<span id="cb476-3"><a href="data-viz.html#cb476-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">cnt =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb476-4"><a href="data-viz.html#cb476-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-5"><a href="data-viz.html#cb476-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Set depth of waffle chart (# of y-axis rows)</span></span>
<span id="cb476-6"><a href="data-viz.html#cb476-6" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb476-7"><a href="data-viz.html#cb476-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-8"><a href="data-viz.html#cb476-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Each observation needs an x and y coordinate, and y needs to be specified first for a waffle chart with horizontal accumulation</span></span>
<span id="cb476-9"><a href="data-viz.html#cb476-9" aria-hidden="true" tabindex="-1"></a>waffle_dat <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span>depth,</span>
<span id="cb476-10"><a href="data-viz.html#cb476-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="fu">ceiling</span>(<span class="fu">sum</span>(ta_dat<span class="sc">$</span>cnt) <span class="sc">/</span> depth)))</span>
<span id="cb476-11"><a href="data-viz.html#cb476-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-12"><a href="data-viz.html#cb476-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Expand the applicant counts into a vector of stage labels</span></span>
<span id="cb476-13"><a href="data-viz.html#cb476-13" aria-hidden="true" tabindex="-1"></a>stages <span class="ot">&lt;-</span> <span class="fu">rep</span>(ta_dat<span class="sc">$</span>stage, ta_dat<span class="sc">$</span>cnt)</span>
<span id="cb476-14"><a href="data-viz.html#cb476-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-15"><a href="data-viz.html#cb476-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate stages and fill any extra tiles with NA</span></span>
<span id="cb476-16"><a href="data-viz.html#cb476-16" aria-hidden="true" tabindex="-1"></a>waffle_dat<span class="sc">$</span>stage <span class="ot">&lt;-</span> <span class="fu">c</span>(stages, <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">nrow</span>(waffle_dat) <span class="sc">-</span> <span class="fu">length</span>(stages)))</span></code></pre></div>
<p>With this data structure, a waffle chart can be produced using the <code>geom_tile()</code> function from <code>ggplot2</code>.</p>
<p>The waffle chart in Figure <a href="data-viz.html#fig:waffle-chart">15.32</a> illustrates how candidates for a set of filled requisitions move from application through the phone screen, interview, offer extend, and offer acceptance stages of the recruiting lifecycle. Based on this chart, 60% of applicants are rejected without a conversation, 40% receive a phone screen, 20% land an interview, 10% receive an offer, and 4% accept an offer.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:waffle-chart"></span>
<img src="graphics/waffle_chart.png" alt="Waffle chart visualizing pass-through rates across recruitment stages per 100 job applicants" width="100%" />
<p class="caption">
Figure 15.32: Waffle chart visualizing pass-through rates across recruitment stages per 100 job applicants
</p>
</div>
</div>
<div id="sankey-diagrams" class="section level3" number="15.3.10">
<h3><span class="header-section-number">15.3.10</span> Sankey Diagrams</h3>
<p><strong>Sankey diagrams</strong>, or alternatives such as <strong>chord diagrams</strong> and <strong>alluvial plots</strong>, are flow diagrams that are particularly effective in depicting a many-to-many relationship between two domains.</p>
<p>Sankey diagrams have many applications in people analytics. For example, sankeys may be used to understand internal transfers over a period of time (i.e., inflows and outflows among departments) or recruiting sources by which employees in various departments have been hired.
To demonstrate how to implement a sankey diagram, let’s use the <code>sankeyNetwork()</code> function from the <code>networkD3</code> library to visualize employee transfers between departments. D3 is an advanced JavaScript framework for creating interactive visualizations, and the <code>networkD3</code> library provides an easy interface for constructing sankey diagrams with interactive components. Building a sankey diagram using <code>networkD3</code> requires data to be structured within two data frames:</p>
<ul>
<li><strong>nodes</strong>: Defines the source and destination node names (i.e., the departments employees transfer into and out of)</li>
<li><strong>links</strong>: Connections between pairs of source and destination nodes using an index beginning at 0 to represent the corresponding node from the nodes data frame</li>
</ul>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="data-viz.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb477-2"><a href="data-viz.html#cb477-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb477-3"><a href="data-viz.html#cb477-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-4"><a href="data-viz.html#cb477-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create nodes df</span></span>
<span id="cb477-5"><a href="data-viz.html#cb477-5" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>, <span class="co"># source</span></span>
<span id="cb477-6"><a href="data-viz.html#cb477-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;Engineering&#39;</span>, <span class="st">&#39;Finance&#39;</span>, <span class="st">&#39;Legal&#39;</span>, <span class="st">&#39;Marketing&#39;</span>, <span class="st">&#39;People&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Sales&#39;</span>)) <span class="co"># destination</span></span>
<span id="cb477-7"><a href="data-viz.html#cb477-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-8"><a href="data-viz.html#cb477-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create links df</span></span>
<span id="cb477-9"><a href="data-viz.html#cb477-9" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">source =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">target =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">13</span>)</span>
<span id="cb477-10"><a href="data-viz.html#cb477-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-11"><a href="data-viz.html#cb477-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Append employee transfer counts per department pair to links df</span></span>
<span id="cb477-12"><a href="data-viz.html#cb477-12" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>source <span class="sc">==</span> links<span class="sc">$</span>target<span class="dv">-7</span>, <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">150</span>, <span class="dv">50</span>), <span class="dv">0</span>), <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="dv">30</span>, <span class="dv">5</span>), <span class="dv">0</span>))</span></code></pre></div>
<p>With data properly structured within the <code>nodes</code> and <code>links</code> data frames, these data can be passed into the <code>sankeyNetwork()</code> function to construct the sankey diagram. As illustrated in Figure <a href="data-viz.html#fig:sankey-1">15.33</a>, hovering over a connection displays the count of employee transfers between the corresponding departments (<span class="math inline">\(n\)</span> = 222 moves within Product).</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sankey-1"></span>
<img src="graphics/sankey_1.png" alt="Sankey diagram showing employee transfers between departments with default colors" width="100%" />
<p class="caption">
Figure 15.33: Sankey diagram showing employee transfers between departments with default colors
</p>
</div>
<p>Though it can quickly become noisy as the number of nodes increases, coloring connections based on the source departments from which each group flows can be helpful in tracing the employee flow to the various destination departments.</p>
<p>A department variable needs to be defined and added to the <code>links</code> data frame in order to color connections based on the source department (transfers out). The <code>NodeGroup</code> and <code>LinkGroup</code> parameters in the call to the <code>sankeyNetwork()</code> function define the column in the <code>nodes</code> and <code>links</code> data frames, respectively, that specify the group values by which the nodes and links should be colored.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="data-viz.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append source department variable for colored connections</span></span>
<span id="cb478-2"><a href="data-viz.html#cb478-2" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb478-3"><a href="data-viz.html#cb478-3" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Engineering&quot;</span>,</span>
<span id="cb478-4"><a href="data-viz.html#cb478-4" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Finance&quot;</span>,</span>
<span id="cb478-5"><a href="data-viz.html#cb478-5" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Legal&quot;</span>,</span>
<span id="cb478-6"><a href="data-viz.html#cb478-6" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Marketing&quot;</span>,</span>
<span id="cb478-7"><a href="data-viz.html#cb478-7" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;People&quot;</span>,</span>
<span id="cb478-8"><a href="data-viz.html#cb478-8" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;Product&quot;</span>,</span>
<span id="cb478-9"><a href="data-viz.html#cb478-9" aria-hidden="true" tabindex="-1"></a>  links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;Sales&quot;</span>,</span>
<span id="cb478-10"><a href="data-viz.html#cb478-10" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;NA&quot;</span></span>
<span id="cb478-11"><a href="data-viz.html#cb478-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sankey-2"></span>
<img src="graphics/sankey_2.png" alt="Sankey diagram showing employee transfers between departments with connections shaded based on a source department color scheme" width="100%" />
<p class="caption">
Figure 15.34: Sankey diagram showing employee transfers between departments with connections shaded based on a source department color scheme
</p>
</div>
<p>We can add another grouping variable to support coloring intradepartmental (within) moves differently from interdepartmental (outside) moves.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="data-viz.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append within/outside department transfer variable for colored connections</span></span>
<span id="cb479-2"><a href="data-viz.html#cb479-2" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>wiout_dept <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb479-3"><a href="data-viz.html#cb479-3" aria-hidden="true" tabindex="-1"></a>  (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">7</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">8</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">9</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">5</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|</span> (links<span class="sc">$</span>source <span class="sc">==</span> <span class="dv">6</span> <span class="sc">&amp;</span> links<span class="sc">$</span>target <span class="sc">==</span> <span class="dv">13</span>) <span class="sc">~</span> <span class="st">&quot;Within&quot;</span>,</span>
<span id="cb479-4"><a href="data-viz.html#cb479-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Outside&quot;</span></span>
<span id="cb479-5"><a href="data-viz.html#cb479-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sankey-3"></span>
<img src="graphics/sankey_3.png" alt="Sankey diagram showing employee transfers between departments with connections shaded based on an intradepartmental vs. interdepartmental color scheme" width="100%" />
<p class="caption">
Figure 15.35: Sankey diagram showing employee transfers between departments with connections shaded based on an intradepartmental vs. interdepartmental color scheme
</p>
</div>
<p>If the focus is on a single department’s transfers, preattentive attributes can be applied to help focus the audience’s attention and move the less important information to the background to reduce clutter.</p>
<p>To facilitate this, a grouping variable can be defined to differentiate a single department, such as Product, from remaining departments. The color of each group can then be specified using valid D3 code: <code>d3.scaleOrdinal(["group_1_color", "group_2_color"])</code>:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="data-viz.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append dichotomous product/other indicator to links and nodes data frames</span></span>
<span id="cb480-2"><a href="data-viz.html#cb480-2" aria-hidden="true" tabindex="-1"></a>links<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(links<span class="sc">$</span>dept <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span>
<span id="cb480-3"><a href="data-viz.html#cb480-3" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>prod <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(nodes<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Product&#39;</span>, <span class="st">&#39;Other&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sankey-4"></span>
<img src="graphics/sankey_4.png" alt="Sankey diagram with preattentive attributes to highlight employee transfers out of the Product department" width="100%" />
<p class="caption">
Figure 15.36: Sankey diagram with preattentive attributes to highlight employee transfers out of the Product department
</p>
</div>
</div>
<div id="pie-charts" class="section level3" number="15.3.11">
<h3><span class="header-section-number">15.3.11</span> Pie Charts</h3>
<p><strong>Pie charts</strong> are rarely an effective way to visualize data, and this book does not generally endorse them. Pie charts can be appropriate in cases where there are two or three mutually exclusive and collectively exhaustive groups and we need to visualize the relative contribution of each to the whole. However, it quickly becomes difficult to ascertain relative size beyond a few groups with a pie chart, and labeling many slices adds a lot of clutter and noise. Proportions should always sum to 1 so if data are not mutually exclusive parts of a whole, a pie chart is not appropriate.</p>
<p>Figure <a href="data-viz.html#fig:bad-donut-chart">15.37</a> shows a donut chart – which is simply a pie chart with the center cut out – that is intended to show Kane Williamson’s outsized contribution to New Zealand’s cricket runs. However, top scorers from other countries are also included in this visual, so the metrics do not sum to 100%. Pie and donut charts are not appropriate for these data.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:bad-donut-chart"></span>
<img src="graphics/bad_viz-pie_chart.png" alt="Improper use of a donut chart" width="75%" />
<p class="caption">
Figure 15.37: Improper use of a donut chart
</p>
</div>
<p>There is no specific <code>geom()</code> function for building pie charts using <code>ggplot2</code>. Therefore, we need to create a bar chart and make it circular by adding a <code>coord_polar("y", start = 0)</code> transformation. The <code>coord_polar()</code> transformation complicates the positioning of labels, but we can add a <code>position = position_stack(vjust = 0.5))</code> argument within the <code>geom_text()</code> function to specify the alignment of gender representation metrics. We can also easily improve the aesthetics with the <code>theme_void()</code> function, which removes the default background, grid, and labels.</p>
<p>The data need to be structured consistent with the requirements for a bar chart. A basic data cube with descriptive statistics by gender category will simplify the construction of the pie chart in <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="data-viz.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data cube for gender representation among active employees</span></span>
<span id="cb481-2"><a href="data-viz.html#cb481-2" aria-hidden="true" tabindex="-1"></a>smmry_gender <span class="ot">&lt;-</span> employees <span class="sc">%&gt;%</span></span>
<span id="cb481-3"><a href="data-viz.html#cb481-3" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">filter</span>(active <span class="sc">==</span> <span class="st">&#39;Yes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb481-4"><a href="data-viz.html#cb481-4" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb481-5"><a href="data-viz.html#cb481-5" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">cnt =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb481-6"><a href="data-viz.html#cb481-6" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(cnt <span class="sc">/</span> <span class="fu">sum</span>(cnt) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb481-7"><a href="data-viz.html#cb481-7" aria-hidden="true" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(pct))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:pie-chart"></span>
<img src="graphics/pie_chart.png" alt="Pie chart showing gender representation for active employees" width="100%" />
<p class="caption">
Figure 15.38: Pie chart showing gender representation for active employees
</p>
</div>
</div>
<div id="d-visuals" class="section level3" number="15.3.12">
<h3><span class="header-section-number">15.3.12</span> 3D Visuals</h3>
<p>An element of uncertainty is inherent in analytics, which is why this book avoids the use of categorical terms such as <em>always</em> and <em>never</em>. However, an exception will be made for this section. 3D visualizations are <em>never</em> appropriate. 3D visuals misrepresent the data they are intended to visualize and are unnecessarily difficult to interpret.</p>
<p>Figure <a href="data-viz.html#fig:3d-pie-chart">15.39</a> shows the distribution of headcount across locations using a 3D pie chart. Based on this visual, it may not be apparent that Los Angeles (25%) is considerably larger than New York (19%). The misleading perspective of this tilted visual causes locations on the back side of the pie chart to appear smaller relative to locations on the front side.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:3d-pie-chart"></span>
<img src="graphics/3d_pie_chart.png" alt="Headcount by location misrepresented with a 3D pie chart" width="75%" />
<p class="caption">
Figure 15.39: Headcount by location misrepresented with a 3D pie chart
</p>
</div>
<p>A 3D bar chart is not an improvement over a 3D pie chart. As illustrated in Figure <a href="data-viz.html#fig:3d-bar-chart">15.40</a>, bars do not appear to align with the actual corresponding values (e.g., Los Angeles = 25%). This is because software determines the height of bars in a 3D bar chart using an invisible tangent plane to intersect the bars at the correct y-axis location.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:3d-bar-chart"></span>
<img src="graphics/3d_bar_chart.png" alt="Headcount by location visualized with a misleading 3D bar chart" width="75%" />
<p class="caption">
Figure 15.40: Headcount by location visualized with a misleading 3D bar chart
</p>
</div>
<p>As shown in Figure @ref(fig:3d-bar-chart_conv), by leveraging a horizontal bar chart with labeled bars and preattentive attributes, it becomes easy to understand relative headcount across locations.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:3d-bar-chart-conv"></span>
<img src="graphics/horizontal_bar_chart_2.png" alt="Headcount by location properly visualized with a horizontal bar chart" width="75%" />
<p class="caption">
Figure 15.41: Headcount by location properly visualized with a horizontal bar chart
</p>
</div>
</div>
</div>
<div id="elegant-data-visualization" class="section level2" number="15.4">
<h2><span class="header-section-number">15.4</span> Elegant Data Visualization</h2>
<p>This chapter has covered the fundamentals of effective data visualization. Applying these best practices will elevate impact when presenting results of analyses to stakeholders.</p>
<p>Figure <a href="data-viz.html#fig:good-viz">15.42</a> is an example of an excellent data visualization that brings together many of the design elements promoted in this chapter. This visual shows seasonally adjusted jobless claims over a period of two decades to highlight the significance of the Coronavirus’s impact on the labor market using the following design elements:</p>
<ul>
<li>Larger and darker text for the headline</li>
<li>Smaller and lighter text for the commentary</li>
<li>Grey axis labels and chart annotations to avoid competing with <em>current</em> statistics</li>
<li>Low-profile dotted horizontal lines to help connect bars across the long <span class="math inline">\(x\)</span>-axis to their corresponding <span class="math inline">\(y\)</span>-axis values</li>
<li>Orange coloring to represent jobless claims (an <strong>unfavorable</strong> event)</li>
<li>Creative use of a bar chart resembling an area chart to represent the weekly interval for jobless claims over the 20-year period</li>
<li>Two helpful reference points to provide perspective: (1) 20-year weekly average; and (2) cumulative jobless claims during the last significant U.S. recession in 2008</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:good-viz"></span>
<img src="graphics/good_viz-job_loss.png" alt="An archetype of elegance in data visualization" width="100%" />
<p class="caption">
Figure 15.42: An archetype of elegance in data visualization
</p>
</div>
</div>
<div id="review-questions-13" class="section level2" number="15.5">
<h2><span class="header-section-number">15.5</span> Review Questions</h2>
<ol style="list-style-type: decimal">
<li><p>What is the function of preattentive attributes in data visualization?</p></li>
<li><p>Why is the use of red and green in data visualization potentially problematic?</p></li>
<li><p>Why are horizontal bar charts easier to interpret than pie charts?</p></li>
<li><p>What types of data are visualized in scatterplots?</p></li>
<li><p>What advantages do heatmaps provide over tables?</p></li>
<li><p>What are some people analytics use cases for slopegraphs?</p></li>
<li><p>What are some people analytics use cases for sankey diagrams?</p></li>
<li><p>Why is it important to use a zero baseline for y-axes?</p></li>
<li><p>Why is it a best practice to avoid rotating axis labels?</p></li>
<li><p>What is the primary purpose of applying a consistent color palette across visuals?</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="unsup-lrn.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="storytelling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["The_Fundamentals_of_People_Analytics.pdf", "The_Fundamentals_of_People_Analytics.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
